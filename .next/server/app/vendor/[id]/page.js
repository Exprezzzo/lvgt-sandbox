(()=>{var exports={};exports.id=948,exports.ids=[948],exports.modules={47849:g=>{"use strict";g.exports=require("next/dist/client/components/action-async-storage.external")},55403:g=>{"use strict";g.exports=require("next/dist/client/components/request-async-storage.external")},94749:g=>{"use strict";g.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:g=>{"use strict";g.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:g=>{"use strict";g.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:g=>{"use strict";g.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:g=>{"use strict";g.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6113:g=>{"use strict";g.exports=require("crypto")},9523:g=>{"use strict";g.exports=require("dns")},82361:g=>{"use strict";g.exports=require("events")},57147:g=>{"use strict";g.exports=require("fs")},13685:g=>{"use strict";g.exports=require("http")},85158:g=>{"use strict";g.exports=require("http2")},41808:g=>{"use strict";g.exports=require("net")},22037:g=>{"use strict";g.exports=require("os")},71017:g=>{"use strict";g.exports=require("path")},12781:g=>{"use strict";g.exports=require("stream")},24404:g=>{"use strict";g.exports=require("tls")},57310:g=>{"use strict";g.exports=require("url")},73837:g=>{"use strict";g.exports=require("util")},59796:g=>{"use strict";g.exports=require("zlib")},73253:(g,$,ee)=>{"use strict";ee.r($),ee.d($,{GlobalError:()=>ei.a,__next_app__:()=>ef,originalPathname:()=>ep,pages:()=>eh,routeModule:()=>eg,tree:()=>eu});var et=ee(50482),er=ee(69108),en=ee(62563),ei=ee.n(en),es=ee(68300),eo={};for(let g in es)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(g)&&(eo[g]=()=>es[g]);ee.d($,eo);let eu=["",{children:["vendor",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(ee.bind(ee,71948)),"C:\\Users\\Owner\\lvgt-sandbox\\src\\app\\vendor\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(ee.bind(ee,44903)),"C:\\Users\\Owner\\lvgt-sandbox\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(ee.t.bind(ee,69361,23)),"next/dist/client/components/not-found-error"]}],eh=["C:\\Users\\Owner\\lvgt-sandbox\\src\\app\\vendor\\[id]\\page.tsx"],ep="/vendor/[id]/page",ef={require:ee,loadChunk:()=>Promise.resolve()},eg=new et.AppPageRouteModule({definition:{kind:er.x.APP_PAGE,page:"/vendor/[id]/page",pathname:"/vendor/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:eu}})},95634:(g,$,ee)=>{Promise.resolve().then(ee.t.bind(ee,2583,23)),Promise.resolve().then(ee.t.bind(ee,26840,23)),Promise.resolve().then(ee.t.bind(ee,38771,23)),Promise.resolve().then(ee.t.bind(ee,13225,23)),Promise.resolve().then(ee.t.bind(ee,9295,23)),Promise.resolve().then(ee.t.bind(ee,43982,23))},77523:(g,$,ee)=>{Promise.resolve().then(ee.bind(ee,5e4))},686:(g,$,ee)=>{Promise.resolve().then(ee.bind(ee,38059))},59601:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.addAdminServicesToServer=$.registerAdminService=void 0;let ee=[];function et(g,$){ee.push({getServiceDefinition:g,getHandlers:$})}function er(g){for(let{getServiceDefinition:$,getHandlers:et}of ee)g.addService($(),et())}$.registerAdminService=et,$.addAdminServicesToServer=er},84934:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BackoffTimeout=void 0;let ee=1e3,et=1.6,er=12e4,en=.2;function ei(g,$){return Math.random()*($-g)+g}class es{constructor(g,$){this.callback=g,this.initialDelay=ee,this.multiplier=et,this.maxDelay=er,this.jitter=en,this.running=!1,this.hasRef=!0,this.startTime=new Date,$&&($.initialDelay&&(this.initialDelay=$.initialDelay),$.multiplier&&(this.multiplier=$.multiplier),$.jitter&&(this.jitter=$.jitter),$.maxDelay&&(this.maxDelay=$.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(g){var $,ee;clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},g),this.hasRef||null===(ee=($=this.timerId).unref)||void 0===ee||ee.call($)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let g=Math.min(this.nextDelay*this.multiplier,this.maxDelay),$=g*this.jitter;this.nextDelay=g+ei(-$,$)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let g=new Date,$=this.startTime;$.setMilliseconds($.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),g<$?this.runTimer($.getTime()-g.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var g,$;this.hasRef=!0,null===($=(g=this.timerId).ref)||void 0===$||$.call(g)}unref(){var g,$;this.hasRef=!1,null===($=(g=this.timerId).unref)||void 0===$||$.call(g)}}$.BackoffTimeout=es},90420:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CallCredentialsFilterFactory=$.CallCredentialsFilter=void 0;let et=ee(78152),er=ee(32678),en=ee(18429);class ei extends et.BaseFilter{constructor(g,$){var ee,et;super(),this.channel=g,this.stream=$,this.channel=g,this.stream=$;let er=$.getMethod().split("/"),ei="";er.length>=2&&(ei=er[1]);let es=null!==(et=null===(ee=en.splitHostPort($.getHost()))||void 0===ee?void 0:ee.host)&&void 0!==et?et:"localhost";this.serviceUrl=`https://${es}/${ei}`}async sendMetadata(g){let $=this.stream.getCredentials().generateMetadata({service_url:this.serviceUrl}),ee=await g;try{ee.merge(await $)}catch(g){return this.stream.cancelWithStatus(er.Status.UNAUTHENTICATED,`Failed to retrieve auth metadata with error: ${g.message}`),Promise.reject("Failed to retrieve auth metadata")}return ee.get("authorization").length>1?(this.stream.cancelWithStatus(er.Status.INTERNAL,'"authorization" metadata cannot have multiple values'),Promise.reject('"authorization" metadata cannot have multiple values')):ee}}$.CallCredentialsFilter=ei;class es{constructor(g){this.channel=g,this.channel=g}createFilter(g){return new ei(this.channel,g)}}$.CallCredentialsFilterFactory=es},78931:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CallCredentials=void 0;let et=ee(62252);function er(g){return"getRequestHeaders"in g&&"function"==typeof g.getRequestHeaders}class en{static createFromMetadataGenerator(g){return new es(g)}static createFromGoogleCredential(g){return en.createFromMetadataGenerator(($,ee)=>{let en;(en=er(g)?g.getRequestHeaders($.service_url):new Promise((ee,et)=>{g.getRequestMetadata($.service_url,(g,$)=>{if(g){et(g);return}ee($)})})).then(g=>{let $=new et.Metadata;for(let ee of Object.keys(g))$.add(ee,g[ee]);ee(null,$)},g=>{ee(g)})})}static createEmpty(){return new eo}}$.CallCredentials=en;class ei extends en{constructor(g){super(),this.creds=g}async generateMetadata(g){let $=new et.Metadata;for(let ee of(await Promise.all(this.creds.map($=>$.generateMetadata(g)))))$.merge(ee);return $}compose(g){return new ei(this.creds.concat([g]))}_equals(g){return this===g||g instanceof ei&&this.creds.every(($,ee)=>$._equals(g.creds[ee]))}}class es extends en{constructor(g){super(),this.metadataGenerator=g}generateMetadata(g){return new Promise(($,ee)=>{this.metadataGenerator(g,(g,et)=>{void 0!==et?$(et):ee(g)})})}compose(g){return new ei([this,g])}_equals(g){return this===g||g instanceof es&&this.metadataGenerator===g.metadataGenerator}}class eo extends en{generateMetadata(g){return Promise.resolve(new et.Metadata)}compose(g){return g}_equals(g){return g instanceof eo}}},71925:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Http2CallStream=$.InterceptingListenerImpl=$.isInterceptingListener=void 0;let et=ee(85158),er=ee(22037),en=ee(32678),ei=ee(62252),es=ee(38326),eo=ee(97504),eu=ee(32678),eh="call_stream",{HTTP2_HEADER_STATUS:ep,HTTP2_HEADER_CONTENT_TYPE:ef,NGHTTP2_CANCEL:eg}=et.constants;function em(g){for(let[$,ee]of Object.entries(er.constants.errno))if(ee===g)return $;return"Unknown system error "+g}function ey(g){let $=1/0;for(let ee of g){let g=ee instanceof Date?ee.getTime():ee;g<$&&($=g)}return $}function ev(g){return void 0!==g.onReceiveMetadata&&1===g.onReceiveMetadata.length}$.isInterceptingListener=ev;class eS{constructor(g,$){this.listener=g,this.nextListener=$,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(g){this.processingMetadata=!0,this.listener.onReceiveMetadata(g,g=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(g),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(g){this.processingMessage=!0,this.listener.onReceiveMessage(g,g=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=g,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(g),this.processPendingStatus())})}onReceiveStatus(g){this.listener.onReceiveStatus(g,g=>{this.processingMetadata||this.processingMessage?this.pendingStatus=g:this.nextListener.onReceiveStatus(g)})}}$.InterceptingListenerImpl=eS;class eT{constructor(g,$,ee,et,er,eo){this.methodName=g,this.channel=$,this.options=ee,this.channelCallCredentials=er,this.callNumber=eo,this.http2Stream=null,this.pendingRead=!1,this.isWriteFilterPending=!1,this.pendingWrite=null,this.pendingWriteCallback=null,this.writesClosed=!1,this.decoder=new es.StreamDecoder,this.isReadFilterPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.unfilteredReadMessages=[],this.mappedStatusCode=en.Status.UNKNOWN,this.finalStatus=null,this.subchannel=null,this.listener=null,this.internalError=null,this.configDeadline=1/0,this.statusWatchers=[],this.streamEndWatchers=[],this.callStatsTracker=null,this.filterStack=et.createFilter(this),this.credentials=er,this.disconnectListener=()=>{this.endCall({code:en.Status.UNAVAILABLE,details:"Connection dropped",metadata:new ei.Metadata})},this.options.parentCall&&this.options.flags&en.Propagate.CANCELLATION&&this.options.parentCall.on("cancelled",()=>{this.cancelWithStatus(en.Status.CANCELLED,"Cancelled by parent call")})}outputStatus(){var g;if(this.listener&&!this.statusOutput){this.statusOutput=!0;let $=this.filterStack.receiveTrailers(this.finalStatus);this.trace("ended with status: code="+$.code+' details="'+$.details+'"'),this.statusWatchers.forEach(g=>g($)),process.nextTick(()=>{var g;null===(g=this.listener)||void 0===g||g.onReceiveStatus($)}),null===(g=this.http2Stream)||void 0===g||g.resume(),this.subchannel&&(this.subchannel.callUnref(),this.subchannel.removeDisconnectListener(this.disconnectListener))}}trace(g){eo.trace(eu.LogVerbosity.DEBUG,eh,"["+this.callNumber+"] "+g)}endCall(g){(null===this.finalStatus||this.finalStatus.code===en.Status.OK)&&(this.finalStatus=g,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==en.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&0===this.unfilteredReadMessages.length&&!this.isReadFilterPending)&&this.outputStatus()}push(g){this.trace("pushing to reader message of length "+(g instanceof Buffer?g.length:null)),this.canPush=!1,process.nextTick(()=>{var $;this.statusOutput||(null===($=this.listener)||void 0===$||$.onReceiveMessage(g),this.maybeOutputStatus())})}handleFilterError(g){this.cancelWithStatus(en.Status.INTERNAL,g.message)}handleFilteredRead(g){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.maybeOutputStatus();return}if(this.isReadFilterPending=!1,this.canPush?(this.http2Stream.pause(),this.push(g)):(this.trace("unpushedReadMessages.push message of length "+g.length),this.unpushedReadMessages.push(g)),this.unfilteredReadMessages.length>0){let g=this.unfilteredReadMessages.shift();this.filterReceivedMessage(g)}}filterReceivedMessage(g){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.maybeOutputStatus();return}this.trace("filterReceivedMessage of length "+g.length),this.isReadFilterPending=!0,this.filterStack.receiveMessage(Promise.resolve(g)).then(this.handleFilteredRead.bind(this),this.handleFilterError.bind(this))}tryPush(g){this.isReadFilterPending?(this.trace("unfilteredReadMessages.push message of length "+(g&&g.length)),this.unfilteredReadMessages.push(g)):this.filterReceivedMessage(g)}handleTrailers(g){let $;this.streamEndWatchers.forEach(g=>g(!0));let ee="";for(let $ of Object.keys(g))ee+="		"+$+": "+g[$]+"\n";this.trace("Received server trailers:\n"+ee);try{$=ei.Metadata.fromHttp2Headers(g)}catch(g){$=new ei.Metadata}let et=$.getMap(),er=this.mappedStatusCode;if(er===en.Status.UNKNOWN&&"string"==typeof et["grpc-status"]){let g=Number(et["grpc-status"]);g in en.Status&&(er=g,this.trace("received status code "+g+" from server")),$.remove("grpc-status")}let es="";if("string"==typeof et["grpc-message"]){try{es=decodeURI(et["grpc-message"])}catch(g){es=et["grpc-message"]}$.remove("grpc-message"),this.trace('received status details string "'+es+'" from server')}let eo={code:er,details:es,metadata:$};this.endCall(eo)}writeMessageToStream(g,$){var ee;null===(ee=this.callStatsTracker)||void 0===ee||ee.addMessageSent(),this.http2Stream.write(g,$)}attachHttp2Stream(g,$,ee,er){if(this.filterStack.push(ee),null!==this.finalStatus)g.close(eg);else{if(this.trace("attachHttp2Stream from subchannel "+$.getAddress()),this.http2Stream=g,this.subchannel=$,this.callStatsTracker=er,$.addDisconnectListener(this.disconnectListener),$.callRef(),g.on("response",(g,$)=>{var ee;let er="";for(let $ of Object.keys(g))er+="		"+$+": "+g[$]+"\n";switch(this.trace("Received server headers:\n"+er),g[":status"]){case 400:this.mappedStatusCode=en.Status.INTERNAL;break;case 401:this.mappedStatusCode=en.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=en.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=en.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=en.Status.UNAVAILABLE;break;default:this.mappedStatusCode=en.Status.UNKNOWN}if($&et.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(g);else{let $;try{$=ei.Metadata.fromHttp2Headers(g)}catch(g){this.endCall({code:en.Status.UNKNOWN,details:g.message,metadata:new ei.Metadata});return}try{let g=this.filterStack.receiveMetadata($);null===(ee=this.listener)||void 0===ee||ee.onReceiveMetadata(g)}catch(g){this.endCall({code:en.Status.UNKNOWN,details:g.message,metadata:new ei.Metadata})}}}),g.on("trailers",g=>{this.handleTrailers(g)}),g.on("data",g=>{if(!this.statusOutput)for(let $ of(this.trace("receive HTTP/2 data frame of length "+g.length),this.decoder.write(g)))this.trace("parsed message of length "+$.length),this.callStatsTracker.addMessageReceived(),this.tryPush($)}),g.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),g.on("close",()=>{process.nextTick(()=>{var $;let ee;if(this.trace("HTTP/2 stream closed with code "+g.rstCode),(null===($=this.finalStatus)||void 0===$?void 0:$.code)===en.Status.OK)return;let er="";switch(g.rstCode){case et.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;ee=en.Status.INTERNAL,er=`Received RST_STREAM with code ${g.rstCode}`;break;case et.constants.NGHTTP2_REFUSED_STREAM:ee=en.Status.UNAVAILABLE,er="Stream refused by server";break;case et.constants.NGHTTP2_CANCEL:ee=en.Status.CANCELLED,er="Call cancelled";break;case et.constants.NGHTTP2_ENHANCE_YOUR_CALM:ee=en.Status.RESOURCE_EXHAUSTED,er="Bandwidth exhausted or memory limit exceeded";break;case et.constants.NGHTTP2_INADEQUATE_SECURITY:ee=en.Status.PERMISSION_DENIED,er="Protocol not secure enough";break;case et.constants.NGHTTP2_INTERNAL_ERROR:ee=en.Status.INTERNAL,null===this.internalError?er=`Received RST_STREAM with code ${g.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(ee=en.Status.UNAVAILABLE,er=this.internalError.message):er=`Received RST_STREAM with code ${g.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:ee=en.Status.INTERNAL,er=`Received RST_STREAM with code ${g.rstCode}`}this.endCall({code:ee,details:er,metadata:new ei.Metadata})})}),g.on("error",g=>{"ERR_HTTP2_STREAM_ERROR"!==g.code&&(this.trace("Node error event: message="+g.message+" code="+g.code+" errno="+em(g.errno)+" syscall="+g.syscall),this.internalError=g),this.streamEndWatchers.forEach(g=>g(!1))}),this.pendingWrite){if(!this.pendingWriteCallback)throw Error("Invalid state in write handling code");this.trace("sending data chunk of length "+this.pendingWrite.length+" (deferred)");try{this.writeMessageToStream(this.pendingWrite,this.pendingWriteCallback)}catch(g){this.endCall({code:en.Status.UNAVAILABLE,details:`Write failed with error ${g.message}`,metadata:new ei.Metadata})}}this.maybeCloseWrites()}}start(g,$){this.trace("Sending metadata"),this.listener=$,this.channel._startCallStream(this,g),this.maybeOutputStatus()}destroyHttp2Stream(){var g;if(null!==this.http2Stream&&!this.http2Stream.destroyed){let $;$=(null===(g=this.finalStatus)||void 0===g?void 0:g.code)===en.Status.OK?et.constants.NGHTTP2_NO_ERROR:et.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+$),this.http2Stream.close($)}}cancelWithStatus(g,$){this.trace("cancelWithStatus code: "+g+' details: "'+$+'"'),this.endCall({code:g,details:$,metadata:new ei.Metadata})}getDeadline(){let g=[this.options.deadline];return this.options.parentCall&&this.options.flags&en.Propagate.DEADLINE&&g.push(this.options.parentCall.getDeadline()),this.configDeadline&&g.push(this.configDeadline),ey(g)}getCredentials(){return this.credentials}setCredentials(g){this.credentials=this.channelCallCredentials.compose(g)}getStatus(){return this.finalStatus}getPeer(){var g,$;return null!==($=null===(g=this.subchannel)||void 0===g?void 0:g.getAddress())&&void 0!==$?$:this.channel.getTarget()}getMethod(){return this.methodName}getHost(){return this.options.host}setConfigDeadline(g){this.configDeadline=g}addStatusWatcher(g){this.statusWatchers.push(g)}addStreamEndWatcher(g){this.streamEndWatchers.push(g)}addFilters(g){this.filterStack.push(g)}getCallNumber(){return this.callNumber}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,null===this.http2Stream)this.pendingRead=!0;else{if(this.unpushedReadMessages.length>0){let g=this.unpushedReadMessages.shift();this.push(g);return}this.http2Stream.resume()}}maybeCloseWrites(){this.writesClosed&&!this.isWriteFilterPending&&null!==this.http2Stream&&(this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end())}sendMessageWithContext(g,$){this.trace("write() called with message of length "+$.length);let ee={message:$,flags:g.flags},et=$=>{var ee,et;let er=en.Status.UNAVAILABLE;(null===(ee=$)||void 0===ee?void 0:ee.code)==="ERR_STREAM_WRITE_AFTER_END"&&(er=en.Status.INTERNAL),$&&this.cancelWithStatus(er,`Write error: ${$.message}`),null===(et=g.callback)||void 0===et||et.call(g)};this.isWriteFilterPending=!0,this.filterStack.sendMessage(Promise.resolve(ee)).then(g=>{if(this.isWriteFilterPending=!1,null===this.http2Stream)this.trace("deferring writing data chunk of length "+g.message.length),this.pendingWrite=g.message,this.pendingWriteCallback=et;else{this.trace("sending data chunk of length "+g.message.length);try{this.writeMessageToStream(g.message,et)}catch(g){this.endCall({code:en.Status.UNAVAILABLE,details:`Write failed with error ${g.message}`,metadata:new ei.Metadata})}this.maybeCloseWrites()}},this.handleFilterError.bind(this))}halfClose(){this.trace("end() called"),this.writesClosed=!0,this.maybeCloseWrites()}}$.Http2CallStream=eT},78439:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ClientDuplexStreamImpl=$.ClientWritableStreamImpl=$.ClientReadableStreamImpl=$.ClientUnaryCallImpl=$.callErrorFromStatus=void 0;let et=ee(82361),er=ee(12781),en=ee(32678);function ei(g,$){let ee=`${g.code} ${en.Status[g.code]}: ${g.details}`,et=Error(ee),er=`${et.stack}
for call at
${$}`;return Object.assign(Error(ee),g,{stack:er})}$.callErrorFromStatus=ei;class es extends et.EventEmitter{constructor(){super()}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}}$.ClientUnaryCallImpl=es;class eo extends er.Readable{constructor(g){super({objectMode:!0}),this.deserialize=g}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_read(g){var $;null===($=this.call)||void 0===$||$.startRead()}}$.ClientReadableStreamImpl=eo;class eu extends er.Writable{constructor(g){super({objectMode:!0}),this.serialize=g}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_write(g,$,ee){var et;let er={callback:ee},en=Number($);Number.isNaN(en)||(er.flags=en),null===(et=this.call)||void 0===et||et.sendMessageWithContext(er,g)}_final(g){var $;null===($=this.call)||void 0===$||$.halfClose(),g()}}$.ClientWritableStreamImpl=eu;class eh extends er.Duplex{constructor(g,$){super({objectMode:!0}),this.serialize=g,this.deserialize=$}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_read(g){var $;null===($=this.call)||void 0===$||$.startRead()}_write(g,$,ee){var et;let er={callback:ee},en=Number($);Number.isNaN(en)||(er.flags=en),null===(et=this.call)||void 0===et||et.sendMessageWithContext(er,g)}_final(g){var $;null===($=this.call)||void 0===$||$.halfClose(),g()}}$.ClientDuplexStreamImpl=eh},92528:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChannelCredentials=void 0;let et=ee(24404),er=ee(78931),en=ee(43009);function ei(g,$){if(g&&!(g instanceof Buffer))throw TypeError(`${$}, if provided, must be a Buffer.`)}class es{constructor(g){this.callCredentials=g||er.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(g,$,ee,er){var es;if(ei(g,"Root certificate"),ei($,"Private key"),ei(ee,"Certificate chain"),$&&!ee)throw Error("Private key must be given with accompanying certificate chain");if(!$&&ee)throw Error("Certificate chain must be given with accompanying private key");return new eu(et.createSecureContext({ca:null!==(es=null!=g?g:en.getDefaultRootsData())&&void 0!==es?es:void 0,key:null!=$?$:void 0,cert:null!=ee?ee:void 0,ciphers:en.CIPHER_SUITES}),null!=er?er:{})}static createFromSecureContext(g,$){return new eu(g,null!=$?$:{})}static createInsecure(){return new eo}}$.ChannelCredentials=es;class eo extends es{constructor(g){super(g)}compose(g){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(g){return g instanceof eo}}class eu extends es{constructor(g,$){super(),this.secureContext=g,this.verifyOptions=$,this.connectionOptions={secureContext:g},(null==$?void 0:$.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=$.checkServerIdentity)}compose(g){return new eh(this,this.callCredentials.compose(g))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(g){return this===g||g instanceof eu&&this.secureContext===g.secureContext&&this.verifyOptions.checkServerIdentity===g.verifyOptions.checkServerIdentity}}class eh extends es{constructor(g,$){super($),this.channelCredentials=g}compose(g){let $=this.callCredentials.compose(g);return new eh(this.channelCredentials,$)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(g){return this===g||g instanceof eh&&this.channelCredentials._equals(g.channelCredentials)&&this.callCredentials._equals(g.callCredentials)}}},79387:(g,$)=>{"use strict";function ee(g,$){let ee=Object.keys(g).sort(),et=Object.keys($).sort();if(ee.length!==et.length)return!1;for(let er=0;er<ee.length;er+=1)if(ee[er]!==et[er]||g[ee[er]]!==$[et[er]])return!1;return!0}Object.defineProperty($,"__esModule",{value:!0}),$.channelOptionsEqual=$.recognizedOptions=void 0,$.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc-node.max_session_memory":!0},$.channelOptionsEqual=ee},46261:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChannelImplementation=void 0;let et=ee(71925),er=ee(92528),en=ee(82380),ei=ee(42328),es=ee(17064),eo=ee(32678),eu=ee(2472),eh=ee(90420),ep=ee(18065),ef=ee(44299),eg=ee(40492),em=ee(97504),ey=ee(25538),ev=ee(82039),eS=ee(18429),eT=ee(33955),eE=ee(5993),ew=2147483647,eC=0;function e_(){let g=eC;return(eC+=1)>=Number.MAX_SAFE_INTEGER&&(eC=0),g}let eI=[eo.Status.OK,eo.Status.INVALID_ARGUMENT,eo.Status.NOT_FOUND,eo.Status.ALREADY_EXISTS,eo.Status.FAILED_PRECONDITION,eo.Status.ABORTED,eo.Status.OUT_OF_RANGE,eo.Status.DATA_LOSS];function eO(g,$){return eI.includes(g)?{code:eo.Status.INTERNAL,details:`Invalid status from control plane: ${g} ${eo.Status[g]} ${$}`}:{code:g,details:$}}class eA{constructor(g,$,ee){var et,eC,e_,eI;if(this.credentials=$,this.options=ee,this.connectivityState=eT.ConnectivityState.IDLE,this.currentPicker=new es.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.channelzEnabled=!0,this.callTracker=new eE.ChannelzCallTracker,this.childrenTracker=new eE.ChannelzChildrenTracker,"string"!=typeof g)throw TypeError("Channel target must be a string");if(!($ instanceof er.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(ee&&"object"!=typeof ee)throw TypeError("Channel options must be an object");this.originalTarget=g;let eA=eS.parseUri(g);if(null===eA)throw Error(`Could not parse target name "${g}"`);let eN=eg.mapUriDefaultScheme(eA);if(null===eN)throw Error(`Could not find a default scheme for target name "${g}"`);this.callRefTimer=setInterval(()=>{},ew),null===(eC=(et=this.callRefTimer).unref)||void 0===eC||eC.call(et),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new eE.ChannelzTrace,this.channelzRef=eE.registerChannelzChannel(g,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=eg.getDefaultAuthority(eN);let eD=ev.mapProxyName(eN,ee);this.target=eD.target,this.options=Object.assign({},this.options,eD.extraOptions),this.subchannelPool=ei.getSubchannelPool((null!==(e_=ee["grpc.use_local_subchannel_pool"])&&void 0!==e_?e_:0)===0);let eR={createSubchannel:(g,$)=>{let ee=this.subchannelPool.getOrCreateSubchannel(this.target,g,Object.assign({},this.options,$),this.credentials);return this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",ee.getChannelzRef()),ee},updateState:(g,$)=>{this.currentPicker=$;let ee=this.pickQueue.slice();for(let{callStream:g,callMetadata:$,callConfig:et,dynamicFilters:er}of(this.pickQueue=[],this.callRefTimerUnref(),ee))this.tryPick(g,$,et,er);this.updateState(g)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:g=>{this.channelzEnabled&&this.childrenTracker.refChild(g)},removeChannelzChild:g=>{this.channelzEnabled&&this.childrenTracker.unrefChild(g)}};this.resolvingLoadBalancer=new en.ResolvingLoadBalancer(this.target,eR,ee,g=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=g,this.currentResolutionError=null,process.nextTick(()=>{let g=this.configSelectionQueue;for(let{callStream:$,callMetadata:ee}of(this.configSelectionQueue=[],this.callRefTimerUnref(),g))this.tryGetConfig($,ee);this.configSelectionQueue=[]})},g=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+g.code+' and details "'+g.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},eO(g.code,g.details)),{metadata:g.metadata}));let $=this.configSelectionQueue;for(let{callStream:ee,callMetadata:et}of(this.configSelectionQueue=[],this.callRefTimerUnref(),$))et.getOptions().waitForReady?(this.callRefTimerRef(),this.configSelectionQueue.push({callStream:ee,callMetadata:et})):ee.cancelWithStatus(g.code,g.details)}),this.filterStackFactory=new eu.FilterStackFactory([new eh.CallCredentialsFilterFactory(this),new ep.DeadlineFilterFactory(this),new ey.MaxMessageSizeFilterFactory(this.options),new ef.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(ee,void 0,2));let ek=Error();em.trace(eo.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(eI=ek.stack)||void 0===eI?void 0:eI.substring(ek.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(g,$){em.trace(null!=$?$:eo.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+eS.uriToString(this.target)+" "+g)}callRefTimerRef(){var g,$,ee,et;(null===($=(g=this.callRefTimer).hasRef)||void 0===$?void 0:$.call(g))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(et=(ee=this.callRefTimer).ref)||void 0===et||et.call(ee))}callRefTimerUnref(){var g,$;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===($=(g=this.callRefTimer).unref)||void 0===$||$.call(g))}pushPick(g,$,ee,et){this.pickQueue.push({callStream:g,callMetadata:$,callConfig:ee,dynamicFilters:et}),this.callRefTimerRef()}tryPick(g,$,ee,et){var er,en;let ei=this.currentPicker.pick({metadata:$,extraPickInfo:ee.pickInformation}),eu=ei.subchannel?"("+ei.subchannel.getChannelzRef().id+") "+ei.subchannel.getAddress():""+ei.subchannel;switch(this.trace("Pick result for call ["+g.getCallNumber()+"]: "+es.PickResultType[ei.pickResultType]+" subchannel: "+eu+" status: "+(null===(er=ei.status)||void 0===er?void 0:er.code)+" "+(null===(en=ei.status)||void 0===en?void 0:en.details)),ei.pickResultType){case es.PickResultType.COMPLETE:if(null===ei.subchannel)g.cancelWithStatus(eo.Status.UNAVAILABLE,"Request dropped by load balancing policy");else{if(ei.subchannel.getConnectivityState()!==eT.ConnectivityState.READY){em.log(eo.LogVerbosity.ERROR,"Error: COMPLETE pick result subchannel "+eu+" has state "+eT.ConnectivityState[ei.subchannel.getConnectivityState()]),this.pushPick(g,$,ee,et);break}g.filterStack.sendMetadata(Promise.resolve($.clone())).then(er=>{var en,es,eh;let ep=ei.subchannel.getConnectivityState();if(ep===eT.ConnectivityState.READY)try{let $=ei.extraFilterFactories.map($=>$.createFilter(g));null===(en=ei.subchannel)||void 0===en||en.getRealSubchannel().startCallStream(er,g,[...et,...$]),null===(es=ee.onCommitted)||void 0===es||es.call(ee),null===(eh=ei.onCallStarted)||void 0===eh||eh.call(ei)}catch(en){let er=en.code;"ERR_HTTP2_GOAWAY_SESSION"===er||"ERR_HTTP2_INVALID_SESSION"===er?(this.trace("Failed to start call on picked subchannel "+eu+" with error "+en.message+". Retrying pick",eo.LogVerbosity.INFO),this.tryPick(g,$,ee,et)):(this.trace("Failed to start call on picked subchanel "+eu+" with error "+en.message+". Ending call",eo.LogVerbosity.INFO),g.cancelWithStatus(eo.Status.INTERNAL,`Failed to start HTTP/2 stream with error: ${en.message}`))}else this.trace("Picked subchannel "+eu+" has state "+eT.ConnectivityState[ep]+" after metadata filters. Retrying pick",eo.LogVerbosity.INFO),this.tryPick(g,$,ee,et)},$=>{let{code:ee,details:et}=eO("number"==typeof $.code?$.code:eo.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${$.message}`);g.cancelWithStatus(ee,et)})}break;case es.PickResultType.QUEUE:this.pushPick(g,$,ee,et);break;case es.PickResultType.TRANSIENT_FAILURE:if($.getOptions().waitForReady)this.pushPick(g,$,ee,et);else{let{code:$,details:ee}=eO(ei.status.code,ei.status.details);g.cancelWithStatus($,ee)}break;case es.PickResultType.DROP:let{code:eh,details:ep}=eO(ei.status.code,ei.status.details);g.cancelWithStatus(eh,ep);break;default:throw Error(`Invalid state: unknown pickResultType ${ei.pickResultType}`)}}removeConnectivityStateWatcher(g){let $=this.connectivityStateWatchers.findIndex($=>$===g);$>=0&&this.connectivityStateWatchers.splice($,1)}updateState(g){for(let $ of(em.trace(eo.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+eS.uriToString(this.target)+" "+eT.ConnectivityState[this.connectivityState]+" -> "+eT.ConnectivityState[g]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",eT.ConnectivityState[this.connectivityState]+" -> "+eT.ConnectivityState[g]),this.connectivityState=g,this.connectivityStateWatchers.slice()))g!==$.currentState&&($.timer&&clearTimeout($.timer),this.removeConnectivityStateWatcher($),$.callback());g!==eT.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}tryGetConfig(g,$){if(null===g.getStatus()){if(null===this.configSelector)this.resolvingLoadBalancer.exitIdle(),this.currentResolutionError&&!$.getOptions().waitForReady?g.cancelWithStatus(this.currentResolutionError.code,this.currentResolutionError.details):(this.configSelectionQueue.push({callStream:g,callMetadata:$}),this.callRefTimerRef());else{let ee=this.configSelector(g.getMethod(),$);if(ee.status===eo.Status.OK){if(ee.methodConfig.timeout){let $=new Date;$.setSeconds($.getSeconds()+ee.methodConfig.timeout.seconds),$.setMilliseconds($.getMilliseconds()+ee.methodConfig.timeout.nanos/1e6),g.setConfigDeadline($),g.filterStack.refresh()}if(ee.dynamicFilterFactories.length>0){let et=new eu.FilterStackFactory(ee.dynamicFilterFactories).createFilter(g);et.sendMetadata(Promise.resolve($)).then($=>{this.tryPick(g,$,ee,et.getFilters())})}else this.tryPick(g,$,ee,[])}else{let{code:$,details:et}=eO(ee.status,"Failed to route call to method "+g.getMethod());g.cancelWithStatus($,et)}}}}_startCallStream(g,$){this.tryGetConfig(g,$.clone())}close(){this.resolvingLoadBalancer.destroy(),this.updateState(eT.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.channelzEnabled&&eE.unregisterChannelzRef(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return eS.uriToString(this.target)}getConnectivityState(g){let $=this.connectivityState;return g&&this.resolvingLoadBalancer.exitIdle(),$}watchConnectivityState(g,$,ee){if(this.connectivityState===eT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let et=null;if($!==1/0){let g=$ instanceof Date?$:new Date($),en=new Date;if($===-1/0||g<=en){process.nextTick(ee,Error("Deadline passed without connectivity state change"));return}et=setTimeout(()=>{this.removeConnectivityStateWatcher(er),ee(Error("Deadline passed without connectivity state change"))},g.getTime()-en.getTime())}let er={currentState:g,callback:ee,timer:et};this.connectivityStateWatchers.push(er)}getChannelzRef(){return this.channelzRef}createCall(g,$,ee,er,en){if("string"!=typeof g)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof $||$ instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===eT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let ei=e_();this.trace("createCall ["+ei+'] method="'+g+'", deadline='+$);let es={deadline:$,flags:null!=en?en:eo.Propagate.DEFAULTS,host:null!=ee?ee:this.defaultAuthority,parentCall:er},eu=new et.Http2CallStream(g,this,es,this.filterStackFactory,this.credentials._getCallCredentials(),ei);return this.channelzEnabled&&(this.callTracker.addCallStarted(),eu.addStatusWatcher(g=>{g.code===eo.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()})),eu}}$.ChannelImplementation=eA},5993:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.getChannelzServiceDefinition=$.getChannelzHandlers=$.unregisterChannelzRef=$.registerChannelzSocket=$.registerChannelzServer=$.registerChannelzSubchannel=$.registerChannelzChannel=$.ChannelzCallTracker=$.ChannelzChildrenTracker=$.ChannelzTrace=void 0;let et=ee(41808),er=ee(33955),en=ee(32678),ei=ee(23906),es=ee(59601),eo=ee(35085);function eu(g){return{channel_id:g.id,name:g.name}}function eh(g){return{subchannel_id:g.id,name:g.name}}function ep(g){return{server_id:g.id}}function ef(g){return{socket_id:g.id,name:g.name}}let eg=32;class em{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(g,$,ee){let et=new Date;this.events.push({description:$,severity:g,timestamp:et,childChannel:(null==ee?void 0:ee.kind)==="channel"?ee:void 0,childSubchannel:(null==ee?void 0:ee.kind)==="subchannel"?ee:void 0}),this.events.length>=2*eg&&(this.events=this.events.slice(eg)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:eM(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(g=>({description:g.description,severity:g.severity,timestamp:eM(g.timestamp),channel_ref:g.childChannel?eu(g.childChannel):null,subchannel_ref:g.childSubchannel?eh(g.childSubchannel):null}))}}}$.ChannelzTrace=em;class ey{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(g){var $,ee,et;switch(g.kind){case"channel":{let ee=null!==($=this.channelChildren.get(g.id))&&void 0!==$?$:{ref:g,count:0};ee.count+=1,this.channelChildren.set(g.id,ee);break}case"subchannel":{let $=null!==(ee=this.subchannelChildren.get(g.id))&&void 0!==ee?ee:{ref:g,count:0};$.count+=1,this.subchannelChildren.set(g.id,$);break}case"socket":{let $=null!==(et=this.socketChildren.get(g.id))&&void 0!==et?et:{ref:g,count:0};$.count+=1,this.socketChildren.set(g.id,$)}}}unrefChild(g){switch(g.kind){case"channel":{let $=this.channelChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.channelChildren.delete(g.id):this.channelChildren.set(g.id,$));break}case"subchannel":{let $=this.subchannelChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.subchannelChildren.delete(g.id):this.subchannelChildren.set(g.id,$));break}case"socket":{let $=this.socketChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.socketChildren.delete(g.id):this.socketChildren.set(g.id,$))}}}getChildLists(){let g=[];for(let{ref:$}of this.channelChildren.values())g.push($);let $=[];for(let{ref:g}of this.subchannelChildren.values())$.push(g);let ee=[];for(let{ref:g}of this.socketChildren.values())ee.push(g);return{channels:g,subchannels:$,sockets:ee}}}$.ChannelzChildrenTracker=ey;class ev{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}$.ChannelzCallTracker=ev;let eS=1;function eT(){return eS++}let eE=[],ew=[],eC=[],e_=[];function eI(g,$,ee){let et=eT(),er={id:et,name:g,kind:"channel"};return ee&&(eE[et]={ref:er,getInfo:$}),er}function eO(g,$,ee){let et=eT(),er={id:et,name:g,kind:"subchannel"};return ee&&(ew[et]={ref:er,getInfo:$}),er}function eA(g,$){let ee=eT(),et={id:ee,kind:"server"};return $&&(eC[ee]={ref:et,getInfo:g}),et}function eN(g,$,ee){let et=eT(),er={id:et,name:g,kind:"socket"};return ee&&(e_[et]={ref:er,getInfo:$}),er}function eD(g){switch(g.kind){case"channel":delete eE[g.id];return;case"subchannel":delete ew[g.id];return;case"server":delete eC[g.id];return;case"socket":delete e_[g.id];return}}function eR(g){let $=Number.parseInt(g,16);return[$/256|0,$%256]}function ek(g){return""===g?[]:[].concat(...g.split(":").map(g=>eR(g)))}function ex(g){if(et.isIPv4(g))return Buffer.from(Uint8Array.from(g.split(".").map(g=>Number.parseInt(g))));if(!et.isIPv6(g))return null;{let $,ee;let et=g.indexOf("::");-1===et?($=g,ee=""):($=g.substring(0,et),ee=g.substring(et+2));let er=Buffer.from(ek($)),en=Buffer.from(ek(ee)),ei=Buffer.alloc(16-er.length-en.length,0);return Buffer.concat([er,ei,en])}}function eP(g){switch(g){case er.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case er.ConnectivityState.IDLE:return{state:"IDLE"};case er.ConnectivityState.READY:return{state:"READY"};case er.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case er.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function eM(g){if(!g)return null;let $=g.getTime();return{seconds:$/1e3|0,nanos:$%1e3*1e6}}function eL(g){let $=g.getInfo();return{ref:eu(g.ref),data:{target:$.target,state:eP($.state),calls_started:$.callTracker.callsStarted,calls_succeeded:$.callTracker.callsSucceeded,calls_failed:$.callTracker.callsFailed,last_call_started_timestamp:eM($.callTracker.lastCallStartedTimestamp),trace:$.trace.getTraceMessage()},channel_ref:$.children.channels.map(g=>eu(g)),subchannel_ref:$.children.subchannels.map(g=>eh(g))}}function eF(g,$){let ee=Number.parseInt(g.request.channel_id),et=eE[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No channel data found for id "+ee});return}$(null,{channel:eL(et)})}function eB(g,$){let ee=Number.parseInt(g.request.max_results),et=[],er=Number.parseInt(g.request.start_channel_id);for(;er<eE.length;er++){let g=eE[er];if(void 0!==g&&(et.push(eL(g)),et.length>=ee))break}$(null,{channel:et,end:er>=eC.length})}function ej(g){let $=g.getInfo();return{ref:ep(g.ref),data:{calls_started:$.callTracker.callsStarted,calls_succeeded:$.callTracker.callsSucceeded,calls_failed:$.callTracker.callsFailed,last_call_started_timestamp:eM($.callTracker.lastCallStartedTimestamp),trace:$.trace.getTraceMessage()},listen_socket:$.listenerChildren.sockets.map(g=>ef(g))}}function eU(g,$){let ee=Number.parseInt(g.request.server_id),et=eC[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No server data found for id "+ee});return}$(null,{server:ej(et)})}function eV(g,$){let ee=Number.parseInt(g.request.max_results),et=[],er=Number.parseInt(g.request.start_server_id);for(;er<eC.length;er++){let g=eC[er];if(void 0!==g&&(et.push(ej(g)),et.length>=ee))break}$(null,{server:et,end:er>=eC.length})}function eq(g,$){let ee=Number.parseInt(g.request.subchannel_id),et=ew[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No subchannel data found for id "+ee});return}let er=et.getInfo();$(null,{subchannel:{ref:eh(et.ref),data:{target:er.target,state:eP(er.state),calls_started:er.callTracker.callsStarted,calls_succeeded:er.callTracker.callsSucceeded,calls_failed:er.callTracker.callsFailed,last_call_started_timestamp:eM(er.callTracker.lastCallStartedTimestamp),trace:er.trace.getTraceMessage()},socket_ref:er.children.sockets.map(g=>ef(g))}})}function ez(g){var $;return ei.isTcpSubchannelAddress(g)?{address:"tcpip_address",tcpip_address:{ip_address:null!==($=ex(g.host))&&void 0!==$?$:void 0,port:g.port}}:{address:"uds_address",uds_address:{filename:g.path}}}function eG(g,$){var ee,et,er,ei,es;let eo=Number.parseInt(g.request.socket_id),eu=e_[eo];if(void 0===eu){$({code:en.Status.NOT_FOUND,details:"No socket data found for id "+eo});return}let eh=eu.getInfo(),ep=eh.security?{model:"tls",tls:{cipher_suite:eh.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(ee=eh.security.cipherSuiteStandardName)&&void 0!==ee?ee:void 0,other_name:null!==(et=eh.security.cipherSuiteOtherName)&&void 0!==et?et:void 0,local_certificate:null!==(er=eh.security.localCertificate)&&void 0!==er?er:void 0,remote_certificate:null!==(ei=eh.security.remoteCertificate)&&void 0!==ei?ei:void 0}}:null;$(null,{socket:{ref:ef(eu.ref),local:eh.localAddress?ez(eh.localAddress):null,remote:eh.remoteAddress?ez(eh.remoteAddress):null,remote_name:null!==(es=eh.remoteName)&&void 0!==es?es:void 0,security:ep,data:{keep_alives_sent:eh.keepAlivesSent,streams_started:eh.streamsStarted,streams_succeeded:eh.streamsSucceeded,streams_failed:eh.streamsFailed,last_local_stream_created_timestamp:eM(eh.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:eM(eh.lastRemoteStreamCreatedTimestamp),messages_received:eh.messagesReceived,messages_sent:eh.messagesSent,last_message_received_timestamp:eM(eh.lastMessageReceivedTimestamp),last_message_sent_timestamp:eM(eh.lastMessageSentTimestamp),local_flow_control_window:eh.localFlowControlWindow?{value:eh.localFlowControlWindow}:null,remote_flow_control_window:eh.remoteFlowControlWindow?{value:eh.remoteFlowControlWindow}:null}}})}function e$(g,$){let ee=Number.parseInt(g.request.server_id),et=eC[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No server data found for id "+ee});return}let er=Number.parseInt(g.request.start_socket_id),ei=Number.parseInt(g.request.max_results),es=et.getInfo().sessionChildren.sockets.sort((g,$)=>g.id-$.id),eo=[],eu=0;for(;eu<es.length&&(!(es[eu].id>=er)||(eo.push(ef(es[eu])),!(eo.length>=ei)));eu++);$(null,{socket_ref:eo,end:eu>=es.length})}function eK(){return{GetChannel:eF,GetTopChannels:eB,GetServer:eU,GetServers:eV,GetSubchannel:eq,GetSocket:eG,GetServerSockets:e$}}$.registerChannelzChannel=eI,$.registerChannelzSubchannel=eO,$.registerChannelzServer=eA,$.registerChannelzSocket=eN,$.unregisterChannelzRef=eD,$.getChannelzHandlers=eK;let eW=null;function eH(){if(eW)return eW;let g=(0,ee(52894).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return eW=eo.loadPackageDefinition(g).grpc.channelz.v1.Channelz.service}function eQ(){es.registerAdminService(eH,eK)}$.getChannelzServiceDefinition=eH,$.setup=eQ},68601:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getInterceptingCall=$.InterceptingCall=$.RequesterBuilder=$.ListenerBuilder=$.InterceptorConfigurationError=void 0;let et=ee(62252),er=ee(71925),en=ee(32678);class ei extends Error{constructor(g){super(g),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,ei)}}$.InterceptorConfigurationError=ei;class es{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(g){return this.metadata=g,this}withOnReceiveMessage(g){return this.message=g,this}withOnReceiveStatus(g){return this.status=g,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}$.ListenerBuilder=es;class eo{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(g){return this.start=g,this}withSendMessage(g){return this.message=g,this}withHalfClose(g){return this.halfClose=g,this}withCancel(g){return this.cancel=g,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}$.RequesterBuilder=eo;let eu={onReceiveMetadata:(g,$)=>{$(g)},onReceiveMessage:(g,$)=>{$(g)},onReceiveStatus:(g,$)=>{$(g)}},eh={start:(g,$,ee)=>{ee(g,$)},sendMessage:(g,$)=>{$(g)},halfClose:g=>{g()},cancel:g=>{g()}};class ep{constructor(g,$){var ee,et,er,en;this.nextCall=g,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,$?this.requester={start:null!==(ee=$.start)&&void 0!==ee?ee:eh.start,sendMessage:null!==(et=$.sendMessage)&&void 0!==et?et:eh.sendMessage,halfClose:null!==(er=$.halfClose)&&void 0!==er?er:eh.halfClose,cancel:null!==(en=$.cancel)&&void 0!==en?en:eh.cancel}:this.requester=eh}cancelWithStatus(g,$){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(g,$)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(g,$){var ee,et,en,ei,es,eo;let eh={onReceiveMetadata:null!==(et=null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g=>{},onReceiveMessage:null!==(ei=null===(en=null==$?void 0:$.onReceiveMessage)||void 0===en?void 0:en.bind($))&&void 0!==ei?ei:g=>{},onReceiveStatus:null!==(eo=null===(es=null==$?void 0:$.onReceiveStatus)||void 0===es?void 0:es.bind($))&&void 0!==eo?eo:g=>{}};this.processingMetadata=!0,this.requester.start(g,eh,(g,$)=>{var ee,et,en;let ei;if(this.processingMetadata=!1,er.isInterceptingListener($))ei=$;else{let g={onReceiveMetadata:null!==(ee=$.onReceiveMetadata)&&void 0!==ee?ee:eu.onReceiveMetadata,onReceiveMessage:null!==(et=$.onReceiveMessage)&&void 0!==et?et:eu.onReceiveMessage,onReceiveStatus:null!==(en=$.onReceiveStatus)&&void 0!==en?en:eu.onReceiveStatus};ei=new er.InterceptingListenerImpl(g,eh)}this.nextCall.start(g,ei),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(g,$){this.processingMessage=!0,this.requester.sendMessage($,ee=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=g,this.pendingMessage=$):(this.nextCall.sendMessageWithContext(g,ee),this.processPendingHalfClose())})}sendMessage(g){this.sendMessageWithContext({},g)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}setCredentials(g){this.nextCall.setCredentials(g)}}function ef(g,$,ee){var et,er;let en=null!==(et=ee.deadline)&&void 0!==et?et:1/0,ei=ee.host,es=null!==(er=ee.parent)&&void 0!==er?er:null,eo=ee.propagate_flags,eu=ee.credentials,eh=g.createCall($,en,ei,es,eo);return eu&&eh.setCredentials(eu),eh}$.InterceptingCall=ep;class eg{constructor(g,$){this.call=g,this.methodDefinition=$}cancelWithStatus(g,$){this.call.cancelWithStatus(g,$)}getPeer(){return this.call.getPeer()}setCredentials(g){this.call.setCredentials(g)}sendMessageWithContext(g,$){let ee;try{ee=this.methodDefinition.requestSerialize($)}catch(g){this.call.cancelWithStatus(en.Status.INTERNAL,`Request message serialization failure: ${g.message}`);return}this.call.sendMessageWithContext(g,ee)}sendMessage(g){this.sendMessageWithContext({},g)}start(g,$){let ee=null;this.call.start(g,{onReceiveMetadata:g=>{var ee;null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee||ee.call($,g)},onReceiveMessage:g=>{var er;let ei;try{ei=this.methodDefinition.responseDeserialize(g)}catch(g){ee={code:en.Status.INTERNAL,details:`Response message parsing error: ${g.message}`,metadata:new et.Metadata},this.call.cancelWithStatus(ee.code,ee.details);return}null===(er=null==$?void 0:$.onReceiveMessage)||void 0===er||er.call($,ei)},onReceiveStatus:g=>{var et,er;ee?null===(et=null==$?void 0:$.onReceiveStatus)||void 0===et||et.call($,ee):null===(er=null==$?void 0:$.onReceiveStatus)||void 0===er||er.call($,g)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class em extends eg{constructor(g,$){super(g,$)}start(g,$){var ee,et;let er=!1,en={onReceiveMetadata:null!==(et=null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g=>{},onReceiveMessage:g=>{var ee;er=!0,null===(ee=null==$?void 0:$.onReceiveMessage)||void 0===ee||ee.call($,g)},onReceiveStatus:g=>{var ee,et;er||null===(ee=null==$?void 0:$.onReceiveMessage)||void 0===ee||ee.call($,null),null===(et=null==$?void 0:$.onReceiveStatus)||void 0===et||et.call($,g)}};super.start(g,en),this.call.startRead()}}class ey extends eg{}function ev(g,$,ee){let et=ef(g,ee.path,$);return ee.responseStream?new ey(et,ee):new em(et,ee)}function eS(g,$,ee,et){if(g.clientInterceptors.length>0&&g.clientInterceptorProviders.length>0)throw new ei("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(g.callInterceptors.length>0&&g.callInterceptorProviders.length>0)throw new ei("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let er=[];er=g.callInterceptors.length>0||g.callInterceptorProviders.length>0?[].concat(g.callInterceptors,g.callInterceptorProviders.map(g=>g($))).filter(g=>g):[].concat(g.clientInterceptors,g.clientInterceptorProviders.map(g=>g($))).filter(g=>g);let en=Object.assign({},ee,{method_definition:$});return er.reduceRight((g,$)=>ee=>$(ee,g),g=>ev(et,g,$))(en)}$.getInterceptingCall=eS},69800:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Client=void 0;let et=ee(78439),er=ee(46261),en=ee(33955),ei=ee(32678),es=ee(62252),eo=ee(68601),eu=Symbol(),eh=Symbol(),ep=Symbol(),ef=Symbol();function eg(g){return"function"==typeof g}function em(g){return g.stack.split("\n").slice(1).join("\n")}class ey{constructor(g,$,ee={}){var et,en;if(ee=Object.assign({},ee),this[eh]=null!==(et=ee.interceptors)&&void 0!==et?et:[],delete ee.interceptors,this[ep]=null!==(en=ee.interceptor_providers)&&void 0!==en?en:[],delete ee.interceptor_providers,this[eh].length>0&&this[ep].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[ef]=ee.callInvocationTransformer,delete ee.callInvocationTransformer,ee.channelOverride)this[eu]=ee.channelOverride;else if(ee.channelFactoryOverride){let et=ee.channelFactoryOverride;delete ee.channelFactoryOverride,this[eu]=et(g,$,ee)}else this[eu]=new er.ChannelImplementation(g,$,ee)}close(){this[eu].close()}getChannel(){return this[eu]}waitForReady(g,$){let ee=et=>{let er;if(et){$(Error("Failed to connect before the deadline"));return}try{er=this[eu].getConnectivityState(!0)}catch(g){$(Error("The channel has been closed"));return}if(er===en.ConnectivityState.READY)$();else try{this[eu].watchConnectivityState(er,g,ee)}catch(g){$(Error("The channel has been closed"))}};setImmediate(ee)}checkOptionalUnaryResponseArguments(g,$,ee){if(eg(g))return{metadata:new es.Metadata,options:{},callback:g};if(eg($))return g instanceof es.Metadata?{metadata:g,options:{},callback:$}:{metadata:new es.Metadata,options:g,callback:$};if(!(g instanceof es.Metadata&&$ instanceof Object&&eg(ee)))throw Error("Incorrect arguments passed");return{metadata:g,options:$,callback:ee}}makeUnaryRequest(g,$,ee,er,en,es,eg){var ey,ev;let eS=this.checkOptionalUnaryResponseArguments(en,es,eg),eT={path:g,requestStream:!1,responseStream:!1,requestSerialize:$,responseDeserialize:ee},eE={argument:er,metadata:eS.metadata,call:new et.ClientUnaryCallImpl,channel:this[eu],methodDefinition:eT,callOptions:eS.options,callback:eS.callback};this[ef]&&(eE=this[ef](eE));let ew=eE.call,eC={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(ey=eE.callOptions.interceptors)&&void 0!==ey?ey:[],callInterceptorProviders:null!==(ev=eE.callOptions.interceptor_providers)&&void 0!==ev?ev:[]},e_=eo.getInterceptingCall(eC,eE.methodDefinition,eE.callOptions,eE.channel);ew.call=e_,eE.callOptions.credentials&&e_.setCredentials(eE.callOptions.credentials);let eI=null,eO=!1,eA=Error();return e_.start(eE.metadata,{onReceiveMetadata:g=>{ew.emit("metadata",g)},onReceiveMessage(g){null!==eI&&e_.cancelWithStatus(ei.Status.INTERNAL,"Too many responses received"),eI=g},onReceiveStatus(g){if(!eO){if(eO=!0,g.code===ei.Status.OK){if(null===eI){let $=em(eA);eE.callback(et.callErrorFromStatus({code:ei.Status.INTERNAL,details:"No message received",metadata:g.metadata},$))}else eE.callback(null,eI)}else{let $=em(eA);eE.callback(et.callErrorFromStatus(g,$))}ew.emit("status",g)}}}),e_.sendMessage(er),e_.halfClose(),ew}makeClientStreamRequest(g,$,ee,er,en,es){var eg,ey;let ev=this.checkOptionalUnaryResponseArguments(er,en,es),eS={path:g,requestStream:!0,responseStream:!1,requestSerialize:$,responseDeserialize:ee},eT={metadata:ev.metadata,call:new et.ClientWritableStreamImpl($),channel:this[eu],methodDefinition:eS,callOptions:ev.options,callback:ev.callback};this[ef]&&(eT=this[ef](eT));let eE=eT.call,ew={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(eg=eT.callOptions.interceptors)&&void 0!==eg?eg:[],callInterceptorProviders:null!==(ey=eT.callOptions.interceptor_providers)&&void 0!==ey?ey:[]},eC=eo.getInterceptingCall(ew,eT.methodDefinition,eT.callOptions,eT.channel);eE.call=eC,eT.callOptions.credentials&&eC.setCredentials(eT.callOptions.credentials);let e_=null,eI=!1,eO=Error();return eC.start(eT.metadata,{onReceiveMetadata:g=>{eE.emit("metadata",g)},onReceiveMessage(g){null!==e_&&eC.cancelWithStatus(ei.Status.INTERNAL,"Too many responses received"),e_=g},onReceiveStatus(g){if(!eI){if(eI=!0,g.code===ei.Status.OK){if(null===e_){let $=em(eO);eT.callback(et.callErrorFromStatus({code:ei.Status.INTERNAL,details:"No message received",metadata:g.metadata},$))}else eT.callback(null,e_)}else{let $=em(eO);eT.callback(et.callErrorFromStatus(g,$))}eE.emit("status",g)}}}),eE}checkMetadataAndOptions(g,$){let ee,et;return g instanceof es.Metadata?(ee=g,et=$||{}):(et=g||{},ee=new es.Metadata),{metadata:ee,options:et}}makeServerStreamRequest(g,$,ee,er,en,es){var eg,ey;let ev=this.checkMetadataAndOptions(en,es),eS={path:g,requestStream:!1,responseStream:!0,requestSerialize:$,responseDeserialize:ee},eT={argument:er,metadata:ev.metadata,call:new et.ClientReadableStreamImpl(ee),channel:this[eu],methodDefinition:eS,callOptions:ev.options};this[ef]&&(eT=this[ef](eT));let eE=eT.call,ew={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(eg=eT.callOptions.interceptors)&&void 0!==eg?eg:[],callInterceptorProviders:null!==(ey=eT.callOptions.interceptor_providers)&&void 0!==ey?ey:[]},eC=eo.getInterceptingCall(ew,eT.methodDefinition,eT.callOptions,eT.channel);eE.call=eC,eT.callOptions.credentials&&eC.setCredentials(eT.callOptions.credentials);let e_=!1,eI=Error();return eC.start(eT.metadata,{onReceiveMetadata(g){eE.emit("metadata",g)},onReceiveMessage(g){eE.push(g)},onReceiveStatus(g){if(!e_){if(e_=!0,eE.push(null),g.code!==ei.Status.OK){let $=em(eI);eE.emit("error",et.callErrorFromStatus(g,$))}eE.emit("status",g)}}}),eC.sendMessage(er),eC.halfClose(),eE}makeBidiStreamRequest(g,$,ee,er,en){var es,eg;let ey=this.checkMetadataAndOptions(er,en),ev={path:g,requestStream:!0,responseStream:!0,requestSerialize:$,responseDeserialize:ee},eS={metadata:ey.metadata,call:new et.ClientDuplexStreamImpl($,ee),channel:this[eu],methodDefinition:ev,callOptions:ey.options};this[ef]&&(eS=this[ef](eS));let eT=eS.call,eE={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(es=eS.callOptions.interceptors)&&void 0!==es?es:[],callInterceptorProviders:null!==(eg=eS.callOptions.interceptor_providers)&&void 0!==eg?eg:[]},ew=eo.getInterceptingCall(eE,eS.methodDefinition,eS.callOptions,eS.channel);eT.call=ew,eS.callOptions.credentials&&ew.setCredentials(eS.callOptions.credentials);let eC=!1,e_=Error();return ew.start(eS.metadata,{onReceiveMetadata(g){eT.emit("metadata",g)},onReceiveMessage(g){eT.push(g)},onReceiveStatus(g){if(!eC){if(eC=!0,eT.push(null),g.code!==ei.Status.OK){let $=em(e_);eT.emit("error",et.callErrorFromStatus(g,$))}eT.emit("status",g)}}}),eT}}$.Client=ey},59286:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.CompressionAlgorithms=void 0,function(g){g[g.identity=0]="identity",g[g.deflate=1]="deflate",g[g.gzip=2]="gzip"}(ee=$.CompressionAlgorithms||($.CompressionAlgorithms={}))},44299:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CompressionFilterFactory=$.CompressionFilter=void 0;let et=ee(59796),er=ee(59286),en=ee(32678),ei=ee(78152),es=ee(97504),eo=g=>"number"==typeof g&&"string"==typeof er.CompressionAlgorithms[g];class eu{async writeMessage(g,$){let ee=g;$&&(ee=await this.compressMessage(ee));let et=Buffer.allocUnsafe(ee.length+5);return et.writeUInt8($?1:0,0),et.writeUInt32BE(ee.length,1),ee.copy(et,5),et}async readMessage(g){let $=1===g.readUInt8(0),ee=g.slice(5);return $&&(ee=await this.decompressMessage(ee)),ee}}class eh extends eu{async compressMessage(g){return g}async writeMessage(g,$){let ee=Buffer.allocUnsafe(g.length+5);return ee.writeUInt8(0,0),ee.writeUInt32BE(g.length,1),g.copy(ee,5),ee}decompressMessage(g){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class ep extends eu{compressMessage(g){return new Promise(($,ee)=>{et.deflate(g,(g,et)=>{g?ee(g):$(et)})})}decompressMessage(g){return new Promise(($,ee)=>{et.inflate(g,(g,et)=>{g?ee(g):$(et)})})}}class ef extends eu{compressMessage(g){return new Promise(($,ee)=>{et.gzip(g,(g,et)=>{g?ee(g):$(et)})})}decompressMessage(g){return new Promise(($,ee)=>{et.unzip(g,(g,et)=>{g?ee(g):$(et)})})}}class eg extends eu{constructor(g){super(),this.compressionName=g}compressMessage(g){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(g){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function em(g){switch(g){case"identity":return new eh;case"deflate":return new ep;case"gzip":return new ef;default:return new eg(g)}}class ey extends ei.BaseFilter{constructor(g,$){var ee;super(),this.sharedFilterConfig=$,this.sendCompression=new eh,this.receiveCompression=new eh,this.currentCompressionAlgorithm="identity";let et=g["grpc.default_compression_algorithm"];if(void 0!==et){if(eo(et)){let g=er.CompressionAlgorithms[et],en=null===(ee=$.serverSupportedEncodingHeader)||void 0===ee?void 0:ee.split(",");(!en||en.includes(g))&&(this.currentCompressionAlgorithm=g,this.sendCompression=em(this.currentCompressionAlgorithm))}else es.log(en.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${et}`)}}async sendMetadata(g){let $=await g;return $.set("grpc-accept-encoding","identity,deflate,gzip"),$.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?$.remove("grpc-encoding"):$.set("grpc-encoding",this.currentCompressionAlgorithm),$}receiveMetadata(g){let $=g.get("grpc-encoding");if($.length>0){let g=$[0];"string"==typeof g&&(this.receiveCompression=em(g))}g.remove("grpc-encoding");let ee=g.get("grpc-accept-encoding")[0];return ee&&(this.sharedFilterConfig.serverSupportedEncodingHeader=ee,ee.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new eh,this.currentCompressionAlgorithm="identity")),g.remove("grpc-accept-encoding"),g}async sendMessage(g){var $;let ee;let et=await g;return ee=!(this.sendCompression instanceof eh)&&((null!==($=et.flags)&&void 0!==$?$:0)&2)==0,{message:await this.sendCompression.writeMessage(et.message,ee),flags:et.flags}}async receiveMessage(g){return this.receiveCompression.readMessage(await g)}}$.CompressionFilter=ey;class ev{constructor(g,$){this.channel=g,this.options=$,this.sharedFilterConfig={}}createFilter(g){return new ey(this.options,this.sharedFilterConfig)}}$.CompressionFilterFactory=ev},33955:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.ConnectivityState=void 0,function(g){g[g.IDLE=0]="IDLE",g[g.CONNECTING=1]="CONNECTING",g[g.READY=2]="READY",g[g.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",g[g.SHUTDOWN=4]="SHUTDOWN"}(ee=$.ConnectivityState||($.ConnectivityState={}))},32678:(g,$)=>{"use strict";var ee,et,er;Object.defineProperty($,"__esModule",{value:!0}),$.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=$.DEFAULT_MAX_SEND_MESSAGE_LENGTH=$.Propagate=$.LogVerbosity=$.Status=void 0,function(g){g[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(ee=$.Status||($.Status={})),function(g){g[g.DEBUG=0]="DEBUG",g[g.INFO=1]="INFO",g[g.ERROR=2]="ERROR",g[g.NONE=3]="NONE"}(et=$.LogVerbosity||($.LogVerbosity={})),function(g){g[g.DEADLINE=1]="DEADLINE",g[g.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",g[g.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",g[g.CANCELLATION=8]="CANCELLATION",g[g.DEFAULTS=65535]="DEFAULTS"}(er=$.Propagate||($.Propagate={})),$.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,$.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},18065:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.DeadlineFilterFactory=$.DeadlineFilter=void 0;let et=ee(32678),er=ee(78152),en=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function ei(g){let $=Math.max(g-new Date().getTime(),0);for(let[g,ee]of en){let et=$/ee;if(et<1e8)return String(Math.ceil(et))+g}throw Error("Deadline is too far in the future")}class es extends er.BaseFilter{constructor(g,$){super(),this.channel=g,this.callStream=$,this.timer=null,this.deadline=1/0,this.retreiveDeadline(),this.runTimer()}retreiveDeadline(){let g=this.callStream.getDeadline();g instanceof Date?this.deadline=g.getTime():this.deadline=g}runTimer(){var g,$;this.timer&&clearTimeout(this.timer);let ee=new Date().getTime(),er=this.deadline-ee;er<=0?process.nextTick(()=>{this.callStream.cancelWithStatus(et.Status.DEADLINE_EXCEEDED,"Deadline exceeded")}):this.deadline!==1/0&&(this.timer=setTimeout(()=>{this.callStream.cancelWithStatus(et.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},er),null===($=(g=this.timer).unref)||void 0===$||$.call(g))}refresh(){this.retreiveDeadline(),this.runTimer()}async sendMetadata(g){if(this.deadline===1/0)return g;let $=await g,ee=ei(this.deadline);return $.set("grpc-timeout",ee),$}receiveTrailers(g){return this.timer&&clearTimeout(this.timer),g}}$.DeadlineFilter=es;class eo{constructor(g){this.channel=g}createFilter(g){return new es(this.channel,g)}}$.DeadlineFilterFactory=eo},95330:(g,$)=>{"use strict";function ee(g){return{seconds:g/1e3|0,nanos:g%1e3*1e6|0}}function et(g){return 1e3*g.seconds+g.nanos/1e6|0}function er(g){return"number"==typeof g.seconds&&"number"==typeof g.nanos}Object.defineProperty($,"__esModule",{value:!0}),$.isDuration=$.durationToMs=$.msToDuration=void 0,$.msToDuration=ee,$.durationToMs=et,$.isDuration=er},30345:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var et=ee(97504);Object.defineProperty($,"trace",{enumerable:!0,get:function(){return et.trace}}),Object.defineProperty($,"log",{enumerable:!0,get:function(){return et.log}});var er=ee(40492);Object.defineProperty($,"registerResolver",{enumerable:!0,get:function(){return er.registerResolver}});var en=ee(18429);Object.defineProperty($,"uriToString",{enumerable:!0,get:function(){return en.uriToString}});var ei=ee(95330);Object.defineProperty($,"durationToMs",{enumerable:!0,get:function(){return ei.durationToMs}});var es=ee(84934);Object.defineProperty($,"BackoffTimeout",{enumerable:!0,get:function(){return es.BackoffTimeout}});var eo=ee(27176);Object.defineProperty($,"createChildChannelControlHelper",{enumerable:!0,get:function(){return eo.createChildChannelControlHelper}}),Object.defineProperty($,"registerLoadBalancerType",{enumerable:!0,get:function(){return eo.registerLoadBalancerType}}),Object.defineProperty($,"getFirstUsableConfig",{enumerable:!0,get:function(){return eo.getFirstUsableConfig}}),Object.defineProperty($,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return eo.validateLoadBalancingConfig}});var eu=ee(23906);Object.defineProperty($,"subchannelAddressToString",{enumerable:!0,get:function(){return eu.subchannelAddressToString}});var eh=ee(982);Object.defineProperty($,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return eh.ChildLoadBalancerHandler}});var ep=ee(17064);Object.defineProperty($,"UnavailablePicker",{enumerable:!0,get:function(){return ep.UnavailablePicker}}),Object.defineProperty($,"QueuePicker",{enumerable:!0,get:function(){return ep.QueuePicker}}),Object.defineProperty($,"PickResultType",{enumerable:!0,get:function(){return ep.PickResultType}});var ef=ee(78152);Object.defineProperty($,"BaseFilter",{enumerable:!0,get:function(){return ef.BaseFilter}});var eg=ee(2472);Object.defineProperty($,"FilterStackFactory",{enumerable:!0,get:function(){return eg.FilterStackFactory}});var em=ee(59601);Object.defineProperty($,"registerAdminService",{enumerable:!0,get:function(){return em.registerAdminService}});var ey=ee(21407);Object.defineProperty($,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return ey.BaseSubchannelWrapper}});var ev=ee(81433);Object.defineProperty($,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return ev.OutlierDetectionLoadBalancingConfig}})},2472:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.FilterStackFactory=$.FilterStack=void 0;class ee{constructor(g){this.filters=g}sendMetadata(g){let $=g;for(let g=0;g<this.filters.length;g++)$=this.filters[g].sendMetadata($);return $}receiveMetadata(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveMetadata($);return $}sendMessage(g){let $=g;for(let g=0;g<this.filters.length;g++)$=this.filters[g].sendMessage($);return $}receiveMessage(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveMessage($);return $}receiveTrailers(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveTrailers($);return $}refresh(){for(let g of this.filters)g.refresh()}push(g){this.filters.unshift(...g)}getFilters(){return this.filters}}$.FilterStack=ee;class et{constructor(g){this.factories=g}push(g){this.factories.unshift(...g)}createFilter(g){return new ee(this.factories.map($=>$.createFilter(g)))}}$.FilterStackFactory=et},78152:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BaseFilter=void 0;class ee{async sendMetadata(g){return g}receiveMetadata(g){return g}async sendMessage(g){return g}async receiveMessage(g){return g}receiveTrailers(g){return g}refresh(){}}$.BaseFilter=ee},82039:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getProxiedConnection=$.mapProxyName=void 0;let et=ee(97504),er=ee(32678),en=ee(40492),ei=ee(13685),es=ee(24404),eo=ee(97504),eu=ee(23906),eh=ee(18429),ep=ee(57310),ef="proxy";function eg(g){eo.trace(er.LogVerbosity.DEBUG,ef,g)}function em(){let g,$="",ee="";if(process.env.grpc_proxy)ee="grpc_proxy",$=process.env.grpc_proxy;else if(process.env.https_proxy)ee="https_proxy",$=process.env.https_proxy;else{if(!process.env.http_proxy)return{};ee="http_proxy",$=process.env.http_proxy}try{g=new ep.URL($)}catch(g){return et.log(er.LogVerbosity.ERROR,`cannot parse value of "${ee}" env var`),{}}if("http:"!==g.protocol)return et.log(er.LogVerbosity.ERROR,`"${g.protocol}" scheme not supported in proxy URI`),{};let en=null;g.username&&(g.password?(et.log(er.LogVerbosity.INFO,"userinfo found in proxy URI"),en=`${g.username}:${g.password}`):en=g.username);let ei=g.hostname,es=g.port;""===es&&(es="80");let eo={address:`${ei}:${es}`};return en&&(eo.creds=en),eg("Proxy server "+eo.address+" set by environment variable "+ee),eo}function ey(){let g=process.env.no_grpc_proxy,$="no_grpc_proxy";return(g||(g=process.env.no_proxy,$="no_proxy"),g)?(eg("No proxy server list set by environment variable "+$),g.split(",")):[]}function ev(g,$){var ee;let et={target:g,extraOptions:{}};if((null!==(ee=$["grpc.enable_http_proxy"])&&void 0!==ee?ee:1)===0||"unix"===g.scheme)return et;let er=em();if(!er.address)return et;let en=eh.splitHostPort(g.path);if(!en)return et;let ei=en.host;for(let $ of ey())if($===ei)return eg("Not using proxy for target in no_proxy list: "+eh.uriToString(g)),et;let es={"grpc.http_connect_target":eh.uriToString(g)};return er.creds&&(es["grpc.http_connect_creds"]=er.creds),{target:{scheme:"dns",path:er.address},extraOptions:es}}function eS(g,$,ee){if(!("grpc.http_connect_target"in $))return Promise.resolve({});let eo=$["grpc.http_connect_target"],ep=eh.parseUri(eo);if(null===ep)return Promise.resolve({});let ef={method:"CONNECT",path:ep.path},em={Host:ep.path};eu.isTcpSubchannelAddress(g)?(ef.host=g.host,ef.port=g.port):ef.socketPath=g.path,"grpc.http_connect_creds"in $&&(em["Proxy-Authorization"]="Basic "+Buffer.from($["grpc.http_connect_creds"]).toString("base64")),ef.headers=em;let ey=eu.subchannelAddressToString(g);return eg("Using proxy "+ey+" to connect to "+ef.path),new Promise((g,$)=>{let eo=ei.request(ef);eo.once("connect",(ei,eu,em)=>{var ev;if(eo.removeAllListeners(),eu.removeAllListeners(),200===ei.statusCode){if(eg("Successfully connected to "+ef.path+" through proxy "+ey),"secureContext"in ee){let et=en.getDefaultAuthority(ep),er=eh.splitHostPort(et),ei=null!==(ev=null==er?void 0:er.host)&&void 0!==ev?ev:et,eo=es.connect(Object.assign({host:ei,servername:ei,socket:eu},ee),()=>{eg("Successfully established a TLS connection to "+ef.path+" through proxy "+ey),g({socket:eo,realTarget:ep})});eo.on("error",g=>{eg("Failed to establish a TLS connection to "+ef.path+" through proxy "+ey+" with error "+g.message),$()})}else eg("Successfully established a plaintext connection to "+ef.path+" through proxy "+ey),g({socket:eu,realTarget:ep})}else et.log(er.LogVerbosity.ERROR,"Failed to connect to "+ef.path+" through proxy "+ey+" with status "+ei.statusCode),$()}),eo.once("error",g=>{eo.removeAllListeners(),et.log(er.LogVerbosity.ERROR,"Failed to connect to proxy "+ey+" with error "+g.message),$()}),eo.end()})}$.mapProxyName=ev,$.getProxiedConnection=eS},22165:(g,$,ee)=>{"use strict";ev={value:!0},ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=$.Rz=ev=ev=ev=ev=ev=ev=$.SF=$.K9=void 0;let et=ee(78931);ev={enumerable:!0,get:function(){return et.CallCredentials}};let er=ee(46261);ev={enumerable:!0,get:function(){return er.ChannelImplementation}};let en=ee(59286);ev={enumerable:!0,get:function(){return en.CompressionAlgorithms}};let ei=ee(33955);ev={enumerable:!0,get:function(){return ei.ConnectivityState}};let es=ee(92528);ev={enumerable:!0,get:function(){return es.ChannelCredentials}};let eo=ee(69800);ev={enumerable:!0,get:function(){return eo.Client}};let eu=ee(32678);ev={enumerable:!0,get:function(){return eu.LogVerbosity}},ev={enumerable:!0,get:function(){return eu.Status}},ev={enumerable:!0,get:function(){return eu.Propagate}};let eh=ee(97504),ep=ee(35085);Object.defineProperty($,"Rz",{enumerable:!0,get:function(){return ep.loadPackageDefinition}}),ev={enumerable:!0,get:function(){return ep.makeClientConstructor}},ev={enumerable:!0,get:function(){return ep.makeClientConstructor}};let ef=ee(62252);Object.defineProperty($,"SF",{enumerable:!0,get:function(){return ef.Metadata}});let eg=ee(57691);ev={enumerable:!0,get:function(){return eg.Server}};let em=ee(74181);ev={enumerable:!0,get:function(){return em.ServerCredentials}};let ey=ee(39932);ev={enumerable:!0,get:function(){return ey.StatusBuilder}},$.K9={combineChannelCredentials:(g,...$)=>$.reduce((g,$)=>g.compose($),g),combineCallCredentials:(g,...$)=>$.reduce((g,$)=>g.compose($),g),createInsecure:es.ChannelCredentials.createInsecure,createSsl:es.ChannelCredentials.createSsl,createFromSecureContext:es.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:et.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:et.CallCredentials.createFromGoogleCredential,createEmpty:et.CallCredentials.createEmpty},ev=g=>g.close(),ev=(g,$,ee)=>g.waitForReady($,ee),ev=(g,$)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},ev=(g,$,ee)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},ev=g=>{eh.setLogger(g)},ev=g=>{eh.setLoggerVerbosity(g)},ev=g=>eo.Client.prototype.getChannel.call(g);var ev,eS=ee(68601);ev={enumerable:!0,get:function(){return eS.ListenerBuilder}},ev={enumerable:!0,get:function(){return eS.RequesterBuilder}},ev={enumerable:!0,get:function(){return eS.InterceptingCall}},ev={enumerable:!0,get:function(){return eS.InterceptorConfigurationError}};var eT=ee(5993);ev={enumerable:!0,get:function(){return eT.getChannelzServiceDefinition}},ev={enumerable:!0,get:function(){return eT.getChannelzHandlers}};var eE=ee(59601);ev={enumerable:!0,get:function(){return eE.addAdminServicesToServer}},ev=ee(30345);let ew=ee(54605),eC=ee(45862),e_=ee(53562),eI=ee(56170),eO=ee(99438),eA=ee(81433),eN=ee(5993),eD=ee(81513).i8;(()=>{eh.trace(eu.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+eD),ew.setup(),eC.setup(),e_.setup(),eI.setup(),eO.setup(),eA.setup(),eN.setup()})()},982:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChildLoadBalancerHandler=void 0;let et=ee(27176),er=ee(33955),en="child_load_balancer_helper";class ei{constructor(g){this.channelControlHelper=g,this.currentChild=null,this.pendingChild=null,this.ChildPolicyHelper=class{constructor(g){this.parent=g,this.child=null}createSubchannel(g,$){return this.parent.channelControlHelper.createSubchannel(g,$)}updateState(g,$){var ee;if(this.calledByPendingChild()){if(g===er.ConnectivityState.CONNECTING)return;null===(ee=this.parent.currentChild)||void 0===ee||ee.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(g,$)}requestReresolution(){var g;let $=null!==(g=this.parent.pendingChild)&&void 0!==g?g:this.parent.currentChild;this.child===$&&this.parent.channelControlHelper.requestReresolution()}setChild(g){this.child=g}addChannelzChild(g){this.parent.channelControlHelper.addChannelzChild(g)}removeChannelzChild(g){this.parent.channelControlHelper.removeChannelzChild(g)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(g,$,ee){let er;if(null===this.currentChild||this.currentChild.getTypeName()!==$.getLoadBalancerName()){let g=new this.ChildPolicyHelper(this),ee=et.createLoadBalancer($,g);g.setChild(ee),null===this.currentChild?(this.currentChild=ee,er=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=ee,er=this.pendingChild)}else er=null===this.pendingChild?this.currentChild:this.pendingChild;er.updateAddressList(g,$,ee)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return en}}$.ChildLoadBalancerHandler=ei},81433:(g,$,ee)=>{"use strict";var et;Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.OutlierDetectionLoadBalancer=$.OutlierDetectionLoadBalancingConfig=void 0;let er=ee(33955),en=ee(32678),ei=ee(95330),es=ee(30345),eo=ee(78152),eu=ee(27176),eh=ee(982),ep=ee(17064),ef=ee(23906),eg=ee(21407),em=ee(97504),ey="outlier_detection";function ev(g){em.trace(en.LogVerbosity.DEBUG,ey,g)}let eS="outlier_detection",eT=(null!==(et=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==et?et:"true")==="true",eE={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},ew={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function eC(g,$,ee,et){if($ in g&&typeof g[$]!==ee){let er=et?`${et}.${$}`:$;throw Error(`outlier detection config ${er} parse error: expected ${ee}, got ${typeof g[$]}`)}}function e_(g,$,ee){let et=ee?`${ee}.${$}`:$;if($ in g){if(!ei.isDuration(g[$]))throw Error(`outlier detection config ${et} parse error: expected Duration, got ${typeof g[$]}`);if(!(g[$].seconds>=0&&g[$].seconds<=315576e6&&g[$].nanos>=0&&g[$].nanos<=999999999))throw Error(`outlier detection config ${et} parse error: values out of range for non-negative Duaration`)}}function eI(g,$,ee){let et=ee?`${ee}.${$}`:$;if(eC(g,$,"number",ee),$ in g&&!(g[$]>=0&&g[$]<=100))throw Error(`outlier detection config ${et} parse error: value out of range for percentage (0-100)`)}class eO{constructor(g,$,ee,et,er,en,ei){this.childPolicy=ei,this.intervalMs=null!=g?g:1e4,this.baseEjectionTimeMs=null!=$?$:3e4,this.maxEjectionTimeMs=null!=ee?ee:3e5,this.maxEjectionPercent=null!=et?et:10,this.successRateEjection=er?Object.assign(Object.assign({},eE),er):null,this.failurePercentageEjection=en?Object.assign(Object.assign({},ew),en):null}getLoadBalancerName(){return eS}toJsonObject(){return{interval:ei.msToDuration(this.intervalMs),base_ejection_time:ei.msToDuration(this.baseEjectionTimeMs),max_ejection_time:ei.msToDuration(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(g=>g.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(g){return new eO(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,g)}static createFromJson(g){var $;if(e_(g,"interval"),e_(g,"base_ejection_time"),e_(g,"max_ejection_time"),eI(g,"max_ejection_percent"),"success_rate_ejection"in g){if("object"!=typeof g.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");eC(g.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),eI(g.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),eC(g.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),eC(g.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in g){if("object"!=typeof g.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");eI(g.failure_percentage_ejection,"threshold","failure_percentage_ejection"),eI(g.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),eC(g.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),eC(g.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new eO(g.interval?ei.durationToMs(g.interval):null,g.base_ejection_time?ei.durationToMs(g.base_ejection_time):null,g.max_ejection_time?ei.durationToMs(g.max_ejection_time):null,null!==($=g.max_ejection_percent)&&void 0!==$?$:null,g.success_rate_ejection,g.failure_percentage_ejection,g.child_policy.map(eu.validateLoadBalancingConfig))}}$.OutlierDetectionLoadBalancingConfig=eO;class eA extends eg.BaseSubchannelWrapper{constructor(g,$){super(g),this.mapEntry=$,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=g.getConnectivityState(),g.addConnectivityStateListener((g,$,ee)=>{if(this.childSubchannelState=ee,!this.ejected)for(let g of this.stateListeners)g(this,$,ee)})}getConnectivityState(){return this.ejected?er.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(g){this.stateListeners.push(g)}removeConnectivityStateListener(g){let $=this.stateListeners.indexOf(g);$>-1&&this.stateListeners.splice($,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let g=this.mapEntry.subchannelWrappers.indexOf(this);g>=0&&this.mapEntry.subchannelWrappers.splice(g,1)}}eject(){for(let g of(this.ejected=!0,this.stateListeners))g(this,this.childSubchannelState,er.ConnectivityState.TRANSIENT_FAILURE)}uneject(){for(let g of(this.ejected=!1,this.stateListeners))g(this,er.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function eN(){return{success:0,failure:0}}class eD{constructor(){this.activeBucket=eN(),this.inactiveBucket=eN()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=eN()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class eR extends eo.BaseFilter{constructor(g){super(),this.callCounter=g}receiveTrailers(g){return g.code===en.Status.OK?this.callCounter.addSuccess():this.callCounter.addFailure(),g}}class ek{constructor(g){this.callCounter=g}createFilter(g){return new eR(this.callCounter)}}class ex{constructor(g,$){this.wrappedPicker=g,this.countCalls=$}pick(g){let $=this.wrappedPicker.pick(g);if($.pickResultType!==ep.PickResultType.COMPLETE)return $;{let g=$.subchannel,ee=g.getMapEntry();if(!ee)return Object.assign(Object.assign({},$),{subchannel:g.getWrappedSubchannel()});{let et=[...$.extraFilterFactories];return this.countCalls&&et.push(new ek(ee.counter)),Object.assign(Object.assign({},$),{subchannel:g.getWrappedSubchannel(),extraFilterFactories:et})}}}}class eP{constructor(g){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new eh.ChildLoadBalancerHandler(es.createChildChannelControlHelper(g,{createSubchannel:($,ee)=>{let et=g.createSubchannel($,ee),er=this.addressMap.get(ef.subchannelAddressToString($)),en=new eA(et,er);return(null==er?void 0:er.currentEjectionTimestamp)!==null&&en.eject(),null==er||er.subchannelWrappers.push(en),en},updateState:($,ee)=>{$===er.ConnectivityState.READY?g.updateState($,new ex(ee,this.isCountingEnabled())):g.updateState($,ee)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let g=0;for(let $ of this.addressMap.values())null!==$.currentEjectionTimestamp&&(g+=1);return 100*g/this.addressMap.size}runSuccessRateCheck(g){if(!this.latestConfig)return;let $=this.latestConfig.getSuccessRateEjectionConfig();if(!$)return;ev("Running success rate check");let ee=$.request_volume,et=0,er=[];for(let g of this.addressMap.values()){let $=g.counter.getLastSuccesses(),en=g.counter.getLastFailures();$+en>=ee&&(et+=1,er.push($/($+en)))}if(ev("Found "+et+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+er+"]"),et<$.minimum_hosts)return;let en=er.reduce((g,$)=>g+$)/er.length,ei=0;for(let g of er){let $=g-en;ei+=$*$}let es=Math.sqrt(ei/er.length),eo=en-$.stdev_factor/1e3*es;for(let[et,er]of(ev("stdev="+es+" ejectionThreshold="+eo),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let en=er.counter.getLastSuccesses(),ei=er.counter.getLastFailures();if(en+ei<ee)continue;let es=en/(en+ei);if(ev("Checking candidate "+et+" successRate="+es),es<eo){let ee=100*Math.random();ev("Candidate "+et+" randomNumber="+ee+" enforcement_percentage="+$.enforcement_percentage),ee<$.enforcement_percentage&&(ev("Ejecting candidate "+et),this.eject(er,g))}}}runFailurePercentageCheck(g){if(!this.latestConfig)return;let $=this.latestConfig.getFailurePercentageEjectionConfig();if(!$)return;ev("Running failure percentage check. threshold="+$.threshold+" request volume threshold="+$.request_volume);let ee=0;for(let g of this.addressMap.values())g.counter.getLastSuccesses()+g.counter.getLastFailures()>=$.request_volume&&(ee+=1);if(!(ee<$.minimum_hosts))for(let[ee,et]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let er=et.counter.getLastSuccesses(),en=et.counter.getLastFailures();if(ev("Candidate successes="+er+" failures="+en),!(er+en<$.request_volume)&&100*en/(en+er)>$.threshold){let er=100*Math.random();ev("Candidate "+ee+" randomNumber="+er+" enforcement_percentage="+$.enforcement_percentage),er<$.enforcement_percentage&&(ev("Ejecting candidate "+ee),this.eject(et,g))}}}eject(g,$){for(let $ of(g.currentEjectionTimestamp=new Date,g.ejectionTimeMultiplier+=1,g.subchannelWrappers))$.eject()}uneject(g){for(let $ of(g.currentEjectionTimestamp=null,g.subchannelWrappers))$.uneject()}switchAllBuckets(){for(let g of this.addressMap.values())g.counter.switchBuckets()}startTimer(g){this.ejectionTimer=setTimeout(()=>this.runChecks(),g)}runChecks(){let g=new Date;if(ev("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[$,ee]of(this.timerStartTime=g,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(g),this.runFailurePercentageCheck(g),this.addressMap.entries()))if(null===ee.currentEjectionTimestamp)ee.ejectionTimeMultiplier>0&&(ee.ejectionTimeMultiplier-=1);else{let g=this.latestConfig.getBaseEjectionTimeMs(),et=this.latestConfig.getMaxEjectionTimeMs(),er=new Date(ee.currentEjectionTimestamp.getTime());er.setMilliseconds(er.getMilliseconds()+Math.min(g*ee.ejectionTimeMultiplier,Math.max(g,et))),er<new Date&&(ev("Unejecting "+$),this.uneject(ee))}}updateAddressList(g,$,ee){if(!($ instanceof eO))return;let et=new Set;for(let $ of g)et.add(ef.subchannelAddressToString($));for(let g of et)this.addressMap.has(g)||(ev("Adding map entry for "+g),this.addressMap.set(g,{counter:new eD,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let g of this.addressMap.keys())et.has(g)||(ev("Removing map entry for "+g),this.addressMap.delete(g));let er=eu.getFirstUsableConfig($.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(g,er,ee),$.getSuccessRateEjectionConfig()||$.getFailurePercentageEjectionConfig()){if(this.timerStartTime){ev("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let g=$.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(g)}else ev("Starting new timer"),this.timerStartTime=new Date,this.startTimer($.getIntervalMs()),this.switchAllBuckets()}else for(let g of(ev("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(g),g.ejectionTimeMultiplier=0;this.latestConfig=$}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return eS}}function eM(){eT&&es.registerLoadBalancerType(eS,eP,eO)}$.OutlierDetectionLoadBalancer=eP,$.setup=eM},56170:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.PickFirstLoadBalancer=$.PickFirstLoadBalancingConfig=void 0;let et=ee(27176),er=ee(33955),en=ee(17064),ei=ee(23906),es=ee(97504),eo=ee(32678),eu="pick_first";function eh(g){es.trace(eo.LogVerbosity.DEBUG,eu,g)}let ep="pick_first",ef=250;class eg{getLoadBalancerName(){return ep}constructor(){}toJsonObject(){return{[ep]:{}}}static createFromJson(g){return new eg}}$.PickFirstLoadBalancingConfig=eg;class em{constructor(g){this.subchannel=g}pick(g){return{pickResultType:en.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,extraFilterFactories:[],onCallStarted:null}}}class ey{constructor(g){this.channelControlHelper=g,this.latestAddressList=[],this.subchannels=[],this.currentState=er.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.triedAllSubchannels=!1,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(g,$,ee)=>{if(this.subchannelStateCounts[$]-=1,this.subchannelStateCounts[ee]+=1,g===this.subchannels[this.currentSubchannelIndex]&&ee===er.ConnectivityState.TRANSIENT_FAILURE&&this.startNextSubchannelConnecting(),ee===er.ConnectivityState.READY){this.pickSubchannel(g);return}if(this.triedAllSubchannels&&this.subchannelStateCounts[er.ConnectivityState.IDLE]===this.subchannels.length){this.resetSubchannelList(!1),this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this));return}if(null===this.currentPick){if(this.triedAllSubchannels){let g;(g=this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?er.ConnectivityState.CONNECTING:this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?er.ConnectivityState.TRANSIENT_FAILURE:er.ConnectivityState.IDLE)!==this.currentState&&(g===er.ConnectivityState.TRANSIENT_FAILURE?this.updateState(g,new en.UnavailablePicker):this.updateState(g,new en.QueuePicker(this)))}else this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this))}},this.pickedSubchannelStateListener=(g,$,ee)=>{if(ee!==er.ConnectivityState.READY){if(this.currentPick=null,g.unref(),g.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(g.getChannelzRef()),this.subchannels.length>0){if(this.triedAllSubchannels){let g;(g=this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?er.ConnectivityState.CONNECTING:this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?er.ConnectivityState.TRANSIENT_FAILURE:er.ConnectivityState.IDLE)===er.ConnectivityState.TRANSIENT_FAILURE?this.updateState(g,new en.UnavailablePicker):this.updateState(g,new en.QueuePicker(this))}else this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this))}else this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this))}},this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(!this.triedAllSubchannels){for(let[g,$]of this.subchannels.entries())if(g>this.currentSubchannelIndex){let ee=$.getConnectivityState();if(ee===er.ConnectivityState.IDLE||ee===er.ConnectivityState.CONNECTING){this.startConnecting(g);return}}this.triedAllSubchannels=!0}}startConnecting(g){clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=g,this.subchannels[g].getConnectivityState()===er.ConnectivityState.IDLE&&(eh("Start connecting to subchannel with address "+this.subchannels[g].getAddress()),process.nextTick(()=>{this.subchannels[g].startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting()},ef)}pickSubchannel(g){eh("Pick subchannel with address "+g.getAddress()),null!==this.currentPick&&(this.currentPick.unref(),this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)),this.currentPick=g,this.updateState(er.ConnectivityState.READY,new em(g)),g.addConnectivityStateListener(this.pickedSubchannelStateListener),g.ref(),this.channelControlHelper.addChannelzChild(g.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout)}updateState(g,$){eh(er.ConnectivityState[this.currentState]+" -> "+er.ConnectivityState[g]),this.currentState=g,this.channelControlHelper.updateState(g,$)}resetSubchannelList(g=!0){for(let g of this.subchannels)g.removeConnectivityStateListener(this.subchannelStateListener),g.unref(),this.channelControlHelper.removeChannelzChild(g.getChannelzRef());this.currentSubchannelIndex=0,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[],g&&(this.triedAllSubchannels=!1)}connectToAddressList(){for(let g of(this.resetSubchannelList(),eh("Connect to address list "+this.latestAddressList.map(g=>ei.subchannelAddressToString(g))),this.subchannels=this.latestAddressList.map(g=>this.channelControlHelper.createSubchannel(g,{})),this.subchannels))g.ref(),this.channelControlHelper.addChannelzChild(g.getChannelzRef());for(let g of this.subchannels)if(g.addConnectivityStateListener(this.subchannelStateListener),this.subchannelStateCounts[g.getConnectivityState()]+=1,g.getConnectivityState()===er.ConnectivityState.READY){this.pickSubchannel(g),this.resetSubchannelList();return}for(let[g,$]of this.subchannels.entries()){let ee=$.getConnectivityState();if(ee===er.ConnectivityState.IDLE||ee===er.ConnectivityState.CONNECTING){this.startConnecting(g),null===this.currentPick&&this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this));return}}null===this.currentPick&&this.updateState(er.ConnectivityState.TRANSIENT_FAILURE,new en.UnavailablePicker)}updateAddressList(g,$){0!==this.subchannels.length&&this.latestAddressList.every(($,ee)=>g[ee]===$)||(this.latestAddressList=g,this.connectToAddressList())}exitIdle(){for(let g of((this.currentState===er.ConnectivityState.IDLE||this.triedAllSubchannels)&&this.channelControlHelper.requestReresolution(),this.subchannels))g.startConnecting();this.currentState===er.ConnectivityState.IDLE&&this.latestAddressList.length>0&&this.connectToAddressList()}resetBackoff(){}destroy(){if(this.resetSubchannelList(),null!==this.currentPick){let g=this.currentPick;g.unref(),g.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(g.getChannelzRef())}}getTypeName(){return ep}}function ev(){et.registerLoadBalancerType(ep,ey,eg),et.registerDefaultLoadBalancerType(ep)}$.PickFirstLoadBalancer=ey,$.setup=ev},99438:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.RoundRobinLoadBalancer=void 0;let et=ee(27176),er=ee(33955),en=ee(17064),ei=ee(23906),es=ee(97504),eo=ee(32678),eu="round_robin";function eh(g){es.trace(eo.LogVerbosity.DEBUG,eu,g)}let ep="round_robin";class ef{getLoadBalancerName(){return ep}constructor(){}toJsonObject(){return{[ep]:{}}}static createFromJson(g){return new ef}}class eg{constructor(g,$=0){this.subchannelList=g,this.nextIndex=$}pick(g){let $=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:en.PickResultType.COMPLETE,subchannel:$,status:null,extraFilterFactories:[],onCallStarted:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class em{constructor(g){this.channelControlHelper=g,this.subchannels=[],this.currentState=er.ConnectivityState.IDLE,this.currentReadyPicker=null,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(g,$,ee)=>{this.subchannelStateCounts[$]-=1,this.subchannelStateCounts[ee]+=1,this.calculateAndUpdateState(),(ee===er.ConnectivityState.TRANSIENT_FAILURE||ee===er.ConnectivityState.IDLE)&&(this.channelControlHelper.requestReresolution(),g.startConnecting())}}calculateAndUpdateState(){if(this.subchannelStateCounts[er.ConnectivityState.READY]>0){let g=this.subchannels.filter(g=>g.getConnectivityState()===er.ConnectivityState.READY),$=0;null!==this.currentReadyPicker&&($=g.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&($=0),this.updateState(er.ConnectivityState.READY,new eg(g,$))}else this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this)):this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?this.updateState(er.ConnectivityState.TRANSIENT_FAILURE,new en.UnavailablePicker):this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this))}updateState(g,$){eh(er.ConnectivityState[this.currentState]+" -> "+er.ConnectivityState[g]),g===er.ConnectivityState.READY?this.currentReadyPicker=$:this.currentReadyPicker=null,this.currentState=g,this.channelControlHelper.updateState(g,$)}resetSubchannelList(){for(let g of this.subchannels)g.removeConnectivityStateListener(this.subchannelStateListener),g.unref(),this.channelControlHelper.removeChannelzChild(g.getChannelzRef());this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[]}updateAddressList(g,$){for(let $ of(this.resetSubchannelList(),eh("Connect to address list "+g.map(g=>ei.subchannelAddressToString(g))),this.subchannels=g.map(g=>this.channelControlHelper.createSubchannel(g,{})),this.subchannels)){$.ref(),$.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild($.getChannelzRef());let g=$.getConnectivityState();this.subchannelStateCounts[g]+=1,(g===er.ConnectivityState.IDLE||g===er.ConnectivityState.TRANSIENT_FAILURE)&&$.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let g of this.subchannels)g.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return ep}}function ey(){et.registerLoadBalancerType(ep,em,ef)}$.RoundRobinLoadBalancer=em,$.setup=ey},27176:(g,$)=>{"use strict";function ee(g,$){var ee,et,er,en,ei,es,eo,eu,eh,ep;return{createSubchannel:null!==(et=null===(ee=$.createSubchannel)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g.createSubchannel.bind(g),updateState:null!==(en=null===(er=$.updateState)||void 0===er?void 0:er.bind($))&&void 0!==en?en:g.updateState.bind(g),requestReresolution:null!==(es=null===(ei=$.requestReresolution)||void 0===ei?void 0:ei.bind($))&&void 0!==es?es:g.requestReresolution.bind(g),addChannelzChild:null!==(eu=null===(eo=$.addChannelzChild)||void 0===eo?void 0:eo.bind($))&&void 0!==eu?eu:g.addChannelzChild.bind(g),removeChannelzChild:null!==(ep=null===(eh=$.removeChannelzChild)||void 0===eh?void 0:eh.bind($))&&void 0!==ep?ep:g.removeChannelzChild.bind(g)}}Object.defineProperty($,"__esModule",{value:!0}),$.validateLoadBalancingConfig=$.getFirstUsableConfig=$.isLoadBalancerNameRegistered=$.createLoadBalancer=$.registerDefaultLoadBalancerType=$.registerLoadBalancerType=$.createChildChannelControlHelper=void 0,$.createChildChannelControlHelper=ee;let et={},er=null;function en(g,$,ee){et[g]={LoadBalancer:$,LoadBalancingConfig:ee}}function ei(g){er=g}function es(g,$){let ee=g.getLoadBalancerName();return ee in et?new et[ee].LoadBalancer($):null}function eo(g){return g in et}function eu(g,$=!1){for(let $ of g)if($.getLoadBalancerName() in et)return $;return $&&er?new et[er].LoadBalancingConfig:null}function eh(g){if(!(null!==g&&"object"==typeof g))throw Error("Load balancing config must be an object");let $=Object.keys(g);if(1!==$.length)throw Error("Provided load balancing config has multiple conflicting entries");let ee=$[0];if(ee in et)return et[ee].LoadBalancingConfig.createFromJson(g[ee]);throw Error(`Unrecognized load balancing config name ${ee}`)}$.registerLoadBalancerType=en,$.registerDefaultLoadBalancerType=ei,$.createLoadBalancer=es,$.isLoadBalancerNameRegistered=eo,$.getFirstUsableConfig=eu,$.validateLoadBalancingConfig=eh},97504:(g,$,ee)=>{"use strict";var et,er,en,ei;Object.defineProperty($,"__esModule",{value:!0}),$.isTracerEnabled=$.trace=$.log=$.setLoggerVerbosity=$.setLogger=$.getLogger=void 0;let es=ee(32678),eo={error:(g,...$)=>{console.error("E "+g,...$)},info:(g,...$)=>{console.error("I "+g,...$)},debug:(g,...$)=>{console.error("D "+g,...$)}},eu=es.LogVerbosity.ERROR;switch((null!==(er=null!==(et=process.env.GRPC_NODE_VERBOSITY)&&void 0!==et?et:process.env.GRPC_VERBOSITY)&&void 0!==er?er:"").toUpperCase()){case"DEBUG":eu=es.LogVerbosity.DEBUG;break;case"INFO":eu=es.LogVerbosity.INFO;break;case"ERROR":eu=es.LogVerbosity.ERROR;break;case"NONE":eu=es.LogVerbosity.NONE}$.getLogger=()=>eo,$.setLogger=g=>{eo=g},$.setLoggerVerbosity=g=>{eu=g},$.log=(g,...$)=>{let ee;if(g>=eu){switch(g){case es.LogVerbosity.DEBUG:ee=eo.debug;break;case es.LogVerbosity.INFO:ee=eo.info;break;case es.LogVerbosity.ERROR:ee=eo.error}ee||(ee=eo.error),ee&&ee.bind(eo)(...$)}};let eh=null!==(ei=null!==(en=process.env.GRPC_NODE_TRACE)&&void 0!==en?en:process.env.GRPC_TRACE)&&void 0!==ei?ei:"",ep=new Set,ef=new Set;for(let g of eh.split(","))g.startsWith("-")?ef.add(g.substring(1)):ep.add(g);let eg=ep.has("all");function em(g,ee,et){ey(ee)&&$.log(g,new Date().toISOString()+" | "+ee+" | "+et)}function ey(g){return!ef.has(g)&&(eg||ep.has(g))}$.trace=em,$.isTracerEnabled=ey},35085:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.loadPackageDefinition=$.makeClientConstructor=void 0;let et=ee(69800),er={unary:et.Client.prototype.makeUnaryRequest,server_stream:et.Client.prototype.makeServerStreamRequest,client_stream:et.Client.prototype.makeClientStreamRequest,bidi:et.Client.prototype.makeBidiStreamRequest};function en(g){return["__proto__","prototype","constructor"].includes(g)}function ei(g,$,ee){ee||(ee={});class ei extends et.Client{}return Object.keys(g).forEach($=>{let ee;if(en($))return;let et=g[$];if("string"==typeof $&&"$"===$.charAt(0))throw Error("Method names cannot start with $");ee=et.requestStream?et.responseStream?"bidi":"client_stream":et.responseStream?"server_stream":"unary";let eo=et.requestSerialize,eu=et.responseDeserialize,eh=es(er[ee],et.path,eo,eu);ei.prototype[$]=eh,Object.assign(ei.prototype[$],et),et.originalName&&!en(et.originalName)&&(ei.prototype[et.originalName]=ei.prototype[$])}),ei.service=g,ei.serviceName=$,ei}function es(g,$,ee,et){return function(...er){return g.call(this,$,ee,et,...er)}}function eo(g){return"format"in g}function eu(g){let $={};for(let ee in g)if(Object.prototype.hasOwnProperty.call(g,ee)){let et=g[ee],er=ee.split(".");if(er.some(g=>en(g)))continue;let es=er[er.length-1],eu=$;for(let g of er.slice(0,-1))eu[g]||(eu[g]={}),eu=eu[g];eo(et)?eu[es]=et:eu[es]=ei(et,es,{})}return $}$.makeClientConstructor=ei,$.loadPackageDefinition=eu},25538:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.MaxMessageSizeFilterFactory=$.MaxMessageSizeFilter=void 0;let et=ee(78152),er=ee(32678);class en extends et.BaseFilter{constructor(g,$){super(),this.options=g,this.callStream=$,this.maxSendMessageSize=er.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=er.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in g&&(this.maxSendMessageSize=g["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in g&&(this.maxReceiveMessageSize=g["grpc.max_receive_message_length"])}async sendMessage(g){if(-1===this.maxSendMessageSize)return g;{let $=await g;return $.message.length>this.maxSendMessageSize?(this.callStream.cancelWithStatus(er.Status.RESOURCE_EXHAUSTED,`Sent message larger than max (${$.message.length} vs. ${this.maxSendMessageSize})`),Promise.reject("Message too large")):$}}async receiveMessage(g){if(-1===this.maxReceiveMessageSize)return g;{let $=await g;return $.length>this.maxReceiveMessageSize?(this.callStream.cancelWithStatus(er.Status.RESOURCE_EXHAUSTED,`Received message larger than max (${$.length} vs. ${this.maxReceiveMessageSize})`),Promise.reject("Message too large")):$}}}$.MaxMessageSizeFilter=en;class ei{constructor(g){this.options=g}createFilter(g){return new en(this.options,g)}}$.MaxMessageSizeFilterFactory=ei},62252:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Metadata=void 0;let et=ee(97504),er=ee(32678),en=/^[0-9a-z_.-]+$/,ei=/^[ -~]*$/;function es(g){return en.test(g)}function eo(g){return ei.test(g)}function eu(g){return g.endsWith("-bin")}function eh(g){return!g.startsWith("grpc-")}function ep(g){return g.toLowerCase()}function ef(g,$){if(!es(g))throw Error('Metadata key "'+g+'" contains illegal characters');if(null!=$){if(eu(g)){if(!Buffer.isBuffer($))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer($))throw Error("keys that don't end with '-bin' must have String values");if(!eo($))throw Error('Metadata string value "'+$+'" contains illegal characters')}}}class eg{constructor(g={}){this.internalRepr=new Map,this.options=g}set(g,$){ef(g=ep(g),$),this.internalRepr.set(g,[$])}add(g,$){ef(g=ep(g),$);let ee=this.internalRepr.get(g);void 0===ee?this.internalRepr.set(g,[$]):ee.push($)}remove(g){g=ep(g),this.internalRepr.delete(g)}get(g){return g=ep(g),this.internalRepr.get(g)||[]}getMap(){let g={};for(let[$,ee]of this.internalRepr)if(ee.length>0){let et=ee[0];g[$]=Buffer.isBuffer(et)?Buffer.from(et):et}return g}clone(){let g=new eg(this.options),$=g.internalRepr;for(let[g,ee]of this.internalRepr){let et=ee.map(g=>Buffer.isBuffer(g)?Buffer.from(g):g);$.set(g,et)}return g}merge(g){for(let[$,ee]of g.internalRepr){let g=(this.internalRepr.get($)||[]).concat(ee);this.internalRepr.set($,g)}}setOptions(g){this.options=g}getOptions(){return this.options}toHttp2Headers(){let g={};for(let[$,ee]of this.internalRepr)g[$]=ee.map(em);return g}_getCoreRepresentation(){return this.internalRepr}toJSON(){let g={};for(let[$,ee]of this.internalRepr)g[$]=ee;return g}static fromHttp2Headers(g){let $=new eg;for(let ee of Object.keys(g)){if(":"===ee.charAt(0))continue;let en=g[ee];try{eu(ee)?Array.isArray(en)?en.forEach(g=>{$.add(ee,Buffer.from(g,"base64"))}):void 0!==en&&(eh(ee)?en.split(",").forEach(g=>{$.add(ee,Buffer.from(g.trim(),"base64"))}):$.add(ee,Buffer.from(en,"base64"))):Array.isArray(en)?en.forEach(g=>{$.add(ee,g)}):void 0!==en&&$.add(ee,en)}catch($){let g=`Failed to add metadata entry ${ee}: ${en}. ${$.message}. For more information see https://github.com/grpc/grpc-node/issues/1173`;et.log(er.LogVerbosity.ERROR,g)}}return $}}$.Metadata=eg;let em=g=>Buffer.isBuffer(g)?g.toString("base64"):g},17064:(g,$,ee)=>{"use strict";var et;Object.defineProperty($,"__esModule",{value:!0}),$.QueuePicker=$.UnavailablePicker=$.PickResultType=void 0;let er=ee(62252),en=ee(32678);!function(g){g[g.COMPLETE=0]="COMPLETE",g[g.QUEUE=1]="QUEUE",g[g.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",g[g.DROP=3]="DROP"}(et=$.PickResultType||($.PickResultType={}));class ei{constructor(g){void 0!==g?this.status=g:this.status={code:en.Status.UNAVAILABLE,details:"No connection established",metadata:new er.Metadata}}pick(g){return{pickResultType:et.TRANSIENT_FAILURE,subchannel:null,status:this.status,extraFilterFactories:[],onCallStarted:null}}}$.UnavailablePicker=ei;class es{constructor(g){this.loadBalancer=g,this.calledExitIdle=!1}pick(g){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:et.QUEUE,subchannel:null,status:null,extraFilterFactories:[],onCallStarted:null}}}$.QueuePicker=es},54605:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(40492),er=ee(9523),en=ee(73837),ei=ee(26262),es=ee(32678),eo=ee(62252),eu=ee(97504),eh=ee(32678),ep=ee(18429),ef=ee(41808),eg=ee(84934),em="dns_resolver";function ey(g){eu.trace(eh.LogVerbosity.DEBUG,em,g)}let ev=443,eS=3e4,eT=en.promisify(er.resolveTxt),eE=en.promisify(er.lookup);function ew(...g){let $=[];for(let ee=0;ee<Math.max.apply(null,g.map(g=>g.length));ee++)for(let et of g)ee<et.length&&$.push(et[ee]);return $}class eC{constructor(g,$,ee){var et,er,en;this.target=g,this.listener=$,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,ey("Resolver constructed for target "+ep.uriToString(g));let ei=ep.splitHostPort(g.path);null===ei?(this.ipResult=null,this.dnsHostname=null,this.port=null):ef.isIPv4(ei.host)||ef.isIPv6(ei.host)?(this.ipResult=[{host:ei.host,port:null!==(et=ei.port)&&void 0!==et?et:ev}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=ei.host,this.port=null!==(er=ei.port)&&void 0!==er?er:ev),this.percentage=100*Math.random(),this.defaultResolutionError={code:es.Status.UNAVAILABLE,details:`Name resolution failed for target ${ep.uriToString(this.target)}`,metadata:new eo.Metadata};let eu={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoff=new eg.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},eu),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(en=ee["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==en?en:eS,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){ey("Returning IP address for target "+ep.uriToString(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.backoff.stop(),this.backoff.reset();return}if(null===this.dnsHostname)ey("Failed to parse DNS address "+ep.uriToString(this.target)),setImmediate(()=>{this.listener.onError({code:es.Status.UNAVAILABLE,details:`Failed to parse DNS address ${ep.uriToString(this.target)}`,metadata:new eo.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;ey("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let g=this.dnsHostname;this.pendingLookupPromise=eE(g,{all:!0}),this.pendingLookupPromise.then(g=>{this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let $=g.filter(g=>4===g.family),ee=g.filter(g=>6===g.family);this.latestLookupResult=ew(ee,$).map(g=>({host:g.address,port:+this.port}));let et="["+this.latestLookupResult.map(g=>g.host+":"+g.port).join(",")+"]";if(ey("Resolved addresses for target "+ep.uriToString(this.target)+": "+et),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},g=>{ey("Resolution error for target "+ep.uriToString(this.target)+": "+g.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError)}),null===this.pendingTxtPromise&&(this.pendingTxtPromise=eT(g),this.pendingTxtPromise.then(g=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=ei.extractAndSelectServiceConfig(g,this.percentage)}catch(g){this.latestServiceConfigError={code:es.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new eo.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},g=>{}))}}startNextResolutionTimer(){var g,$;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===($=(g=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===$?void 0:$.call(g),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.startResolution(),this.backoff.runOnce(),this.startNextResolutionTimer())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?this.continueResolving=!0:this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.stop(),this.stopNextResolutionTimer()}static getDefaultAuthority(g){return g.path}}function e_(){et.registerResolver("dns",eC),et.registerDefaultScheme("dns")}$.setup=e_},53562:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(41808),er=ee(32678),en=ee(62252),ei=ee(40492),es=ee(18429),eo=ee(97504),eu="ip_resolver";function eh(g){eo.trace(er.LogVerbosity.DEBUG,eu,g)}let ep="ipv4",ef="ipv6",eg=443;class em{constructor(g,$,ee){var ei;this.target=g,this.listener=$,this.addresses=[],this.error=null,eh("Resolver constructed for target "+es.uriToString(g));let eo=[];if(!(g.scheme===ep||g.scheme===ef)){this.error={code:er.Status.UNAVAILABLE,details:`Unrecognized scheme ${g.scheme} in IP resolver`,metadata:new en.Metadata};return}for(let $ of g.path.split(",")){let ee=es.splitHostPort($);if(null===ee||g.scheme===ep&&!et.isIPv4(ee.host)||g.scheme===ef&&!et.isIPv6(ee.host)){this.error={code:er.Status.UNAVAILABLE,details:`Failed to parse ${g.scheme} address ${$}`,metadata:new en.Metadata};return}eo.push({host:ee.host,port:null!==(ei=ee.port)&&void 0!==ei?ei:eg})}this.addresses=eo,eh("Parsed "+g.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})})}destroy(){}static getDefaultAuthority(g){return g.path.split(",")[0]}}function ey(){ei.registerResolver(ep,em),ei.registerResolver(ef,em)}$.setup=ey},45862:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(40492);class er{constructor(g,$,ee){let et;this.listener=$,this.addresses=[],et=""===g.authority?"/"+g.path:g.path,this.addresses=[{path:et}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(g){return"localhost"}}function en(){et.registerResolver("unix",er)}$.setup=en},40492:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.mapUriDefaultScheme=$.getDefaultAuthority=$.createResolver=$.registerDefaultScheme=$.registerResolver=void 0;let et=ee(18429),er={},en=null;function ei(g,$){er[g]=$}function es(g){en=g}function eo(g,$,ee){if(void 0!==g.scheme&&g.scheme in er)return new er[g.scheme](g,$,ee);throw Error(`No resolver could be created for target ${et.uriToString(g)}`)}function eu(g){if(void 0!==g.scheme&&g.scheme in er)return er[g.scheme].getDefaultAuthority(g);throw Error(`Invalid target ${et.uriToString(g)}`)}function eh(g){return void 0!==g.scheme&&g.scheme in er?g:null!==en?{scheme:en,authority:void 0,path:et.uriToString(g)}:null}$.registerResolver=ei,$.registerDefaultScheme=es,$.createResolver=eo,$.getDefaultAuthority=eu,$.mapUriDefaultScheme=eh},82380:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ResolvingLoadBalancer=void 0;let et=ee(27176),er=ee(26262),en=ee(33955),ei=ee(40492),es=ee(17064),eo=ee(84934),eu=ee(32678),eh=ee(62252),ep=ee(97504),ef=ee(32678),eg=ee(18429),em=ee(982),ey="resolving_load_balancer";function ev(g){ep.trace(ef.LogVerbosity.DEBUG,ey,g)}function eS(g){return function($,ee){var et,er;let en=$.split("/").filter(g=>g.length>0),ei=null!==(et=en[0])&&void 0!==et?et:"",es=null!==(er=en[1])&&void 0!==er?er:"";if(g&&g.methodConfig){for(let $ of g.methodConfig)for(let g of $.name)if(g.service===ei&&(void 0===g.method||g.method===es))return{methodConfig:$,pickInformation:{},status:eu.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:eu.Status.OK,dynamicFilterFactories:[]}}}class eT{constructor(g,$,ee,ep,ef){this.target=g,this.channelControlHelper=$,this.channelOptions=ee,this.onSuccessfulResolution=ep,this.onFailedResolution=ef,this.latestChildState=en.ConnectivityState.IDLE,this.latestChildPicker=new es.QueuePicker(this),this.currentState=en.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,ee["grpc.service_config"]?this.defaultServiceConfig=er.validateServiceConfig(JSON.parse(ee["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(en.ConnectivityState.IDLE,new es.QueuePicker(this)),this.childLoadBalancer=new em.ChildLoadBalancerHandler({createSubchannel:$.createSubchannel.bind($),requestReresolution:()=>{this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()},updateState:(g,$)=>{this.latestChildState=g,this.latestChildPicker=$,this.updateState(g,$)},addChannelzChild:$.addChannelzChild.bind($),removeChannelzChild:$.removeChannelzChild.bind($)}),this.innerResolver=ei.createResolver(g,{onSuccessfulResolution:(g,$,ee,er,en)=>{var ei;let es=null;null===$?null===ee?(this.previousServiceConfig=null,es=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(ee):es=this.previousServiceConfig:(es=$,this.previousServiceConfig=$);let eo=null!==(ei=null==es?void 0:es.loadBalancingConfig)&&void 0!==ei?ei:[],ep=et.getFirstUsableConfig(eo,!0);if(null===ep){this.handleResolutionFailure({code:eu.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new eh.Metadata});return}this.childLoadBalancer.updateAddressList(g,ep,en);let ef=null!=es?es:this.defaultServiceConfig;this.onSuccessfulResolution(null!=er?er:eS(ef))},onError:g=>{this.handleResolutionFailure(g)}},ee);let eg={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new eo.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},eg),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===en.ConnectivityState.IDLE&&this.updateState(en.ConnectivityState.CONNECTING,new es.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(g,$){ev(eg.uriToString(this.target)+" "+en.ConnectivityState[this.currentState]+" -> "+en.ConnectivityState[g]),g===en.ConnectivityState.IDLE&&($=new es.QueuePicker(this)),this.currentState=g,this.channelControlHelper.updateState(g,$)}handleResolutionFailure(g){this.latestChildState===en.ConnectivityState.IDLE&&(this.updateState(en.ConnectivityState.TRANSIENT_FAILURE,new es.UnavailablePicker(g)),this.onFailedResolution(g))}exitIdle(){(this.currentState===en.ConnectivityState.IDLE||this.currentState===en.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(g,$){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.updateState(en.ConnectivityState.SHUTDOWN,new es.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}$.ResolvingLoadBalancer=eT},37061:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Http2ServerCallStream=$.ServerDuplexStreamImpl=$.ServerWritableStreamImpl=$.ServerReadableStreamImpl=$.ServerUnaryCallImpl=void 0;let et=ee(82361),er=ee(85158),en=ee(12781),ei=ee(59796),es=ee(73837),eo=ee(32678),eu=ee(62252),eh=ee(38326),ep=ee(97504),ef="server_call",eg=es.promisify(ei.unzip),em=es.promisify(ei.inflate);function ey(g){ep.trace(eo.LogVerbosity.DEBUG,ef,g)}let ev="grpc-message",eS="grpc-status",eT="grpc-timeout",eE=/(\d{1,8})\s*([HMSmun])/,ew={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},eC={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity",[er.constants.HTTP2_HEADER_STATUS]:er.constants.HTTP_STATUS_OK,[er.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},e_={waitForTrailers:!0};class eI extends et.EventEmitter{constructor(g,$,ee){super(),this.call=g,this.metadata=$,this.request=ee,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}$.ServerUnaryCallImpl=eI;class eO extends en.Readable{constructor(g,$,ee,et){super({objectMode:!0}),this.call=g,this.metadata=$,this.deserialize=ee,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,et)}_read(g){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}$.ServerReadableStreamImpl=eO;class eA extends en.Writable{constructor(g,$,ee,et){super({objectMode:!0}),this.call=g,this.metadata=$,this.serialize=ee,this.request=et,this.cancelled=!1,this.trailingMetadata=new eu.Metadata,this.call.setupSurfaceCall(this),this.on("error",g=>{this.call.sendError(g),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(g,$,ee){try{let $=this.call.serializeMessage(g);if(!this.call.write($)){this.call.once("drain",ee);return}}catch(g){g.code=eo.Status.INTERNAL,this.emit("error",g)}ee()}_final(g){this.call.sendStatus({code:eo.Status.OK,details:"OK",metadata:this.trailingMetadata}),g(null)}end(g){return g&&(this.trailingMetadata=g),super.end()}}$.ServerWritableStreamImpl=eA;class eN extends en.Duplex{constructor(g,$,ee,et,er){super({objectMode:!0}),this.call=g,this.metadata=$,this.serialize=ee,this.deserialize=et,this.cancelled=!1,this.trailingMetadata=new eu.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,er),this.on("error",g=>{this.call.sendError(g),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(g){return g&&(this.trailingMetadata=g),super.end()}}$.ServerDuplexStreamImpl=eN,eN.prototype._read=eO.prototype._read,eN.prototype._write=eA.prototype._write,eN.prototype._final=eA.prototype._final;class eD extends et.EventEmitter{constructor(g,$,ee){super(),this.stream=g,this.handler=$,this.options=ee,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=eo.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=eo.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",g=>{}),this.stream.once("close",()=>{var g;ey("Request to method "+(null===(g=this.handler)||void 0===g?void 0:g.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:eo.Status.CANCELLED,details:"Cancelled by client",metadata:null}))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in ee&&(this.maxSendMessageSize=ee["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in ee&&(this.maxReceiveMessageSize=ee["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(g,$){return"deflate"===$?em(g.subarray(5)):"gzip"===$?eg(g.subarray(5)):"identity"===$?g.subarray(5):Promise.reject({code:eo.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${$}"`})}sendMetadata(g){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let $=g?g.toHttp2Headers():null,ee=Object.assign(Object.assign({},eC),$);this.stream.respond(ee,e_)}receiveMetadata(g){let $=eu.Metadata.fromHttp2Headers(g);ep.isTracerEnabled(ef)&&ey("Request to "+this.handler.path+" received headers "+JSON.stringify($.toJSON()));let ee=$.get(eT);if(ee.length>0){let g=ee[0].toString().match(eE);if(null===g){let g=Error("Invalid deadline");return g.code=eo.Status.OUT_OF_RANGE,this.sendError(g),$}let et=+g[1]*ew[g[2]]|0,er=new Date;this.deadline=er.setMilliseconds(er.getMilliseconds()+et),this.deadlineTimer=setTimeout(eR,et,this),$.remove(eT)}return $.remove(er.constants.HTTP2_HEADER_ACCEPT_ENCODING),$.remove(er.constants.HTTP2_HEADER_TE),$.remove(er.constants.HTTP2_HEADER_CONTENT_TYPE),$.remove("grpc-accept-encoding"),$}receiveUnaryMessage(g,$){let{stream:ee}=this,et=0,er=this,en=[],ei=this.maxReceiveMessageSize;function es(g){if(et+=g.byteLength,-1!==ei&&et>ei){ee.removeListener("data",es),ee.removeListener("end",eu),ee.removeListener("error",eu),$({code:eo.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${et} vs. ${ei})`});return}en.push(g)}function eu(ei){if(ee.removeListener("data",es),ee.removeListener("end",eu),ee.removeListener("error",eu),void 0!==ei){$({code:eo.Status.INTERNAL,details:ei.message});return}if(0===et){$({code:eo.Status.INTERNAL,details:"received empty unary message"});return}er.emit("receiveMessage");let eh=Buffer.concat(en,et),ep=1===eh.readUInt8(0)?g:"identity",ef=er.getDecompressedMessage(eh,ep);if(Buffer.isBuffer(ef)){er.safeDeserializeMessage(ef,$);return}ef.then(g=>er.safeDeserializeMessage(g,$),ee=>$(ee.code?ee:{code:eo.Status.INTERNAL,details:`Received "grpc-encoding" header "${g}" but ${g} decompression failed`}))}ee.on("data",es),ee.on("end",eu),ee.on("error",eu)}safeDeserializeMessage(g,$){try{$(null,this.deserializeMessage(g))}catch(g){g.code=eo.Status.INTERNAL,$(g)}}serializeMessage(g){let $=this.handler.serialize(g),ee=$.byteLength,et=Buffer.allocUnsafe(ee+5);return et.writeUInt8(0,0),et.writeUInt32BE(ee,1),$.copy(et,5),et}deserializeMessage(g){return this.handler.deserialize(g)}async sendUnaryMessage(g,$,ee,et){if(!this.checkCancelled()){if(void 0===ee&&(ee=null),g){!Object.prototype.hasOwnProperty.call(g,"metadata")&&ee&&(g.metadata=ee),this.sendError(g);return}try{let g=this.serializeMessage($);this.write(g),this.sendStatus({code:eo.Status.OK,details:"OK",metadata:ee})}catch(g){g.code=eo.Status.INTERNAL,this.sendError(g)}}}sendStatus(g){var $;this.emit("callEnd",g.code),this.emit("streamEnd",g.code===eo.Status.OK),!this.checkCancelled()&&(ey("Request to method "+(null===($=this.handler)||void 0===$?void 0:$.path)+" ended with status code: "+eo.Status[g.code]+" details: "+g.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var $;let ee=Object.assign({[eS]:g.code,[ev]:encodeURI(g.details)},null===($=g.metadata)||void 0===$?void 0:$.toHttp2Headers());this.stream.sendTrailers(ee),this.statusSent=!0}),this.sendMetadata(),this.stream.end()))}sendError(g){let $={code:eo.Status.UNKNOWN,details:"message"in g?g.message:"Unknown Error",metadata:"metadata"in g&&void 0!==g.metadata?g.metadata:null};"code"in g&&"number"==typeof g.code&&Number.isInteger(g.code)&&($.code=g.code,"details"in g&&"string"==typeof g.details&&($.details=g.details)),this.sendStatus($)}write(g){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&g.length>this.maxSendMessageSize){this.sendError({code:eo.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${g.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(g)}}resume(){this.stream.resume()}setupSurfaceCall(g){this.once("cancelled",$=>{g.cancelled=!0,g.emit("cancelled",$)}),this.once("callEnd",$=>g.emit("callEnd",$))}setupReadable(g,$){let ee=new eh.StreamDecoder,et=!1,er=!1,en=!1,ei=()=>{en||!et||er||(en=!0,this.pushOrBufferMessage(g,null))};this.stream.on("data",async et=>{let en=ee.write(et);for(let ee of(er=!0,this.stream.pause(),en)){if(-1!==this.maxReceiveMessageSize&&ee.length>this.maxReceiveMessageSize){this.sendError({code:eo.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${ee.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let et=1===ee.readUInt8(0)?$:"identity",er=await this.getDecompressedMessage(ee,et);if(!er)return;this.pushOrBufferMessage(g,er)}er=!1,this.stream.resume(),ei()}),this.stream.once("end",()=>{et=!0,ei()})}consumeUnpushedMessages(g){for(this.canPush=!0;this.messagesToPush.length>0;){let $=this.messagesToPush.shift(),ee=g.push($);if(null===$||!1===ee){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(g,$){this.isPushPending?this.bufferedMessages.push($):this.pushMessage(g,$)}async pushMessage(g,$){if(null===$){ey("Received end of stream"),this.canPush?g.push(null):this.messagesToPush.push(null);return}ey("Received message of length "+$.length),this.isPushPending=!0;try{let ee=await this.deserializeMessage($);this.canPush?g.push(ee)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(ee)}catch($){this.bufferedMessages.length=0,"code"in $&&"number"==typeof $.code&&Number.isInteger($.code)&&$.code>=eo.Status.OK&&$.code<=eo.Status.UNAUTHENTICATED||($.code=eo.Status.INTERNAL),g.emit("error",$)}this.isPushPending=!1,this.bufferedMessages.length>0&&this.pushMessage(g,this.bufferedMessages.shift())}getPeer(){let g=this.stream.session.socket;return g.remoteAddress?g.remotePort?`${g.remoteAddress}:${g.remotePort}`:g.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function eR(g){let $=Error("Deadline exceeded");$.code=eo.Status.DEADLINE_EXCEEDED,g.sendError($),g.cancelled=!0,g.emit("cancelled","deadline")}$.Http2ServerCallStream=eD},74181:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ServerCredentials=void 0;let et=ee(43009);class er{static createInsecure(){return new en}static createSsl(g,$,ee=!1){if(null!==g&&!Buffer.isBuffer(g))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray($))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof ee)throw TypeError("checkClientCertificate must be a boolean");let er=[],en=[];for(let g=0;g<$.length;g++){let ee=$[g];if(null===ee||"object"!=typeof ee)throw TypeError(`keyCertPair[${g}] must be an object`);if(!Buffer.isBuffer(ee.private_key))throw TypeError(`keyCertPair[${g}].private_key must be a Buffer`);if(!Buffer.isBuffer(ee.cert_chain))throw TypeError(`keyCertPair[${g}].cert_chain must be a Buffer`);er.push(ee.cert_chain),en.push(ee.private_key)}return new ei({ca:g||et.getDefaultRootsData()||void 0,cert:er,key:en,requestCert:ee,ciphers:et.CIPHER_SUITES})}}$.ServerCredentials=er;class en extends er{_isSecure(){return!1}_getSettings(){return null}}class ei extends er{constructor(g){super(),this.options=g}_isSecure(){return!0}_getSettings(){return this.options}}},57691:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Server=void 0;let et=ee(85158),er=ee(32678),en=ee(37061),ei=ee(74181),es=ee(40492),eo=ee(97504),eu=ee(23906),eh=ee(18429),ep=ee(5993),{HTTP2_HEADER_PATH:ef}=et.constants,eg="server";function em(){}function ey(g){return{code:er.Status.UNIMPLEMENTED,details:`The server does not implement the method ${g}`}}function ev(g,$){let ee=ey($);switch(g){case"unary":return(g,$)=>{$(ee,null)};case"clientStream":return(g,$)=>{$(ee,null)};case"serverStream":return g=>{g.emit("error",ee)};case"bidi":return g=>{g.emit("error",ee)};default:throw Error(`Invalid handlerType ${g}`)}}class eS{constructor(g){this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new ep.ChannelzTrace,this.callTracker=new ep.ChannelzCallTracker,this.listenerChildrenTracker=new ep.ChannelzChildrenTracker,this.sessionChildrenTracker=new ep.ChannelzChildrenTracker,this.options=null!=g?g:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=ep.registerChannelzServer(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(g){return()=>{var $,ee,et;let er;let en=this.sessions.get(g),ei=g.socket,es=ei.remoteAddress?eu.stringToSubchannelAddress(ei.remoteAddress,ei.remotePort):null,eo=ei.localAddress?eu.stringToSubchannelAddress(ei.localAddress,ei.localPort):null;if(g.encrypted){let g=ei,ee=g.getCipher(),et=g.getCertificate(),en=g.getPeerCertificate();er={cipherSuiteStandardName:null!==($=ee.standardName)&&void 0!==$?$:null,cipherSuiteOtherName:ee.standardName?null:ee.name,localCertificate:et&&"raw"in et?et.raw:null,remoteCertificate:en&&"raw"in en?en.raw:null}}else er=null;return{remoteAddress:es,localAddress:eo,security:er,remoteName:null,streamsStarted:en.streamTracker.callsStarted,streamsSucceeded:en.streamTracker.callsSucceeded,streamsFailed:en.streamTracker.callsFailed,messagesSent:en.messagesSent,messagesReceived:en.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:en.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:en.lastMessageSentTimestamp,lastMessageReceivedTimestamp:en.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(ee=g.state.localWindowSize)&&void 0!==ee?ee:null,remoteFlowControlWindow:null!==(et=g.state.remoteWindowSize)&&void 0!==et?et:null}}}trace(g){eo.trace(er.LogVerbosity.DEBUG,eg,"("+this.channelzRef.id+") "+g)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(g,$){if(null===g||"object"!=typeof g||null===$||"object"!=typeof $)throw Error("addService() requires two objects as arguments");let ee=Object.keys(g);if(0===ee.length)throw Error("Cannot add an empty service to a server");ee.forEach(ee=>{let et,er;let en=g[ee];et=en.requestStream?en.responseStream?"bidi":"clientStream":en.responseStream?"serverStream":"unary";let ei=$[ee];if(void 0===ei&&"string"==typeof en.originalName&&(ei=$[en.originalName]),er=void 0!==ei?ei.bind($):ev(et,ee),!1===this.register(en.path,er,en.responseSerialize,en.requestDeserialize,et))throw Error(`Method handler for ${en.path} already provided.`)})}removeService(g){if(null===g||"object"!=typeof g)throw Error("removeService() requires object as argument");Object.keys(g).forEach($=>{let ee=g[$];this.unregister(ee.path)})}bind(g,$){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(g,$,ee){if(!0===this.started)throw Error("server is already started");if("string"!=typeof g)throw TypeError("port must be a string");if(null===$||!($ instanceof ei.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof ee)throw TypeError("callback must be a function");let en=eh.parseUri(g);if(null===en)throw Error(`Could not parse port "${g}"`);let ef=es.mapUriDefaultScheme(en);if(null===ef)throw Error(`Could not get a default scheme for port "${g}"`);let eg={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?eg.maxSessionMemory=this.options["grpc-node.max_session_memory"]:eg.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(eg.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let ey=(g,$)=>{process.nextTick(()=>ee(g,$))},ev=()=>{let g;if($._isSecure()){let ee=Object.assign(eg,$._getSettings());(g=et.createSecureServer(ee)).on("secureConnection",g=>{g.on("error",g=>{this.trace("An incoming TLS connection closed with error: "+g.message)})})}else g=et.createServer(eg);return g.setTimeout(0,em),this._setupHandlers(g),g},eS=(g,$,ee)=>0===g.length?Promise.resolve({port:$,count:ee}):Promise.all(g.map(g=>{let ee;this.trace("Attempting to bind "+eu.subchannelAddressToString(g)),ee=eu.isTcpSubchannelAddress(g)?{host:g.host,port:$}:g;let et=ev();return new Promise((er,en)=>{let ei=$=>{this.trace("Failed to bind "+eu.subchannelAddressToString(g)+" with error "+$.message),er($)};et.once("error",ei),et.listen(ee,()=>{let g,ee;let en=et.address();g="string"==typeof en?{path:en}:{host:en.address,port:en.port},ee=ep.registerChannelzSocket(eu.subchannelAddressToString(g),()=>({localAddress:g,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(ee),this.http2ServerList.push({server:et,channelzRef:ee}),this.trace("Successfully bound "+eu.subchannelAddressToString(g)),er("port"in g?g.port:$),et.removeListener("error",ei)})})})).then(g=>{let et=0;for(let ee of g)if("number"==typeof ee&&(et+=1,ee!==$))throw Error("Invalid state: multiple port numbers added from single address");return{port:$,count:et+ee}}),eT=g=>{if(0===g.length)return Promise.resolve({port:0,count:0});let $=g[0],ee=ev();return new Promise((et,er)=>{let en=ee=>{this.trace("Failed to bind "+eu.subchannelAddressToString($)+" with error "+ee.message),et(eT(g.slice(1)))};ee.once("error",en),ee.listen($,()=>{let $;let er=ee.address(),ei={host:er.address,port:er.port};$=ep.registerChannelzSocket(eu.subchannelAddressToString(ei),()=>({localAddress:ei,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild($),this.http2ServerList.push({server:ee,channelzRef:$}),this.trace("Successfully bound "+eu.subchannelAddressToString(ei)),et(eS(g.slice(1),er.port,1)),ee.removeListener("error",en)})})},eE={onSuccessfulResolution:($,ee,et)=>{let en;if(eE.onSuccessfulResolution=()=>{},0===$.length){ey(Error(`No addresses resolved for port ${g}`),0);return}(en=eu.isTcpSubchannelAddress($[0])?0===$[0].port?eT($):eS($,$[0].port,0):eS($,1,0)).then(g=>{if(0===g.count){let g=`No address added out of total ${$.length} resolved`;eo.log(er.LogVerbosity.ERROR,g),ey(Error(g),0)}else g.count<$.length&&eo.log(er.LogVerbosity.INFO,`WARNING Only ${g.count} addresses added out of total ${$.length} resolved`),ey(null,g.port)},g=>{let ee=`No address added out of total ${$.length} resolved`;eo.log(er.LogVerbosity.ERROR,ee),ey(Error(ee),0)})},onError:g=>{ey(Error(g.details),0)}};es.createResolver(ef,eE,this.options).updateResolution()}forceShutdown(){for(let{server:g,channelzRef:$}of this.http2ServerList)g.listening&&g.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild($),ep.unregisterChannelzRef($))});this.started=!1,this.sessions.forEach((g,$)=>{$.destroy(et.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&ep.unregisterChannelzRef(this.channelzRef)}register(g,$,ee,et,er){return!this.handlers.has(g)&&(this.handlers.set(g,{func:$,serialize:ee,deserialize:et,type:er,path:g}),!0)}unregister(g){return this.handlers.delete(g)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:g})=>!0!==g.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(g){let $=$=>{this.channelzEnabled&&ep.unregisterChannelzRef(this.channelzRef),g($)},ee=0;function et(){0==--ee&&$()}for(let{server:g,channelzRef:$}of(this.started=!1,this.http2ServerList))g.listening&&(ee++,g.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild($),ep.unregisterChannelzRef($)),et()}));this.sessions.forEach((g,$)=>{$.closed||(ee+=1,$.close(et))}),0===ee&&$()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(g,$){let ee=$[et.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof ee&&ee.startsWith("application/grpc"))||(g.respond({[et.constants.HTTP2_HEADER_STATUS]:et.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(g){let $=g[ef];this.trace("Received call to method "+$+" at address "+this.serverAddressString);let ee=this.handlers.get($);if(void 0===ee)throw this.trace("No handler registered for method "+$+". Sending UNIMPLEMENTED status."),ey($);return ee}_respondWithError(g,$,ee=null){let et=new en.Http2ServerCallStream($,null,this.options);void 0===g.code&&(g.code=er.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==ee||ee.streamTracker.addCallFailed()),et.sendError(g)}_channelzHandler(g,$){let ee;let et=this.sessions.get(g.session);if(this.callTracker.addCallStarted(),null==et||et.streamTracker.addCallStarted(),!this._verifyContentType(g,$)){this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed();return}try{ee=this._retrieveHandler($)}catch($){this._respondWithError($,g,et);return}let ei=new en.Http2ServerCallStream(g,ee,this.options);ei.once("callEnd",g=>{g===er.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),et&&(ei.once("streamEnd",g=>{g?et.streamTracker.addCallSucceeded():et.streamTracker.addCallFailed()}),ei.on("sendMessage",()=>{et.messagesSent+=1,et.lastMessageSentTimestamp=new Date}),ei.on("receiveMessage",()=>{et.messagesReceived+=1,et.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(ei,ee,$)||(this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed(),ei.sendError({code:er.Status.INTERNAL,details:`Unknown handler type: ${ee.type}`}))}_streamHandler(g,$){let ee;if(!0!==this._verifyContentType(g,$))return;try{ee=this._retrieveHandler($)}catch($){this._respondWithError($,g,null);return}let et=new en.Http2ServerCallStream(g,ee,this.options);this._runHandlerForCall(et,ee,$)||et.sendError({code:er.Status.INTERNAL,details:`Unknown handler type: ${ee.type}`})}_runHandlerForCall(g,$,ee){var et;let er=g.receiveMetadata(ee),en=null!==(et=er.get("grpc-encoding")[0])&&void 0!==et?et:"identity";er.remove("grpc-encoding");let{type:ei}=$;if("unary"===ei)eT(g,$,er,en);else if("clientStream"===ei)eE(g,$,er,en);else if("serverStream"===ei)ew(g,$,er,en);else{if("bidi"!==ei)return!1;eC(g,$,er,en)}return!0}_setupHandlers(g){if(null===g)return;let $=g.address(),ee="null";$&&(ee="string"==typeof $?$:$.address+":"+$.port),this.serverAddressString=ee;let et=this.channelzEnabled?this._channelzHandler:this._streamHandler;g.on("stream",et.bind(this)),g.on("session",g=>{var $;let ee;if(!this.started){g.destroy();return}let et={ref:ee=ep.registerChannelzSocket(null!==($=g.socket.remoteAddress)&&void 0!==$?$:"unknown",this.getChannelzSessionInfoGetter(g),this.channelzEnabled),streamTracker:new ep.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(g,et);let er=g.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+er),this.sessionChildrenTracker.refChild(ee)),g.on("close",()=>{this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+er),this.sessionChildrenTracker.unrefChild(ee),ep.unregisterChannelzRef(ee)),this.sessions.delete(g)})})}}function eT(g,$,ee,et){g.receiveUnaryMessage(et,(et,er)=>{if(et){g.sendError(et);return}if(void 0===er||g.cancelled)return;let ei=new en.ServerUnaryCallImpl(g,ee,er);$.func(ei,($,ee,et,er)=>{g.sendUnaryMessage($,ee,et,er)})})}function eE(g,$,ee,et){let er=new en.ServerReadableStreamImpl(g,ee,$.deserialize,et);function ei($,ee,et,en){er.destroy(),g.sendUnaryMessage($,ee,et,en)}g.cancelled||(er.on("error",ei),$.func(er,ei))}function ew(g,$,ee,et){g.receiveUnaryMessage(et,(et,er)=>{if(et){g.sendError(et);return}if(void 0===er||g.cancelled)return;let ei=new en.ServerWritableStreamImpl(g,ee,$.serialize,er);$.func(ei)})}function eC(g,$,ee,et){let er=new en.ServerDuplexStreamImpl(g,ee,$.serialize,$.deserialize,et);g.cancelled||$.func(er)}$.Server=eS},26262:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.extractAndSelectServiceConfig=$.validateServiceConfig=void 0;let et=ee(22037),er=ee(27176),en=/^\d+(\.\d{1,9})?s$/,ei="node";function es(g){if(!("service"in g)||"string"!=typeof g.service)throw Error("Invalid method config name: invalid service");let $={service:g.service};if("method"in g){if("string"==typeof g.method)$.method=g.method;else throw Error("Invalid method config name: invalid method")}return $}function eo(g){var $;let ee={name:[]};if(!("name"in g)||!Array.isArray(g.name))throw Error("Invalid method config: invalid name array");for(let $ of g.name)ee.name.push(es($));if("waitForReady"in g){if("boolean"!=typeof g.waitForReady)throw Error("Invalid method config: invalid waitForReady");ee.waitForReady=g.waitForReady}if("timeout"in g){if("object"==typeof g.timeout){if(!("seconds"in g.timeout)||"number"!=typeof g.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in g.timeout)||"number"!=typeof g.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");ee.timeout=g.timeout}else if("string"==typeof g.timeout&&en.test(g.timeout)){let et=g.timeout.substring(0,g.timeout.length-1).split(".");ee.timeout={seconds:0|et[0],nanos:(null!==($=et[1])&&void 0!==$?$:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in g){if("number"!=typeof g.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");ee.maxRequestBytes=g.maxRequestBytes}if("maxResponseBytes"in g){if("number"!=typeof g.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");ee.maxResponseBytes=g.maxResponseBytes}return ee}function eu(g){let $={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in g){if("string"==typeof g.loadBalancingPolicy)$.loadBalancingPolicy=g.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in g){if(Array.isArray(g.loadBalancingConfig))for(let ee of g.loadBalancingConfig)$.loadBalancingConfig.push(er.validateLoadBalancingConfig(ee));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in g&&Array.isArray(g.methodConfig))for(let ee of g.methodConfig)$.methodConfig.push(eo(ee));let ee=[];for(let g of $.methodConfig)for(let $ of g.name){for(let g of ee)if($.service===g.service&&$.method===g.method)throw Error(`Invalid service config: duplicate name ${$.service}/${$.method}`);ee.push($)}return $}function eh(g){if(!("serviceConfig"in g))throw Error("Invalid service config choice: missing service config");let $={serviceConfig:eu(g.serviceConfig)};if("clientLanguage"in g){if(Array.isArray(g.clientLanguage))for(let ee of($.clientLanguage=[],g.clientLanguage))if("string"==typeof ee)$.clientLanguage.push(ee);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in g){if(Array.isArray(g.clientHostname))for(let ee of($.clientHostname=[],g.clientHostname))if("string"==typeof ee)$.clientHostname.push(ee);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in g){if("number"==typeof g.percentage&&0<=g.percentage&&g.percentage<=100)$.percentage=g.percentage;else throw Error("Invalid service config choice: invalid percentage")}let ee=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let $ in g)if(!ee.includes($))throw Error(`Invalid service config choice: unexpected field ${$}`);return $}function ep(g,$){if(!Array.isArray(g))throw Error("Invalid service config list");for(let ee of g){let g=eh(ee);if("number"!=typeof g.percentage||!($>g.percentage)){if(Array.isArray(g.clientHostname)){let $=!1;for(let ee of g.clientHostname)ee===et.hostname()&&($=!0);if(!$)continue}if(Array.isArray(g.clientLanguage)){let $=!1;for(let ee of g.clientLanguage)ee===ei&&($=!0);if(!$)continue}return g.serviceConfig}}throw Error("No matching service config found")}function ef(g,$){for(let ee of g)if(ee.length>0&&ee[0].startsWith("grpc_config="))return ep(JSON.parse(ee.join("").substring(12)),$);return null}$.validateServiceConfig=eu,$.extractAndSelectServiceConfig=ef},39932:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.StatusBuilder=void 0;class ee{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(g){return this.code=g,this}withDetails(g){return this.details=g,this}withMetadata(g){return this.metadata=g,this}build(){let g={};return null!==this.code&&(g.code=this.code),null!==this.details&&(g.details=this.details),null!==this.metadata&&(g.metadata=this.metadata),g}}$.StatusBuilder=ee},38326:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.StreamDecoder=void 0,function(g){g[g.NO_DATA=0]="NO_DATA",g[g.READING_SIZE=1]="READING_SIZE",g[g.READING_MESSAGE=2]="READING_MESSAGE"}(ee||(ee={}));class et{constructor(){this.readState=ee.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(g){let $,et=0,er=[];for(;et<g.length;)switch(this.readState){case ee.NO_DATA:this.readCompressFlag=g.slice(et,et+1),et+=1,this.readState=ee.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case ee.READING_SIZE:if($=Math.min(g.length-et,this.readSizeRemaining),g.copy(this.readPartialSize,4-this.readSizeRemaining,et,et+$),this.readSizeRemaining-=$,et+=$,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=ee.READING_MESSAGE;else{let g=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=ee.NO_DATA,er.push(g)}}break;case ee.READING_MESSAGE:if($=Math.min(g.length-et,this.readMessageRemaining),this.readPartialMessage.push(g.slice(et,et+$)),this.readMessageRemaining-=$,et+=$,0===this.readMessageRemaining){let g=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),$=Buffer.concat(g,this.readMessageSize+5);this.readState=ee.NO_DATA,er.push($)}break;default:throw Error("Unexpected read state")}return er}}$.StreamDecoder=et},23906:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.stringToSubchannelAddress=$.subchannelAddressToString=$.subchannelAddressEqual=$.isTcpSubchannelAddress=void 0;let et=ee(41808);function er(g){return"port"in g}function en(g,$){return er(g)?er($)&&g.host===$.host&&g.port===$.port:!er($)&&g.path===$.path}function ei(g){return er(g)?g.host+":"+g.port:g.path}$.isTcpSubchannelAddress=er,$.subchannelAddressEqual=en,$.subchannelAddressToString=ei;let es=443;function eo(g,$){return et.isIP(g)?{host:g,port:null!=$?$:es}:{path:g}}$.stringToSubchannelAddress=eo},21407:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BaseSubchannelWrapper=void 0;class ee{constructor(g){this.child=g}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(g){this.child.addConnectivityStateListener(g)}removeConnectivityStateListener(g){this.child.removeConnectivityStateListener(g)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}$.BaseSubchannelWrapper=ee},42328:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getSubchannelPool=$.SubchannelPool=void 0;let et=ee(79387),er=ee(91727),en=ee(23906),ei=ee(18429),es=1e4;class eo{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let g=!0;for(let $ in this.pool){let ee=this.pool[$].filter(g=>!g.subchannel.unrefIfOneRef());ee.length>0&&(g=!1),this.pool[$]=ee}g&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var g,$;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},es),null===($=(g=this.cleanupTimer).unref)||void 0===$||$.call(g))}getOrCreateSubchannel(g,$,ee,es){this.ensureCleanupTask();let eo=ei.uriToString(g);if(eo in this.pool){for(let g of this.pool[eo])if(en.subchannelAddressEqual($,g.subchannelAddress)&&et.channelOptionsEqual(ee,g.channelArguments)&&es._equals(g.channelCredentials))return g.subchannel}let eu=new er.Subchannel(g,$,ee,es);return eo in this.pool||(this.pool[eo]=[]),this.pool[eo].push({subchannelAddress:$,channelArguments:ee,channelCredentials:es,subchannel:eu}),eu.ref(),eu}}$.SubchannelPool=eo;let eu=new eo;function eh(g){return g?eu:new eo}$.getSubchannelPool=eh},91727:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Subchannel=void 0;let et=ee(85158),er=ee(24404),en=ee(33955),ei=ee(84934),es=ee(40492),eo=ee(97504),eu=ee(32678),eh=ee(82039),ep=ee(41808),ef=ee(18429),eg=ee(23906),em=ee(5993),ey=ee(81513).i8,ev="subchannel",eS="subchannel_flowctrl",eT=2147483647,eE=2e4,{HTTP2_HEADER_AUTHORITY:ew,HTTP2_HEADER_CONTENT_TYPE:eC,HTTP2_HEADER_METHOD:e_,HTTP2_HEADER_PATH:eI,HTTP2_HEADER_TE:eO,HTTP2_HEADER_USER_AGENT:eA}=et.constants,eN=Buffer.from("too_many_pings","ascii");class eD{constructor(g,$,ee,et){this.channelTarget=g,this.subchannelAddress=$,this.options=ee,this.credentials=et,this.connectivityState=en.ConnectivityState.IDLE,this.session=null,this.continueConnecting=!1,this.stateListeners=[],this.disconnectListeners=new Set,this.keepaliveTimeMs=eT,this.keepaliveTimeoutMs=eE,this.keepaliveWithoutCalls=!1,this.callRefcount=0,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new em.ChannelzCallTracker,this.childrenTracker=new em.ChannelzChildrenTracker,this.channelzSocketRef=null,this.remoteName=null,this.streamTracker=new em.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.userAgent=[ee["grpc.primary_user_agent"],`grpc-node-js/${ey}`,ee["grpc.secondary_user_agent"]].filter(g=>g).join(" "),"grpc.keepalive_time_ms"in ee&&(this.keepaliveTimeMs=ee["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in ee&&(this.keepaliveTimeoutMs=ee["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in ee?this.keepaliveWithoutCalls=1===ee["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,this.keepaliveIntervalId=setTimeout(()=>{},0),clearTimeout(this.keepaliveIntervalId),this.keepaliveTimeoutId=setTimeout(()=>{},0),clearTimeout(this.keepaliveTimeoutId);let er={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new ei.BackoffTimeout(()=>{this.handleBackoffTimer()},er),this.subchannelAddressString=eg.subchannelAddressToString($),0===ee["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new em.ChannelzTrace,this.channelzRef=em.registerChannelzSubchannel(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(ee,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}getChannelzSocketInfo(){var g,$,ee;let et;if(null===this.session)return null;let er=this.session.socket,en=er.remoteAddress?eg.stringToSubchannelAddress(er.remoteAddress,er.remotePort):null,ei=er.localAddress?eg.stringToSubchannelAddress(er.localAddress,er.localPort):null;if(this.session.encrypted){let $=er,ee=$.getCipher(),en=$.getCertificate(),ei=$.getPeerCertificate();et={cipherSuiteStandardName:null!==(g=ee.standardName)&&void 0!==g?g:null,cipherSuiteOtherName:ee.standardName?null:ee.name,localCertificate:en&&"raw"in en?en.raw:null,remoteCertificate:ei&&"raw"in ei?ei.raw:null}}else et=null;return{remoteAddress:en,localAddress:ei,security:et,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==($=this.session.state.localWindowSize)&&void 0!==$?$:null,remoteFlowControlWindow:null!==(ee=this.session.state.remoteWindowSize)&&void 0!==ee?ee:null}}resetChannelzSocketInfo(){this.channelzEnabled&&(this.channelzSocketRef&&(em.unregisterChannelzRef(this.channelzSocketRef),this.childrenTracker.unrefChild(this.channelzSocketRef),this.channelzSocketRef=null),this.remoteName=null,this.streamTracker=new em.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null)}trace(g){eo.trace(eu.LogVerbosity.DEBUG,ev,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}refTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}flowControlTrace(g){eo.trace(eu.LogVerbosity.DEBUG,eS,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}internalsTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"subchannel_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}keepaliveTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.CONNECTING):this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}sendPing(){var g,$;this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===($=(g=this.keepaliveTimeoutId).unref)||void 0===$||$.call(g);try{this.session.ping((g,$,ee)=>{this.keepaliveTrace("Received ping response"),clearTimeout(this.keepaliveTimeoutId)})}catch(g){this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE)}}startKeepalivePings(){var g,$;this.keepaliveIntervalId=setInterval(()=>{this.sendPing()},this.keepaliveTimeMs),null===($=(g=this.keepaliveIntervalId).unref)||void 0===$||$.call(g)}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId),clearTimeout(this.keepaliveTimeoutId)}createSession(g){var $,ee,ei;g.realTarget?(this.remoteName=ef.uriToString(g.realTarget),this.trace("creating HTTP/2 session through proxy to "+g.realTarget)):(this.remoteName=null,this.trace("creating HTTP/2 session"));let eh=es.getDefaultAuthority(null!==($=g.realTarget)&&void 0!==$?$:this.channelTarget),eg=this.credentials._getConnectionOptions()||{};eg.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in this.options?eg.maxSessionMemory=this.options["grpc-node.max_session_memory"]:eg.maxSessionMemory=Number.MAX_SAFE_INTEGER;let ey="http://";if("secureContext"in eg){if(ey="https://",this.options["grpc.ssl_target_name_override"]){let g=this.options["grpc.ssl_target_name_override"];eg.checkServerIdentity=($,ee)=>er.checkServerIdentity(g,ee),eg.servername=g}else{let g=null!==(ei=null===(ee=ef.splitHostPort(eh))||void 0===ee?void 0:ee.host)&&void 0!==ei?ei:"localhost";eg.servername=g}g.socket&&(eg.createConnection=($,ee)=>g.socket)}else eg.createConnection=($,ee)=>g.socket?g.socket:ep.connect(this.subchannelAddress);eg=Object.assign(Object.assign({},eg),this.subchannelAddress);let eS=et.connect(ey+eh,eg);this.session=eS,this.channelzSocketRef=em.registerChannelzSocket(this.subchannelAddressString,()=>this.getChannelzSocketInfo(),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(this.channelzSocketRef),eS.unref(),eS.once("connect",()=>{this.session===eS&&this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.READY)}),eS.once("close",()=>{this.session===eS&&(this.trace("connection closed"),this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.TRANSIENT_FAILURE),this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.IDLE))}),eS.once("goaway",(g,$,ee)=>{this.session===eS&&(g===et.constants.NGHTTP2_ENHANCE_YOUR_CALM&&ee.equals(eN)&&(this.keepaliveTimeMs=Math.min(2*this.keepaliveTimeMs,eT),eo.log(eu.LogVerbosity.ERROR,`Connection to ${ef.uriToString(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTimeMs} ms`)),this.trace("connection closed by GOAWAY with code "+g),this.transitionToState([en.ConnectivityState.CONNECTING,en.ConnectivityState.READY],en.ConnectivityState.IDLE))}),eS.once("error",g=>{this.trace("connection closed with error "+g.message)}),eo.isTracerEnabled(ev)&&(eS.on("remoteSettings",g=>{this.trace("new settings received"+(this.session!==eS?" on the old connection":"")+": "+JSON.stringify(g))}),eS.on("localSettings",g=>{this.trace("local settings acknowledged by remote"+(this.session!==eS?" on the old connection":"")+": "+JSON.stringify(g))}))}startConnectingInternal(){var g,$;let ee=this.credentials._getConnectionOptions()||{};if("secureContext"in ee){if(ee.ALPNProtocols=["h2"],this.options["grpc.ssl_target_name_override"]){let g=this.options["grpc.ssl_target_name_override"];ee.checkServerIdentity=($,ee)=>er.checkServerIdentity(g,ee),ee.servername=g}else if("grpc.http_connect_target"in this.options){let et=es.getDefaultAuthority(null!==(g=ef.parseUri(this.options["grpc.http_connect_target"]))&&void 0!==g?g:{path:"localhost"}),er=ef.splitHostPort(et);ee.servername=null!==($=null==er?void 0:er.host)&&void 0!==$?$:et}}eh.getProxiedConnection(this.subchannelAddress,this.options,ee).then(g=>{this.createSession(g)},g=>{this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.TRANSIENT_FAILURE)})}handleDisconnect(){for(let g of(this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE),this.disconnectListeners.values()))g()}transitionToState(g,$){if(-1===g.indexOf(this.connectivityState))return!1;this.trace(en.ConnectivityState[this.connectivityState]+" -> "+en.ConnectivityState[$]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",en.ConnectivityState[this.connectivityState]+" -> "+en.ConnectivityState[$]);let ee=this.connectivityState;switch(this.connectivityState=$,$){case en.ConnectivityState.READY:this.stopBackoff();let et=this.session;et.socket.once("close",()=>{this.session===et&&this.handleDisconnect()}),this.keepaliveWithoutCalls&&this.startKeepalivePings();break;case en.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case en.ConnectivityState.TRANSIENT_FAILURE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings(),this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case en.ConnectivityState.IDLE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings();break;default:throw Error(`Invalid state: unknown ConnectivityState ${$}`)}for(let g of[...this.stateListeners])g(this,ee,$);return!0}checkBothRefcounts(){0===this.callRefcount&&0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.transitionToState([en.ConnectivityState.CONNECTING,en.ConnectivityState.READY],en.ConnectivityState.IDLE),this.channelzEnabled&&em.unregisterChannelzRef(this.channelzRef))}callRef(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount+1)),0!==this.callRefcount||(this.session&&this.session.ref(),this.backoffTimeout.ref(),this.keepaliveWithoutCalls||this.startKeepalivePings()),this.callRefcount+=1}callUnref(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount-1)),this.callRefcount-=1,0===this.callRefcount&&(this.session&&this.session.unref(),this.backoffTimeout.unref(),this.keepaliveWithoutCalls||clearInterval(this.keepaliveIntervalId),this.checkBothRefcounts())}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.checkBothRefcounts()}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}startCallStream(g,$,ee){let et,er;let ei=g.toHttp2Headers();ei[ew]=$.getHost(),ei[eA]=this.userAgent,ei[eC]="application/grpc",ei[e_]="POST",ei[eI]=$.getMethod(),ei[eO]="trailers";try{et=this.session.request(ei)}catch(g){throw this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE),g}let es="";for(let g of Object.keys(ei))es+="		"+g+": "+ei[g]+"\n";eo.trace(eu.LogVerbosity.DEBUG,"call_stream","Starting stream ["+$.getCallNumber()+"] on subchannel ("+this.channelzRef.id+") "+this.subchannelAddressString+" with headers\n"+es),this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize);let eh=this.session;this.internalsTrace("session.closed="+eh.closed+" session.destroyed="+eh.destroyed+" session.socket.destroyed="+eh.socket.destroyed),this.channelzEnabled?(this.callTracker.addCallStarted(),$.addStatusWatcher(g=>{g.code===eu.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),this.streamTracker.addCallStarted(),$.addStreamEndWatcher(g=>{eh===this.session&&(g?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed())}),er={addMessageSent:()=>{this.messagesSent+=1,this.lastMessageSentTimestamp=new Date},addMessageReceived:()=>{this.messagesReceived+=1}}):er={addMessageSent:()=>{},addMessageReceived:()=>{}},$.attachHttp2Stream(et,this,ee,er)}startConnecting(){this.transitionToState([en.ConnectivityState.IDLE],en.ConnectivityState.CONNECTING)||this.connectivityState!==en.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(g){this.stateListeners.push(g)}removeConnectivityStateListener(g){let $=this.stateListeners.indexOf(g);$>-1&&this.stateListeners.splice($,1)}addDisconnectListener(g){this.disconnectListeners.add(g)}removeDisconnectListener(g){this.disconnectListeners.delete(g)}resetBackoff(){this.backoffTimeout.reset(),this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}}$.Subchannel=eD},43009:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getDefaultRootsData=$.CIPHER_SUITES=void 0;let et=ee(57147);$.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let er=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,en=null;function ei(){return er?(null===en&&(en=et.readFileSync(er)),en):null}$.getDefaultRootsData=ei},18429:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.uriToString=$.splitHostPort=$.parseUri=void 0;let ee=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function et(g){let $=ee.exec(g);return null===$?null:{scheme:$[1],authority:$[2],path:$[3]}}$.parseUri=et;let er=/^\d+$/;function en(g){if(g.startsWith("[")){let $=g.indexOf("]");if(-1===$)return null;let ee=g.substring(1,$);if(-1===ee.indexOf(":"))return null;if(!(g.length>$+1))return{host:ee};if(":"!==g[$+1])return null;{let et=g.substring($+2);return er.test(et)?{host:ee,port:+et}:null}}{let $=g.split(":");return 2!==$.length?{host:g}:er.test($[1])?{host:$[0],port:+$[1]}:null}}function ei(g){let $="";return void 0!==g.scheme&&($+=g.scheme+":"),void 0!==g.authority&&($+="//"+g.authority+"/"),$+=g.path}$.splitHostPort=en,$.uriToString=ei},52894:(g,$,ee)=>{"use strict";var et,er;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */et={value:!0},et=et=et=$.J_=et=$.Cp=et=et=void 0;let en=ee(51382),ei=ee(94534),es=ee(26361),eo=ee(90371);et=ee(65338),et=function(g){return"@type"in g&&"string"==typeof g["@type"]},function(g){g.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",g.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",g.IDEMPOTENT="IDEMPOTENT"}(er=$.Cp||($.Cp={}));let eu={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function eh(g,$){return""===g?$:g+"."+$}function ep(g){return g instanceof ei.Service||g instanceof ei.Type||g instanceof ei.Enum}function ef(g){return g instanceof ei.Namespace||g instanceof ei.Root}function eg(g,$){let ee=eh($,g.name);return ep(g)?[[ee,g]]:ef(g)&&void 0!==g.nested?Object.keys(g.nested).map($=>eg(g.nested[$],ee)).reduce((g,$)=>g.concat($),[]):[]}function em(g,$){return function(ee){return g.toObject(g.decode(ee),$)}}function ey(g){return function($){if(Array.isArray($))throw Error(`Failed to serialize message: expected object with ${g.name} structure, got array instead`);let ee=g.fromObject($);return g.encode(ee).finish()}}function ev(g){return(g||[]).reduce((g,$)=>{for(let[ee,et]of Object.entries($))"uninterpreted_option"===ee?g.uninterpreted_option.push($.uninterpreted_option):g[ee]=et;return g},{deprecated:!1,idempotency_level:er.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function eS(g,$,ee,et){let er=g.resolvedRequestType,ei=g.resolvedResponseType;return{path:"/"+$+"/"+g.name,requestStream:!!g.requestStream,responseStream:!!g.responseStream,requestSerialize:ey(er),requestDeserialize:em(er,ee),responseSerialize:ey(ei),responseDeserialize:em(ei,ee),originalName:en(g.name),requestType:eE(er,et),responseType:eE(ei,et),options:ev(g.parsedOptions)}}function eT(g,$,ee,et){let er={};for(let en of g.methodsArray)er[en.name]=eS(en,$,ee,et);return er}function eE(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:ee.$type.toObject(ee,eu),fileDescriptorProtos:$}}function ew(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:ee.$type.toObject(ee,eu),fileDescriptorProtos:$}}function eC(g,$,ee,et){if(g instanceof ei.Service)return eT(g,$,ee,et);if(g instanceof ei.Type)return eE(g,et);if(g instanceof ei.Enum)return ew(g,et);throw Error("Type mismatch in reflection object handling")}function e_(g,$){let ee={};g.resolveAll();let et=g.toDescriptor("proto3").file.map(g=>Buffer.from(es.FileDescriptorProto.encode(g).finish()));for(let[er,en]of eg(g,""))ee[er]=eC(en,er,$,et);return ee}function eI(g,$){$=$||{};let ee=ei.Root.fromDescriptor(g);return ee.resolveAll(),e_(ee,$)}function eO(g,$){return e_((0,eo.loadProtosWithOptionsSync)(g,$),$)}et=function(g,$){return(0,eo.loadProtosWithOptions)(g,$).then(g=>e_(g,$))},$.J_=eO,et=function(g,$){$=$||{};let ee=ei.Root.fromJSON(g);return ee.resolveAll(),e_(ee,$)},et=function(g,$){return eI(es.FileDescriptorSet.decode(g),$)},et=function(g,$){return eI(es.FileDescriptorSet.fromObject(g),$)},(0,eo.addCommonProtos)()},90371:(g,$,ee)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty($,"__esModule",{value:!0}),$.addCommonProtos=$.loadProtosWithOptionsSync=$.loadProtosWithOptions=void 0;let et=ee(57147),er=ee(71017),en=ee(94534);function ei(g,$){let ee=g.resolvePath;g.resolvePath=(g,en)=>{if(er.isAbsolute(en))return en;for(let g of $){let $=er.join(g,en);try{return et.accessSync($,et.constants.R_OK),$}catch(g){continue}}return process.emitWarning(`${en} not found in any of the include paths ${$}`),ee(g,en)}}async function es(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));ei(ee,$.includeDirs)}let et=await ee.load(g,$);return et.resolveAll(),et}function eo(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))throw Error("The includeDirs option must be an array");ei(ee,$.includeDirs)}let et=ee.loadSync(g,$);return et.resolveAll(),et}function eu(){let g=ee(38883),$=ee(53242),et=ee(88681),er=ee(58702);en.common("api",g.nested.google.nested.protobuf.nested),en.common("descriptor",$.nested.google.nested.protobuf.nested),en.common("source_context",et.nested.google.nested.protobuf.nested),en.common("type",er.nested.google.nested.protobuf.nested)}$.loadProtosWithOptions=es,$.loadProtosWithOptionsSync=eo,$.addCommonProtos=eu},26361:(g,$,ee)=>{"use strict";var et=ee(94534);g.exports=$=et.descriptor=et.Root.fromJSON(ee(53242)).lookup(".google.protobuf");var er=et.Namespace,en=et.Root,ei=et.Enum,es=et.Type,eo=et.Field,eu=et.MapField,eh=et.OneOf,ep=et.Service,ef=et.Method;function eg(g,ee,et){var eu=$.FileDescriptorProto.create({name:g.filename||(g.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});ex(et,eu),g instanceof en||(eu.package=g.fullName.substring(1));for(var eh,ef=0;ef<g.nestedArray.length;++ef)(eh=g._nestedArray[ef])instanceof es?eu.messageType.push(eh.toDescriptor(et)):eh instanceof ei?eu.enumType.push(eh.toDescriptor()):eh instanceof eo?eu.extension.push(eh.toDescriptor(et)):eh instanceof ep?eu.service.push(eh.toDescriptor()):eh instanceof er&&eg(eh,ee,et);eu.options=eN(g.options,$.FileOptions),eu.messageType.length+eu.enumType.length+eu.extension.length+eu.service.length&&ee.push(eu)}en.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.FileDescriptorSet.decode(g));var ee=new en;if(g.file)for(var et,er,eu,eh=0;eh<g.file.length;++eh){er=ee,(et=g.file[eh]).package&&et.package.length&&(er=ee.define(et.package));var ef=ek(et);if(et.name&&et.name.length&&ee.files.push(er.filename=et.name),et.messageType)for(eu=0;eu<et.messageType.length;++eu)er.add(es.fromDescriptor(et.messageType[eu],ef));if(et.enumType)for(eu=0;eu<et.enumType.length;++eu)er.add(ei.fromDescriptor(et.enumType[eu],ef));if(et.extension)for(eu=0;eu<et.extension.length;++eu)er.add(eo.fromDescriptor(et.extension[eu],ef));if(et.service)for(eu=0;eu<et.service.length;++eu)er.add(ep.fromDescriptor(et.service[eu],ef));var eg=eO(et.options,$.FileOptions);if(eg){var em=Object.keys(eg);for(eu=0;eu<em.length;++eu)er.setOption(em[eu],eg[em[eu]])}}return ee.resolveAll()},en.prototype.toDescriptor=function(g){var ee=$.FileDescriptorSet.create();return eg(this,ee.file,g),ee};var em=0;es.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.DescriptorProto.decode(g));var er,en=new es(g.name.length?g.name:"Type"+em++,eO(g.options,$.MessageOptions));if(et||(en._edition=ee),g.oneofDecl)for(er=0;er<g.oneofDecl.length;++er)en.add(eh.fromDescriptor(g.oneofDecl[er]));if(g.field)for(er=0;er<g.field.length;++er){var eu=eo.fromDescriptor(g.field[er],ee,!0);en.add(eu),g.field[er].hasOwnProperty("oneofIndex")&&en.oneofsArray[g.field[er].oneofIndex].add(eu)}if(g.extension)for(er=0;er<g.extension.length;++er)en.add(eo.fromDescriptor(g.extension[er],ee,!0));if(g.nestedType)for(er=0;er<g.nestedType.length;++er)en.add(es.fromDescriptor(g.nestedType[er],ee,!0)),g.nestedType[er].options&&g.nestedType[er].options.mapEntry&&en.setOption("map_entry",!0);if(g.enumType)for(er=0;er<g.enumType.length;++er)en.add(ei.fromDescriptor(g.enumType[er],ee,!0));if(g.extensionRange&&g.extensionRange.length)for(er=0,en.extensions=[];er<g.extensionRange.length;++er)en.extensions.push([g.extensionRange[er].start,g.extensionRange[er].end]);if(g.reservedRange&&g.reservedRange.length||g.reservedName&&g.reservedName.length){if(en.reserved=[],g.reservedRange)for(er=0;er<g.reservedRange.length;++er)en.reserved.push([g.reservedRange[er].start,g.reservedRange[er].end]);if(g.reservedName)for(er=0;er<g.reservedName.length;++er)en.reserved.push(g.reservedName[er])}return en},es.prototype.toDescriptor=function(g){var ee,et,er=$.DescriptorProto.create({name:this.name});for(et=0;et<this.fieldsArray.length;++et)if(er.field.push(ee=this._fieldsArray[et].toDescriptor(g)),this._fieldsArray[et]instanceof eu){var en=e_(this._fieldsArray[et].keyType,this._fieldsArray[et].resolvedKeyType,!1),eh=e_(this._fieldsArray[et].type,this._fieldsArray[et].resolvedType,!1),ep=11===eh||14===eh?this._fieldsArray[et].resolvedType&&eD(this.parent,this._fieldsArray[et].resolvedType)||this._fieldsArray[et].type:void 0;er.nestedType.push($.DescriptorProto.create({name:ee.typeName,field:[$.FieldDescriptorProto.create({name:"key",number:1,label:1,type:en}),$.FieldDescriptorProto.create({name:"value",number:2,label:1,type:eh,typeName:ep})],options:$.MessageOptions.create({mapEntry:!0})}))}for(et=0;et<this.oneofsArray.length;++et)er.oneofDecl.push(this._oneofsArray[et].toDescriptor());for(et=0;et<this.nestedArray.length;++et)this._nestedArray[et]instanceof eo?er.field.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof es?er.nestedType.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof ei&&er.enumType.push(this._nestedArray[et].toDescriptor());if(this.extensions)for(et=0;et<this.extensions.length;++et)er.extensionRange.push($.DescriptorProto.ExtensionRange.create({start:this.extensions[et][0],end:this.extensions[et][1]}));if(this.reserved)for(et=0;et<this.reserved.length;++et)"string"==typeof this.reserved[et]?er.reservedName.push(this.reserved[et]):er.reservedRange.push($.DescriptorProto.ReservedRange.create({start:this.reserved[et][0],end:this.reserved[et][1]}));return er.options=eN(this.options,$.MessageOptions),er};var ey=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;eo.fromDescriptor=function(g,ee,et){if("number"==typeof g.length&&(g=$.DescriptorProto.decode(g)),"number"!=typeof g.number)throw Error("missing field id");switch(er=g.typeName&&g.typeName.length?g.typeName:ew(g.type),g.label){case 1:en=void 0;break;case 2:en="required";break;case 3:en="repeated";break;default:throw Error("illegal label: "+g.label)}var er,en,ei=g.extendee;void 0!==g.extendee&&(ei=ei.length?ei:void 0);var es=new eo(g.name.length?g.name:"field"+g.number,g.number,er,en,ei);if(et||(es._edition=ee),es.options=eO(g.options,$.FieldOptions),g.proto3_optional&&(es.options.proto3_optional=!0),g.defaultValue&&g.defaultValue.length){var eu=g.defaultValue;switch(eu){case"true":case"TRUE":eu=!0;break;case"false":case"FALSE":eu=!1;break;default:ey.exec(eu)&&(eu=parseInt(eu))}es.setOption("default",eu)}return eC(g.type)&&("proto3"===ee?g.options&&!g.options.packed&&es.setOption("packed",!1):(!ee||"proto2"===ee)&&g.options&&g.options.packed&&es.setOption("packed",!0)),es},eo.prototype.toDescriptor=function(g){var ee=$.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)ee.type=11,ee.typeName=et.util.ucFirst(this.name),ee.label=3;else{switch(ee.type=e_(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:ee.typeName=this.resolvedType?eD(this.parent,this.resolvedType):this.type}"repeated"===this.rule?ee.label=3:this.required&&"proto2"===g?ee.label=2:ee.label=1}if(ee.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(ee.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(ee.options=eN(this.options,$.FieldOptions),null!=this.options.default&&(ee.defaultValue=String(this.options.default)),this.options.proto3_optional&&(ee.proto3_optional=!0)),"proto3"===g?this.packed||((ee.options||(ee.options=$.FieldOptions.create())).packed=!1):(!g||"proto2"===g)&&this.packed&&((ee.options||(ee.options=$.FieldOptions.create())).packed=!0),ee};var ev=0;ei.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.EnumDescriptorProto.decode(g));var er={};if(g.value)for(var en=0;en<g.value.length;++en){var es=g.value[en].name,eo=g.value[en].number||0;er[es&&es.length?es:"NAME"+eo]=eo}var eu=new ei(g.name&&g.name.length?g.name:"Enum"+ev++,er,eO(g.options,$.EnumOptions));return et||(eu._edition=ee),eu},ei.prototype.toDescriptor=function(){for(var g=[],ee=0,et=Object.keys(this.values);ee<et.length;++ee)g.push($.EnumValueDescriptorProto.create({name:et[ee],number:this.values[et[ee]]}));return $.EnumDescriptorProto.create({name:this.name,value:g,options:eN(this.options,$.EnumOptions)})};var eS=0;eh.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.OneofDescriptorProto.decode(g)),new eh(g.name&&g.name.length?g.name:"oneof"+eS++)},eh.prototype.toDescriptor=function(){return $.OneofDescriptorProto.create({name:this.name})};var eT=0;ep.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.ServiceDescriptorProto.decode(g));var er=new ep(g.name&&g.name.length?g.name:"Service"+eT++,eO(g.options,$.ServiceOptions));if(et||(er._edition=ee),g.method)for(var en=0;en<g.method.length;++en)er.add(ef.fromDescriptor(g.method[en]));return er},ep.prototype.toDescriptor=function(){for(var g=[],ee=0;ee<this.methodsArray.length;++ee)g.push(this._methodsArray[ee].toDescriptor());return $.ServiceDescriptorProto.create({name:this.name,method:g,options:eN(this.options,$.ServiceOptions)})};var eE=0;function ew(g){switch(g){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+g)}function eC(g){switch(g){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function e_(g,$,ee){switch(g){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if($ instanceof ei)return 14;if($ instanceof es)return ee?10:11;throw Error("illegal type: "+g)}function eI(g,$){for(var ee,et,er={},en=0;en<$.fieldsArray.length;++en)if("uninterpretedOption"!==(et=(ee=$._fieldsArray[en]).name)&&Object.prototype.hasOwnProperty.call(g,et)){var eo=eR(et);ee.resolvedType instanceof es?er[eo]=eI(g[et],ee.resolvedType):ee.resolvedType instanceof ei?er[eo]=ee.resolvedType.valuesById[g[et]]:er[eo]=g[et]}return er}function eO(g,$){if(g)return eI($.toObject(g),$)}function eA(g,$){for(var ee={},er=Object.keys(g),en=0;en<er.length;++en){var ei=er[en],eo=et.util.camelCase(ei);if(Object.prototype.hasOwnProperty.call($.fields,eo)){var eu=$.fields[eo];eu.resolvedType instanceof es?ee[eo]=eA(g[ei],eu.resolvedType):ee[eo]=g[ei],eu.repeated&&!Array.isArray(ee[eo])&&(ee[eo]=[ee[eo]])}}return ee}function eN(g,$){if(g)return $.fromObject(eA(g,$))}function eD(g,$){var ee=g.fullName.split("."),et=$.fullName.split("."),ei=0,es=0,eo=et.length-1;if(!(g instanceof en)&&$ instanceof er)for(;ei<ee.length&&es<eo&&ee[ei]===et[es];){var eu=$.lookup(ee[ei++],!0);if(null!==eu&&eu!==$)break;++es}else for(;ei<ee.length&&es<eo&&ee[ei]===et[es];++ei,++es);return et.slice(es).join(".")}function eR(g){return g.substring(0,1)+g.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(g,$){return"_"+$.toLowerCase()})}function ek(g){if("editions"===g.syntax){if(g.edition===$.Edition.EDITION_2023)return"2023";throw Error("Unsupported edition "+g.edition)}return"proto3"===g.syntax?"proto3":"proto2"}function ex(g,ee){if(g){if("proto2"===g||"proto3"===g)ee.syntax=g;else if(ee.syntax="editions","2023"===g)ee.edition=$.Edition.EDITION_2023;else throw Error("Unsupported edition "+g)}}ef.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.MethodDescriptorProto.decode(g)),new ef(g.name&&g.name.length?g.name:"Method"+eE++,"rpc",g.inputType,g.outputType,!!g.clientStreaming,!!g.serverStreaming,eO(g.options,$.MethodOptions))},ef.prototype.toDescriptor=function(){return $.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:eN(this.options,$.MethodOptions)})}},94534:(g,$,ee)=>{"use strict";g.exports=ee(25532)},26515:g=>{"use strict";g.exports=et;var $,ee=/\/|\./;function et(g,$){ee.test(g)||(g="google/protobuf/"+g+".proto",$={nested:{google:{nested:{protobuf:{nested:$}}}}}),et[g]=$}et("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),et("duration",{Duration:$={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),et("timestamp",{Timestamp:$}),et("empty",{Empty:{fields:{}}}),et("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),et("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),et("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),et.get=function(g){return et[g]||null}},29497:(g,$,ee)=>{"use strict";var et=$,er=ee(96136),en=ee(91603);function ei(g,$,ee,et){var en=!1;if($.resolvedType){if($.resolvedType instanceof er){g("switch(d%s){",et);for(var ei=$.resolvedType.values,es=Object.keys(ei),eo=0;eo<es.length;++eo)ei[es[eo]]!==$.typeDefault||en||(g("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',et,et,et),$.repeated||g("break"),en=!0),g("case%j:",es[eo])("case %i:",ei[es[eo]])("m%s=%j",et,ei[es[eo]])("break");g("}")}else g('if(typeof d%s!=="object")',et)("throw TypeError(%j)",$.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",et,ee,et)}else{var eu=!1;switch($.type){case"double":case"float":g("m%s=Number(d%s)",et,et);break;case"uint32":case"fixed32":g("m%s=d%s>>>0",et,et);break;case"int32":case"sint32":case"sfixed32":g("m%s=d%s|0",et,et);break;case"uint64":eu=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",et,et,eu)('else if(typeof d%s==="string")',et)("m%s=parseInt(d%s,10)",et,et)('else if(typeof d%s==="number")',et)("m%s=d%s",et,et)('else if(typeof d%s==="object")',et)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",et,et,et,eu?"true":"");break;case"bytes":g('if(typeof d%s==="string")',et)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",et,et,et)("else if(d%s.length >= 0)",et)("m%s=d%s",et,et);break;case"string":g("m%s=String(d%s)",et,et);break;case"bool":g("m%s=Boolean(d%s)",et,et)}}return g}function es(g,$,ee,et){if($.resolvedType)$.resolvedType instanceof er?g("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",et,ee,et,et,ee,et,et):g("d%s=types[%i].toObject(m%s,o)",et,ee,et);else{var en=!1;switch($.type){case"double":case"float":g("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",et,et,et,et);break;case"uint64":en=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g('if(typeof m%s==="number")',et)("d%s=o.longs===String?String(m%s):m%s",et,et,et)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",et,et,et,et,en?"true":"",et);break;case"bytes":g("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",et,et,et,et,et);break;default:g("d%s=m%s",et,et)}}return g}et.fromObject=function(g){var $=g.fieldsArray,ee=en.codegen(["d"],g.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!$.length)return ee("return new this.ctor");ee("var m=new this.ctor");for(var et=0;et<$.length;++et){var es=$[et].resolve(),eo=en.safeProp(es.name);es.map?(ee("if(d%s){",eo)('if(typeof d%s!=="object")',eo)("throw TypeError(%j)",es.fullName+": object expected")("m%s={}",eo)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",eo),ei(ee,es,et,eo+"[ks[i]]")("}")("}")):es.repeated?(ee("if(d%s){",eo)("if(!Array.isArray(d%s))",eo)("throw TypeError(%j)",es.fullName+": array expected")("m%s=[]",eo)("for(var i=0;i<d%s.length;++i){",eo),ei(ee,es,et,eo+"[i]")("}")("}")):(es.resolvedType instanceof er||ee("if(d%s!=null){",eo),ei(ee,es,et,eo),es.resolvedType instanceof er||ee("}"))}return ee("return m")},et.toObject=function(g){var $=g.fieldsArray.slice().sort(en.compareFieldsById);if(!$.length)return en.codegen()("return {}");for(var ee=en.codegen(["m","o"],g.name+"$toObject")("if(!o)")("o={}")("var d={}"),et=[],ei=[],eo=[],eu=0;eu<$.length;++eu)$[eu].partOf||($[eu].resolve().repeated?et:$[eu].map?ei:eo).push($[eu]);if(et.length){for(ee("if(o.arrays||o.defaults){"),eu=0;eu<et.length;++eu)ee("d%s=[]",en.safeProp(et[eu].name));ee("}")}if(ei.length){for(ee("if(o.objects||o.defaults){"),eu=0;eu<ei.length;++eu)ee("d%s={}",en.safeProp(ei[eu].name));ee("}")}if(eo.length){for(ee("if(o.defaults){"),eu=0;eu<eo.length;++eu){var eh=eo[eu],ep=en.safeProp(eh.name);if(eh.resolvedType instanceof er)ee("d%s=o.enums===String?%j:%j",ep,eh.resolvedType.valuesById[eh.typeDefault],eh.typeDefault);else if(eh.long)ee("if(util.Long){")("var n=new util.Long(%i,%i,%j)",eh.typeDefault.low,eh.typeDefault.high,eh.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ep)("}else")("d%s=o.longs===String?%j:%i",ep,eh.typeDefault.toString(),eh.typeDefault.toNumber());else if(eh.bytes){var ef="["+Array.prototype.slice.call(eh.typeDefault).join(",")+"]";ee("if(o.bytes===String)d%s=%j",ep,String.fromCharCode.apply(String,eh.typeDefault))("else{")("d%s=%s",ep,ef)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ep,ep)("}")}else ee("d%s=%j",ep,eh.typeDefault)}ee("}")}var eg=!1;for(eu=0;eu<$.length;++eu){var eh=$[eu],em=g._fieldsArray.indexOf(eh),ep=en.safeProp(eh.name);eh.map?(eg||(eg=!0,ee("var ks2")),ee("if(m%s&&(ks2=Object.keys(m%s)).length){",ep,ep)("d%s={}",ep)("for(var j=0;j<ks2.length;++j){"),es(ee,eh,em,ep+"[ks2[j]]")("}")):eh.repeated?(ee("if(m%s&&m%s.length){",ep,ep)("d%s=[]",ep)("for(var j=0;j<m%s.length;++j){",ep),es(ee,eh,em,ep+"[j]")("}")):(ee("if(m%s!=null&&m.hasOwnProperty(%j)){",ep,eh.name),es(ee,eh,em,ep),eh.partOf&&ee("if(o.oneofs)")("d%s=%j",en.safeProp(eh.partOf.name),eh.name)),ee("}")}return ee("return d")}},84666:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(96136),er=ee(60650),en=ee(91603);function ei(g){return"missing required '"+g.name+"'"}function es(g){for(var $=en.codegen(["r","l","e"],g.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(g.fieldsArray.filter(function(g){return g.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),ee=0;ee<g.fieldsArray.length;++ee){var es=g._fieldsArray[ee].resolve(),eo=es.resolvedType instanceof et?"int32":es.type,eu="m"+en.safeProp(es.name);$("case %i: {",es.id),es.map?($("if(%s===util.emptyObject)",eu)("%s={}",eu)("var c2 = r.uint32()+r.pos"),void 0!==er.defaults[es.keyType]?$("k=%j",er.defaults[es.keyType]):$("k=null"),void 0!==er.defaults[eo]?$("value=%j",er.defaults[eo]):$("value=null"),$("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",es.keyType)("case 2:"),void 0===er.basic[eo]?$("value=types[%i].decode(r,r.uint32())",ee):$("value=r.%s()",eo),$("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),$(void 0!==er.long[es.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",eu)):es.repeated?($("if(!(%s&&%s.length))",eu,eu)("%s=[]",eu),void 0!==er.packed[eo]&&$("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",eu,eo)("}else"),void 0===er.basic[eo]?$(es.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",eu,ee):$("%s.push(r.%s())",eu,eo)):void 0===er.basic[eo]?$(es.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",eu,ee):$("%s=r.%s()",eu,eo),$("break")("}")}for($("default:")("r.skipType(t&7)")("break")("}")("}"),ee=0;ee<g._fieldsArray.length;++ee){var eh=g._fieldsArray[ee];eh.required&&$("if(!m.hasOwnProperty(%j))",eh.name)("throw util.ProtocolError(%j,{instance:m})",ei(eh))}return $("return m")}},75625:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(96136),er=ee(60650),en=ee(91603);function ei(g,$,ee,et){return $.delimited?g("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",ee,et,($.id<<3|3)>>>0,($.id<<3|4)>>>0):g("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",ee,et,($.id<<3|2)>>>0)}function es(g){for(var $,ee,es=en.codegen(["m","w"],g.name+"$encode")("if(!w)")("w=Writer.create()"),eo=g.fieldsArray.slice().sort(en.compareFieldsById),$=0;$<eo.length;++$){var eu=eo[$].resolve(),eh=g._fieldsArray.indexOf(eu),ep=eu.resolvedType instanceof et?"int32":eu.type,ef=er.basic[ep];ee="m"+en.safeProp(eu.name),eu.map?(es("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ee,eu.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ee)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(eu.id<<3|2)>>>0,8|er.mapKey[eu.keyType],eu.keyType),void 0===ef?es("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",eh,ee):es(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ef,ep,ee),es("}")("}")):eu.repeated?(es("if(%s!=null&&%s.length){",ee,ee),eu.packed&&void 0!==er.packed[ep]?es("w.uint32(%i).fork()",(eu.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ee)("w.%s(%s[i])",ep,ee)("w.ldelim()"):(es("for(var i=0;i<%s.length;++i)",ee),void 0===ef?ei(es,eu,eh,ee+"[i]"):es("w.uint32(%i).%s(%s[i])",(eu.id<<3|ef)>>>0,ep,ee)),es("}")):(eu.optional&&es("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ee,eu.name),void 0===ef?ei(es,eu,eh,ee):es("w.uint32(%i).%s(%s)",(eu.id<<3|ef)>>>0,ep,ee))}return es("return w")}},96136:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(62068);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="Enum";var er=ee(23346),en=ee(91603);function ei(g,$,ee,er,en,ei){if(et.call(this,g,ee),$&&"object"!=typeof $)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=er,this.comments=en||{},this.valuesOptions=ei,this._valuesFeatures={},this.reserved=void 0,$)for(var es=Object.keys($),eo=0;eo<es.length;++eo)"number"==typeof $[es[eo]]&&(this.valuesById[this.values[es[eo]]=$[es[eo]]]=es[eo])}ei.prototype._resolveFeatures=function(g){return g=this._edition||g,et.prototype._resolveFeatures.call(this,g),Object.keys(this.values).forEach(g=>{var $=Object.assign({},this._features);this._valuesFeatures[g]=Object.assign($,this.valuesOptions&&this.valuesOptions[g]&&this.valuesOptions[g].features)}),this},ei.fromJSON=function(g,$){var ee=new ei(g,$.values,$.options,$.comment,$.comments);return ee.reserved=$.reserved,$.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",$?this.comment:void 0,"comments",$?this.comments:void 0])},ei.prototype.add=function(g,$,ee,et){if(!en.isString(g))throw TypeError("name must be a string");if(!en.isInteger($))throw TypeError("id must be an integer");if(void 0!==this.values[g])throw Error("duplicate name '"+g+"' in "+this);if(this.isReservedId($))throw Error("id "+$+" is reserved in "+this);if(this.isReservedName(g))throw Error("name '"+g+"' is reserved in "+this);if(void 0!==this.valuesById[$]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+$+" in "+this);this.values[g]=$}else this.valuesById[this.values[g]=$]=g;return et&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[g]=et||null),this.comments[g]=ee||null,this},ei.prototype.remove=function(g){if(!en.isString(g))throw TypeError("name must be a string");var $=this.values[g];if(null==$)throw Error("name '"+g+"' does not exist in "+this);return delete this.valuesById[$],delete this.values[g],delete this.comments[g],this.valuesOptions&&delete this.valuesOptions[g],this},ei.prototype.isReservedId=function(g){return er.isReservedId(this.reserved,g)},ei.prototype.isReservedName=function(g){return er.isReservedName(this.reserved,g)}},94834:(g,$,ee)=>{"use strict";g.exports=eu;var et,er=ee(62068);((eu.prototype=Object.create(er.prototype)).constructor=eu).className="Field";var en=ee(96136),ei=ee(60650),es=ee(91603),eo=/^required|optional|repeated$/;function eu(g,$,ee,et,en,eu,eh){if(es.isObject(et)?(eh=en,eu=et,et=en=void 0):es.isObject(en)&&(eh=eu,eu=en,en=void 0),er.call(this,g,eu),!es.isInteger($)||$<0)throw TypeError("id must be a non-negative integer");if(!es.isString(ee))throw TypeError("type must be a string");if(void 0!==et&&!eo.test(et=et.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==en&&!es.isString(en))throw TypeError("extend must be a string");"proto3_optional"===et&&(et="optional"),this.rule=et&&"optional"!==et?et:void 0,this.type=ee,this.id=$,this.extend=en||void 0,this.repeated="repeated"===et,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!es.Long&&void 0!==ei.long[ee],this.bytes="bytes"===ee,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=eh}eu.fromJSON=function(g,$){var ee=new eu(g,$.id,$.type,$.rule,$.extend,$.options,$.comment);return $.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},Object.defineProperty(eu.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(eu.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(eu.prototype,"delimited",{get:function(){return this.resolvedType instanceof et&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(eu.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(eu.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),eu.prototype.setOption=function(g,$,ee){return er.prototype.setOption.call(this,g,$,ee)},eu.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return es.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},eu.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=ei.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof et?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof en&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof en||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=es.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var g;es.base64.test(this.typeDefault)?es.base64.decode(this.typeDefault,g=es.newBuffer(es.base64.length(this.typeDefault)),0):es.utf8.write(this.typeDefault,g=es.newBuffer(es.utf8.length(this.typeDefault)),0),this.typeDefault=g}return this.map?this.defaultValue=es.emptyObject:this.repeated?this.defaultValue=es.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof et&&(this.parent.ctor.prototype[this.name]=this.defaultValue),er.prototype.resolve.call(this)},eu.prototype._inferLegacyProtoFeatures=function(g){if("proto2"!==g&&"proto3"!==g)return{};var $={};if("required"===this.rule&&($.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===ei.defaults[this.type]){var ee=this.parent.get(this.type.split(".").pop());ee&&ee instanceof et&&ee.group&&($.message_encoding="DELIMITED")}return!0===this.getOption("packed")?$.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&($.repeated_field_encoding="EXPANDED"),$},eu.prototype._resolveFeatures=function(g){return er.prototype._resolveFeatures.call(this,this._edition||g)},eu.d=function(g,$,ee,et){return"function"==typeof $?$=es.decorateType($).name:$&&"object"==typeof $&&($=es.decorateEnum($).name),function(er,en){es.decorateType(er.constructor).add(new eu(en,g,$,ee,{default:et}))}},eu._configure=function(g){et=g}},4872:(g,$,ee)=>{"use strict";var et=g.exports=ee(62255);function er(g,$,ee){return"function"==typeof $?(ee=$,$=new et.Root):$||($=new et.Root),$.load(g,ee)}function en(g,$){return $||($=new et.Root),$.loadSync(g)}et.build="light",et.load=er,et.loadSync=en,et.encoder=ee(75625),et.decoder=ee(84666),et.verifier=ee(32420),et.converter=ee(29497),et.ReflectionObject=ee(62068),et.Namespace=ee(23346),et.Root=ee(41224),et.Enum=ee(96136),et.Type=ee(49713),et.Field=ee(94834),et.OneOf=ee(8119),et.MapField=ee(22461),et.Service=ee(35931),et.Method=ee(82006),et.Message=ee(92942),et.wrappers=ee(30578),et.types=ee(60650),et.util=ee(91603),et.ReflectionObject._configure(et.Root),et.Namespace._configure(et.Type,et.Service,et.Enum),et.Root._configure(et.Type),et.Field._configure(et.Type)},62255:(g,$,ee)=>{"use strict";var et=$;function er(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}et.build="minimal",et.Writer=ee(9846),et.BufferWriter=ee(15655),et.Reader=ee(26848),et.BufferReader=ee(33809),et.util=ee(64647),et.rpc=ee(14864),et.roots=ee(34941),et.configure=er,er()},25532:(g,$,ee)=>{"use strict";var et=g.exports=ee(4872);et.build="full",et.tokenize=ee(18343),et.parse=ee(74332),et.common=ee(26515),et.Root._configure(et.Type,et.parse,et.common)},22461:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(94834);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="MapField";var er=ee(60650),en=ee(91603);function ei(g,$,ee,er,ei,es){if(et.call(this,g,$,er,void 0,void 0,ei,es),!en.isString(ee))throw TypeError("keyType must be a string");this.keyType=ee,this.resolvedKeyType=null,this.map=!0}ei.fromJSON=function(g,$){return new ei(g,$.id,$.keyType,$.type,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},ei.prototype.resolve=function(){if(this.resolved)return this;if(void 0===er.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return et.prototype.resolve.call(this)},ei.d=function(g,$,ee){return"function"==typeof ee?ee=en.decorateType(ee).name:ee&&"object"==typeof ee&&(ee=en.decorateEnum(ee).name),function(et,er){en.decorateType(et.constructor).add(new ei(er,g,$,ee))}}},92942:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(64647);function er(g){if(g)for(var $=Object.keys(g),ee=0;ee<$.length;++ee)this[$[ee]]=g[$[ee]]}er.create=function(g){return this.$type.create(g)},er.encode=function(g,$){return this.$type.encode(g,$)},er.encodeDelimited=function(g,$){return this.$type.encodeDelimited(g,$)},er.decode=function(g){return this.$type.decode(g)},er.decodeDelimited=function(g){return this.$type.decodeDelimited(g)},er.verify=function(g){return this.$type.verify(g)},er.fromObject=function(g){return this.$type.fromObject(g)},er.toObject=function(g,$){return this.$type.toObject(g,$)},er.prototype.toJSON=function(){return this.$type.toObject(this,et.toJSONOptions)}},82006:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(62068);((en.prototype=Object.create(et.prototype)).constructor=en).className="Method";var er=ee(91603);function en(g,$,ee,en,ei,es,eo,eu,eh){if(er.isObject(ei)?(eo=ei,ei=es=void 0):er.isObject(es)&&(eo=es,es=void 0),!(void 0===$||er.isString($)))throw TypeError("type must be a string");if(!er.isString(ee))throw TypeError("requestType must be a string");if(!er.isString(en))throw TypeError("responseType must be a string");et.call(this,g,eo),this.type=$||"rpc",this.requestType=ee,this.requestStream=!!ei||void 0,this.responseType=en,this.responseStream=!!es||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=eu,this.parsedOptions=eh}en.fromJSON=function(g,$){return new en(g,$.type,$.requestType,$.responseType,$.requestStream,$.responseStream,$.options,$.comment,$.parsedOptions)},en.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return er.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",$?this.comment:void 0,"parsedOptions",this.parsedOptions])},en.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),et.prototype.resolve.call(this))}},23346:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(62068);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Namespace";var es=ee(94834),eo=ee(91603),eu=ee(8119);function eh(g,$){if(g&&g.length){for(var ee={},et=0;et<g.length;++et)ee[g[et].name]=g[et].toJSON($);return ee}}function ep(g,$){ei.call(this,g,$),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function ef(g){g._nestedArray=null,g._lookupCache={};for(var $=g;$=$.parent;)$._lookupCache={};return g}ep.fromJSON=function(g,$){return new ep(g,$.options).addJSON($.nested)},ep.arrayToJSON=eh,ep.isReservedId=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if("string"!=typeof g[ee]&&g[ee][0]<=$&&g[ee][1]>$)return!0}return!1},ep.isReservedName=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if(g[ee]===$)return!0}return!1},Object.defineProperty(ep.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=eo.toArray(this.nested))}}),ep.prototype.toJSON=function(g){return eo.toObject(["options",this.options,"nested",eh(this.nestedArray,g)])},ep.prototype.addJSON=function(g){var $=this;if(g)for(var ee,ei=Object.keys(g),eo=0;eo<ei.length;++eo)ee=g[ei[eo]],$.add((void 0!==ee.fields?et.fromJSON:void 0!==ee.values?en.fromJSON:void 0!==ee.methods?er.fromJSON:void 0!==ee.id?es.fromJSON:ep.fromJSON)(ei[eo],ee));return this},ep.prototype.get=function(g){return this.nested&&this.nested[g]||null},ep.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof en)return this.nested[g].values;throw Error("no such enum: "+g)},ep.prototype.add=function(g){if(!(g instanceof es&&void 0!==g.extend||g instanceof et||g instanceof eu||g instanceof en||g instanceof er||g instanceof ep))throw TypeError("object must be a valid nested object");if(this.nested){var $=this.get(g.name);if($){if($ instanceof ep&&g instanceof ep&&!($ instanceof et||$ instanceof er)){for(var ee=$.nestedArray,ei=0;ei<ee.length;++ei)g.add(ee[ei]);this.remove($),this.nested||(this.nested={}),g.setOptions($.options,!0)}else throw Error("duplicate name '"+g.name+"' in "+this)}}else this.nested={};this.nested[g.name]=g,this instanceof et||this instanceof er||this instanceof en||this instanceof es||g._edition||(g._edition=g._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var eo=this;eo=eo.parent;)eo._needsRecursiveFeatureResolution=!0,eo._needsRecursiveResolve=!0;return g.onAdd(this),ef(this)},ep.prototype.remove=function(g){if(!(g instanceof ei))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=void 0),g.onRemove(this),ef(this)},ep.prototype.define=function(g,$){if(eo.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&""===g[0])throw Error("path must be relative");for(var ee=this;g.length>0;){var et=g.shift();if(ee.nested&&ee.nested[et]){if(!((ee=ee.nested[et])instanceof ep))throw Error("path conflicts with non-namespace objects")}else ee.add(ee=new ep(et))}return $&&ee.addJSON($),ee},ep.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var g=this.nestedArray,$=0;for(this.resolve();$<g.length;)g[$]instanceof ep?g[$++].resolveAll():g[$++].resolve();return this._needsRecursiveResolve=!1,this},ep.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(this._needsRecursiveFeatureResolution=!1,g=this._edition||g,ei.prototype._resolveFeaturesRecursive.call(this,g),this.nestedArray.forEach($=>{$._resolveFeaturesRecursive(g)})),this},ep.prototype.lookup=function(g,$,ee){if("boolean"==typeof $?(ee=$,$=void 0):$&&!Array.isArray($)&&($=[$]),eo.isString(g)&&g.length){if("."===g)return this.root;g=g.split(".")}else if(!g.length)return this;var et=g.join(".");if(""===g[0])return this.root.lookup(g.slice(1),$);var er=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+et];if(er&&(!$||$.indexOf(er.constructor)>-1)||(er=this._lookupImpl(g,et))&&(!$||$.indexOf(er.constructor)>-1))return er;if(ee)return null;for(var en=this;en.parent;){if((er=en.parent._lookupImpl(g,et))&&(!$||$.indexOf(er.constructor)>-1))return er;en=en.parent}return null},ep.prototype._lookupImpl=function(g,$){if(Object.prototype.hasOwnProperty.call(this._lookupCache,$))return this._lookupCache[$];var ee=this.get(g[0]),et=null;if(ee)1===g.length?et=ee:ee instanceof ep&&(g=g.slice(1),et=ee._lookupImpl(g,g.join(".")));else for(var er=0;er<this.nestedArray.length;++er)this._nestedArray[er]instanceof ep&&(ee=this._nestedArray[er]._lookupImpl(g,$))&&(et=ee);return this._lookupCache[$]=et,et},ep.prototype.lookupType=function(g){var $=this.lookup(g,[et]);if(!$)throw Error("no such type: "+g);return $},ep.prototype.lookupEnum=function(g){var $=this.lookup(g,[en]);if(!$)throw Error("no such Enum '"+g+"' in "+this);return $},ep.prototype.lookupTypeOrEnum=function(g){var $=this.lookup(g,[et,en]);if(!$)throw Error("no such Type or Enum '"+g+"' in "+this);return $},ep.prototype.lookupService=function(g){var $=this.lookup(g,[er]);if(!$)throw Error("no such Service '"+g+"' in "+this);return $},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},62068:(g,$,ee)=>{"use strict";g.exports=eu,eu.className="ReflectionObject";let et=ee(8119);var er,en=ee(91603),ei={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},es={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},eo={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function eu(g,$){if(!en.isString(g))throw TypeError("name must be a string");if($&&!en.isObject($))throw TypeError("options must be an object");this.options=$,this.parsedOptions=null,this.name=g,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(eu.prototype,{root:{get:function(){for(var g=this;null!==g.parent;)g=g.parent;return g}},fullName:{get:function(){for(var g=[this.name],$=this.parent;$;)g.unshift($.name),$=$.parent;return g.join(".")}}}),eu.prototype.toJSON=function(){throw Error()},eu.prototype.onAdd=function(g){this.parent&&this.parent!==g&&this.parent.remove(this),this.parent=g,this.resolved=!1;var $=g.root;$ instanceof er&&$._handleAdd(this)},eu.prototype.onRemove=function(g){var $=g.root;$ instanceof er&&$._handleRemove(this),this.parent=null,this.resolved=!1},eu.prototype.resolve=function(){return this.resolved||this.root instanceof er&&(this.resolved=!0),this},eu.prototype._resolveFeaturesRecursive=function(g){return this._resolveFeatures(this._edition||g)},eu.prototype._resolveFeatures=function(g){if(!this._featuresResolved){var $={};if(!g)throw Error("Unknown edition for "+this.fullName);var ee=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(g));if(this._edition){if("proto2"===g)$=Object.assign({},es);else if("proto3"===g)$=Object.assign({},eo);else if("2023"===g)$=Object.assign({},ei);else throw Error("Unknown edition: "+g);this._features=Object.assign($,ee||{}),this._featuresResolved=!0;return}if(this.partOf instanceof et){var er=Object.assign({},this.partOf._features);this._features=Object.assign(er,ee||{})}else if(this.declaringField);else if(this.parent){var en=Object.assign({},this.parent._features);this._features=Object.assign(en,ee||{})}else throw Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},eu.prototype._inferLegacyProtoFeatures=function(){return{}},eu.prototype.getOption=function(g){if(this.options)return this.options[g]},eu.prototype.setOption=function(g,$,ee){return this.options||(this.options={}),/^features\./.test(g)?en.setProperty(this.options,g,$,ee):ee&&void 0!==this.options[g]||(this.getOption(g)!==$&&(this.resolved=!1),this.options[g]=$),this},eu.prototype.setParsedOption=function(g,$,ee){this.parsedOptions||(this.parsedOptions=[]);var et=this.parsedOptions;if(ee){var er=et.find(function($){return Object.prototype.hasOwnProperty.call($,g)});if(er){var ei=er[g];en.setProperty(ei,ee,$)}else(er={})[g]=en.setProperty({},ee,$),et.push(er)}else{var es={};es[g]=$,et.push(es)}return this},eu.prototype.setOptions=function(g,$){if(g)for(var ee=Object.keys(g),et=0;et<ee.length;++et)this.setOption(ee[et],g[ee[et]],$);return this},eu.prototype.toString=function(){var g=this.constructor.className,$=this.fullName;return $.length?g+" "+$:g},eu.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},eu._configure=function(g){er=g}},8119:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(62068);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="OneOf";var er=ee(94834),en=ee(91603);function ei(g,$,ee,er){if(Array.isArray($)||(ee=$,$=void 0),et.call(this,g,ee),!(void 0===$||Array.isArray($)))throw TypeError("fieldNames must be an Array");this.oneof=$||[],this.fieldsArray=[],this.comment=er}function es(g){if(g.parent)for(var $=0;$<g.fieldsArray.length;++$)g.fieldsArray[$].parent||g.parent.add(g.fieldsArray[$])}ei.fromJSON=function(g,$){return new ei(g,$.oneof,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"oneof",this.oneof,"comment",$?this.comment:void 0])},ei.prototype.add=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");return g.parent&&g.parent!==this.parent&&g.parent.remove(g),this.oneof.push(g.name),this.fieldsArray.push(g),g.partOf=this,es(this),this},ei.prototype.remove=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");var $=this.fieldsArray.indexOf(g);if($<0)throw Error(g+" is not a member of "+this);return this.fieldsArray.splice($,1),($=this.oneof.indexOf(g.name))>-1&&this.oneof.splice($,1),g.partOf=null,this},ei.prototype.onAdd=function(g){et.prototype.onAdd.call(this,g);for(var $=this,ee=0;ee<this.oneof.length;++ee){var er=g.get(this.oneof[ee]);er&&!er.partOf&&(er.partOf=$,$.fieldsArray.push(er))}es(this)},ei.prototype.onRemove=function(g){for(var $,ee=0;ee<this.fieldsArray.length;++ee)($=this.fieldsArray[ee]).parent&&$.parent.remove($);et.prototype.onRemove.call(this,g)},Object.defineProperty(ei.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var g=this.fieldsArray[0];return null!=g.options&&!0===g.options.proto3_optional}}),ei.d=function(){for(var g=Array(arguments.length),$=0;$<arguments.length;)g[$]=arguments[$++];return function($,ee){en.decorateType($.constructor).add(new ei(ee,g)),Object.defineProperty($,ee,{get:en.oneOfGetter(g),set:en.oneOfSetter(g)})}}},74332:(g,$,ee)=>{"use strict";g.exports=eO,eO.filename=null,eO.defaults={keepCase:!1};var et=ee(18343),er=ee(41224),en=ee(49713),ei=ee(94834),es=ee(22461),eo=ee(8119),eu=ee(96136),eh=ee(35931),ep=ee(82006),ef=ee(62068),eg=ee(60650),em=ee(91603),ey=/^[1-9][0-9]*$/,ev=/^-?[1-9][0-9]*$/,eS=/^0[x][0-9a-fA-F]+$/,eT=/^-?0[x][0-9a-fA-F]+$/,eE=/^0[0-7]+$/,ew=/^-?0[0-7]+$/,eC=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,e_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,eI=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function eO(g,$,ee){$ instanceof er||(ee=$,$=new er),ee||(ee=eO.defaults);var eA,eN,eD,eR,ek=ee.preferTrailingComment||!1,ex=et(g,ee.alternateCommentMode||!1),eP=ex.next,eM=ex.push,eL=ex.peek,eF=ex.skip,eB=ex.cmnt,ej=!0,eU="proto2",eV=$,eq=[],ez={},eG=ee.keepCase?function(g){return g}:em.camelCase;function e$(){eq.forEach(g=>{g._edition=eU,Object.keys(ez).forEach($=>{void 0===g.getOption($)&&g.setOption($,ez[$],!0)})})}function eK(g,$,ee){var et=eO.filename;return ee||(eO.filename=null),Error("illegal "+($||"token")+" '"+g+"' ("+(et?et+", ":"")+"line "+ex.line+")")}function eW(){var g,$=[];do{if('"'!==(g=eP())&&"'"!==g)throw eK(g);$.push(eP()),eF(g),g=eL()}while('"'===g||"'"===g);return $.join("")}function eH(g){var $=eP();switch($){case"'":case'"':return eM($),eW();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return eY($,!0)}catch(ee){if(g&&eI.test($))return $;throw eK($,"value")}}function eQ(g,$){do if($&&('"'===(ee=eL())||"'"===ee)){var ee,et,er=eW();if(g.push(er),eU>=2023)throw eK(er,"id")}else try{g.push([et=eJ(eP()),eF("to",!0)?eJ(eP()):et])}catch(et){if($&&eI.test(ee)&&eU>=2023)g.push(ee);else throw et}while(eF(",",!0));var en={options:void 0};en.setOption=function(g,$){void 0===this.options&&(this.options={}),this.options[g]=$},e3(en,function(g){if("option"===g)tt(en,g),eF(";");else throw eK(g)},function(){tl(en)})}function eY(g,$){var ee=1;switch("-"===g.charAt(0)&&(ee=-1,g=g.substring(1)),g){case"inf":case"INF":case"Inf":return 1/0*ee;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(ey.test(g))return ee*parseInt(g,10);if(eS.test(g))return ee*parseInt(g,16);if(eE.test(g))return ee*parseInt(g,8);if(eC.test(g))return ee*parseFloat(g);throw eK(g,"number",$)}function eJ(g,$){switch(g){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!$&&"-"===g.charAt(0))throw eK(g,"id");if(ev.test(g))return parseInt(g,10);if(eT.test(g))return parseInt(g,16);if(ew.test(g))return parseInt(g,8);throw eK(g,"id")}function eX(){if(void 0!==eN)throw eK("package");if(eN=eP(),!eI.test(eN))throw eK(eN,"name");eV=eV.define(eN),eF(";")}function eZ(){var g,$=eL();switch($){case"weak":g=eR||(eR=[]),eP();break;case"public":eP();default:g=eD||(eD=[])}$=eW(),eF(";"),g.push($)}function e0(){if(eF("="),(eU=eW())<2023)throw eK(eU,"syntax");eF(";")}function e1(){if(eF("="),!["2023"].includes(eU=eW()))throw eK(eU,"edition");eF(";")}function e2(g,$){switch($){case"option":return tt(g,$),eF(";"),!0;case"message":return e4(g,$),!0;case"enum":return e7(g,$),!0;case"service":return tu(g,$),!0;case"extend":return tp(g,$),!0}return!1}function e3(g,$,ee){var et,er=ex.line;if(g&&("string"!=typeof g.comment&&(g.comment=eB()),g.filename=eO.filename),eF("{",!0)){for(;"}"!==(et=eP());)$(et);eF(";",!0)}else ee&&ee(),eF(";"),g&&("string"!=typeof g.comment||ek)&&(g.comment=eB(er)||g.comment)}function e4(g,$){if(!e_.test($=eP()))throw eK($,"type name");var ee=new en($);e3(ee,function(g){if(!e2(ee,g))switch(g){case"map":e5(ee,g);break;case"required":if("proto2"!==eU)throw eK(g);case"repeated":e6(ee,g);break;case"optional":if("proto3"===eU)e6(ee,"proto3_optional");else if("proto2"!==eU)throw eK(g);else e6(ee,"optional");break;case"oneof":e8(ee,g);break;case"extensions":eQ(ee.extensions||(ee.extensions=[]));break;case"reserved":eQ(ee.reserved||(ee.reserved=[]),!0);break;default:if("proto2"===eU||!eI.test(g))throw eK(g);eM(g),e6(ee,"optional")}}),g.add(ee),g===eV&&eq.push(ee)}function e6(g,$,ee){var et=eP();if("group"===et){e9(g,$);return}for(;et.endsWith(".")||eL().startsWith(".");)et+=eP();if(!eI.test(et))throw eK(et,"type");var er=eP();if(!e_.test(er))throw eK(er,"name");er=eG(er),eF("=");var en=new ei(er,eJ(eP()),et,$,ee);if(e3(en,function(g){if("option"===g)tt(en,g),eF(";");else throw eK(g)},function(){tl(en)}),"proto3_optional"===$){var es=new eo("_"+er);en.setOption("proto3_optional",!0),es.add(en),g.add(es)}else g.add(en);g===eV&&eq.push(en)}function e9(g,$){if(eU>=2023)throw eK("group");var ee=eP();if(!e_.test(ee))throw eK(ee,"name");var et=em.lcFirst(ee);ee===et&&(ee=em.ucFirst(ee)),eF("=");var er=eJ(eP()),es=new en(ee);es.group=!0;var eo=new ei(et,er,ee,$);eo.filename=eO.filename,e3(es,function(g){switch(g){case"option":tt(es,g),eF(";");break;case"required":case"repeated":e6(es,g);break;case"optional":"proto3"===eU?e6(es,"proto3_optional"):e6(es,"optional");break;case"message":e4(es,g);break;case"enum":e7(es,g);break;case"reserved":eQ(es.reserved||(es.reserved=[]),!0);break;default:throw eK(g)}}),g.add(es).add(eo)}function e5(g){eF("<");var $=eP();if(void 0===eg.mapKey[$])throw eK($,"type");eF(",");var ee=eP();if(!eI.test(ee))throw eK(ee,"type");eF(">");var et=eP();if(!e_.test(et))throw eK(et,"name");eF("=");var er=new es(eG(et),eJ(eP()),$,ee);e3(er,function(g){if("option"===g)tt(er,g),eF(";");else throw eK(g)},function(){tl(er)}),g.add(er)}function e8(g,$){if(!e_.test($=eP()))throw eK($,"name");var ee=new eo(eG($));e3(ee,function(g){"option"===g?(tt(ee,g),eF(";")):(eM(g),e6(ee,"optional"))}),g.add(ee)}function e7(g,$){if(!e_.test($=eP()))throw eK($,"name");var ee=new eu($);e3(ee,function(g){switch(g){case"option":tt(ee,g),eF(";");break;case"reserved":eQ(ee.reserved||(ee.reserved=[]),!0),void 0===ee.reserved&&(ee.reserved=[]);break;default:te(ee,g)}}),g.add(ee),g===eV&&eq.push(ee)}function te(g,$){if(!e_.test($))throw eK($,"name");eF("=");var ee=eJ(eP(),!0),et={options:void 0};et.getOption=function(g){return this.options[g]},et.setOption=function(g,$){ef.prototype.setOption.call(et,g,$)},et.setParsedOption=function(){},e3(et,function(g){if("option"===g)tt(et,g),eF(";");else throw eK(g)},function(){tl(et)}),g.add($,ee,et.comment,et.parsedOptions||et.options)}function tt(g,$){var ee,et,er=!0;for("option"===$&&($=eP());"="!==$;){if("("===$){var en=eP();eF(")"),$="("+en+")"}if(er){if(er=!1,$.includes(".")&&!$.includes("(")){var ei=$.split(".");ee=ei[0]+".",$=ei[1];continue}ee=$}else et=et?et+=$:$;$=eP()}var es=tr(g,et?ee.concat(et):ee);et=et&&"."===et[0]?et.slice(1):et,ts(g,ee=ee&&"."===ee[ee.length-1]?ee.slice(0,-1):ee,es,et)}function tr(g,$){if(eF("{",!0)){for(var ee={};!eF("}",!0);){if(!e_.test(eA=eP()))throw eK(eA,"name");if(null===eA)throw eK(eA,"end of input");var et,er,en=eA;if(eF(":",!0),"{"===eL())et=tr(g,$+"."+eA);else if("["===eL()){if(et=[],eF("[",!0)){do er=eH(!0),et.push(er);while(eF(",",!0));eF("]"),void 0!==er&&ti(g,$+"."+eA,er)}}else et=eH(!0),ti(g,$+"."+eA,et);var ei=ee[en];ei&&(et=[].concat(ei).concat(et)),ee[en]=et,eF(",",!0),eF(";",!0)}return ee}var es=eH(!0);return ti(g,$,es),es}function ti(g,$,ee){if(eV===g&&/^features\./.test($)){ez[$]=ee;return}g.setOption&&g.setOption($,ee)}function ts(g,$,ee,et){g.setParsedOption&&g.setParsedOption($,ee,et)}function tl(g){if(eF("[",!0)){do tt(g,"option");while(eF(",",!0));eF("]")}return g}function tu(g,$){if(!e_.test($=eP()))throw eK($,"service name");var ee=new eh($);e3(ee,function(g){if(!e2(ee,g)){if("rpc"===g)th(ee,g);else throw eK(g)}}),g.add(ee),g===eV&&eq.push(ee)}function th(g,$){var ee=eB(),et=$;if(!e_.test($=eP()))throw eK($,"name");var er,en,ei,es,eo=$;if(eF("("),eF("stream",!0)&&(en=!0),!eI.test($=eP())||(er=$,eF(")"),eF("returns"),eF("("),eF("stream",!0)&&(es=!0),!eI.test($=eP())))throw eK($);ei=$,eF(")");var eu=new ep(eo,et,er,ei,en,es);eu.comment=ee,e3(eu,function(g){if("option"===g)tt(eu,g),eF(";");else throw eK(g)}),g.add(eu)}function tp(g,$){if(!eI.test($=eP()))throw eK($,"reference");var ee=$;e3(null,function($){switch($){case"required":case"repeated":e6(g,$,ee);break;case"optional":"proto3"===eU?e6(g,"proto3_optional",ee):e6(g,"optional",ee);break;default:if("proto2"===eU||!eI.test($))throw eK($);eM($),e6(g,"optional",ee)}})}for(;null!==(eA=eP());)switch(eA){case"package":if(!ej)throw eK(eA);eX();break;case"import":if(!ej)throw eK(eA);eZ();break;case"syntax":if(!ej)throw eK(eA);e0();break;case"edition":if(!ej)throw eK(eA);e1();break;case"option":tt(eV,eA),eF(";",!0);break;default:if(e2(eV,eA)){ej=!1;continue}throw eK(eA)}return e$(),eO.filename=null,{package:eN,imports:eD,weakImports:eR,root:$}}},26848:(g,$,ee)=>{"use strict";g.exports=eo;var et,er=ee(64647),en=er.LongBits,ei=er.utf8;function es(g,$){return RangeError("index out of range: "+g.pos+" + "+($||1)+" > "+g.len)}function eo(g){this.buf=g,this.pos=0,this.len=g.length}var eu="undefined"!=typeof Uint8Array?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new eo(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new eo(g);throw Error("illegal buffer")},eh=function(){return er.Buffer?function(g){return(eo.create=function(g){return er.Buffer.isBuffer(g)?new et(g):eu(g)})(g)}:eu};function ep(){var g=new en(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw es(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*$)>>>0,g}if(this.len-this.pos>4){for(;$<5;++$)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}else for(;$<5;++$){if(this.pos>=this.len)throw es(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function ef(g,$){return(g[$-4]|g[$-3]<<8|g[$-2]<<16|g[$-1]<<24)>>>0}function eg(){if(this.pos+8>this.len)throw es(this,8);return new en(ef(this.buf,this.pos+=4),ef(this.buf,this.pos+=4))}eo.create=eh(),eo.prototype._slice=er.Array.prototype.subarray||er.Array.prototype.slice,eo.prototype.uint32=function(){var g=4294967295;return function(){if(g=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(g=(g|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,es(this,10);return g}}(),eo.prototype.int32=function(){return 0|this.uint32()},eo.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)|0},eo.prototype.bool=function(){return 0!==this.uint32()},eo.prototype.fixed32=function(){if(this.pos+4>this.len)throw es(this,4);return ef(this.buf,this.pos+=4)},eo.prototype.sfixed32=function(){if(this.pos+4>this.len)throw es(this,4);return 0|ef(this.buf,this.pos+=4)},eo.prototype.float=function(){if(this.pos+4>this.len)throw es(this,4);var g=er.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},eo.prototype.double=function(){if(this.pos+8>this.len)throw es(this,4);var g=er.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},eo.prototype.bytes=function(){var g=this.uint32(),$=this.pos,ee=this.pos+g;if(ee>this.len)throw es(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice($,ee);if($===ee){var et=er.Buffer;return et?et.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,$,ee)},eo.prototype.string=function(){var g=this.bytes();return ei.read(g,0,g.length)},eo.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw es(this,g);this.pos+=g}else do if(this.pos>=this.len)throw es(this);while(128&this.buf[this.pos++]);return this},eo.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},eo._configure=function(g){et=g,eo.create=eh(),et._configure();var $=er.Long?"toLong":"toNumber";er.merge(eo.prototype,{int64:function(){return ep.call(this)[$](!1)},uint64:function(){return ep.call(this)[$](!0)},sint64:function(){return ep.call(this).zzDecode()[$](!1)},fixed64:function(){return eg.call(this)[$](!0)},sfixed64:function(){return eg.call(this)[$](!1)}})}},33809:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(26848);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(64647);function en(g){et.call(this,g)}en._configure=function(){er.Buffer&&(en.prototype._slice=er.Buffer.prototype.slice)},en.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},en._configure()},41224:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(23346);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Root";var es=ee(94834),eo=ee(96136),eu=ee(8119),eh=ee(91603);function ep(g){ei.call(this,"",g),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function ef(){}ep.fromJSON=function(g,$){return $||($=new ep),g.options&&$.setOptions(g.options),$.addJSON(g.nested).resolveAll()},ep.prototype.resolvePath=eh.path.resolve,ep.prototype.fetch=eh.fetch,ep.prototype.load=function g($,ee,et){"function"==typeof ee&&(et=ee,ee=void 0);var ei=this;if(!et)return eh.asPromise(g,ei,$,ee);var es=et===ef;function eo(g,$){if(et){if(es)throw g;$&&$.resolveAll();var ee=et;et=null,ee(g,$)}}function eu(g){var $=g.lastIndexOf("google/protobuf/");if($>-1){var ee=g.substring($);if(ee in en)return ee}return null}function ep(g,$){try{if(eh.isString($)&&"{"===$.charAt(0)&&($=JSON.parse($)),eh.isString($)){er.filename=g;var et,en=er($,ei,ee),ep=0;if(en.imports)for(;ep<en.imports.length;++ep)(et=eu(en.imports[ep])||ei.resolvePath(g,en.imports[ep]))&&eg(et);if(en.weakImports)for(ep=0;ep<en.weakImports.length;++ep)(et=eu(en.weakImports[ep])||ei.resolvePath(g,en.weakImports[ep]))&&eg(et,!0)}else ei.setOptions($.options).addJSON($.nested)}catch(g){eo(g)}es||em||eo(null,ei)}function eg(g,$){if(g=eu(g)||g,!(ei.files.indexOf(g)>-1)){if(ei.files.push(g),g in en){es?ep(g,en[g]):(++em,setTimeout(function(){--em,ep(g,en[g])}));return}if(es){var ee;try{ee=eh.fs.readFileSync(g).toString("utf8")}catch(g){$||eo(g);return}ep(g,ee)}else++em,ei.fetch(g,function(ee,er){if(--em,et){if(ee){$?em||eo(null,ei):eo(ee);return}ep(g,er)}})}}var em=0;eh.isString($)&&($=[$]);for(var ey,ev=0;ev<$.length;++ev)(ey=ei.resolvePath("",$[ev]))&&eg(ey);return es?ei.resolveAll():em||eo(null,ei),ei},ep.prototype.loadSync=function(g,$){if(!eh.isNode)throw Error("not supported");return this.load(g,$,ef)},ep.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(g){return"'extend "+g.extend+"' in "+g.parent.fullName}).join(", "));return ei.prototype.resolveAll.call(this)};var eg=/^[A-Z]/;function em(g,$){var ee=$.parent.lookup($.extend);if(ee){var et=new es($.fullName,$.id,$.type,$.rule,void 0,$.options);return!!ee.get(et.name)||(et.declaringField=$,$.extensionField=et,ee.add(et),!0)}return!1}ep.prototype._handleAdd=function(g){if(g instanceof es)void 0===g.extend||g.extensionField||em(this,g)||this.deferred.push(g);else if(g instanceof eo)eg.test(g.name)&&(g.parent[g.name]=g.values);else if(!(g instanceof eu)){if(g instanceof et)for(var $=0;$<this.deferred.length;)em(this,this.deferred[$])?this.deferred.splice($,1):++$;for(var ee=0;ee<g.nestedArray.length;++ee)this._handleAdd(g._nestedArray[ee]);eg.test(g.name)&&(g.parent[g.name]=g)}(g instanceof et||g instanceof eo||g instanceof es)&&(this._fullyQualifiedObjects[g.fullName]=g)},ep.prototype._handleRemove=function(g){if(g instanceof es){if(void 0!==g.extend){if(g.extensionField)g.extensionField.parent.remove(g.extensionField),g.extensionField=null;else{var $=this.deferred.indexOf(g);$>-1&&this.deferred.splice($,1)}}}else if(g instanceof eo)eg.test(g.name)&&delete g.parent[g.name];else if(g instanceof ei){for(var ee=0;ee<g.nestedArray.length;++ee)this._handleRemove(g._nestedArray[ee]);eg.test(g.name)&&delete g.parent[g.name]}delete this._fullyQualifiedObjects[g.fullName]},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},34941:g=>{"use strict";g.exports={}},14864:(g,$,ee)=>{"use strict";$.Service=ee(41963)},41963:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(64647);function er(g,$,ee){if("function"!=typeof g)throw TypeError("rpcImpl must be a function");et.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!$,this.responseDelimited=!!ee}(er.prototype=Object.create(et.EventEmitter.prototype)).constructor=er,er.prototype.rpcCall=function g($,ee,er,en,ei){if(!en)throw TypeError("request must be specified");var es=this;if(!ei)return et.asPromise(g,es,$,ee,er,en);if(!es.rpcImpl){setTimeout(function(){ei(Error("already ended"))},0);return}try{return es.rpcImpl($,ee[es.requestDelimited?"encodeDelimited":"encode"](en).finish(),function(g,ee){if(g)return es.emit("error",g,$),ei(g);if(null===ee){es.end(!0);return}if(!(ee instanceof er))try{ee=er[es.responseDelimited?"decodeDelimited":"decode"](ee)}catch(g){return es.emit("error",g,$),ei(g)}return es.emit("data",ee,$),ei(null,ee)})}catch(g){es.emit("error",g,$),setTimeout(function(){ei(g)},0);return}},er.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},35931:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(23346);((es.prototype=Object.create(et.prototype)).constructor=es).className="Service";var er=ee(82006),en=ee(91603),ei=ee(14864);function es(g,$){et.call(this,g,$),this.methods={},this._methodsArray=null}function eo(g){return g._methodsArray=null,g}es.fromJSON=function(g,$){var ee=new es(g,$.options);if($.methods)for(var et=Object.keys($.methods),en=0;en<et.length;++en)ee.add(er.fromJSON(et[en],$.methods[et[en]]));return $.nested&&ee.addJSON($.nested),$.edition&&(ee._edition=$.edition),ee.comment=$.comment,ee._defaultEdition="proto3",ee},es.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return en.toObject(["edition",this._editionToJSON(),"options",$&&$.options||void 0,"methods",et.arrayToJSON(this.methodsArray,g)||{},"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},Object.defineProperty(es.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=en.toArray(this.methods))}}),es.prototype.get=function(g){return this.methods[g]||et.prototype.get.call(this,g)},es.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;et.prototype.resolve.call(this);for(var g=this.methodsArray,$=0;$<g.length;++$)g[$].resolve();return this},es.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(g=this._edition||g,et.prototype._resolveFeaturesRecursive.call(this,g),this.methodsArray.forEach($=>{$._resolveFeaturesRecursive(g)})),this},es.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);return g instanceof er?(this.methods[g.name]=g,g.parent=this,eo(this)):et.prototype.add.call(this,g)},es.prototype.remove=function(g){if(g instanceof er){if(this.methods[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.methods[g.name],g.parent=null,eo(this)}return et.prototype.remove.call(this,g)},es.prototype.create=function(g,$,ee){for(var et,er=new ei.Service(g,$,ee),es=0;es<this.methodsArray.length;++es){var eo=en.lcFirst((et=this._methodsArray[es]).resolve().name).replace(/[^$\w_]/g,"");er[eo]=en.codegen(["r","c"],en.isReserved(eo)?eo+"_":eo)("return this.rpcCall(m,q,s,r,c)")({m:et,q:et.resolvedRequestType.ctor,s:et.resolvedResponseType.ctor})}return er}},18343:g=>{"use strict";g.exports=ep;var $=/[\s{}=;:[\],'"()<>]/g,ee=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,et=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,er=/^ *[*/]+ */,en=/^\s*\*?\/*/,ei=/\n/g,es=/\s/,eo=/\\(.?)/g,eu={0:"\x00",r:"\r",n:"\n",t:"	"};function eh(g){return g.replace(eo,function(g,$){switch($){case"\\":case"":return $;default:return eu[$]||""}})}function ep(g,eo){g=g.toString();var eu=0,ep=g.length,ef=1,eg=0,em={},ey=[],ev=null;function eS(g){return Error("illegal "+g+" (line "+ef+")")}function eT(){var $="'"===ev?et:ee;$.lastIndex=eu-1;var er=$.exec(g);if(!er)throw eS("string");return eu=$.lastIndex,eO(ev),ev=null,eh(er[1])}function eE($){return g.charAt($)}function ew($,ee,et){var es,eu,eh={type:g.charAt($++),lineEmpty:!1,leading:et},ep=$-(es=eo?2:3);do if(--ep<0||"\n"===(eu=g.charAt(ep))){eh.lineEmpty=!0;break}while(" "===eu||"	"===eu);for(var ey=g.substring($,ee).split(ei),ev=0;ev<ey.length;++ev)ey[ev]=ey[ev].replace(eo?en:er,"").trim();eh.text=ey.join("\n").trim(),em[ef]=eh,eg=ef}function eC($){var ee=e_($),et=g.substring($,ee);return/^\s*\/\//.test(et)}function e_(g){for(var $=g;$<ep&&"\n"!==eE($);)$++;return $}function eI(){if(ey.length>0)return ey.shift();if(ev)return eT();var ee,et,er,en,ei,eh=0===eu;do{if(eu===ep)return null;for(ee=!1;es.test(er=eE(eu));)if("\n"===er&&(eh=!0,++ef),++eu===ep)return null;if("/"===eE(eu)){if(++eu===ep)throw eS("comment");if("/"===eE(eu)){if(eo){if(en=eu,ei=!1,eC(eu-1)){ei=!0;do if((eu=e_(eu))===ep||(eu++,!eh))break;while(eC(eu))}else eu=Math.min(ep,e_(eu)+1);ei&&(ew(en,eu,eh),eh=!0),ef++,ee=!0}else{for(ei="/"===eE(en=eu+1);"\n"!==eE(++eu);)if(eu===ep)return null;++eu,ei&&(ew(en,eu-1,eh),eh=!0),++ef,ee=!0}}else{if("*"!==(er=eE(eu)))return"/";en=eu+1,ei=eo||"*"===eE(en);do{if("\n"===er&&++ef,++eu===ep)throw eS("comment");et=er,er=eE(eu)}while("*"!==et||"/"!==er);++eu,ei&&(ew(en,eu-2,eh),eh=!0),ee=!0}}}while(ee);var eg=eu;if($.lastIndex=0,!$.test(eE(eg++)))for(;eg<ep&&!$.test(eE(eg));)++eg;var em=g.substring(eu,eu=eg);return('"'===em||"'"===em)&&(ev=em),em}function eO(g){ey.push(g)}function eA(){if(!ey.length){var g=eI();if(null===g)return null;eO(g)}return ey[0]}function eN(g,$){var ee=eA();if(ee===g)return eI(),!0;if(!$)throw eS("token '"+ee+"', '"+g+"' expected");return!1}function eD(g){var $,ee=null;return void 0===g?($=em[ef-1],delete em[ef-1],$&&(eo||"*"===$.type||$.lineEmpty)&&(ee=$.leading?$.text:null)):(eg<g&&eA(),$=em[g],delete em[g],$&&!$.lineEmpty&&(eo||"/"===$.type)&&(ee=$.leading?null:$.text)),ee}return Object.defineProperty({next:eI,peek:eA,push:eO,skip:eN,cmnt:eD},"line",{get:function(){return ef}})}ep.unescape=eh},49713:(g,$,ee)=>{"use strict";g.exports=eT;var et=ee(23346);((eT.prototype=Object.create(et.prototype)).constructor=eT).className="Type";var er=ee(96136),en=ee(8119),ei=ee(94834),es=ee(22461),eo=ee(35931),eu=ee(92942),eh=ee(26848),ep=ee(9846),ef=ee(91603),eg=ee(75625),em=ee(84666),ey=ee(32420),ev=ee(29497),eS=ee(30578);function eT(g,$){et.call(this,g,$),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function eE(g){return g._fieldsById=g._fieldsArray=g._oneofsArray=null,delete g.encode,delete g.decode,delete g.verify,g}Object.defineProperties(eT.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var g=Object.keys(this.fields),$=0;$<g.length;++$){var ee=this.fields[g[$]],et=ee.id;if(this._fieldsById[et])throw Error("duplicate id "+et+" in "+this);this._fieldsById[et]=ee}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ef.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ef.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=eT.generateConstructor(this)())},set:function(g){var $=g.prototype;$ instanceof eu||((g.prototype=new eu).constructor=g,ef.merge(g.prototype,$)),g.$type=g.prototype.$type=this,ef.merge(g,eu,!0),this._ctor=g;for(var ee=0;ee<this.fieldsArray.length;++ee)this._fieldsArray[ee].resolve();var et={};for(ee=0;ee<this.oneofsArray.length;++ee)et[this._oneofsArray[ee].resolve().name]={get:ef.oneOfGetter(this._oneofsArray[ee].oneof),set:ef.oneOfSetter(this._oneofsArray[ee].oneof)};ee&&Object.defineProperties(g.prototype,et)}}}),eT.generateConstructor=function(g){for(var $,ee=ef.codegen(["p"],g.name),et=0;et<g.fieldsArray.length;++et)($=g._fieldsArray[et]).map?ee("this%s={}",ef.safeProp($.name)):$.repeated&&ee("this%s=[]",ef.safeProp($.name));return ee("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},eT.fromJSON=function(g,$){var ee=new eT(g,$.options);ee.extensions=$.extensions,ee.reserved=$.reserved;for(var eu=Object.keys($.fields),eh=0;eh<eu.length;++eh)ee.add((void 0!==$.fields[eu[eh]].keyType?es.fromJSON:ei.fromJSON)(eu[eh],$.fields[eu[eh]]));if($.oneofs)for(eu=Object.keys($.oneofs),eh=0;eh<eu.length;++eh)ee.add(en.fromJSON(eu[eh],$.oneofs[eu[eh]]));if($.nested)for(eu=Object.keys($.nested),eh=0;eh<eu.length;++eh){var ep=$.nested[eu[eh]];ee.add((void 0!==ep.id?ei.fromJSON:void 0!==ep.fields?eT.fromJSON:void 0!==ep.values?er.fromJSON:void 0!==ep.methods?eo.fromJSON:et.fromJSON)(eu[eh],ep))}return $.extensions&&$.extensions.length&&(ee.extensions=$.extensions),$.reserved&&$.reserved.length&&(ee.reserved=$.reserved),$.group&&(ee.group=!0),$.comment&&(ee.comment=$.comment),$.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},eT.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return ef.toObject(["edition",this._editionToJSON(),"options",$&&$.options||void 0,"oneofs",et.arrayToJSON(this.oneofsArray,g),"fields",et.arrayToJSON(this.fieldsArray.filter(function(g){return!g.declaringField}),g)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},eT.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;et.prototype.resolveAll.call(this);var g=this.oneofsArray;for(ee=0;ee<g.length;)g[ee++].resolve();for(var $=this.fieldsArray,ee=0;ee<$.length;)$[ee++].resolve();return this},eT.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(g=this._edition||g,et.prototype._resolveFeaturesRecursive.call(this,g),this.oneofsArray.forEach($=>{$._resolveFeatures(g)}),this.fieldsArray.forEach($=>{$._resolveFeatures(g)})),this},eT.prototype.get=function(g){return this.fields[g]||this.oneofs&&this.oneofs[g]||this.nested&&this.nested[g]||null},eT.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);if(g instanceof ei&&void 0===g.extend){if(this._fieldsById?this._fieldsById[g.id]:this.fieldsById[g.id])throw Error("duplicate id "+g.id+" in "+this);if(this.isReservedId(g.id))throw Error("id "+g.id+" is reserved in "+this);if(this.isReservedName(g.name))throw Error("name '"+g.name+"' is reserved in "+this);return g.parent&&g.parent.remove(g),this.fields[g.name]=g,g.message=this,g.onAdd(this),eE(this)}return g instanceof en?(this.oneofs||(this.oneofs={}),this.oneofs[g.name]=g,g.onAdd(this),eE(this)):et.prototype.add.call(this,g)},eT.prototype.remove=function(g){if(g instanceof ei&&void 0===g.extend){if(!this.fields||this.fields[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.fields[g.name],g.parent=null,g.onRemove(this),eE(this)}if(g instanceof en){if(!this.oneofs||this.oneofs[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.oneofs[g.name],g.parent=null,g.onRemove(this),eE(this)}return et.prototype.remove.call(this,g)},eT.prototype.isReservedId=function(g){return et.isReservedId(this.reserved,g)},eT.prototype.isReservedName=function(g){return et.isReservedName(this.reserved,g)},eT.prototype.create=function(g){return new this.ctor(g)},eT.prototype.setup=function(){for(var g=this.fullName,$=[],ee=0;ee<this.fieldsArray.length;++ee)$.push(this._fieldsArray[ee].resolve().resolvedType);this.encode=eg(this)({Writer:ep,types:$,util:ef}),this.decode=em(this)({Reader:eh,types:$,util:ef}),this.verify=ey(this)({types:$,util:ef}),this.fromObject=ev.fromObject(this)({types:$,util:ef}),this.toObject=ev.toObject(this)({types:$,util:ef});var et=eS[g];if(et){var er=Object.create(this);er.fromObject=this.fromObject,this.fromObject=et.fromObject.bind(er),er.toObject=this.toObject,this.toObject=et.toObject.bind(er)}return this},eT.prototype.encode=function(g,$){return this.setup().encode(g,$)},eT.prototype.encodeDelimited=function(g,$){return this.encode(g,$&&$.len?$.fork():$).ldelim()},eT.prototype.decode=function(g,$){return this.setup().decode(g,$)},eT.prototype.decodeDelimited=function(g){return g instanceof eh||(g=eh.create(g)),this.decode(g,g.uint32())},eT.prototype.verify=function(g){return this.setup().verify(g)},eT.prototype.fromObject=function(g){return this.setup().fromObject(g)},eT.prototype.toObject=function(g,$){return this.setup().toObject(g,$)},eT.d=function(g){return function($){ef.decorateType($,g)}}},60650:(g,$,ee)=>{"use strict";var et=$,er=ee(91603),en=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ei(g,$){var ee=0,et={};for($|=0;ee<g.length;)et[en[ee+$]]=g[ee++];return et}et.basic=ei([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),et.defaults=ei([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",er.emptyArray,null]),et.long=ei([0,0,0,1,1],7),et.mapKey=ei([0,0,0,5,5,0,0,0,1,1,0,2],2),et.packed=ei([1,5,0,0,0,5,5,0,0,0,1,1,0])},91603:(g,$,ee)=>{"use strict";var et,er,en=g.exports=ee(64647),ei=ee(34941);en.codegen=ee(52012),en.fetch=ee(63035),en.path=ee(29986),en.fs=en.inquire("fs"),en.toArray=function(g){if(g){for(var $=Object.keys(g),ee=Array($.length),et=0;et<$.length;)ee[et]=g[$[et++]];return ee}return[]},en.toObject=function(g){for(var $={},ee=0;ee<g.length;){var et=g[ee++],er=g[ee++];void 0!==er&&($[et]=er)}return $};var es=/\\/g,eo=/"/g;en.isReserved=function(g){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(g)},en.safeProp=function(g){return!/^[$\w_]+$/.test(g)||en.isReserved(g)?'["'+g.replace(es,"\\\\").replace(eo,'\\"')+'"]':"."+g},en.ucFirst=function(g){return g.charAt(0).toUpperCase()+g.substring(1)};var eu=/_([a-z])/g;en.camelCase=function(g){return g.substring(0,1)+g.substring(1).replace(eu,function(g,$){return $.toUpperCase()})},en.compareFieldsById=function(g,$){return g.id-$.id},en.decorateType=function(g,$){if(g.$type)return $&&g.$type.name!==$&&(en.decorateRoot.remove(g.$type),g.$type.name=$,en.decorateRoot.add(g.$type)),g.$type;et||(et=ee(49713));var er=new et($||g.name);return en.decorateRoot.add(er),er.ctor=g,Object.defineProperty(g,"$type",{value:er,enumerable:!1}),Object.defineProperty(g.prototype,"$type",{value:er,enumerable:!1}),er};var eh=0;en.decorateEnum=function(g){if(g.$type)return g.$type;er||(er=ee(96136));var $=new er("Enum"+eh++,g);return en.decorateRoot.add($),Object.defineProperty(g,"$type",{value:$,enumerable:!1}),$},en.setProperty=function(g,$,ee,et){function er(g,$,ee){var en=$.shift();if("__proto__"===en||"prototype"===en)return g;if($.length>0)g[en]=er(g[en]||{},$,ee);else{var ei=g[en];if(ei&&et)return g;ei&&(ee=[].concat(ei).concat(ee)),g[en]=ee}return g}if("object"!=typeof g)throw TypeError("dst must be an object");if(!$)throw TypeError("path must be specified");return er(g,$=$.split("."),ee)},Object.defineProperty(en,"decorateRoot",{get:function(){return ei.decorated||(ei.decorated=new(ee(41224)))}})},96862:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(64647);function er(g,$){this.lo=g>>>0,this.hi=$>>>0}var en=er.zero=new er(0,0);en.toNumber=function(){return 0},en.zzEncode=en.zzDecode=function(){return this},en.length=function(){return 1};var ei=er.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";er.fromNumber=function(g){if(0===g)return en;var $=g<0;$&&(g=-g);var ee=g>>>0,et=(g-ee)/4294967296>>>0;return $&&(et=~et>>>0,ee=~ee>>>0,++ee>4294967295&&(ee=0,++et>4294967295&&(et=0))),new er(ee,et)},er.from=function(g){if("number"==typeof g)return er.fromNumber(g);if(et.isString(g)){if(!et.Long)return er.fromNumber(parseInt(g,10));g=et.Long.fromString(g)}return g.low||g.high?new er(g.low>>>0,g.high>>>0):en},er.prototype.toNumber=function(g){if(!g&&this.hi>>>31){var $=~this.lo+1>>>0,ee=~this.hi>>>0;return $||(ee=ee+1>>>0),-($+4294967296*ee)}return this.lo+4294967296*this.hi},er.prototype.toLong=function(g){return et.Long?new et.Long(0|this.lo,0|this.hi,!!g):{low:0|this.lo,high:0|this.hi,unsigned:!!g}};var es=String.prototype.charCodeAt;er.fromHash=function(g){return g===ei?en:new er((es.call(g,0)|es.call(g,1)<<8|es.call(g,2)<<16|es.call(g,3)<<24)>>>0,(es.call(g,4)|es.call(g,5)<<8|es.call(g,6)<<16|es.call(g,7)<<24)>>>0)},er.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},er.prototype.zzEncode=function(){var g=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^g)>>>0,this.lo=(this.lo<<1^g)>>>0,this},er.prototype.zzDecode=function(){var g=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^g)>>>0,this.hi=(this.hi>>>1^g)>>>0,this},er.prototype.length=function(){var g=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,ee=this.hi>>>24;return 0===ee?0===$?g<16384?g<128?1:2:g<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:ee<128?9:10}},64647:function(g,$,ee){"use strict";var et=$;function er(g,$,ee){for(var et=Object.keys($),er=0;er<et.length;++er)void 0!==g[et[er]]&&ee||(g[et[er]]=$[et[er]]);return g}function en(g){function $(g,ee){if(!(this instanceof $))return new $(g,ee);Object.defineProperty(this,"message",{get:function(){return g}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:Error().stack||""}),ee&&er(this,ee)}return $.prototype=Object.create(Error.prototype,{constructor:{value:$,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return g},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),$}et.asPromise=ee(70799),et.base64=ee(92130),et.EventEmitter=ee(80854),et.float=ee(14324),et.inquire=ee(20449),et.utf8=ee(78131),et.pool=ee(56035),et.LongBits=ee(96862),et.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),et.global=et.isNode&&global||"undefined"!=typeof self&&self||this,et.emptyArray=Object.freeze?Object.freeze([]):[],et.emptyObject=Object.freeze?Object.freeze({}):{},et.isInteger=Number.isInteger||function(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g},et.isString=function(g){return"string"==typeof g||g instanceof String},et.isObject=function(g){return g&&"object"==typeof g},et.isset=et.isSet=function(g,$){var ee=g[$];return!!(null!=ee&&g.hasOwnProperty($))&&("object"!=typeof ee||(Array.isArray(ee)?ee.length:Object.keys(ee).length)>0)},et.Buffer=function(){try{var g=et.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch(g){return null}}(),et._Buffer_from=null,et._Buffer_allocUnsafe=null,et.newBuffer=function(g){return"number"==typeof g?et.Buffer?et._Buffer_allocUnsafe(g):new et.Array(g):et.Buffer?et._Buffer_from(g):"undefined"==typeof Uint8Array?g:new Uint8Array(g)},et.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,et.Long=et.global.dcodeIO&&et.global.dcodeIO.Long||et.global.Long||et.inquire("long"),et.key2Re=/^true|false|0|1$/,et.key32Re=/^-?(?:0|[1-9][0-9]*)$/,et.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,et.longToHash=function(g){return g?et.LongBits.from(g).toHash():et.LongBits.zeroHash},et.longFromHash=function(g,$){var ee=et.LongBits.fromHash(g);return et.Long?et.Long.fromBits(ee.lo,ee.hi,$):ee.toNumber(!!$)},et.merge=er,et.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},et.newError=en,et.ProtocolError=en("ProtocolError"),et.oneOfGetter=function(g){for(var $={},ee=0;ee<g.length;++ee)$[g[ee]]=1;return function(){for(var g=Object.keys(this),ee=g.length-1;ee>-1;--ee)if(1===$[g[ee]]&&void 0!==this[g[ee]]&&null!==this[g[ee]])return g[ee]}},et.oneOfSetter=function(g){return function($){for(var ee=0;ee<g.length;++ee)g[ee]!==$&&delete this[g[ee]]}},et.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},et._configure=function(){var g=et.Buffer;if(!g){et._Buffer_from=et._Buffer_allocUnsafe=null;return}et._Buffer_from=g.from!==Uint8Array.from&&g.from||function($,ee){return new g($,ee)},et._Buffer_allocUnsafe=g.allocUnsafe||function($){return new g($)}}},32420:(g,$,ee)=>{"use strict";g.exports=eo;var et=ee(96136),er=ee(91603);function en(g,$){return g.name+": "+$+(g.repeated&&"array"!==$?"[]":g.map&&"object"!==$?"{k:"+g.keyType+"}":"")+" expected"}function ei(g,$,ee,er){if($.resolvedType){if($.resolvedType instanceof et){g("switch(%s){",er)("default:")("return%j",en($,"enum value"));for(var ei=Object.keys($.resolvedType.values),es=0;es<ei.length;++es)g("case %i:",$.resolvedType.values[ei[es]]);g("break")("}")}else g("{")("var e=types[%i].verify(%s);",ee,er)("if(e)")("return%j+e",$.name+".")("}")}else switch($.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.isInteger(%s))",er)("return%j",en($,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",er,er,er,er)("return%j",en($,"integer|Long"));break;case"float":case"double":g('if(typeof %s!=="number")',er)("return%j",en($,"number"));break;case"bool":g('if(typeof %s!=="boolean")',er)("return%j",en($,"boolean"));break;case"string":g("if(!util.isString(%s))",er)("return%j",en($,"string"));break;case"bytes":g('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',er,er,er)("return%j",en($,"buffer"))}return g}function es(g,$,ee){switch($.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.key32Re.test(%s))",ee)("return%j",en($,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.key64Re.test(%s))",ee)("return%j",en($,"integer|Long key"));break;case"bool":g("if(!util.key2Re.test(%s))",ee)("return%j",en($,"boolean key"))}return g}function eo(g){var $=er.codegen(["m"],g.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ee=g.oneofsArray,et={};ee.length&&$("var p={}");for(var eo=0;eo<g.fieldsArray.length;++eo){var eu=g._fieldsArray[eo].resolve(),eh="m"+er.safeProp(eu.name);if(eu.optional&&$("if(%s!=null&&m.hasOwnProperty(%j)){",eh,eu.name),eu.map)$("if(!util.isObject(%s))",eh)("return%j",en(eu,"object"))("var k=Object.keys(%s)",eh)("for(var i=0;i<k.length;++i){"),es($,eu,"k[i]"),ei($,eu,eo,eh+"[k[i]]")("}");else if(eu.repeated)$("if(!Array.isArray(%s))",eh)("return%j",en(eu,"array"))("for(var i=0;i<%s.length;++i){",eh),ei($,eu,eo,eh+"[i]")("}");else{if(eu.partOf){var ep=er.safeProp(eu.partOf.name);1===et[eu.partOf.name]&&$("if(p%s===1)",ep)("return%j",eu.partOf.name+": multiple values"),et[eu.partOf.name]=1,$("p%s=1",ep)}ei($,eu,eo,eh)}eu.optional&&$("}")}return $("return null")}},30578:(g,$,ee)=>{"use strict";var et=$,er=ee(92942);et[".google.protobuf.Any"]={fromObject:function(g){if(g&&g["@type"]){var $=g["@type"].substring(g["@type"].lastIndexOf("/")+1),ee=this.lookup($);if(ee){var et="."===g["@type"].charAt(0)?g["@type"].slice(1):g["@type"];return -1===et.indexOf("/")&&(et="/"+et),this.create({type_url:et,value:ee.encode(ee.fromObject(g)).finish()})}}return this.fromObject(g)},toObject:function(g,$){var ee="type.googleapis.com/",et="",en="";if($&&$.json&&g.type_url&&g.value){en=g.type_url.substring(g.type_url.lastIndexOf("/")+1),et=g.type_url.substring(0,g.type_url.lastIndexOf("/")+1);var ei=this.lookup(en);ei&&(g=ei.decode(g.value))}if(!(g instanceof this.ctor)&&g instanceof er){var es=g.$type.toObject(g,$),eo="."===g.$type.fullName[0]?g.$type.fullName.slice(1):g.$type.fullName;return""===et&&(et=ee),en=et+eo,es["@type"]=en,es}return this.toObject(g,$)}}},9846:(g,$,ee)=>{"use strict";g.exports=ep;var et,er=ee(64647),en=er.LongBits,ei=er.base64,es=er.utf8;function eo(g,$,ee){this.fn=g,this.len=$,this.next=void 0,this.val=ee}function eu(){}function eh(g){this.head=g.head,this.tail=g.tail,this.len=g.len,this.next=g.states}function ep(){this.len=0,this.head=new eo(eu,0,0),this.tail=this.head,this.states=null}var ef=function(){return er.Buffer?function(){return(ep.create=function(){return new et})()}:function(){return new ep}};function eg(g,$,ee){$[ee]=255&g}function em(g,$,ee){for(;g>127;)$[ee++]=127&g|128,g>>>=7;$[ee]=g}function ey(g,$){this.len=g,this.next=void 0,this.val=$}function ev(g,$,ee){for(;g.hi;)$[ee++]=127&g.lo|128,g.lo=(g.lo>>>7|g.hi<<25)>>>0,g.hi>>>=7;for(;g.lo>127;)$[ee++]=127&g.lo|128,g.lo=g.lo>>>7;$[ee++]=g.lo}function eS(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}ep.create=ef(),ep.alloc=function(g){return new er.Array(g)},er.Array!==Array&&(ep.alloc=er.pool(ep.alloc,er.Array.prototype.subarray)),ep.prototype._push=function(g,$,ee){return this.tail=this.tail.next=new eo(g,$,ee),this.len+=$,this},ey.prototype=Object.create(eo.prototype),ey.prototype.fn=em,ep.prototype.uint32=function(g){return this.len+=(this.tail=this.tail.next=new ey((g>>>=0)<128?1:g<16384?2:g<2097152?3:g<268435456?4:5,g)).len,this},ep.prototype.int32=function(g){return g<0?this._push(ev,10,en.fromNumber(g)):this.uint32(g)},ep.prototype.sint32=function(g){return this.uint32((g<<1^g>>31)>>>0)},ep.prototype.uint64=function(g){var $=en.from(g);return this._push(ev,$.length(),$)},ep.prototype.int64=ep.prototype.uint64,ep.prototype.sint64=function(g){var $=en.from(g).zzEncode();return this._push(ev,$.length(),$)},ep.prototype.bool=function(g){return this._push(eg,1,g?1:0)},ep.prototype.fixed32=function(g){return this._push(eS,4,g>>>0)},ep.prototype.sfixed32=ep.prototype.fixed32,ep.prototype.fixed64=function(g){var $=en.from(g);return this._push(eS,4,$.lo)._push(eS,4,$.hi)},ep.prototype.sfixed64=ep.prototype.fixed64,ep.prototype.float=function(g){return this._push(er.float.writeFloatLE,4,g)},ep.prototype.double=function(g){return this._push(er.float.writeDoubleLE,8,g)};var eT=er.Array.prototype.set?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){for(var et=0;et<g.length;++et)$[ee+et]=g[et]};ep.prototype.bytes=function(g){var $=g.length>>>0;if(!$)return this._push(eg,1,0);if(er.isString(g)){var ee=ep.alloc($=ei.length(g));ei.decode(g,ee,0),g=ee}return this.uint32($)._push(eT,$,g)},ep.prototype.string=function(g){var $=es.length(g);return $?this.uint32($)._push(es.write,$,g):this._push(eg,1,0)},ep.prototype.fork=function(){return this.states=new eh(this),this.head=this.tail=new eo(eu,0,0),this.len=0,this},ep.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eo(eu,0,0),this.len=0),this},ep.prototype.ldelim=function(){var g=this.head,$=this.tail,ee=this.len;return this.reset().uint32(ee),ee&&(this.tail.next=g.next,this.tail=$,this.len+=ee),this},ep.prototype.finish=function(){for(var g=this.head.next,$=this.constructor.alloc(this.len),ee=0;g;)g.fn(g.val,$,ee),ee+=g.len,g=g.next;return $},ep._configure=function(g){et=g,ep.create=ef(),et._configure()}},15655:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(9846);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(64647);function en(){et.call(this)}function ei(g,$,ee){g.length<40?er.utf8.write(g,$,ee):$.utf8Write?$.utf8Write(g,ee):$.write(g,ee)}en._configure=function(){en.alloc=er._Buffer_allocUnsafe,en.writeBytesBuffer=er.Buffer&&er.Buffer.prototype instanceof Uint8Array&&"set"===er.Buffer.prototype.set.name?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){if(g.copy)g.copy($,ee,0,g.length);else for(var et=0;et<g.length;)$[ee++]=g[et++]}},en.prototype.bytes=function(g){er.isString(g)&&(g=er._Buffer_from(g,"base64"));var $=g.length>>>0;return this.uint32($),$&&this._push(en.writeBytesBuffer,$,g),this},en.prototype.string=function(g){var $=er.Buffer.byteLength(g);return this.uint32($),$&&this._push(ei,$,g),this},en._configure()},58715:(g,$,ee)=>{"use strict";var et;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */et={value:!0};let er=ee(51382),en=ee(25269),ei=ee(21725),es=ee(72916);et=ee(69802),et=function(g){return"@type"in g&&"string"==typeof g["@type"]};let eo={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function eu(g,$){return""===g?$:g+"."+$}function eh(g){return g instanceof en.Service||g instanceof en.Type||g instanceof en.Enum}function ep(g){return g instanceof en.Namespace||g instanceof en.Root}function ef(g,$){let ee=eu($,g.name);return eh(g)?[[ee,g]]:ep(g)&&void 0!==g.nested?Object.keys(g.nested).map($=>ef(g.nested[$],ee)).reduce((g,$)=>g.concat($),[]):[]}function eg(g,$){return function(ee){return g.toObject(g.decode(ee),$)}}function em(g){return function($){if(Array.isArray($))throw Error(`Failed to serialize message: expected object with ${g.name} structure, got array instead`);let ee=g.fromObject($);return g.encode(ee).finish()}}function ey(g,$,ee,et){let en=g.resolvedRequestType,ei=g.resolvedResponseType;return{path:"/"+$+"/"+g.name,requestStream:!!g.requestStream,responseStream:!!g.responseStream,requestSerialize:em(en),requestDeserialize:eg(en,ee),responseSerialize:em(ei),responseDeserialize:eg(ei,ee),originalName:er(g.name),requestType:eS(en,et),responseType:eS(ei,et)}}function ev(g,$,ee,et){let er={};for(let en of g.methodsArray)er[en.name]=ey(en,$,ee,et);return er}function eS(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:ee.$type.toObject(ee,eo),fileDescriptorProtos:$}}function eT(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:ee.$type.toObject(ee,eo),fileDescriptorProtos:$}}function eE(g,$,ee,et){if(g instanceof en.Service)return ev(g,$,ee,et);if(g instanceof en.Type)return eS(g,et);if(g instanceof en.Enum)return eT(g,et);throw Error("Type mismatch in reflection object handling")}function ew(g,$){let ee={};g.resolveAll();let et=g.toDescriptor("proto3").file.map(g=>Buffer.from(ei.FileDescriptorProto.encode(g).finish()));for(let[er,en]of ef(g,""))ee[er]=eE(en,er,$,et);return ee}function eC(g,$){$=$||{};let ee=en.Root.fromDescriptor(g);return ee.resolveAll(),ew(ee,$)}function e_(g,$){$=$||{};let ee=en.Root.fromJSON(g);return ee.resolveAll(),ew(ee,$)}et=function(g,$){return es.loadProtosWithOptions(g,$).then(g=>ew(g,$))},et=function(g,$){return ew(es.loadProtosWithOptionsSync(g,$),$)},$.im=e_,et=function(g,$){return eC(ei.FileDescriptorSet.decode(g),$)},et=function(g,$){return eC(ei.FileDescriptorSet.fromObject(g),$)},es.addCommonProtos()},72916:(g,$,ee)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty($,"__esModule",{value:!0});let et=ee(57147),er=ee(71017),en=ee(25269);function ei(g,$){let ee=g.resolvePath;g.resolvePath=(g,en)=>{if(er.isAbsolute(en))return en;for(let g of $){let $=er.join(g,en);try{return et.accessSync($,et.constants.R_OK),$}catch(g){continue}}return process.emitWarning(`${en} not found in any of the include paths ${$}`),ee(g,en)}}async function es(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));ei(ee,$.includeDirs)}let et=await ee.load(g,$);return et.resolveAll(),et}function eo(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))throw Error("The includeDirs option must be an array");ei(ee,$.includeDirs)}let et=ee.loadSync(g,$);return et.resolveAll(),et}function eu(){let g=ee(56541),$=ee(89987),et=ee(57674),er=ee(73795);en.common("api",g.nested.google.nested.protobuf.nested),en.common("descriptor",$.nested.google.nested.protobuf.nested),en.common("source_context",et.nested.google.nested.protobuf.nested),en.common("type",er.nested.google.nested.protobuf.nested)}$.loadProtosWithOptions=es,$.loadProtosWithOptionsSync=eo,$.addCommonProtos=eu},70799:g=>{"use strict";function $(g,$){for(var ee=Array(arguments.length-1),et=0,er=2,en=!0;er<arguments.length;)ee[et++]=arguments[er++];return new Promise(function(er,ei){ee[et]=function(g){if(en){if(en=!1,g)ei(g);else{for(var $=Array(arguments.length-1),ee=0;ee<$.length;)$[ee++]=arguments[ee];er.apply(null,$)}}};try{g.apply($||null,ee)}catch(g){en&&(en=!1,ei(g))}})}g.exports=$},92130:(g,$)=>{"use strict";var ee=$;ee.length=function(g){var $=g.length;if(!$)return 0;for(var ee=0;--$%4>1&&"="===g.charAt($);)++ee;return Math.ceil(3*g.length)/4-ee};for(var et=Array(64),er=Array(123),en=0;en<64;)er[et[en]=en<26?en+65:en<52?en+71:en<62?en-4:en-59|43]=en++;ee.encode=function(g,$,ee){for(var er,en=null,ei=[],es=0,eo=0;$<ee;){var eu=g[$++];switch(eo){case 0:ei[es++]=et[eu>>2],er=(3&eu)<<4,eo=1;break;case 1:ei[es++]=et[er|eu>>4],er=(15&eu)<<2,eo=2;break;case 2:ei[es++]=et[er|eu>>6],ei[es++]=et[63&eu],eo=0}es>8191&&((en||(en=[])).push(String.fromCharCode.apply(String,ei)),es=0)}return(eo&&(ei[es++]=et[er],ei[es++]=61,1===eo&&(ei[es++]=61)),en)?(es&&en.push(String.fromCharCode.apply(String,ei.slice(0,es))),en.join("")):String.fromCharCode.apply(String,ei.slice(0,es))};var ei="invalid encoding";ee.decode=function(g,$,ee){for(var et,en=ee,es=0,eo=0;eo<g.length;){var eu=g.charCodeAt(eo++);if(61===eu&&es>1)break;if(void 0===(eu=er[eu]))throw Error(ei);switch(es){case 0:et=eu,es=1;break;case 1:$[ee++]=et<<2|(48&eu)>>4,et=eu,es=2;break;case 2:$[ee++]=(15&et)<<4|(60&eu)>>2,et=eu,es=3;break;case 3:$[ee++]=(3&et)<<6|eu,es=0}}if(1===es)throw Error(ei);return ee-en},ee.test=function(g){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(g)}},52012:g=>{"use strict";function $(g,ee){"string"==typeof g&&(ee=g,g=void 0);var et=[];function er(g){if("string"!=typeof g){var ee=en();if($.verbose&&console.log("codegen: "+ee),ee="return "+ee,g){for(var ei=Object.keys(g),es=Array(ei.length+1),eo=Array(ei.length),eu=0;eu<ei.length;)es[eu]=ei[eu],eo[eu]=g[ei[eu++]];return es[eu]=ee,Function.apply(null,es).apply(null,eo)}return Function(ee)()}for(var eh=Array(arguments.length-1),ep=0;ep<eh.length;)eh[ep]=arguments[++ep];if(ep=0,g=g.replace(/%([%dfijs])/g,function(g,$){var ee=eh[ep++];switch($){case"d":case"f":return String(Number(ee));case"i":return String(Math.floor(ee));case"j":return JSON.stringify(ee);case"s":return String(ee)}return"%"}),ep!==eh.length)throw Error("parameter count mismatch");return et.push(g),er}function en($){return"function "+($||ee||"")+"("+(g&&g.join(",")||"")+"){\n  "+et.join("\n  ")+"\n}"}return er.toString=en,er}g.exports=$,$.verbose=!1},80854:g=>{"use strict";function $(){this._listeners={}}g.exports=$,$.prototype.on=function(g,$,ee){return(this._listeners[g]||(this._listeners[g]=[])).push({fn:$,ctx:ee||this}),this},$.prototype.off=function(g,$){if(void 0===g)this._listeners={};else if(void 0===$)this._listeners[g]=[];else for(var ee=this._listeners[g],et=0;et<ee.length;)ee[et].fn===$?ee.splice(et,1):++et;return this},$.prototype.emit=function(g){var $=this._listeners[g];if($){for(var ee=[],et=1;et<arguments.length;)ee.push(arguments[et++]);for(et=0;et<$.length;)$[et].fn.apply($[et++].ctx,ee)}return this}},63035:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(70799),er=ee(20449)("fs");function en(g,$,ee){return("function"==typeof $?(ee=$,$={}):$||($={}),ee)?!$.xhr&&er&&er.readFile?er.readFile(g,function(et,er){return et&&"undefined"!=typeof XMLHttpRequest?en.xhr(g,$,ee):et?ee(et):ee(null,$.binary?er:er.toString("utf8"))}):en.xhr(g,$,ee):et(en,this,g,$)}en.xhr=function(g,$,ee){var et=new XMLHttpRequest;et.onreadystatechange=function(){if(4===et.readyState){if(0!==et.status&&200!==et.status)return ee(Error("status "+et.status));if($.binary){var g=et.response;if(!g){g=[];for(var er=0;er<et.responseText.length;++er)g.push(255&et.responseText.charCodeAt(er))}return ee(null,"undefined"!=typeof Uint8Array?new Uint8Array(g):g)}return ee(null,et.responseText)}},$.binary&&("overrideMimeType"in et&&et.overrideMimeType("text/plain; charset=x-user-defined"),et.responseType="arraybuffer"),et.open("GET",g),et.send()}},14324:g=>{"use strict";function $(g){return"undefined"!=typeof Float32Array?function(){var $=new Float32Array([-0]),ee=new Uint8Array($.buffer),et=128===ee[3];function er(g,et,er){$[0]=g,et[er]=ee[0],et[er+1]=ee[1],et[er+2]=ee[2],et[er+3]=ee[3]}function en(g,et,er){$[0]=g,et[er]=ee[3],et[er+1]=ee[2],et[er+2]=ee[1],et[er+3]=ee[0]}function ei(g,et){return ee[0]=g[et],ee[1]=g[et+1],ee[2]=g[et+2],ee[3]=g[et+3],$[0]}function es(g,et){return ee[3]=g[et],ee[2]=g[et+1],ee[1]=g[et+2],ee[0]=g[et+3],$[0]}g.writeFloatLE=et?er:en,g.writeFloatBE=et?en:er,g.readFloatLE=et?ei:es,g.readFloatBE=et?es:ei}():function(){function $(g,$,ee,et){var er=$<0?1:0;if(er&&($=-$),0===$)g(1/$>0?0:2147483648,ee,et);else if(isNaN($))g(2143289344,ee,et);else if($>34028234663852886e22)g((er<<31|2139095040)>>>0,ee,et);else if($<11754943508222875e-54)g((er<<31|Math.round($/1401298464324817e-60))>>>0,ee,et);else{var en=Math.floor(Math.log($)/Math.LN2),ei=8388607&Math.round($*Math.pow(2,-en)*8388608);g((er<<31|en+127<<23|ei)>>>0,ee,et)}}function ei(g,$,ee){var et=g($,ee),er=(et>>31)*2+1,en=et>>>23&255,ei=8388607&et;return 255===en?ei?NaN:1/0*er:0===en?1401298464324817e-60*er*ei:er*Math.pow(2,en-150)*(ei+8388608)}g.writeFloatLE=$.bind(null,ee),g.writeFloatBE=$.bind(null,et),g.readFloatLE=ei.bind(null,er),g.readFloatBE=ei.bind(null,en)}(),"undefined"!=typeof Float64Array?function(){var $=new Float64Array([-0]),ee=new Uint8Array($.buffer),et=128===ee[7];function er(g,et,er){$[0]=g,et[er]=ee[0],et[er+1]=ee[1],et[er+2]=ee[2],et[er+3]=ee[3],et[er+4]=ee[4],et[er+5]=ee[5],et[er+6]=ee[6],et[er+7]=ee[7]}function en(g,et,er){$[0]=g,et[er]=ee[7],et[er+1]=ee[6],et[er+2]=ee[5],et[er+3]=ee[4],et[er+4]=ee[3],et[er+5]=ee[2],et[er+6]=ee[1],et[er+7]=ee[0]}function ei(g,et){return ee[0]=g[et],ee[1]=g[et+1],ee[2]=g[et+2],ee[3]=g[et+3],ee[4]=g[et+4],ee[5]=g[et+5],ee[6]=g[et+6],ee[7]=g[et+7],$[0]}function es(g,et){return ee[7]=g[et],ee[6]=g[et+1],ee[5]=g[et+2],ee[4]=g[et+3],ee[3]=g[et+4],ee[2]=g[et+5],ee[1]=g[et+6],ee[0]=g[et+7],$[0]}g.writeDoubleLE=et?er:en,g.writeDoubleBE=et?en:er,g.readDoubleLE=et?ei:es,g.readDoubleBE=et?es:ei}():function(){function $(g,$,ee,et,er,en){var ei,es=et<0?1:0;if(es&&(et=-et),0===et)g(0,er,en+$),g(1/et>0?0:2147483648,er,en+ee);else if(isNaN(et))g(0,er,en+$),g(2146959360,er,en+ee);else if(et>17976931348623157e292)g(0,er,en+$),g((es<<31|2146435072)>>>0,er,en+ee);else if(et<22250738585072014e-324)g((ei=et/5e-324)>>>0,er,en+$),g((es<<31|ei/4294967296)>>>0,er,en+ee);else{var eo=Math.floor(Math.log(et)/Math.LN2);1024===eo&&(eo=1023),g(4503599627370496*(ei=et*Math.pow(2,-eo))>>>0,er,en+$),g((es<<31|eo+1023<<20|1048576*ei&1048575)>>>0,er,en+ee)}}function ei(g,$,ee,et,er){var en=g(et,er+$),ei=g(et,er+ee),es=(ei>>31)*2+1,eo=ei>>>20&2047,eu=4294967296*(1048575&ei)+en;return 2047===eo?eu?NaN:1/0*es:0===eo?5e-324*es*eu:es*Math.pow(2,eo-1075)*(eu+4503599627370496)}g.writeDoubleLE=$.bind(null,ee,0,4),g.writeDoubleBE=$.bind(null,et,4,0),g.readDoubleLE=ei.bind(null,er,0,4),g.readDoubleBE=ei.bind(null,en,4,0)}(),g}function ee(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}function et(g,$,ee){$[ee]=g>>>24,$[ee+1]=g>>>16&255,$[ee+2]=g>>>8&255,$[ee+3]=255&g}function er(g,$){return(g[$]|g[$+1]<<8|g[$+2]<<16|g[$+3]<<24)>>>0}function en(g,$){return(g[$]<<24|g[$+1]<<16|g[$+2]<<8|g[$+3])>>>0}g.exports=$($)},20449:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},29986:(g,$)=>{"use strict";var ee=$,et=ee.isAbsolute=function(g){return/^(?:\/|\w+:)/.test(g)},er=ee.normalize=function(g){var $=(g=g.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),ee=et(g),er="";ee&&(er=$.shift()+"/");for(var en=0;en<$.length;)".."===$[en]?en>0&&".."!==$[en-1]?$.splice(--en,2):ee?$.splice(en,1):++en:"."===$[en]?$.splice(en,1):++en;return er+$.join("/")};ee.resolve=function(g,$,ee){return(ee||($=er($)),et($))?$:(ee||(g=er(g)),(g=g.replace(/(?:\/|^)[^/]+$/,"")).length?er(g+"/"+$):$)}},56035:g=>{"use strict";function $(g,$,ee){var et=ee||8192,er=et>>>1,en=null,ei=et;return function(ee){if(ee<1||ee>er)return g(ee);ei+ee>et&&(en=g(et),ei=0);var es=$.call(en,ei,ei+=ee);return 7&ei&&(ei=(7|ei)+1),es}}g.exports=$},78131:(g,$)=>{"use strict";var ee=$;ee.length=function(g){for(var $=0,ee=0,et=0;et<g.length;++et)(ee=g.charCodeAt(et))<128?$+=1:ee<2048?$+=2:(64512&ee)==55296&&(64512&g.charCodeAt(et+1))==56320?(++et,$+=4):$+=3;return $},ee.read=function(g,$,ee){if(ee-$<1)return"";for(var et,er=null,en=[],ei=0;$<ee;)(et=g[$++])<128?en[ei++]=et:et>191&&et<224?en[ei++]=(31&et)<<6|63&g[$++]:et>239&&et<365?(et=((7&et)<<18|(63&g[$++])<<12|(63&g[$++])<<6|63&g[$++])-65536,en[ei++]=55296+(et>>10),en[ei++]=56320+(1023&et)):en[ei++]=(15&et)<<12|(63&g[$++])<<6|63&g[$++],ei>8191&&((er||(er=[])).push(String.fromCharCode.apply(String,en)),ei=0);return er?(ei&&er.push(String.fromCharCode.apply(String,en.slice(0,ei))),er.join("")):String.fromCharCode.apply(String,en.slice(0,ei))},ee.write=function(g,$,ee){for(var et,er,en=ee,ei=0;ei<g.length;++ei)(et=g.charCodeAt(ei))<128?$[ee++]=et:(et<2048?$[ee++]=et>>6|192:((64512&et)==55296&&(64512&(er=g.charCodeAt(ei+1)))==56320?(et=65536+((1023&et)<<10)+(1023&er),++ei,$[ee++]=et>>18|240,$[ee++]=et>>12&63|128):$[ee++]=et>>12|224,$[ee++]=et>>6&63|128),$[ee++]=63&et|128);return ee-en}},51382:g=>{var $=1/0,ee="[object Symbol]",et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,en="\ud800-\udfff",ei="\\u0300-\\u036f\\ufe20-\\ufe23",es="\\u20d0-\\u20f0",eo="\\u2700-\\u27bf",eu="a-z\\xdf-\\xf6\\xf8-\\xff",eh="A-Z\\xc0-\\xd6\\xd8-\\xde",ep="\\ufe0e\\ufe0f",ef="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eg="[']",em="["+en+"]",ey="["+ef+"]",ev="["+ei+es+"]",eS="\\d+",eT="["+eo+"]",eE="["+eu+"]",ew="[^"+en+ef+eS+eo+eu+eh+"]",eC="\ud83c[\udffb-\udfff]",e_="[^"+en+"]",eI="(?:\ud83c[\udde6-\uddff]){2}",eO="[\ud800-\udbff][\udc00-\udfff]",eA="["+eh+"]",eN="\\u200d",eD="(?:"+eE+"|"+ew+")",eR="(?:"+eA+"|"+ew+")",ek="(?:"+eg+"(?:d|ll|m|re|s|t|ve))?",ex="(?:"+eg+"(?:D|LL|M|RE|S|T|VE))?",eP="(?:"+ev+"|"+eC+")?",eM="["+ep+"]?",eL="(?:"+eN+"(?:"+[e_,eI,eO].join("|")+")"+eM+eP+")*",eF=eM+eP+eL,eB="(?:"+[eT,eI,eO].join("|")+")"+eF,ej="(?:"+[e_+ev+"?",ev,eI,eO,em].join("|")+")",eU=RegExp(eg,"g"),eV=RegExp(ev,"g"),eq=RegExp(eC+"(?="+eC+")|"+ej+eF,"g"),ez=RegExp([eA+"?"+eE+"+"+ek+"(?="+[ey,eA,"$"].join("|")+")",eR+"+"+ex+"(?="+[ey,eA+eD,"$"].join("|")+")",eA+"?"+eD+"+"+ek,eA+"+"+ex,eS,eB].join("|"),"g"),eG=RegExp("["+eN+en+ei+es+ep+"]"),e$=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eK={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},eW="object"==typeof global&&global&&global.Object===Object&&global,eH="object"==typeof self&&self&&self.Object===Object&&self,eQ=eW||eH||Function("return this")();function eY(g,$,ee,et){var er=-1,en=g?g.length:0;for(et&&en&&(ee=g[++er]);++er<en;)ee=$(ee,g[er],er,g);return ee}function eJ(g){return g.split("")}function eX(g){return g.match(et)||[]}var eZ=function(g){return function($){return null==g?void 0:g[$]}}(eK);function e0(g){return eG.test(g)}function e1(g){return e$.test(g)}function e2(g){return e0(g)?e3(g):eJ(g)}function e3(g){return g.match(eq)||[]}function e4(g){return g.match(ez)||[]}var e6=Object.prototype.toString,e9=eQ.Symbol,e5=e9?e9.prototype:void 0,e8=e5?e5.toString:void 0;function e7(g,$,ee){var et=-1,er=g.length;$<0&&($=-$>er?0:er+$),(ee=ee>er?er:ee)<0&&(ee+=er),er=$>ee?0:ee-$>>>0,$>>>=0;for(var en=Array(er);++et<er;)en[et]=g[et+$];return en}function te(g){if("string"==typeof g)return g;if(ts(g))return e8?e8.call(g):"";var ee=g+"";return"0"==ee&&1/g==-$?"-0":ee}function tt(g,$,ee){var et=g.length;return ee=void 0===ee?et:ee,!$&&ee>=et?g:e7(g,$,ee)}function tr(g){return function($){var ee=e0($=tl($))?e2($):void 0,et=ee?ee[0]:$.charAt(0),er=ee?tt(ee,1).join(""):$.slice(1);return et[g]()+er}}function ti(g){return!!g&&"object"==typeof g}function ts(g){return"symbol"==typeof g||ti(g)&&e6.call(g)==ee}function tl(g){return null==g?"":te(g)}var tu=function(g){return function($){return eY(tg(tp($).replace(eU,"")),g,"")}}(function(g,$,ee){return $=$.toLowerCase(),g+(ee?th($):$)});function th(g){return tf(tl(g).toLowerCase())}function tp(g){return(g=tl(g))&&g.replace(er,eZ).replace(eV,"")}var tf=tr("toUpperCase");function tg(g,$,ee){return(g=tl(g),void 0===($=ee?void 0:$))?e1(g)?e4(g):eX(g):g.match($)||[]}g.exports=tu},69802:g=>{g.exports=ee;var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(g){}function ee(g,$,ee){this.low=0|g,this.high=0|$,this.unsigned=!!ee}function et(g){return!0===(g&&g.__isLong__)}ee.prototype.__isLong__,Object.defineProperty(ee.prototype,"__isLong__",{value:!0}),ee.isLong=et;var er={},en={};function ei(g,$){var ee,et,ei;return $?(g>>>=0,(ei=0<=g&&g<256)&&(et=en[g]))?et:(ee=eo(g,(0|g)<0?-1:0,!0),ei&&(en[g]=ee),ee):(g|=0,(ei=-128<=g&&g<128)&&(et=er[g]))?et:(ee=eo(g,g<0?-1:0,!1),ei&&(er[g]=ee),ee)}function es(g,$){if(isNaN(g))return $?eS:ev;if($){if(g<0)return eS;if(g>=eg)return e_}else{if(g<=-em)return eI;if(g+1>=em)return eC}return g<0?es(-g,$).neg():eo(g%ef|0,g/ef|0,$)}function eo(g,$,et){return new ee(g,$,et)}ee.fromInt=ei,ee.fromNumber=es,ee.fromBits=eo;var eu=Math.pow;function eh(g,$,ee){if(0===g.length)throw Error("empty string");if("NaN"===g||"Infinity"===g||"+Infinity"===g||"-Infinity"===g)return ev;if("number"==typeof $?(ee=$,$=!1):$=!!$,(ee=ee||10)<2||36<ee)throw RangeError("radix");if((et=g.indexOf("-"))>0)throw Error("interior hyphen");if(0===et)return eh(g.substring(1),$,ee).neg();for(var et,er=es(eu(ee,8)),en=ev,ei=0;ei<g.length;ei+=8){var eo=Math.min(8,g.length-ei),ep=parseInt(g.substring(ei,ei+eo),ee);if(eo<8){var ef=es(eu(ee,eo));en=en.mul(ef).add(es(ep))}else en=(en=en.mul(er)).add(es(ep))}return en.unsigned=$,en}function ep(g,$){return"number"==typeof g?es(g,$):"string"==typeof g?eh(g,$):eo(g.low,g.high,"boolean"==typeof $?$:g.unsigned)}ee.fromString=eh,ee.fromValue=ep;var ef=4294967296,eg=18446744073709552e3,em=0x7fffffffffffffff,ey=ei(16777216),ev=ei(0);ee.ZERO=ev;var eS=ei(0,!0);ee.UZERO=eS;var eT=ei(1);ee.ONE=eT;var eE=ei(1,!0);ee.UONE=eE;var ew=ei(-1);ee.NEG_ONE=ew;var eC=eo(-1,2147483647,!1);ee.MAX_VALUE=eC;var e_=eo(-1,-1,!0);ee.MAX_UNSIGNED_VALUE=e_;var eI=eo(0,-2147483648,!1);ee.MIN_VALUE=eI;var eO=ee.prototype;eO.toInt=function(){return this.unsigned?this.low>>>0:this.low},eO.toNumber=function(){return this.unsigned?(this.high>>>0)*ef+(this.low>>>0):this.high*ef+(this.low>>>0)},eO.toString=function(g){if((g=g||10)<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eI))return"-"+this.neg().toString(g);var $=es(g),ee=this.div($),et=ee.mul($).sub(this);return ee.toString(g)+et.toInt().toString(g)}for(var er=es(eu(g,6),this.unsigned),en=this,ei="";;){var eo=en.div(er),eh=(en.sub(eo.mul(er)).toInt()>>>0).toString(g);if((en=eo).isZero())return eh+ei;for(;eh.length<6;)eh="0"+eh;ei=""+eh+ei}},eO.getHighBits=function(){return this.high},eO.getHighBitsUnsigned=function(){return this.high>>>0},eO.getLowBits=function(){return this.low},eO.getLowBitsUnsigned=function(){return this.low>>>0},eO.getNumBitsAbs=function(){if(this.isNegative())return this.eq(eI)?64:this.neg().getNumBitsAbs();for(var g=0!=this.high?this.high:this.low,$=31;$>0&&(g&1<<$)==0;$--);return 0!=this.high?$+33:$+1},eO.isZero=function(){return 0===this.high&&0===this.low},eO.eqz=eO.isZero,eO.isNegative=function(){return!this.unsigned&&this.high<0},eO.isPositive=function(){return this.unsigned||this.high>=0},eO.isOdd=function(){return(1&this.low)==1},eO.isEven=function(){return(1&this.low)==0},eO.equals=function(g){return et(g)||(g=ep(g)),(this.unsigned===g.unsigned||this.high>>>31!=1||g.high>>>31!=1)&&this.high===g.high&&this.low===g.low},eO.eq=eO.equals,eO.notEquals=function(g){return!this.eq(g)},eO.neq=eO.notEquals,eO.ne=eO.notEquals,eO.lessThan=function(g){return 0>this.comp(g)},eO.lt=eO.lessThan,eO.lessThanOrEqual=function(g){return 0>=this.comp(g)},eO.lte=eO.lessThanOrEqual,eO.le=eO.lessThanOrEqual,eO.greaterThan=function(g){return this.comp(g)>0},eO.gt=eO.greaterThan,eO.greaterThanOrEqual=function(g){return this.comp(g)>=0},eO.gte=eO.greaterThanOrEqual,eO.ge=eO.greaterThanOrEqual,eO.compare=function(g){if(et(g)||(g=ep(g)),this.eq(g))return 0;var $=this.isNegative(),ee=g.isNegative();return $&&!ee?-1:!$&&ee?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},eO.comp=eO.compare,eO.negate=function(){return!this.unsigned&&this.eq(eI)?eI:this.not().add(eT)},eO.neg=eO.negate,eO.add=function(g){et(g)||(g=ep(g));var $,ee,er=this.high>>>16,en=65535&this.high,ei=this.low>>>16,es=65535&this.low,eu=g.high>>>16,eh=65535&g.high,ef=g.low>>>16,eg=65535&g.low,em=0,ey=0;return $=0+((ee=0+(es+eg))>>>16),ee&=65535,$+=ei+ef,ey+=$>>>16,$&=65535,ey+=en+eh,em+=ey>>>16,ey&=65535,em+=er+eu,eo($<<16|ee,(em&=65535)<<16|ey,this.unsigned)},eO.subtract=function(g){return et(g)||(g=ep(g)),this.add(g.neg())},eO.sub=eO.subtract,eO.multiply=function(g){if(this.isZero())return ev;if(et(g)||(g=ep(g)),$)return eo($.mul(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned);if(g.isZero())return ev;if(this.eq(eI))return g.isOdd()?eI:ev;if(g.eq(eI))return this.isOdd()?eI:ev;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(ey)&&g.lt(ey))return es(this.toNumber()*g.toNumber(),this.unsigned);var ee,er,en=this.high>>>16,ei=65535&this.high,eu=this.low>>>16,eh=65535&this.low,ef=g.high>>>16,eg=65535&g.high,em=g.low>>>16,eS=65535&g.low,eT=0,eE=0;return ee=0+((er=0+eh*eS)>>>16),er&=65535,ee+=eu*eS,eE+=ee>>>16,ee&=65535,ee+=eh*em,eE+=ee>>>16,ee&=65535,eE+=ei*eS,eT+=eE>>>16,eE&=65535,eE+=eu*em,eT+=eE>>>16,eE&=65535,eE+=eh*eg,eT+=eE>>>16,eE&=65535,eT+=en*eS+ei*em+eu*eg+eh*ef,eo(ee<<16|er,(eT&=65535)<<16|eE,this.unsigned)},eO.mul=eO.multiply,eO.divide=function(g){if(et(g)||(g=ep(g)),g.isZero())throw Error("division by zero");if($){var ee,er,en;return this.unsigned||-2147483648!==this.high||-1!==g.low||-1!==g.high?eo((this.unsigned?$.div_u:$.div_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?eS:ev;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return eS;if(g.gt(this.shru(1)))return eE;en=eS}else{if(this.eq(eI))return g.eq(eT)||g.eq(ew)?eI:g.eq(eI)?eT:(ee=this.shr(1).div(g).shl(1)).eq(ev)?g.isNegative()?eT:ew:(er=this.sub(g.mul(ee)),en=ee.add(er.div(g)));if(g.eq(eI))return this.unsigned?eS:ev;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();en=ev}for(er=this;er.gte(g);){for(var ei=Math.ceil(Math.log(ee=Math.max(1,Math.floor(er.toNumber()/g.toNumber())))/Math.LN2),eh=ei<=48?1:eu(2,ei-48),ef=es(ee),eg=ef.mul(g);eg.isNegative()||eg.gt(er);)ee-=eh,eg=(ef=es(ee,this.unsigned)).mul(g);ef.isZero()&&(ef=eT),en=en.add(ef),er=er.sub(eg)}return en},eO.div=eO.divide,eO.modulo=function(g){return(et(g)||(g=ep(g)),$)?eo((this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this.sub(this.div(g).mul(g))},eO.mod=eO.modulo,eO.rem=eO.modulo,eO.not=function(){return eo(~this.low,~this.high,this.unsigned)},eO.and=function(g){return et(g)||(g=ep(g)),eo(this.low&g.low,this.high&g.high,this.unsigned)},eO.or=function(g){return et(g)||(g=ep(g)),eo(this.low|g.low,this.high|g.high,this.unsigned)},eO.xor=function(g){return et(g)||(g=ep(g)),eo(this.low^g.low,this.high^g.high,this.unsigned)},eO.shiftLeft=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eo(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):eo(0,this.low<<g-32,this.unsigned)},eO.shl=eO.shiftLeft,eO.shiftRight=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eo(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):eo(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},eO.shr=eO.shiftRight,eO.shiftRightUnsigned=function(g){if(et(g)&&(g=g.toInt()),0==(g&=63))return this;var $=this.high;return g<32?eo(this.low>>>g|$<<32-g,$>>>g,this.unsigned):32===g?eo($,0,this.unsigned):eo($>>>g-32,0,this.unsigned)},eO.shru=eO.shiftRightUnsigned,eO.shr_u=eO.shiftRightUnsigned,eO.toSigned=function(){return this.unsigned?eo(this.low,this.high,!1):this},eO.toUnsigned=function(){return this.unsigned?this:eo(this.low,this.high,!0)},eO.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},eO.toBytesLE=function(){var g=this.high,$=this.low;return[255&$,$>>>8&255,$>>>16&255,$>>>24,255&g,g>>>8&255,g>>>16&255,g>>>24]},eO.toBytesBE=function(){var g=this.high,$=this.low;return[g>>>24,g>>>16&255,g>>>8&255,255&g,$>>>24,$>>>16&255,$>>>8&255,255&$]},ee.fromBytes=function(g,$,et){return et?ee.fromBytesLE(g,$):ee.fromBytesBE(g,$)},ee.fromBytesLE=function(g,$){return new ee(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,$)},ee.fromBytesBE=function(g,$){return new ee(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],$)}},21725:(g,$,ee)=>{"use strict";var et=ee(25269);g.exports=$=et.descriptor=et.Root.fromJSON(ee(89987)).lookup(".google.protobuf");var er=et.Namespace,en=et.Root,ei=et.Enum,es=et.Type,eo=et.Field,eu=et.MapField,eh=et.OneOf,ep=et.Service,ef=et.Method;function eg(g,ee,et){var eu=$.FileDescriptorProto.create({name:g.filename||(g.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});et&&(eu.syntax=et),g instanceof en||(eu.package=g.fullName.substring(1));for(var eh,ef=0;ef<g.nestedArray.length;++ef)(eh=g._nestedArray[ef])instanceof es?eu.messageType.push(eh.toDescriptor(et)):eh instanceof ei?eu.enumType.push(eh.toDescriptor()):eh instanceof eo?eu.extension.push(eh.toDescriptor(et)):eh instanceof ep?eu.service.push(eh.toDescriptor()):eh instanceof er&&eg(eh,ee,et);eu.options=eO(g.options,$.FileOptions),eu.messageType.length+eu.enumType.length+eu.extension.length+eu.service.length&&ee.push(eu)}en.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.FileDescriptorSet.decode(g));var ee=new en;if(g.file)for(var et,er,eu,eh=0;eh<g.file.length;++eh){if(er=ee,(et=g.file[eh]).package&&et.package.length&&(er=ee.define(et.package)),et.name&&et.name.length&&ee.files.push(er.filename=et.name),et.messageType)for(eu=0;eu<et.messageType.length;++eu)er.add(es.fromDescriptor(et.messageType[eu],et.syntax));if(et.enumType)for(eu=0;eu<et.enumType.length;++eu)er.add(ei.fromDescriptor(et.enumType[eu]));if(et.extension)for(eu=0;eu<et.extension.length;++eu)er.add(eo.fromDescriptor(et.extension[eu]));if(et.service)for(eu=0;eu<et.service.length;++eu)er.add(ep.fromDescriptor(et.service[eu]));var ef=eI(et.options,$.FileOptions);if(ef){var eg=Object.keys(ef);for(eu=0;eu<eg.length;++eu)er.setOption(eg[eu],ef[eg[eu]])}}return ee},en.prototype.toDescriptor=function(g){var ee=$.FileDescriptorSet.create();return eg(this,ee.file,g),ee};var em=0;es.fromDescriptor=function(g,ee){"number"==typeof g.length&&(g=$.DescriptorProto.decode(g));var et,er=new es(g.name.length?g.name:"Type"+em++,eI(g.options,$.MessageOptions));if(g.oneofDecl)for(et=0;et<g.oneofDecl.length;++et)er.add(eh.fromDescriptor(g.oneofDecl[et]));if(g.field)for(et=0;et<g.field.length;++et){var en=eo.fromDescriptor(g.field[et],ee);er.add(en),g.field[et].hasOwnProperty("oneofIndex")&&er.oneofsArray[g.field[et].oneofIndex].add(en)}if(g.extension)for(et=0;et<g.extension.length;++et)er.add(eo.fromDescriptor(g.extension[et],ee));if(g.nestedType)for(et=0;et<g.nestedType.length;++et)er.add(es.fromDescriptor(g.nestedType[et],ee)),g.nestedType[et].options&&g.nestedType[et].options.mapEntry&&er.setOption("map_entry",!0);if(g.enumType)for(et=0;et<g.enumType.length;++et)er.add(ei.fromDescriptor(g.enumType[et]));if(g.extensionRange&&g.extensionRange.length)for(et=0,er.extensions=[];et<g.extensionRange.length;++et)er.extensions.push([g.extensionRange[et].start,g.extensionRange[et].end]);if(g.reservedRange&&g.reservedRange.length||g.reservedName&&g.reservedName.length){if(er.reserved=[],g.reservedRange)for(et=0;et<g.reservedRange.length;++et)er.reserved.push([g.reservedRange[et].start,g.reservedRange[et].end]);if(g.reservedName)for(et=0;et<g.reservedName.length;++et)er.reserved.push(g.reservedName[et])}return er},es.prototype.toDescriptor=function(g){var ee,et,er=$.DescriptorProto.create({name:this.name});for(et=0;et<this.fieldsArray.length;++et)if(er.field.push(ee=this._fieldsArray[et].toDescriptor(g)),this._fieldsArray[et]instanceof eu){var en=e_(this._fieldsArray[et].keyType,this._fieldsArray[et].resolvedKeyType),eh=e_(this._fieldsArray[et].type,this._fieldsArray[et].resolvedType),ep=11===eh||14===eh?this._fieldsArray[et].resolvedType&&eA(this.parent,this._fieldsArray[et].resolvedType)||this._fieldsArray[et].type:void 0;er.nestedType.push($.DescriptorProto.create({name:ee.typeName,field:[$.FieldDescriptorProto.create({name:"key",number:1,label:1,type:en}),$.FieldDescriptorProto.create({name:"value",number:2,label:1,type:eh,typeName:ep})],options:$.MessageOptions.create({mapEntry:!0})}))}for(et=0;et<this.oneofsArray.length;++et)er.oneofDecl.push(this._oneofsArray[et].toDescriptor());for(et=0;et<this.nestedArray.length;++et)this._nestedArray[et]instanceof eo?er.field.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof es?er.nestedType.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof ei&&er.enumType.push(this._nestedArray[et].toDescriptor());if(this.extensions)for(et=0;et<this.extensions.length;++et)er.extensionRange.push($.DescriptorProto.ExtensionRange.create({start:this.extensions[et][0],end:this.extensions[et][1]}));if(this.reserved)for(et=0;et<this.reserved.length;++et)"string"==typeof this.reserved[et]?er.reservedName.push(this.reserved[et]):er.reservedRange.push($.DescriptorProto.ReservedRange.create({start:this.reserved[et][0],end:this.reserved[et][1]}));return er.options=eO(this.options,$.MessageOptions),er};var ey=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;eo.fromDescriptor=function(g,ee){if("number"==typeof g.length&&(g=$.DescriptorProto.decode(g)),"number"!=typeof g.number)throw Error("missing field id");switch(et=g.typeName&&g.typeName.length?g.typeName:ew(g.type),g.label){case 1:er=void 0;break;case 2:er="required";break;case 3:er="repeated";break;default:throw Error("illegal label: "+g.label)}var et,er,en=g.extendee;void 0!==g.extendee&&(en=en.length?en:void 0);var ei=new eo(g.name.length?g.name:"field"+g.number,g.number,et,er,en);if(ei.options=eI(g.options,$.FieldOptions),g.defaultValue&&g.defaultValue.length){var es=g.defaultValue;switch(es){case"true":case"TRUE":es=!0;break;case"false":case"FALSE":es=!1;break;default:ey.exec(es)&&(es=parseInt(es))}ei.setOption("default",es)}return eC(g.type)&&("proto3"===ee?g.options&&!g.options.packed&&ei.setOption("packed",!1):g.options&&g.options.packed||ei.setOption("packed",!1)),ei},eo.prototype.toDescriptor=function(g){var ee=$.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)ee.type=11,ee.typeName=et.util.ucFirst(this.name),ee.label=3;else{switch(ee.type=e_(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:ee.typeName=this.resolvedType?eA(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":ee.label=3;break;case"required":ee.label=2;break;default:ee.label=1}}if(ee.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(ee.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(ee.options=eO(this.options,$.FieldOptions),null!=this.options.default&&(ee.defaultValue=String(this.options.default))),"proto3"===g?this.packed||((ee.options||(ee.options=$.FieldOptions.create())).packed=!1):this.packed&&((ee.options||(ee.options=$.FieldOptions.create())).packed=!0),ee};var ev=0;ei.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.EnumDescriptorProto.decode(g));var ee={};if(g.value)for(var et=0;et<g.value.length;++et){var er=g.value[et].name,en=g.value[et].number||0;ee[er&&er.length?er:"NAME"+en]=en}return new ei(g.name&&g.name.length?g.name:"Enum"+ev++,ee,eI(g.options,$.EnumOptions))},ei.prototype.toDescriptor=function(){for(var g=[],ee=0,et=Object.keys(this.values);ee<et.length;++ee)g.push($.EnumValueDescriptorProto.create({name:et[ee],number:this.values[et[ee]]}));return $.EnumDescriptorProto.create({name:this.name,value:g,options:eO(this.options,$.EnumOptions)})};var eS=0;eh.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.OneofDescriptorProto.decode(g)),new eh(g.name&&g.name.length?g.name:"oneof"+eS++)},eh.prototype.toDescriptor=function(){return $.OneofDescriptorProto.create({name:this.name})};var eT=0;ep.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.ServiceDescriptorProto.decode(g));var ee=new ep(g.name&&g.name.length?g.name:"Service"+eT++,eI(g.options,$.ServiceOptions));if(g.method)for(var et=0;et<g.method.length;++et)ee.add(ef.fromDescriptor(g.method[et]));return ee},ep.prototype.toDescriptor=function(){for(var g=[],ee=0;ee<this.methodsArray.length;++ee)g.push(this._methodsArray[ee].toDescriptor());return $.ServiceDescriptorProto.create({name:this.name,method:g,options:eO(this.options,$.ServiceOptions)})};var eE=0;function ew(g){switch(g){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+g)}function eC(g){switch(g){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function e_(g,$){switch(g){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if($ instanceof ei)return 14;if($ instanceof es)return $.group?10:11;throw Error("illegal type: "+g)}function eI(g,$){if(g){for(var ee,er,en,es=[],eo=0;eo<$.fieldsArray.length;++eo)"uninterpretedOption"!==(er=(ee=$._fieldsArray[eo]).name)&&g.hasOwnProperty(er)&&(en=g[er],ee.resolvedType instanceof ei&&"number"==typeof en&&void 0!==ee.resolvedType.valuesById[en]&&(en=ee.resolvedType.valuesById[en]),es.push(eN(er),en));return es.length?et.util.toObject(es):void 0}}function eO(g,$){if(g){for(var ee,er,en=[],ei=0,es=Object.keys(g);ei<es.length;++ei)if(er=g[ee=es[ei]],"default"!==ee){var eo=$.fields[ee];(eo||(eo=$.fields[ee=et.util.camelCase(ee)]))&&en.push(ee,er)}return en.length?$.fromObject(et.util.toObject(en)):void 0}}function eA(g,$){var ee=g.fullName.split("."),et=$.fullName.split("."),ei=0,es=0,eo=et.length-1;if(!(g instanceof en)&&$ instanceof er)for(;ei<ee.length&&es<eo&&ee[ei]===et[es];){var eu=$.lookup(ee[ei++],!0);if(null!==eu&&eu!==$)break;++es}else for(;ei<ee.length&&es<eo&&ee[ei]===et[es];++ei,++es);return et.slice(es).join(".")}function eN(g){return g.substring(0,1)+g.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(g,$){return"_"+$.toLowerCase()})}ef.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.MethodDescriptorProto.decode(g)),new ef(g.name&&g.name.length?g.name:"Method"+eE++,"rpc",g.inputType,g.outputType,!!g.clientStreaming,!!g.serverStreaming,eI(g.options,$.MethodOptions))},ef.prototype.toDescriptor=function(){return $.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:eO(this.options,$.MethodOptions)})}},25269:(g,$,ee)=>{"use strict";g.exports=ee(57954)},62516:g=>{"use strict";g.exports=et;var $,ee=/\/|\./;function et(g,$){ee.test(g)||(g="google/protobuf/"+g+".proto",$={nested:{google:{nested:{protobuf:{nested:$}}}}}),et[g]=$}et("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),et("duration",{Duration:$={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),et("timestamp",{Timestamp:$}),et("empty",{Empty:{fields:{}}}),et("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),et("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),et("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),et.get=function(g){return et[g]||null}},5944:(g,$,ee)=>{"use strict";var et=$,er=ee(33982),en=ee(18289);function ei(g,$,ee,et){if($.resolvedType){if($.resolvedType instanceof er){g("switch(d%s){",et);for(var en=$.resolvedType.values,ei=Object.keys(en),es=0;es<ei.length;++es)$.repeated&&en[ei[es]]===$.typeDefault&&g("default:"),g("case%j:",ei[es])("case %i:",en[ei[es]])("m%s=%j",et,en[ei[es]])("break");g("}")}else g('if(typeof d%s!=="object")',et)("throw TypeError(%j)",$.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",et,ee,et)}else{var eo=!1;switch($.type){case"double":case"float":g("m%s=Number(d%s)",et,et);break;case"uint32":case"fixed32":g("m%s=d%s>>>0",et,et);break;case"int32":case"sint32":case"sfixed32":g("m%s=d%s|0",et,et);break;case"uint64":eo=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",et,et,eo)('else if(typeof d%s==="string")',et)("m%s=parseInt(d%s,10)",et,et)('else if(typeof d%s==="number")',et)("m%s=d%s",et,et)('else if(typeof d%s==="object")',et)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",et,et,et,eo?"true":"");break;case"bytes":g('if(typeof d%s==="string")',et)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",et,et,et)("else if(d%s.length)",et)("m%s=d%s",et,et);break;case"string":g("m%s=String(d%s)",et,et);break;case"bool":g("m%s=Boolean(d%s)",et,et)}}return g}function es(g,$,ee,et){if($.resolvedType)$.resolvedType instanceof er?g("d%s=o.enums===String?types[%i].values[m%s]:m%s",et,ee,et,et):g("d%s=types[%i].toObject(m%s,o)",et,ee,et);else{var en=!1;switch($.type){case"double":case"float":g("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",et,et,et,et);break;case"uint64":en=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g('if(typeof m%s==="number")',et)("d%s=o.longs===String?String(m%s):m%s",et,et,et)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",et,et,et,et,en?"true":"",et);break;case"bytes":g("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",et,et,et,et,et);break;default:g("d%s=m%s",et,et)}}return g}et.fromObject=function(g){var $=g.fieldsArray,ee=en.codegen(["d"],g.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!$.length)return ee("return new this.ctor");ee("var m=new this.ctor");for(var et=0;et<$.length;++et){var es=$[et].resolve(),eo=en.safeProp(es.name);es.map?(ee("if(d%s){",eo)('if(typeof d%s!=="object")',eo)("throw TypeError(%j)",es.fullName+": object expected")("m%s={}",eo)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",eo),ei(ee,es,et,eo+"[ks[i]]")("}")("}")):es.repeated?(ee("if(d%s){",eo)("if(!Array.isArray(d%s))",eo)("throw TypeError(%j)",es.fullName+": array expected")("m%s=[]",eo)("for(var i=0;i<d%s.length;++i){",eo),ei(ee,es,et,eo+"[i]")("}")("}")):(es.resolvedType instanceof er||ee("if(d%s!=null){",eo),ei(ee,es,et,eo),es.resolvedType instanceof er||ee("}"))}return ee("return m")},et.toObject=function(g){var $=g.fieldsArray.slice().sort(en.compareFieldsById);if(!$.length)return en.codegen()("return {}");for(var ee=en.codegen(["m","o"],g.name+"$toObject")("if(!o)")("o={}")("var d={}"),et=[],ei=[],eo=[],eu=0;eu<$.length;++eu)$[eu].partOf||($[eu].resolve().repeated?et:$[eu].map?ei:eo).push($[eu]);if(et.length){for(ee("if(o.arrays||o.defaults){"),eu=0;eu<et.length;++eu)ee("d%s=[]",en.safeProp(et[eu].name));ee("}")}if(ei.length){for(ee("if(o.objects||o.defaults){"),eu=0;eu<ei.length;++eu)ee("d%s={}",en.safeProp(ei[eu].name));ee("}")}if(eo.length){for(ee("if(o.defaults){"),eu=0;eu<eo.length;++eu){var eh=eo[eu],ep=en.safeProp(eh.name);if(eh.resolvedType instanceof er)ee("d%s=o.enums===String?%j:%j",ep,eh.resolvedType.valuesById[eh.typeDefault],eh.typeDefault);else if(eh.long)ee("if(util.Long){")("var n=new util.Long(%i,%i,%j)",eh.typeDefault.low,eh.typeDefault.high,eh.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ep)("}else")("d%s=o.longs===String?%j:%i",ep,eh.typeDefault.toString(),eh.typeDefault.toNumber());else if(eh.bytes){var ef="["+Array.prototype.slice.call(eh.typeDefault).join(",")+"]";ee("if(o.bytes===String)d%s=%j",ep,String.fromCharCode.apply(String,eh.typeDefault))("else{")("d%s=%s",ep,ef)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ep,ep)("}")}else ee("d%s=%j",ep,eh.typeDefault)}ee("}")}var eg=!1;for(eu=0;eu<$.length;++eu){var eh=$[eu],em=g._fieldsArray.indexOf(eh),ep=en.safeProp(eh.name);eh.map?(eg||(eg=!0,ee("var ks2")),ee("if(m%s&&(ks2=Object.keys(m%s)).length){",ep,ep)("d%s={}",ep)("for(var j=0;j<ks2.length;++j){"),es(ee,eh,em,ep+"[ks2[j]]")("}")):eh.repeated?(ee("if(m%s&&m%s.length){",ep,ep)("d%s=[]",ep)("for(var j=0;j<m%s.length;++j){",ep),es(ee,eh,em,ep+"[j]")("}")):(ee("if(m%s!=null&&m.hasOwnProperty(%j)){",ep,eh.name),es(ee,eh,em,ep),eh.partOf&&ee("if(o.oneofs)")("d%s=%j",en.safeProp(eh.partOf.name),eh.name)),ee("}")}return ee("return d")}},98983:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(33982),er=ee(31627),en=ee(18289);function ei(g){return"missing required '"+g.name+"'"}function es(g){var $=en.codegen(["r","l"],g.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(g.fieldsArray.filter(function(g){return g.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");g.group&&$("if((t&7)===4)")("break"),$("switch(t>>>3){");for(var ee=0;ee<g.fieldsArray.length;++ee){var es=g._fieldsArray[ee].resolve(),eo=es.resolvedType instanceof et?"int32":es.type,eu="m"+en.safeProp(es.name);$("case %i:",es.id),es.map?($("if(%s===util.emptyObject)",eu)("%s={}",eu)("var c2 = r.uint32()+r.pos"),void 0!==er.defaults[es.keyType]?$("k=%j",er.defaults[es.keyType]):$("k=null"),void 0!==er.defaults[eo]?$("value=%j",er.defaults[eo]):$("value=null"),$("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",es.keyType)("case 2:"),void 0===er.basic[eo]?$("value=types[%i].decode(r,r.uint32())",ee):$("value=r.%s()",eo),$("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),$(void 0!==er.long[es.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",eu)):es.repeated?($("if(!(%s&&%s.length))",eu,eu)("%s=[]",eu),void 0!==er.packed[eo]&&$("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",eu,eo)("}else"),void 0===er.basic[eo]?$(es.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",eu,ee):$("%s.push(r.%s())",eu,eo)):void 0===er.basic[eo]?$(es.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",eu,ee):$("%s=r.%s()",eu,eo),$("break")}for($("default:")("r.skipType(t&7)")("break")("}")("}"),ee=0;ee<g._fieldsArray.length;++ee){var eh=g._fieldsArray[ee];eh.required&&$("if(!m.hasOwnProperty(%j))",eh.name)("throw util.ProtocolError(%j,{instance:m})",ei(eh))}return $("return m")}},67337:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(33982),er=ee(31627),en=ee(18289);function ei(g,$,ee,et){return $.resolvedType.group?g("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",ee,et,($.id<<3|3)>>>0,($.id<<3|4)>>>0):g("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",ee,et,($.id<<3|2)>>>0)}function es(g){for(var $,ee,es=en.codegen(["m","w"],g.name+"$encode")("if(!w)")("w=Writer.create()"),eo=g.fieldsArray.slice().sort(en.compareFieldsById),$=0;$<eo.length;++$){var eu=eo[$].resolve(),eh=g._fieldsArray.indexOf(eu),ep=eu.resolvedType instanceof et?"int32":eu.type,ef=er.basic[ep];ee="m"+en.safeProp(eu.name),eu.map?(es("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ee,eu.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ee)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(eu.id<<3|2)>>>0,8|er.mapKey[eu.keyType],eu.keyType),void 0===ef?es("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",eh,ee):es(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ef,ep,ee),es("}")("}")):eu.repeated?(es("if(%s!=null&&%s.length){",ee,ee),eu.packed&&void 0!==er.packed[ep]?es("w.uint32(%i).fork()",(eu.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ee)("w.%s(%s[i])",ep,ee)("w.ldelim()"):(es("for(var i=0;i<%s.length;++i)",ee),void 0===ef?ei(es,eu,eh,ee+"[i]"):es("w.uint32(%i).%s(%s[i])",(eu.id<<3|ef)>>>0,ep,ee)),es("}")):(eu.optional&&es("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ee,eu.name),void 0===ef?ei(es,eu,eh,ee):es("w.uint32(%i).%s(%s)",(eu.id<<3|ef)>>>0,ep,ee))}return es("return w")}},33982:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(58831);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="Enum";var er=ee(44622),en=ee(18289);function ei(g,$,ee,er,en){if(et.call(this,g,ee),$&&"object"!=typeof $)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=er,this.comments=en||{},this.reserved=void 0,$)for(var ei=Object.keys($),es=0;es<ei.length;++es)"number"==typeof $[ei[es]]&&(this.valuesById[this.values[ei[es]]=$[ei[es]]]=ei[es])}ei.fromJSON=function(g,$){var ee=new ei(g,$.values,$.options,$.comment,$.comments);return ee.reserved=$.reserved,ee},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",$?this.comment:void 0,"comments",$?this.comments:void 0])},ei.prototype.add=function(g,$,ee){if(!en.isString(g))throw TypeError("name must be a string");if(!en.isInteger($))throw TypeError("id must be an integer");if(void 0!==this.values[g])throw Error("duplicate name '"+g+"' in "+this);if(this.isReservedId($))throw Error("id "+$+" is reserved in "+this);if(this.isReservedName(g))throw Error("name '"+g+"' is reserved in "+this);if(void 0!==this.valuesById[$]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+$+" in "+this);this.values[g]=$}else this.valuesById[this.values[g]=$]=g;return this.comments[g]=ee||null,this},ei.prototype.remove=function(g){if(!en.isString(g))throw TypeError("name must be a string");var $=this.values[g];if(null==$)throw Error("name '"+g+"' does not exist in "+this);return delete this.valuesById[$],delete this.values[g],delete this.comments[g],this},ei.prototype.isReservedId=function(g){return er.isReservedId(this.reserved,g)},ei.prototype.isReservedName=function(g){return er.isReservedName(this.reserved,g)}},92548:(g,$,ee)=>{"use strict";g.exports=eu;var et,er=ee(58831);((eu.prototype=Object.create(er.prototype)).constructor=eu).className="Field";var en=ee(33982),ei=ee(31627),es=ee(18289),eo=/^required|optional|repeated$/;function eu(g,$,ee,et,en,eu,eh){if(es.isObject(et)?(eh=en,eu=et,et=en=void 0):es.isObject(en)&&(eh=eu,eu=en,en=void 0),er.call(this,g,eu),!es.isInteger($)||$<0)throw TypeError("id must be a non-negative integer");if(!es.isString(ee))throw TypeError("type must be a string");if(void 0!==et&&!eo.test(et=et.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==en&&!es.isString(en))throw TypeError("extend must be a string");"proto3_optional"===et&&(et="optional"),this.rule=et&&"optional"!==et?et:void 0,this.type=ee,this.id=$,this.extend=en||void 0,this.required="required"===et,this.optional=!this.required,this.repeated="repeated"===et,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!es.Long&&void 0!==ei.long[ee],this.bytes="bytes"===ee,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=eh}eu.fromJSON=function(g,$){return new eu(g,$.id,$.type,$.rule,$.extend,$.options,$.comment)},Object.defineProperty(eu.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),eu.prototype.setOption=function(g,$,ee){return"packed"===g&&(this._packed=null),er.prototype.setOption.call(this,g,$,ee)},eu.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return es.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},eu.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=ei.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof et?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof en&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof en)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=es.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var g;es.base64.test(this.typeDefault)?es.base64.decode(this.typeDefault,g=es.newBuffer(es.base64.length(this.typeDefault)),0):es.utf8.write(this.typeDefault,g=es.newBuffer(es.utf8.length(this.typeDefault)),0),this.typeDefault=g}return this.map?this.defaultValue=es.emptyObject:this.repeated?this.defaultValue=es.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof et&&(this.parent.ctor.prototype[this.name]=this.defaultValue),er.prototype.resolve.call(this)},eu.d=function(g,$,ee,et){return"function"==typeof $?$=es.decorateType($).name:$&&"object"==typeof $&&($=es.decorateEnum($).name),function(er,en){es.decorateType(er.constructor).add(new eu(en,g,$,ee,{default:et}))}},eu._configure=function(g){et=g}},72822:(g,$,ee)=>{"use strict";var et=g.exports=ee(65748);function er(g,$,ee){return"function"==typeof $?(ee=$,$=new et.Root):$||($=new et.Root),$.load(g,ee)}function en(g,$){return $||($=new et.Root),$.loadSync(g)}et.build="light",et.load=er,et.loadSync=en,et.encoder=ee(67337),et.decoder=ee(98983),et.verifier=ee(31181),et.converter=ee(5944),et.ReflectionObject=ee(58831),et.Namespace=ee(44622),et.Root=ee(34955),et.Enum=ee(33982),et.Type=ee(69396),et.Field=ee(92548),et.OneOf=ee(85677),et.MapField=ee(30372),et.Service=ee(26962),et.Method=ee(3055),et.Message=ee(55326),et.wrappers=ee(82969),et.types=ee(31627),et.util=ee(18289),et.ReflectionObject._configure(et.Root),et.Namespace._configure(et.Type,et.Service,et.Enum),et.Root._configure(et.Type),et.Field._configure(et.Type)},65748:(g,$,ee)=>{"use strict";var et=$;function er(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}et.build="minimal",et.Writer=ee(47474),et.BufferWriter=ee(96985),et.Reader=ee(8645),et.BufferReader=ee(2126),et.util=ee(86416),et.rpc=ee(84415),et.roots=ee(43675),et.configure=er,er()},57954:(g,$,ee)=>{"use strict";var et=g.exports=ee(72822);et.build="full",et.tokenize=ee(89468),et.parse=ee(60580),et.common=ee(62516),et.Root._configure(et.Type,et.parse,et.common)},30372:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(92548);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="MapField";var er=ee(31627),en=ee(18289);function ei(g,$,ee,er,ei,es){if(et.call(this,g,$,er,void 0,void 0,ei,es),!en.isString(ee))throw TypeError("keyType must be a string");this.keyType=ee,this.resolvedKeyType=null,this.map=!0}ei.fromJSON=function(g,$){return new ei(g,$.id,$.keyType,$.type,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},ei.prototype.resolve=function(){if(this.resolved)return this;if(void 0===er.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return et.prototype.resolve.call(this)},ei.d=function(g,$,ee){return"function"==typeof ee?ee=en.decorateType(ee).name:ee&&"object"==typeof ee&&(ee=en.decorateEnum(ee).name),function(et,er){en.decorateType(et.constructor).add(new ei(er,g,$,ee))}}},55326:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(86416);function er(g){if(g)for(var $=Object.keys(g),ee=0;ee<$.length;++ee)this[$[ee]]=g[$[ee]]}er.create=function(g){return this.$type.create(g)},er.encode=function(g,$){return this.$type.encode(g,$)},er.encodeDelimited=function(g,$){return this.$type.encodeDelimited(g,$)},er.decode=function(g){return this.$type.decode(g)},er.decodeDelimited=function(g){return this.$type.decodeDelimited(g)},er.verify=function(g){return this.$type.verify(g)},er.fromObject=function(g){return this.$type.fromObject(g)},er.toObject=function(g,$){return this.$type.toObject(g,$)},er.prototype.toJSON=function(){return this.$type.toObject(this,et.toJSONOptions)}},3055:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(58831);((en.prototype=Object.create(et.prototype)).constructor=en).className="Method";var er=ee(18289);function en(g,$,ee,en,ei,es,eo,eu,eh){if(er.isObject(ei)?(eo=ei,ei=es=void 0):er.isObject(es)&&(eo=es,es=void 0),!(void 0===$||er.isString($)))throw TypeError("type must be a string");if(!er.isString(ee))throw TypeError("requestType must be a string");if(!er.isString(en))throw TypeError("responseType must be a string");et.call(this,g,eo),this.type=$||"rpc",this.requestType=ee,this.requestStream=!!ei||void 0,this.responseType=en,this.responseStream=!!es||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=eu,this.parsedOptions=eh}en.fromJSON=function(g,$){return new en(g,$.type,$.requestType,$.responseType,$.requestStream,$.responseStream,$.options,$.comment,$.parsedOptions)},en.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return er.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",$?this.comment:void 0,"parsedOptions",this.parsedOptions])},en.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),et.prototype.resolve.call(this))}},44622:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(58831);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Namespace";var es=ee(92548),eo=ee(85677),eu=ee(18289);function eh(g,$){if(g&&g.length){for(var ee={},et=0;et<g.length;++et)ee[g[et].name]=g[et].toJSON($);return ee}}function ep(g,$){ei.call(this,g,$),this.nested=void 0,this._nestedArray=null}function ef(g){return g._nestedArray=null,g}ep.fromJSON=function(g,$){return new ep(g,$.options).addJSON($.nested)},ep.arrayToJSON=eh,ep.isReservedId=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if("string"!=typeof g[ee]&&g[ee][0]<=$&&g[ee][1]>$)return!0}return!1},ep.isReservedName=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if(g[ee]===$)return!0}return!1},Object.defineProperty(ep.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=eu.toArray(this.nested))}}),ep.prototype.toJSON=function(g){return eu.toObject(["options",this.options,"nested",eh(this.nestedArray,g)])},ep.prototype.addJSON=function(g){var $=this;if(g)for(var ee,ei=Object.keys(g),eo=0;eo<ei.length;++eo)ee=g[ei[eo]],$.add((void 0!==ee.fields?et.fromJSON:void 0!==ee.values?en.fromJSON:void 0!==ee.methods?er.fromJSON:void 0!==ee.id?es.fromJSON:ep.fromJSON)(ei[eo],ee));return this},ep.prototype.get=function(g){return this.nested&&this.nested[g]||null},ep.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof en)return this.nested[g].values;throw Error("no such enum: "+g)},ep.prototype.add=function(g){if(!(g instanceof es&&void 0!==g.extend||g instanceof et||g instanceof en||g instanceof er||g instanceof ep||g instanceof eo))throw TypeError("object must be a valid nested object");if(this.nested){var $=this.get(g.name);if($){if($ instanceof ep&&g instanceof ep&&!($ instanceof et||$ instanceof er)){for(var ee=$.nestedArray,ei=0;ei<ee.length;++ei)g.add(ee[ei]);this.remove($),this.nested||(this.nested={}),g.setOptions($.options,!0)}else throw Error("duplicate name '"+g.name+"' in "+this)}}else this.nested={};return this.nested[g.name]=g,g.onAdd(this),ef(this)},ep.prototype.remove=function(g){if(!(g instanceof ei))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=void 0),g.onRemove(this),ef(this)},ep.prototype.define=function(g,$){if(eu.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&""===g[0])throw Error("path must be relative");for(var ee=this;g.length>0;){var et=g.shift();if(ee.nested&&ee.nested[et]){if(!((ee=ee.nested[et])instanceof ep))throw Error("path conflicts with non-namespace objects")}else ee.add(ee=new ep(et))}return $&&ee.addJSON($),ee},ep.prototype.resolveAll=function(){for(var g=this.nestedArray,$=0;$<g.length;)g[$]instanceof ep?g[$++].resolveAll():g[$++].resolve();return this.resolve()},ep.prototype.lookup=function(g,$,ee){if("boolean"==typeof $?(ee=$,$=void 0):$&&!Array.isArray($)&&($=[$]),eu.isString(g)&&g.length){if("."===g)return this.root;g=g.split(".")}else if(!g.length)return this;if(""===g[0])return this.root.lookup(g.slice(1),$);var et=this.get(g[0]);if(et){if(1===g.length){if(!$||$.indexOf(et.constructor)>-1)return et}else if(et instanceof ep&&(et=et.lookup(g.slice(1),$,!0)))return et}else for(var er=0;er<this.nestedArray.length;++er)if(this._nestedArray[er]instanceof ep&&(et=this._nestedArray[er].lookup(g,$,!0)))return et;return null===this.parent||ee?null:this.parent.lookup(g,$)},ep.prototype.lookupType=function(g){var $=this.lookup(g,[et]);if(!$)throw Error("no such type: "+g);return $},ep.prototype.lookupEnum=function(g){var $=this.lookup(g,[en]);if(!$)throw Error("no such Enum '"+g+"' in "+this);return $},ep.prototype.lookupTypeOrEnum=function(g){var $=this.lookup(g,[et,en]);if(!$)throw Error("no such Type or Enum '"+g+"' in "+this);return $},ep.prototype.lookupService=function(g){var $=this.lookup(g,[er]);if(!$)throw Error("no such Service '"+g+"' in "+this);return $},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},58831:(g,$,ee)=>{"use strict";g.exports=en,en.className="ReflectionObject";var et,er=ee(18289);function en(g,$){if(!er.isString(g))throw TypeError("name must be a string");if($&&!er.isObject($))throw TypeError("options must be an object");this.options=$,this.parsedOptions=null,this.name=g,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(en.prototype,{root:{get:function(){for(var g=this;null!==g.parent;)g=g.parent;return g}},fullName:{get:function(){for(var g=[this.name],$=this.parent;$;)g.unshift($.name),$=$.parent;return g.join(".")}}}),en.prototype.toJSON=function(){throw Error()},en.prototype.onAdd=function(g){this.parent&&this.parent!==g&&this.parent.remove(this),this.parent=g,this.resolved=!1;var $=g.root;$ instanceof et&&$._handleAdd(this)},en.prototype.onRemove=function(g){var $=g.root;$ instanceof et&&$._handleRemove(this),this.parent=null,this.resolved=!1},en.prototype.resolve=function(){return this.resolved||this.root instanceof et&&(this.resolved=!0),this},en.prototype.getOption=function(g){if(this.options)return this.options[g]},en.prototype.setOption=function(g,$,ee){return ee&&this.options&&void 0!==this.options[g]||((this.options||(this.options={}))[g]=$),this},en.prototype.setParsedOption=function(g,$,ee){this.parsedOptions||(this.parsedOptions=[]);var et=this.parsedOptions;if(ee){var en=et.find(function($){return Object.prototype.hasOwnProperty.call($,g)});if(en){var ei=en[g];er.setProperty(ei,ee,$)}else(en={})[g]=er.setProperty({},ee,$),et.push(en)}else{var es={};es[g]=$,et.push(es)}return this},en.prototype.setOptions=function(g,$){if(g)for(var ee=Object.keys(g),et=0;et<ee.length;++et)this.setOption(ee[et],g[ee[et]],$);return this},en.prototype.toString=function(){var g=this.constructor.className,$=this.fullName;return $.length?g+" "+$:g},en._configure=function(g){et=g}},85677:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(58831);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="OneOf";var er=ee(92548),en=ee(18289);function ei(g,$,ee,er){if(Array.isArray($)||(ee=$,$=void 0),et.call(this,g,ee),!(void 0===$||Array.isArray($)))throw TypeError("fieldNames must be an Array");this.oneof=$||[],this.fieldsArray=[],this.comment=er}function es(g){if(g.parent)for(var $=0;$<g.fieldsArray.length;++$)g.fieldsArray[$].parent||g.parent.add(g.fieldsArray[$])}ei.fromJSON=function(g,$){return new ei(g,$.oneof,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"oneof",this.oneof,"comment",$?this.comment:void 0])},ei.prototype.add=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");return g.parent&&g.parent!==this.parent&&g.parent.remove(g),this.oneof.push(g.name),this.fieldsArray.push(g),g.partOf=this,es(this),this},ei.prototype.remove=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");var $=this.fieldsArray.indexOf(g);if($<0)throw Error(g+" is not a member of "+this);return this.fieldsArray.splice($,1),($=this.oneof.indexOf(g.name))>-1&&this.oneof.splice($,1),g.partOf=null,this},ei.prototype.onAdd=function(g){et.prototype.onAdd.call(this,g);for(var $=this,ee=0;ee<this.oneof.length;++ee){var er=g.get(this.oneof[ee]);er&&!er.partOf&&(er.partOf=$,$.fieldsArray.push(er))}es(this)},ei.prototype.onRemove=function(g){for(var $,ee=0;ee<this.fieldsArray.length;++ee)($=this.fieldsArray[ee]).parent&&$.parent.remove($);et.prototype.onRemove.call(this,g)},ei.d=function(){for(var g=Array(arguments.length),$=0;$<arguments.length;)g[$]=arguments[$++];return function($,ee){en.decorateType($.constructor).add(new ei(ee,g)),Object.defineProperty($,ee,{get:en.oneOfGetter(g),set:en.oneOfSetter(g)})}}},60580:(g,$,ee)=>{"use strict";g.exports=eO,eO.filename=null,eO.defaults={keepCase:!1};var et=ee(89468),er=ee(34955),en=ee(69396),ei=ee(92548),es=ee(30372),eo=ee(85677),eu=ee(33982),eh=ee(26962),ep=ee(3055),ef=ee(31627),eg=ee(18289),em=/^[1-9][0-9]*$/,ey=/^-?[1-9][0-9]*$/,ev=/^0[x][0-9a-fA-F]+$/,eS=/^-?0[x][0-9a-fA-F]+$/,eT=/^0[0-7]+$/,eE=/^-?0[0-7]+$/,ew=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,eC=/^[a-zA-Z_][a-zA-Z_0-9]*$/,e_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,eI=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function eO(g,$,ee){$ instanceof er||(ee=$,$=new er),ee||(ee=eO.defaults);var eA,eN,eD,eR,ek,ex=ee.preferTrailingComment||!1,eP=et(g,ee.alternateCommentMode||!1),eM=eP.next,eL=eP.push,eF=eP.peek,eB=eP.skip,ej=eP.cmnt,eU=!0,eV=!1,eq=$,ez=ee.keepCase?function(g){return g}:eg.camelCase;function eG(g,$,ee){var et=eO.filename;return ee||(eO.filename=null),Error("illegal "+($||"token")+" '"+g+"' ("+(et?et+", ":"")+"line "+eP.line+")")}function e$(){var g,$=[];do{if('"'!==(g=eM())&&"'"!==g)throw eG(g);$.push(eM()),eB(g),g=eF()}while('"'===g||"'"===g);return $.join("")}function eK(g){var $=eM();switch($){case"'":case'"':return eL($),e$();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return eH($,!0)}catch(ee){if(g&&e_.test($))return $;throw eG($,"value")}}function eW(g,$){var ee,et;do $&&('"'===(ee=eF())||"'"===ee)?g.push(e$()):g.push([et=eQ(eM()),eB("to",!0)?eQ(eM()):et]);while(eB(",",!0));eB(";")}function eH(g,$){var ee=1;switch("-"===g.charAt(0)&&(ee=-1,g=g.substring(1)),g){case"inf":case"INF":case"Inf":return 1/0*ee;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(em.test(g))return ee*parseInt(g,10);if(ev.test(g))return ee*parseInt(g,16);if(eT.test(g))return ee*parseInt(g,8);if(ew.test(g))return ee*parseFloat(g);throw eG(g,"number",$)}function eQ(g,$){switch(g){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!$&&"-"===g.charAt(0))throw eG(g,"id");if(ey.test(g))return parseInt(g,10);if(eS.test(g))return parseInt(g,16);if(eE.test(g))return parseInt(g,8);throw eG(g,"id")}function eY(){if(void 0!==eN)throw eG("package");if(eN=eM(),!e_.test(eN))throw eG(eN,"name");eq=eq.define(eN),eB(";")}function eJ(){var g,$=eF();switch($){case"weak":g=eR||(eR=[]),eM();break;case"public":eM();default:g=eD||(eD=[])}$=e$(),eB(";"),g.push($)}function eX(){if(eB("="),!(eV="proto3"===(ek=e$()))&&"proto2"!==ek)throw eG(ek,"syntax");eB(";")}function eZ(g,$){switch($){case"option":return e8(g,$),eB(";"),!0;case"message":return e1(g,$),!0;case"enum":return e9(g,$),!0;case"service":return ti(g,$),!0;case"extend":return tl(g,$),!0}return!1}function e0(g,$,ee){var et,er=eP.line;if(g&&("string"!=typeof g.comment&&(g.comment=ej()),g.filename=eO.filename),eB("{",!0)){for(;"}"!==(et=eM());)$(et);eB(";",!0)}else ee&&ee(),eB(";"),g&&("string"!=typeof g.comment||ex)&&(g.comment=ej(er)||g.comment)}function e1(g,$){if(!eC.test($=eM()))throw eG($,"type name");var ee=new en($);e0(ee,function(g){if(!eZ(ee,g))switch(g){case"map":e4(ee,g);break;case"required":case"repeated":e2(ee,g);break;case"optional":eV?e2(ee,"proto3_optional"):e2(ee,"optional");break;case"oneof":e6(ee,g);break;case"extensions":eW(ee.extensions||(ee.extensions=[]));break;case"reserved":eW(ee.reserved||(ee.reserved=[]),!0);break;default:if(!eV||!e_.test(g))throw eG(g);eL(g),e2(ee,"optional")}}),g.add(ee)}function e2(g,$,ee){var et=eM();if("group"===et){e3(g,$);return}if(!e_.test(et))throw eG(et,"type");var er=eM();if(!eC.test(er))throw eG(er,"name");er=ez(er),eB("=");var en=new ei(er,eQ(eM()),et,$,ee);if(e0(en,function(g){if("option"===g)e8(en,g),eB(";");else throw eG(g)},function(){tr(en)}),"proto3_optional"===$){var es=new eo("_"+er);en.setOption("proto3_optional",!0),es.add(en),g.add(es)}else g.add(en);!eV&&en.repeated&&(void 0!==ef.packed[et]||void 0===ef.basic[et])&&en.setOption("packed",!1,!0)}function e3(g,$){var ee=eM();if(!eC.test(ee))throw eG(ee,"name");var et=eg.lcFirst(ee);ee===et&&(ee=eg.ucFirst(ee)),eB("=");var er=eQ(eM()),es=new en(ee);es.group=!0;var eo=new ei(et,er,ee,$);eo.filename=eO.filename,e0(es,function(g){switch(g){case"option":e8(es,g),eB(";");break;case"required":case"repeated":e2(es,g);break;case"optional":eV?e2(es,"proto3_optional"):e2(es,"optional");break;default:throw eG(g)}}),g.add(es).add(eo)}function e4(g){eB("<");var $=eM();if(void 0===ef.mapKey[$])throw eG($,"type");eB(",");var ee=eM();if(!e_.test(ee))throw eG(ee,"type");eB(">");var et=eM();if(!eC.test(et))throw eG(et,"name");eB("=");var er=new es(ez(et),eQ(eM()),$,ee);e0(er,function(g){if("option"===g)e8(er,g),eB(";");else throw eG(g)},function(){tr(er)}),g.add(er)}function e6(g,$){if(!eC.test($=eM()))throw eG($,"name");var ee=new eo(ez($));e0(ee,function(g){"option"===g?(e8(ee,g),eB(";")):(eL(g),e2(ee,"optional"))}),g.add(ee)}function e9(g,$){if(!eC.test($=eM()))throw eG($,"name");var ee=new eu($);e0(ee,function(g){switch(g){case"option":e8(ee,g),eB(";");break;case"reserved":eW(ee.reserved||(ee.reserved=[]),!0);break;default:e5(ee,g)}}),g.add(ee)}function e5(g,$){if(!eC.test($))throw eG($,"name");eB("=");var ee=eQ(eM(),!0),et={};e0(et,function(g){if("option"===g)e8(et,g),eB(";");else throw eG(g)},function(){tr(et)}),g.add($,ee,et.comment)}function e8(g,$){var ee,et=eB("(",!0);if(!e_.test($=eM()))throw eG($,"name");var er=$,en=er;et&&(eB(")"),en=er="("+er+")",$=eF(),eI.test($)&&(ee=$.substr(1),er+=$,eM())),eB("=");var ei=e7(g,er);tt(g,en,ei,ee)}function e7(g,$){if(eB("{",!0)){for(var ee={};!eB("}",!0);){if(!eC.test(eA=eM()))throw eG(eA,"name");var et,er=eA;"{"===eF()?et=e7(g,$+"."+eA):(eB(":"),"{"===eF()?et=e7(g,$+"."+eA):(et=eK(!0),te(g,$+"."+eA,et)));var en=ee[er];en&&(et=[].concat(en).concat(et)),ee[er]=et,eB(",",!0)}return ee}var ei=eK(!0);return te(g,$,ei),ei}function te(g,$,ee){g.setOption&&g.setOption($,ee)}function tt(g,$,ee,et){g.setParsedOption&&g.setParsedOption($,ee,et)}function tr(g){if(eB("[",!0)){do e8(g,"option");while(eB(",",!0));eB("]")}return g}function ti(g,$){if(!eC.test($=eM()))throw eG($,"service name");var ee=new eh($);e0(ee,function(g){if(!eZ(ee,g)){if("rpc"===g)ts(ee,g);else throw eG(g)}}),g.add(ee)}function ts(g,$){var ee=ej(),et=$;if(!eC.test($=eM()))throw eG($,"name");var er,en,ei,es,eo=$;if(eB("("),eB("stream",!0)&&(en=!0),!e_.test($=eM())||(er=$,eB(")"),eB("returns"),eB("("),eB("stream",!0)&&(es=!0),!e_.test($=eM())))throw eG($);ei=$,eB(")");var eu=new ep(eo,et,er,ei,en,es);eu.comment=ee,e0(eu,function(g){if("option"===g)e8(eu,g),eB(";");else throw eG(g)}),g.add(eu)}function tl(g,$){if(!e_.test($=eM()))throw eG($,"reference");var ee=$;e0(null,function($){switch($){case"required":case"repeated":e2(g,$,ee);break;case"optional":eV?e2(g,"proto3_optional",ee):e2(g,"optional",ee);break;default:if(!eV||!e_.test($))throw eG($);eL($),e2(g,"optional",ee)}})}for(;null!==(eA=eM());)switch(eA){case"package":if(!eU)throw eG(eA);eY();break;case"import":if(!eU)throw eG(eA);eJ();break;case"syntax":if(!eU)throw eG(eA);eX();break;case"option":e8(eq,eA),eB(";");break;default:if(eZ(eq,eA)){eU=!1;continue}throw eG(eA)}return eO.filename=null,{package:eN,imports:eD,weakImports:eR,syntax:ek,root:$}}},8645:(g,$,ee)=>{"use strict";g.exports=eo;var et,er=ee(86416),en=er.LongBits,ei=er.utf8;function es(g,$){return RangeError("index out of range: "+g.pos+" + "+($||1)+" > "+g.len)}function eo(g){this.buf=g,this.pos=0,this.len=g.length}var eu="undefined"!=typeof Uint8Array?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new eo(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new eo(g);throw Error("illegal buffer")},eh=function(){return er.Buffer?function(g){return(eo.create=function(g){return er.Buffer.isBuffer(g)?new et(g):eu(g)})(g)}:eu};function ep(){var g=new en(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw es(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*$)>>>0,g}if(this.len-this.pos>4){for(;$<5;++$)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}else for(;$<5;++$){if(this.pos>=this.len)throw es(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function ef(g,$){return(g[$-4]|g[$-3]<<8|g[$-2]<<16|g[$-1]<<24)>>>0}function eg(){if(this.pos+8>this.len)throw es(this,8);return new en(ef(this.buf,this.pos+=4),ef(this.buf,this.pos+=4))}eo.create=eh(),eo.prototype._slice=er.Array.prototype.subarray||er.Array.prototype.slice,eo.prototype.uint32=function(){var g=4294967295;return function(){if(g=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(g=(g|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,es(this,10);return g}}(),eo.prototype.int32=function(){return 0|this.uint32()},eo.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)|0},eo.prototype.bool=function(){return 0!==this.uint32()},eo.prototype.fixed32=function(){if(this.pos+4>this.len)throw es(this,4);return ef(this.buf,this.pos+=4)},eo.prototype.sfixed32=function(){if(this.pos+4>this.len)throw es(this,4);return 0|ef(this.buf,this.pos+=4)},eo.prototype.float=function(){if(this.pos+4>this.len)throw es(this,4);var g=er.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},eo.prototype.double=function(){if(this.pos+8>this.len)throw es(this,4);var g=er.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},eo.prototype.bytes=function(){var g=this.uint32(),$=this.pos,ee=this.pos+g;if(ee>this.len)throw es(this,g);return(this.pos+=g,Array.isArray(this.buf))?this.buf.slice($,ee):$===ee?new this.buf.constructor(0):this._slice.call(this.buf,$,ee)},eo.prototype.string=function(){var g=this.bytes();return ei.read(g,0,g.length)},eo.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw es(this,g);this.pos+=g}else do if(this.pos>=this.len)throw es(this);while(128&this.buf[this.pos++]);return this},eo.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},eo._configure=function(g){et=g,eo.create=eh(),et._configure();var $=er.Long?"toLong":"toNumber";er.merge(eo.prototype,{int64:function(){return ep.call(this)[$](!1)},uint64:function(){return ep.call(this)[$](!0)},sint64:function(){return ep.call(this).zzDecode()[$](!1)},fixed64:function(){return eg.call(this)[$](!0)},sfixed64:function(){return eg.call(this)[$](!1)}})}},2126:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(8645);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(86416);function en(g){et.call(this,g)}en._configure=function(){er.Buffer&&(en.prototype._slice=er.Buffer.prototype.slice)},en.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},en._configure()},34955:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(44622);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Root";var es=ee(92548),eo=ee(33982),eu=ee(85677),eh=ee(18289);function ep(g){ei.call(this,"",g),this.deferred=[],this.files=[]}function ef(){}ep.fromJSON=function(g,$){return $||($=new ep),g.options&&$.setOptions(g.options),$.addJSON(g.nested)},ep.prototype.resolvePath=eh.path.resolve,ep.prototype.fetch=eh.fetch,ep.prototype.load=function g($,ee,et){"function"==typeof ee&&(et=ee,ee=void 0);var ei=this;if(!et)return eh.asPromise(g,ei,$,ee);var es=et===ef;function eo(g,$){if(et){var ee=et;if(et=null,es)throw g;ee(g,$)}}function eu(g){var $=g.lastIndexOf("google/protobuf/");if($>-1){var ee=g.substring($);if(ee in en)return ee}return null}function ep(g,$){try{if(eh.isString($)&&"{"===$.charAt(0)&&($=JSON.parse($)),eh.isString($)){er.filename=g;var et,en=er($,ei,ee),ep=0;if(en.imports)for(;ep<en.imports.length;++ep)(et=eu(en.imports[ep])||ei.resolvePath(g,en.imports[ep]))&&eg(et);if(en.weakImports)for(ep=0;ep<en.weakImports.length;++ep)(et=eu(en.weakImports[ep])||ei.resolvePath(g,en.weakImports[ep]))&&eg(et,!0)}else ei.setOptions($.options).addJSON($.nested)}catch(g){eo(g)}es||em||eo(null,ei)}function eg(g,$){if(!(ei.files.indexOf(g)>-1)){if(ei.files.push(g),g in en){es?ep(g,en[g]):(++em,setTimeout(function(){--em,ep(g,en[g])}));return}if(es){var ee;try{ee=eh.fs.readFileSync(g).toString("utf8")}catch(g){$||eo(g);return}ep(g,ee)}else++em,ei.fetch(g,function(ee,er){if(--em,et){if(ee){$?em||eo(null,ei):eo(ee);return}ep(g,er)}})}}var em=0;eh.isString($)&&($=[$]);for(var ey,ev=0;ev<$.length;++ev)(ey=ei.resolvePath("",$[ev]))&&eg(ey);if(es)return ei;em||eo(null,ei)},ep.prototype.loadSync=function(g,$){if(!eh.isNode)throw Error("not supported");return this.load(g,$,ef)},ep.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(g){return"'extend "+g.extend+"' in "+g.parent.fullName}).join(", "));return ei.prototype.resolveAll.call(this)};var eg=/^[A-Z]/;function em(g,$){var ee=$.parent.lookup($.extend);if(ee){var et=new es($.fullName,$.id,$.type,$.rule,void 0,$.options);return et.declaringField=$,$.extensionField=et,ee.add(et),!0}return!1}ep.prototype._handleAdd=function(g){if(g instanceof es)void 0===g.extend||g.extensionField||em(this,g)||this.deferred.push(g);else if(g instanceof eo)eg.test(g.name)&&(g.parent[g.name]=g.values);else if(!(g instanceof eu)){if(g instanceof et)for(var $=0;$<this.deferred.length;)em(this,this.deferred[$])?this.deferred.splice($,1):++$;for(var ee=0;ee<g.nestedArray.length;++ee)this._handleAdd(g._nestedArray[ee]);eg.test(g.name)&&(g.parent[g.name]=g)}},ep.prototype._handleRemove=function(g){if(g instanceof es){if(void 0!==g.extend){if(g.extensionField)g.extensionField.parent.remove(g.extensionField),g.extensionField=null;else{var $=this.deferred.indexOf(g);$>-1&&this.deferred.splice($,1)}}}else if(g instanceof eo)eg.test(g.name)&&delete g.parent[g.name];else if(g instanceof ei){for(var ee=0;ee<g.nestedArray.length;++ee)this._handleRemove(g._nestedArray[ee]);eg.test(g.name)&&delete g.parent[g.name]}},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},43675:g=>{"use strict";g.exports={}},84415:(g,$,ee)=>{"use strict";$.Service=ee(49861)},49861:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(86416);function er(g,$,ee){if("function"!=typeof g)throw TypeError("rpcImpl must be a function");et.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!$,this.responseDelimited=!!ee}(er.prototype=Object.create(et.EventEmitter.prototype)).constructor=er,er.prototype.rpcCall=function g($,ee,er,en,ei){if(!en)throw TypeError("request must be specified");var es=this;if(!ei)return et.asPromise(g,es,$,ee,er,en);if(!es.rpcImpl){setTimeout(function(){ei(Error("already ended"))},0);return}try{return es.rpcImpl($,ee[es.requestDelimited?"encodeDelimited":"encode"](en).finish(),function(g,ee){if(g)return es.emit("error",g,$),ei(g);if(null===ee){es.end(!0);return}if(!(ee instanceof er))try{ee=er[es.responseDelimited?"decodeDelimited":"decode"](ee)}catch(g){return es.emit("error",g,$),ei(g)}return es.emit("data",ee,$),ei(null,ee)})}catch(g){es.emit("error",g,$),setTimeout(function(){ei(g)},0);return}},er.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},26962:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(44622);((es.prototype=Object.create(et.prototype)).constructor=es).className="Service";var er=ee(3055),en=ee(18289),ei=ee(84415);function es(g,$){et.call(this,g,$),this.methods={},this._methodsArray=null}function eo(g){return g._methodsArray=null,g}es.fromJSON=function(g,$){var ee=new es(g,$.options);if($.methods)for(var et=Object.keys($.methods),en=0;en<et.length;++en)ee.add(er.fromJSON(et[en],$.methods[et[en]]));return $.nested&&ee.addJSON($.nested),ee.comment=$.comment,ee},es.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return en.toObject(["options",$&&$.options||void 0,"methods",et.arrayToJSON(this.methodsArray,g)||{},"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},Object.defineProperty(es.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=en.toArray(this.methods))}}),es.prototype.get=function(g){return this.methods[g]||et.prototype.get.call(this,g)},es.prototype.resolveAll=function(){for(var g=this.methodsArray,$=0;$<g.length;++$)g[$].resolve();return et.prototype.resolve.call(this)},es.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);return g instanceof er?(this.methods[g.name]=g,g.parent=this,eo(this)):et.prototype.add.call(this,g)},es.prototype.remove=function(g){if(g instanceof er){if(this.methods[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.methods[g.name],g.parent=null,eo(this)}return et.prototype.remove.call(this,g)},es.prototype.create=function(g,$,ee){for(var et,er=new ei.Service(g,$,ee),es=0;es<this.methodsArray.length;++es){var eo=en.lcFirst((et=this._methodsArray[es]).resolve().name).replace(/[^$\w_]/g,"");er[eo]=en.codegen(["r","c"],en.isReserved(eo)?eo+"_":eo)("return this.rpcCall(m,q,s,r,c)")({m:et,q:et.resolvedRequestType.ctor,s:et.resolvedResponseType.ctor})}return er}},89468:g=>{"use strict";g.exports=ep;var $=/[\s{}=;:[\],'"()<>]/g,ee=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,et=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,er=/^ *[*/]+ */,en=/^\s*\*?\/*/,ei=/\n/g,es=/\s/,eo=/\\(.?)/g,eu={0:"\x00",r:"\r",n:"\n",t:"	"};function eh(g){return g.replace(eo,function(g,$){switch($){case"\\":case"":return $;default:return eu[$]||""}})}function ep(g,eo){g=g.toString();var eu=0,ep=g.length,ef=1,eg=null,em=null,ey=0,ev=!1,eS=!1,eT=[],eE=null;function ew(g){return Error("illegal "+g+" (line "+ef+")")}function eC(){var $="'"===eE?et:ee;$.lastIndex=eu-1;var er=$.exec(g);if(!er)throw ew("string");return eu=$.lastIndex,eD(eE),eE=null,eh(er[1])}function e_($){return g.charAt($)}function eI($,ee,et){eg=g.charAt($++),ey=ef,ev=!1,eS=et;var es,eu,eh=$-(es=eo?2:3);do if(--eh<0||"\n"===(eu=g.charAt(eh))){ev=!0;break}while(" "===eu||"	"===eu);for(var ep=g.substring($,ee).split(ei),eT=0;eT<ep.length;++eT)ep[eT]=ep[eT].replace(eo?en:er,"").trim();em=ep.join("\n").trim()}function eO($){var ee=eA($),et=g.substring($,ee);return/^\s*\/{1,2}/.test(et)}function eA(g){for(var $=g;$<ep&&"\n"!==e_($);)$++;return $}function eN(){if(eT.length>0)return eT.shift();if(eE)return eC();var ee,et,er,en,ei,eh=0===eu;do{if(eu===ep)return null;for(ee=!1;es.test(er=e_(eu));)if("\n"===er&&(eh=!0,++ef),++eu===ep)return null;if("/"===e_(eu)){if(++eu===ep)throw ew("comment");if("/"===e_(eu)){if(eo){if(en=eu,ei=!1,eO(eu)){ei=!0;do{if((eu=eA(eu))===ep)break;eu++}while(eO(eu))}else eu=Math.min(ep,eA(eu)+1);ei&&eI(en,eu,eh),ef++,ee=!0}else{for(ei="/"===e_(en=eu+1);"\n"!==e_(++eu);)if(eu===ep)return null;++eu,ei&&eI(en,eu-1,eh),++ef,ee=!0}}else{if("*"!==(er=e_(eu)))return"/";en=eu+1,ei=eo||"*"===e_(en);do{if("\n"===er&&++ef,++eu===ep)throw ew("comment");et=er,er=e_(eu)}while("*"!==et||"/"!==er);++eu,ei&&eI(en,eu-2,eh),ee=!0}}}while(ee);var eg=eu;if($.lastIndex=0,!$.test(e_(eg++)))for(;eg<ep&&!$.test(e_(eg));)++eg;var em=g.substring(eu,eu=eg);return('"'===em||"'"===em)&&(eE=em),em}function eD(g){eT.push(g)}function eR(){if(!eT.length){var g=eN();if(null===g)return null;eD(g)}return eT[0]}function ek(g,$){var ee=eR();if(ee===g)return eN(),!0;if(!$)throw ew("token '"+ee+"', '"+g+"' expected");return!1}function ex(g){var $=null;return void 0===g?ey===ef-1&&(eo||"*"===eg||ev)&&($=eS?em:null):(ey<g&&eR(),ey===g&&!ev&&(eo||"/"===eg)&&($=eS?null:em)),$}return Object.defineProperty({next:eN,peek:eR,push:eD,skip:ek,cmnt:ex},"line",{get:function(){return ef}})}ep.unescape=eh},69396:(g,$,ee)=>{"use strict";g.exports=eT;var et=ee(44622);((eT.prototype=Object.create(et.prototype)).constructor=eT).className="Type";var er=ee(33982),en=ee(85677),ei=ee(92548),es=ee(30372),eo=ee(26962),eu=ee(55326),eh=ee(8645),ep=ee(47474),ef=ee(18289),eg=ee(67337),em=ee(98983),ey=ee(31181),ev=ee(5944),eS=ee(82969);function eT(g,$){et.call(this,g,$),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function eE(g){return g._fieldsById=g._fieldsArray=g._oneofsArray=null,delete g.encode,delete g.decode,delete g.verify,g}Object.defineProperties(eT.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var g=Object.keys(this.fields),$=0;$<g.length;++$){var ee=this.fields[g[$]],et=ee.id;if(this._fieldsById[et])throw Error("duplicate id "+et+" in "+this);this._fieldsById[et]=ee}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ef.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ef.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=eT.generateConstructor(this)())},set:function(g){var $=g.prototype;$ instanceof eu||((g.prototype=new eu).constructor=g,ef.merge(g.prototype,$)),g.$type=g.prototype.$type=this,ef.merge(g,eu,!0),this._ctor=g;for(var ee=0;ee<this.fieldsArray.length;++ee)this._fieldsArray[ee].resolve();var et={};for(ee=0;ee<this.oneofsArray.length;++ee)et[this._oneofsArray[ee].resolve().name]={get:ef.oneOfGetter(this._oneofsArray[ee].oneof),set:ef.oneOfSetter(this._oneofsArray[ee].oneof)};ee&&Object.defineProperties(g.prototype,et)}}}),eT.generateConstructor=function(g){for(var $,ee=ef.codegen(["p"],g.name),et=0;et<g.fieldsArray.length;++et)($=g._fieldsArray[et]).map?ee("this%s={}",ef.safeProp($.name)):$.repeated&&ee("this%s=[]",ef.safeProp($.name));return ee("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},eT.fromJSON=function(g,$){var ee=new eT(g,$.options);ee.extensions=$.extensions,ee.reserved=$.reserved;for(var eu=Object.keys($.fields),eh=0;eh<eu.length;++eh)ee.add((void 0!==$.fields[eu[eh]].keyType?es.fromJSON:ei.fromJSON)(eu[eh],$.fields[eu[eh]]));if($.oneofs)for(eu=Object.keys($.oneofs),eh=0;eh<eu.length;++eh)ee.add(en.fromJSON(eu[eh],$.oneofs[eu[eh]]));if($.nested)for(eu=Object.keys($.nested),eh=0;eh<eu.length;++eh){var ep=$.nested[eu[eh]];ee.add((void 0!==ep.id?ei.fromJSON:void 0!==ep.fields?eT.fromJSON:void 0!==ep.values?er.fromJSON:void 0!==ep.methods?eo.fromJSON:et.fromJSON)(eu[eh],ep))}return $.extensions&&$.extensions.length&&(ee.extensions=$.extensions),$.reserved&&$.reserved.length&&(ee.reserved=$.reserved),$.group&&(ee.group=!0),$.comment&&(ee.comment=$.comment),ee},eT.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return ef.toObject(["options",$&&$.options||void 0,"oneofs",et.arrayToJSON(this.oneofsArray,g),"fields",et.arrayToJSON(this.fieldsArray.filter(function(g){return!g.declaringField}),g)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},eT.prototype.resolveAll=function(){for(var g=this.fieldsArray,$=0;$<g.length;)g[$++].resolve();var ee=this.oneofsArray;for($=0;$<ee.length;)ee[$++].resolve();return et.prototype.resolveAll.call(this)},eT.prototype.get=function(g){return this.fields[g]||this.oneofs&&this.oneofs[g]||this.nested&&this.nested[g]||null},eT.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);if(g instanceof ei&&void 0===g.extend){if(this._fieldsById?this._fieldsById[g.id]:this.fieldsById[g.id])throw Error("duplicate id "+g.id+" in "+this);if(this.isReservedId(g.id))throw Error("id "+g.id+" is reserved in "+this);if(this.isReservedName(g.name))throw Error("name '"+g.name+"' is reserved in "+this);return g.parent&&g.parent.remove(g),this.fields[g.name]=g,g.message=this,g.onAdd(this),eE(this)}return g instanceof en?(this.oneofs||(this.oneofs={}),this.oneofs[g.name]=g,g.onAdd(this),eE(this)):et.prototype.add.call(this,g)},eT.prototype.remove=function(g){if(g instanceof ei&&void 0===g.extend){if(!this.fields||this.fields[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.fields[g.name],g.parent=null,g.onRemove(this),eE(this)}if(g instanceof en){if(!this.oneofs||this.oneofs[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.oneofs[g.name],g.parent=null,g.onRemove(this),eE(this)}return et.prototype.remove.call(this,g)},eT.prototype.isReservedId=function(g){return et.isReservedId(this.reserved,g)},eT.prototype.isReservedName=function(g){return et.isReservedName(this.reserved,g)},eT.prototype.create=function(g){return new this.ctor(g)},eT.prototype.setup=function(){for(var g=this.fullName,$=[],ee=0;ee<this.fieldsArray.length;++ee)$.push(this._fieldsArray[ee].resolve().resolvedType);this.encode=eg(this)({Writer:ep,types:$,util:ef}),this.decode=em(this)({Reader:eh,types:$,util:ef}),this.verify=ey(this)({types:$,util:ef}),this.fromObject=ev.fromObject(this)({types:$,util:ef}),this.toObject=ev.toObject(this)({types:$,util:ef});var et=eS[g];if(et){var er=Object.create(this);er.fromObject=this.fromObject,this.fromObject=et.fromObject.bind(er),er.toObject=this.toObject,this.toObject=et.toObject.bind(er)}return this},eT.prototype.encode=function(g,$){return this.setup().encode(g,$)},eT.prototype.encodeDelimited=function(g,$){return this.encode(g,$&&$.len?$.fork():$).ldelim()},eT.prototype.decode=function(g,$){return this.setup().decode(g,$)},eT.prototype.decodeDelimited=function(g){return g instanceof eh||(g=eh.create(g)),this.decode(g,g.uint32())},eT.prototype.verify=function(g){return this.setup().verify(g)},eT.prototype.fromObject=function(g){return this.setup().fromObject(g)},eT.prototype.toObject=function(g,$){return this.setup().toObject(g,$)},eT.d=function(g){return function($){ef.decorateType($,g)}}},31627:(g,$,ee)=>{"use strict";var et=$,er=ee(18289),en=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ei(g,$){var ee=0,et={};for($|=0;ee<g.length;)et[en[ee+$]]=g[ee++];return et}et.basic=ei([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),et.defaults=ei([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",er.emptyArray,null]),et.long=ei([0,0,0,1,1],7),et.mapKey=ei([0,0,0,5,5,0,0,0,1,1,0,2],2),et.packed=ei([1,5,0,0,0,5,5,0,0,0,1,1,0])},18289:(g,$,ee)=>{"use strict";var et,er,en=g.exports=ee(86416),ei=ee(43675);en.codegen=ee(52012),en.fetch=ee(63035),en.path=ee(29986),en.fs=en.inquire("fs"),en.toArray=function(g){if(g){for(var $=Object.keys(g),ee=Array($.length),et=0;et<$.length;)ee[et]=g[$[et++]];return ee}return[]},en.toObject=function(g){for(var $={},ee=0;ee<g.length;){var et=g[ee++],er=g[ee++];void 0!==er&&($[et]=er)}return $};var es=/\\/g,eo=/"/g;en.isReserved=function(g){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(g)},en.safeProp=function(g){return!/^[$\w_]+$/.test(g)||en.isReserved(g)?'["'+g.replace(es,"\\\\").replace(eo,'\\"')+'"]':"."+g},en.ucFirst=function(g){return g.charAt(0).toUpperCase()+g.substring(1)};var eu=/_([a-z])/g;en.camelCase=function(g){return g.substring(0,1)+g.substring(1).replace(eu,function(g,$){return $.toUpperCase()})},en.compareFieldsById=function(g,$){return g.id-$.id},en.decorateType=function(g,$){if(g.$type)return $&&g.$type.name!==$&&(en.decorateRoot.remove(g.$type),g.$type.name=$,en.decorateRoot.add(g.$type)),g.$type;et||(et=ee(69396));var er=new et($||g.name);return en.decorateRoot.add(er),er.ctor=g,Object.defineProperty(g,"$type",{value:er,enumerable:!1}),Object.defineProperty(g.prototype,"$type",{value:er,enumerable:!1}),er};var eh=0;en.decorateEnum=function(g){if(g.$type)return g.$type;er||(er=ee(33982));var $=new er("Enum"+eh++,g);return en.decorateRoot.add($),Object.defineProperty(g,"$type",{value:$,enumerable:!1}),$},en.setProperty=function(g,$,ee){function et(g,$,ee){var er=$.shift();if("__proto__"===er||"prototype"===er)return g;if($.length>0)g[er]=et(g[er]||{},$,ee);else{var en=g[er];en&&(ee=[].concat(en).concat(ee)),g[er]=ee}return g}if("object"!=typeof g)throw TypeError("dst must be an object");if(!$)throw TypeError("path must be specified");return et(g,$=$.split("."),ee)},Object.defineProperty(en,"decorateRoot",{get:function(){return ei.decorated||(ei.decorated=new(ee(34955)))}})},59535:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(86416);function er(g,$){this.lo=g>>>0,this.hi=$>>>0}var en=er.zero=new er(0,0);en.toNumber=function(){return 0},en.zzEncode=en.zzDecode=function(){return this},en.length=function(){return 1};var ei=er.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";er.fromNumber=function(g){if(0===g)return en;var $=g<0;$&&(g=-g);var ee=g>>>0,et=(g-ee)/4294967296>>>0;return $&&(et=~et>>>0,ee=~ee>>>0,++ee>4294967295&&(ee=0,++et>4294967295&&(et=0))),new er(ee,et)},er.from=function(g){if("number"==typeof g)return er.fromNumber(g);if(et.isString(g)){if(!et.Long)return er.fromNumber(parseInt(g,10));g=et.Long.fromString(g)}return g.low||g.high?new er(g.low>>>0,g.high>>>0):en},er.prototype.toNumber=function(g){if(!g&&this.hi>>>31){var $=~this.lo+1>>>0,ee=~this.hi>>>0;return $||(ee=ee+1>>>0),-($+4294967296*ee)}return this.lo+4294967296*this.hi},er.prototype.toLong=function(g){return et.Long?new et.Long(0|this.lo,0|this.hi,!!g):{low:0|this.lo,high:0|this.hi,unsigned:!!g}};var es=String.prototype.charCodeAt;er.fromHash=function(g){return g===ei?en:new er((es.call(g,0)|es.call(g,1)<<8|es.call(g,2)<<16|es.call(g,3)<<24)>>>0,(es.call(g,4)|es.call(g,5)<<8|es.call(g,6)<<16|es.call(g,7)<<24)>>>0)},er.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},er.prototype.zzEncode=function(){var g=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^g)>>>0,this.lo=(this.lo<<1^g)>>>0,this},er.prototype.zzDecode=function(){var g=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^g)>>>0,this.hi=(this.hi>>>1^g)>>>0,this},er.prototype.length=function(){var g=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,ee=this.hi>>>24;return 0===ee?0===$?g<16384?g<128?1:2:g<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:ee<128?9:10}},86416:function(g,$,ee){"use strict";var et=$;function er(g,$,ee){for(var et=Object.keys($),er=0;er<et.length;++er)void 0!==g[et[er]]&&ee||(g[et[er]]=$[et[er]]);return g}function en(g){function $(g,ee){if(!(this instanceof $))return new $(g,ee);Object.defineProperty(this,"message",{get:function(){return g}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:Error().stack||""}),ee&&er(this,ee)}return($.prototype=Object.create(Error.prototype)).constructor=$,Object.defineProperty($.prototype,"name",{get:function(){return g}}),$.prototype.toString=function(){return this.name+": "+this.message},$}et.asPromise=ee(70799),et.base64=ee(92130),et.EventEmitter=ee(80854),et.float=ee(14324),et.inquire=ee(20449),et.utf8=ee(78131),et.pool=ee(56035),et.LongBits=ee(59535),et.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),et.global=et.isNode&&global||"undefined"!=typeof self&&self||this,et.emptyArray=Object.freeze?Object.freeze([]):[],et.emptyObject=Object.freeze?Object.freeze({}):{},et.isInteger=Number.isInteger||function(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g},et.isString=function(g){return"string"==typeof g||g instanceof String},et.isObject=function(g){return g&&"object"==typeof g},et.isset=et.isSet=function(g,$){var ee=g[$];return!!(null!=ee&&g.hasOwnProperty($))&&("object"!=typeof ee||(Array.isArray(ee)?ee.length:Object.keys(ee).length)>0)},et.Buffer=function(){try{var g=et.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch(g){return null}}(),et._Buffer_from=null,et._Buffer_allocUnsafe=null,et.newBuffer=function(g){return"number"==typeof g?et.Buffer?et._Buffer_allocUnsafe(g):new et.Array(g):et.Buffer?et._Buffer_from(g):"undefined"==typeof Uint8Array?g:new Uint8Array(g)},et.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,et.Long=et.global.dcodeIO&&et.global.dcodeIO.Long||et.global.Long||et.inquire("long"),et.key2Re=/^true|false|0|1$/,et.key32Re=/^-?(?:0|[1-9][0-9]*)$/,et.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,et.longToHash=function(g){return g?et.LongBits.from(g).toHash():et.LongBits.zeroHash},et.longFromHash=function(g,$){var ee=et.LongBits.fromHash(g);return et.Long?et.Long.fromBits(ee.lo,ee.hi,$):ee.toNumber(!!$)},et.merge=er,et.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},et.newError=en,et.ProtocolError=en("ProtocolError"),et.oneOfGetter=function(g){for(var $={},ee=0;ee<g.length;++ee)$[g[ee]]=1;return function(){for(var g=Object.keys(this),ee=g.length-1;ee>-1;--ee)if(1===$[g[ee]]&&void 0!==this[g[ee]]&&null!==this[g[ee]])return g[ee]}},et.oneOfSetter=function(g){return function($){for(var ee=0;ee<g.length;++ee)g[ee]!==$&&delete this[g[ee]]}},et.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},et._configure=function(){var g=et.Buffer;if(!g){et._Buffer_from=et._Buffer_allocUnsafe=null;return}et._Buffer_from=g.from!==Uint8Array.from&&g.from||function($,ee){return new g($,ee)},et._Buffer_allocUnsafe=g.allocUnsafe||function($){return new g($)}}},31181:(g,$,ee)=>{"use strict";g.exports=eo;var et=ee(33982),er=ee(18289);function en(g,$){return g.name+": "+$+(g.repeated&&"array"!==$?"[]":g.map&&"object"!==$?"{k:"+g.keyType+"}":"")+" expected"}function ei(g,$,ee,er){if($.resolvedType){if($.resolvedType instanceof et){g("switch(%s){",er)("default:")("return%j",en($,"enum value"));for(var ei=Object.keys($.resolvedType.values),es=0;es<ei.length;++es)g("case %i:",$.resolvedType.values[ei[es]]);g("break")("}")}else g("{")("var e=types[%i].verify(%s);",ee,er)("if(e)")("return%j+e",$.name+".")("}")}else switch($.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.isInteger(%s))",er)("return%j",en($,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",er,er,er,er)("return%j",en($,"integer|Long"));break;case"float":case"double":g('if(typeof %s!=="number")',er)("return%j",en($,"number"));break;case"bool":g('if(typeof %s!=="boolean")',er)("return%j",en($,"boolean"));break;case"string":g("if(!util.isString(%s))",er)("return%j",en($,"string"));break;case"bytes":g('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',er,er,er)("return%j",en($,"buffer"))}return g}function es(g,$,ee){switch($.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.key32Re.test(%s))",ee)("return%j",en($,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.key64Re.test(%s))",ee)("return%j",en($,"integer|Long key"));break;case"bool":g("if(!util.key2Re.test(%s))",ee)("return%j",en($,"boolean key"))}return g}function eo(g){var $=er.codegen(["m"],g.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ee=g.oneofsArray,et={};ee.length&&$("var p={}");for(var eo=0;eo<g.fieldsArray.length;++eo){var eu=g._fieldsArray[eo].resolve(),eh="m"+er.safeProp(eu.name);if(eu.optional&&$("if(%s!=null&&m.hasOwnProperty(%j)){",eh,eu.name),eu.map)$("if(!util.isObject(%s))",eh)("return%j",en(eu,"object"))("var k=Object.keys(%s)",eh)("for(var i=0;i<k.length;++i){"),es($,eu,"k[i]"),ei($,eu,eo,eh+"[k[i]]")("}");else if(eu.repeated)$("if(!Array.isArray(%s))",eh)("return%j",en(eu,"array"))("for(var i=0;i<%s.length;++i){",eh),ei($,eu,eo,eh+"[i]")("}");else{if(eu.partOf){var ep=er.safeProp(eu.partOf.name);1===et[eu.partOf.name]&&$("if(p%s===1)",ep)("return%j",eu.partOf.name+": multiple values"),et[eu.partOf.name]=1,$("p%s=1",ep)}ei($,eu,eo,eh)}eu.optional&&$("}")}return $("return null")}},82969:(g,$,ee)=>{"use strict";var et=$,er=ee(55326);et[".google.protobuf.Any"]={fromObject:function(g){if(g&&g["@type"]){var $=g["@type"].substring(g["@type"].lastIndexOf("/")+1),ee=this.lookup($);if(ee){var et="."===g["@type"].charAt(0)?g["@type"].substr(1):g["@type"];return -1===et.indexOf("/")&&(et="/"+et),this.create({type_url:et,value:ee.encode(ee.fromObject(g)).finish()})}}return this.fromObject(g)},toObject:function(g,$){var ee="type.googleapis.com/",et="",en="";if($&&$.json&&g.type_url&&g.value){en=g.type_url.substring(g.type_url.lastIndexOf("/")+1),et=g.type_url.substring(0,g.type_url.lastIndexOf("/")+1);var ei=this.lookup(en);ei&&(g=ei.decode(g.value))}if(!(g instanceof this.ctor)&&g instanceof er){var es=g.$type.toObject(g,$),eo="."===g.$type.fullName[0]?g.$type.fullName.substr(1):g.$type.fullName;return""===et&&(et=ee),en=et+eo,es["@type"]=en,es}return this.toObject(g,$)}}},47474:(g,$,ee)=>{"use strict";g.exports=ep;var et,er=ee(86416),en=er.LongBits,ei=er.base64,es=er.utf8;function eo(g,$,ee){this.fn=g,this.len=$,this.next=void 0,this.val=ee}function eu(){}function eh(g){this.head=g.head,this.tail=g.tail,this.len=g.len,this.next=g.states}function ep(){this.len=0,this.head=new eo(eu,0,0),this.tail=this.head,this.states=null}var ef=function(){return er.Buffer?function(){return(ep.create=function(){return new et})()}:function(){return new ep}};function eg(g,$,ee){$[ee]=255&g}function em(g,$,ee){for(;g>127;)$[ee++]=127&g|128,g>>>=7;$[ee]=g}function ey(g,$){this.len=g,this.next=void 0,this.val=$}function ev(g,$,ee){for(;g.hi;)$[ee++]=127&g.lo|128,g.lo=(g.lo>>>7|g.hi<<25)>>>0,g.hi>>>=7;for(;g.lo>127;)$[ee++]=127&g.lo|128,g.lo=g.lo>>>7;$[ee++]=g.lo}function eS(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}ep.create=ef(),ep.alloc=function(g){return new er.Array(g)},er.Array!==Array&&(ep.alloc=er.pool(ep.alloc,er.Array.prototype.subarray)),ep.prototype._push=function(g,$,ee){return this.tail=this.tail.next=new eo(g,$,ee),this.len+=$,this},ey.prototype=Object.create(eo.prototype),ey.prototype.fn=em,ep.prototype.uint32=function(g){return this.len+=(this.tail=this.tail.next=new ey((g>>>=0)<128?1:g<16384?2:g<2097152?3:g<268435456?4:5,g)).len,this},ep.prototype.int32=function(g){return g<0?this._push(ev,10,en.fromNumber(g)):this.uint32(g)},ep.prototype.sint32=function(g){return this.uint32((g<<1^g>>31)>>>0)},ep.prototype.uint64=function(g){var $=en.from(g);return this._push(ev,$.length(),$)},ep.prototype.int64=ep.prototype.uint64,ep.prototype.sint64=function(g){var $=en.from(g).zzEncode();return this._push(ev,$.length(),$)},ep.prototype.bool=function(g){return this._push(eg,1,g?1:0)},ep.prototype.fixed32=function(g){return this._push(eS,4,g>>>0)},ep.prototype.sfixed32=ep.prototype.fixed32,ep.prototype.fixed64=function(g){var $=en.from(g);return this._push(eS,4,$.lo)._push(eS,4,$.hi)},ep.prototype.sfixed64=ep.prototype.fixed64,ep.prototype.float=function(g){return this._push(er.float.writeFloatLE,4,g)},ep.prototype.double=function(g){return this._push(er.float.writeDoubleLE,8,g)};var eT=er.Array.prototype.set?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){for(var et=0;et<g.length;++et)$[ee+et]=g[et]};ep.prototype.bytes=function(g){var $=g.length>>>0;if(!$)return this._push(eg,1,0);if(er.isString(g)){var ee=ep.alloc($=ei.length(g));ei.decode(g,ee,0),g=ee}return this.uint32($)._push(eT,$,g)},ep.prototype.string=function(g){var $=es.length(g);return $?this.uint32($)._push(es.write,$,g):this._push(eg,1,0)},ep.prototype.fork=function(){return this.states=new eh(this),this.head=this.tail=new eo(eu,0,0),this.len=0,this},ep.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eo(eu,0,0),this.len=0),this},ep.prototype.ldelim=function(){var g=this.head,$=this.tail,ee=this.len;return this.reset().uint32(ee),ee&&(this.tail.next=g.next,this.tail=$,this.len+=ee),this},ep.prototype.finish=function(){for(var g=this.head.next,$=this.constructor.alloc(this.len),ee=0;g;)g.fn(g.val,$,ee),ee+=g.len,g=g.next;return $},ep._configure=function(g){et=g,ep.create=ef(),et._configure()}},96985:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(47474);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(86416);function en(){et.call(this)}function ei(g,$,ee){g.length<40?er.utf8.write(g,$,ee):$.utf8Write?$.utf8Write(g,ee):$.write(g,ee)}en._configure=function(){en.alloc=er._Buffer_allocUnsafe,en.writeBytesBuffer=er.Buffer&&er.Buffer.prototype instanceof Uint8Array&&"set"===er.Buffer.prototype.set.name?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){if(g.copy)g.copy($,ee,0,g.length);else for(var et=0;et<g.length;)$[ee++]=g[et++]}},en.prototype.bytes=function(g){er.isString(g)&&(g=er._Buffer_from(g,"base64"));var $=g.length>>>0;return this.uint32($),$&&this._push(en.writeBytesBuffer,$,g),this},en.prototype.string=function(g){var $=er.Buffer.byteLength(g);return this.uint32($),$&&this._push(ei,$,g),this},en._configure()},38059:(g,$,ee)=>{"use strict";let et,er;ee.r($),ee.d($,{default:()=>EW});var en,ei,es,eo,eu=ee(95344),eh=ee(3729);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep={NODE_CLIENT:!1,SDK_VERSION:"${JSCORE_VERSION}"},ef=function(g){let $=[],ee=0;for(let et=0;et<g.length;et++){let er=g.charCodeAt(et);er<128?$[ee++]=er:(er<2048?$[ee++]=er>>6|192:((64512&er)==55296&&et+1<g.length&&(64512&g.charCodeAt(et+1))==56320?(er=65536+((1023&er)<<10)+(1023&g.charCodeAt(++et)),$[ee++]=er>>18|240,$[ee++]=er>>12&63|128):$[ee++]=er>>12|224,$[ee++]=er>>6&63|128),$[ee++]=63&er|128)}return $},eg=function(g){let $=[],ee=0,et=0;for(;ee<g.length;){let er=g[ee++];if(er<128)$[et++]=String.fromCharCode(er);else if(er>191&&er<224){let en=g[ee++];$[et++]=String.fromCharCode((31&er)<<6|63&en)}else if(er>239&&er<365){let en=((7&er)<<18|(63&g[ee++])<<12|(63&g[ee++])<<6|63&g[ee++])-65536;$[et++]=String.fromCharCode(55296+(en>>10)),$[et++]=String.fromCharCode(56320+(1023&en))}else{let en=g[ee++],ei=g[ee++];$[et++]=String.fromCharCode((15&er)<<12|(63&en)<<6|63&ei)}}return $.join("")},em={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(g,$){if(!Array.isArray(g))throw Error("encodeByteArray takes an array as a parameter");this.init_();let ee=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let $=0;$<g.length;$+=3){let er=g[$],en=$+1<g.length,ei=en?g[$+1]:0,es=$+2<g.length,eo=es?g[$+2]:0,eu=er>>2,eh=(3&er)<<4|ei>>4,ep=(15&ei)<<2|eo>>6,ef=63&eo;es||(ef=64,en||(ep=64)),et.push(ee[eu],ee[eh],ee[ep],ee[ef])}return et.join("")},encodeString(g,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(g):this.encodeByteArray(ef(g),$)},decodeString(g,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(g):eg(this.decodeStringToByteArray(g,$))},decodeStringToByteArray(g,$){this.init_();let ee=$?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let $=0;$<g.length;){let er=ee[g.charAt($++)],en=$<g.length?ee[g.charAt($)]:0,ei=++$<g.length?ee[g.charAt($)]:64,es=++$<g.length?ee[g.charAt($)]:64;if(++$,null==er||null==en||null==ei||null==es)throw new ey;let eo=er<<2|en>>4;if(et.push(eo),64!==ei){let g=en<<4&240|ei>>2;if(et.push(g),64!==es){let g=ei<<6&192|es;et.push(g)}}}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let g=0;g<this.ENCODED_VALS.length;g++)this.byteToCharMap_[g]=this.ENCODED_VALS.charAt(g),this.charToByteMap_[this.byteToCharMap_[g]]=g,this.byteToCharMapWebSafe_[g]=this.ENCODED_VALS_WEBSAFE.charAt(g),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[g]]=g,g>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(g)]=g,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(g)]=g)}}};class ey extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let ev=function(g){let $=ef(g);return em.encodeByteArray($,!0)},eS=function(g){return ev(g).replace(/\./g,"")},eT=function(g){try{return em.decodeString(g,!0)}catch(g){console.error("base64Decode failed: ",g)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){if("undefined"!=typeof self)return self;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ew=()=>eE().__FIREBASE_DEFAULTS__,eC=()=>{if("undefined"==typeof process||void 0===process.env)return;let g=process.env.__FIREBASE_DEFAULTS__;if(g)return JSON.parse(g)},e_=()=>{let g;if("undefined"==typeof document)return;try{g=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(g){return}let $=g&&eT(g[1]);return $&&JSON.parse($)},eI=()=>{try{return ew()||eC()||e_()}catch(g){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${g}`);return}},eO=g=>{var $,ee;return null===(ee=null===($=eI())||void 0===$?void 0:$.emulatorHosts)||void 0===ee?void 0:ee[g]},eA=g=>{let $=eO(g);if(!$)return;let ee=$.lastIndexOf(":");if(ee<=0||ee+1===$.length)throw Error(`Invalid host ${$} with no separate hostname and port!`);let et=parseInt($.substring(ee+1),10);return"["===$[0]?[$.substring(1,ee-1),et]:[$.substring(0,ee),et]},eN=()=>{var g;return null===(g=eI())||void 0===g?void 0:g.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((g,$)=>{this.resolve=g,this.reject=$})}wrapCallback(g){return($,ee)=>{$?this.reject($):this.resolve(ee),"function"==typeof g&&(this.promise.catch(()=>{}),1===g.length?g($):g($,ee))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(g,$){if(g.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let ee={alg:"none",type:"JWT"},et=$||"demo-project",er=g.iat||0,en=g.sub||g.user_id;if(!en)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let ei=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:er,exp:er+3600,auth_time:er,sub:en,user_id:en,firebase:{sign_in_provider:"custom",identities:{}}},g),es="";return[eS(JSON.stringify(ee)),eS(JSON.stringify(ei)),es].join(".")}function ek(){try{return"object"==typeof indexedDB}catch(g){return!1}}function ex(){return new Promise((g,$)=>{try{let ee=!0,et="validate-browser-context-for-indexeddb-analytics-module",er=self.indexedDB.open(et);er.onsuccess=()=>{er.result.close(),ee||self.indexedDB.deleteDatabase(et),g(!0)},er.onupgradeneeded=()=>{ee=!1},er.onerror=()=>{var g;$((null===(g=er.error)||void 0===g?void 0:g.message)||"")}}catch(g){$(g)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eP="FirebaseError";class eM extends Error{constructor(g,$,ee){super($),this.code=g,this.customData=ee,this.name=eP,Object.setPrototypeOf(this,eM.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eL.prototype.create)}}class eL{constructor(g,$,ee){this.service=g,this.serviceName=$,this.errors=ee}create(g,...$){let ee=$[0]||{},et=`${this.service}/${g}`,er=this.errors[g],en=er?eF(er,ee):"Error",ei=`${this.serviceName}: ${en} (${et}).`;return new eM(et,ei,ee)}}function eF(g,$){return g.replace(eB,(g,ee)=>{let et=$[ee];return null!=et?String(et):`<${ee}?>`})}let eB=/\{\$([^}]+)}/g;function ej(g,$){if(g===$)return!0;let ee=Object.keys(g),et=Object.keys($);for(let er of ee){if(!et.includes(er))return!1;let ee=g[er],en=$[er];if(eU(ee)&&eU(en)){if(!ej(ee,en))return!1}else if(ee!==en)return!1}for(let g of et)if(!ee.includes(g))return!1;return!0}function eU(g){return null!==g&&"object"==typeof g}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(g){return g&&g._delegate?g._delegate:g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ep.NODE_CLIENT=!0;class eq{constructor(g,$,ee){this.name=g,this.instanceFactory=$,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(g){return this.instantiationMode=g,this}setMultipleInstances(g){return this.multipleInstances=g,this}setServiceProps(g){return this.serviceProps=g,this}setInstanceCreatedCallback(g){return this.onInstanceCreated=g,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ez="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(g,$){this.name=g,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(g){let $=this.normalizeInstanceIdentifier(g);if(!this.instancesDeferred.has($)){let g=new eD;if(this.instancesDeferred.set($,g),this.isInitialized($)||this.shouldAutoInitialize())try{let ee=this.getOrInitializeService({instanceIdentifier:$});ee&&g.resolve(ee)}catch(g){}}return this.instancesDeferred.get($).promise}getImmediate(g){var $;let ee=this.normalizeInstanceIdentifier(null==g?void 0:g.identifier),et=null!==($=null==g?void 0:g.optional)&&void 0!==$&&$;if(this.isInitialized(ee)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(g){if(et)return null;throw g}else{if(et)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(g){if(g.name!==this.name)throw Error(`Mismatching Component ${g.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=g,this.shouldAutoInitialize()){if(eK(g))try{this.getOrInitializeService({instanceIdentifier:ez})}catch(g){}for(let[g,$]of this.instancesDeferred.entries()){let ee=this.normalizeInstanceIdentifier(g);try{let g=this.getOrInitializeService({instanceIdentifier:ee});$.resolve(g)}catch(g){}}}}clearInstance(g=ez){this.instancesDeferred.delete(g),this.instancesOptions.delete(g),this.instances.delete(g)}async delete(){let g=Array.from(this.instances.values());await Promise.all([...g.filter(g=>"INTERNAL"in g).map(g=>g.INTERNAL.delete()),...g.filter(g=>"_delete"in g).map(g=>g._delete())])}isComponentSet(){return null!=this.component}isInitialized(g=ez){return this.instances.has(g)}getOptions(g=ez){return this.instancesOptions.get(g)||{}}initialize(g={}){let{options:$={}}=g,ee=this.normalizeInstanceIdentifier(g.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let et=this.getOrInitializeService({instanceIdentifier:ee,options:$});for(let[g,$]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(g)&&$.resolve(et);return et}onInit(g,$){var ee;let et=this.normalizeInstanceIdentifier($),er=null!==(ee=this.onInitCallbacks.get(et))&&void 0!==ee?ee:new Set;er.add(g),this.onInitCallbacks.set(et,er);let en=this.instances.get(et);return en&&g(en,et),()=>{er.delete(g)}}invokeOnInitCallbacks(g,$){let ee=this.onInitCallbacks.get($);if(ee)for(let et of ee)try{et(g,$)}catch(g){}}getOrInitializeService({instanceIdentifier:g,options:$={}}){let ee=this.instances.get(g);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:e$(g),options:$}),this.instances.set(g,ee),this.instancesOptions.set(g,$),this.invokeOnInitCallbacks(ee,g),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,g,ee)}catch(g){}return ee||null}normalizeInstanceIdentifier(g=ez){return this.component?this.component.multipleInstances?g:ez:g}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function e$(g){return g===ez?void 0:g}function eK(g){return"EAGER"===g.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(g){this.name=g,this.providers=new Map}addComponent(g){let $=this.getProvider(g.name);if($.isComponentSet())throw Error(`Component ${g.name} has already been registered with ${this.name}`);$.setComponent(g)}addOrOverwriteComponent(g){this.getProvider(g.name).isComponentSet()&&this.providers.delete(g.name),this.addComponent(g)}getProvider(g){if(this.providers.has(g))return this.providers.get(g);let $=new eG(g,this);return this.providers.set(g,$),$}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eH=[];!function(g){g[g.DEBUG=0]="DEBUG",g[g.VERBOSE=1]="VERBOSE",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.SILENT=5]="SILENT"}(tZ||(tZ={}));let eQ={debug:tZ.DEBUG,verbose:tZ.VERBOSE,info:tZ.INFO,warn:tZ.WARN,error:tZ.ERROR,silent:tZ.SILENT},eY=tZ.INFO,eJ={[tZ.DEBUG]:"log",[tZ.VERBOSE]:"log",[tZ.INFO]:"info",[tZ.WARN]:"warn",[tZ.ERROR]:"error"},eX=(g,$,...ee)=>{if($<g.logLevel)return;let et=new Date().toISOString(),er=eJ[$];if(er)console[er](`[${et}]  ${g.name}:`,...ee);else throw Error(`Attempted to log a message with an invalid logType (value: ${$})`)};class eZ{constructor(g){this.name=g,this._logLevel=eY,this._logHandler=eX,this._userLogHandler=null,eH.push(this)}get logLevel(){return this._logLevel}set logLevel(g){if(!(g in tZ))throw TypeError(`Invalid value "${g}" assigned to \`logLevel\``);this._logLevel=g}setLogLevel(g){this._logLevel="string"==typeof g?eQ[g]:g}get logHandler(){return this._logHandler}set logHandler(g){if("function"!=typeof g)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=g}get userLogHandler(){return this._userLogHandler}set userLogHandler(g){this._userLogHandler=g}debug(...g){this._userLogHandler&&this._userLogHandler(this,tZ.DEBUG,...g),this._logHandler(this,tZ.DEBUG,...g)}log(...g){this._userLogHandler&&this._userLogHandler(this,tZ.VERBOSE,...g),this._logHandler(this,tZ.VERBOSE,...g)}info(...g){this._userLogHandler&&this._userLogHandler(this,tZ.INFO,...g),this._logHandler(this,tZ.INFO,...g)}warn(...g){this._userLogHandler&&this._userLogHandler(this,tZ.WARN,...g),this._logHandler(this,tZ.WARN,...g)}error(...g){this._userLogHandler&&this._userLogHandler(this,tZ.ERROR,...g),this._logHandler(this,tZ.ERROR,...g)}}let e0=(g,$)=>$.some($=>g instanceof $);function e1(){return et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e2(){return er||(er=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let e3=new WeakMap,e4=new WeakMap,e6=new WeakMap,e9=new WeakMap,e5=new WeakMap;function e8(g){let $=new Promise(($,ee)=>{let et=()=>{g.removeEventListener("success",er),g.removeEventListener("error",en)},er=()=>{$(ts(g.result)),et()},en=()=>{ee(g.error),et()};g.addEventListener("success",er),g.addEventListener("error",en)});return $.then($=>{$ instanceof IDBCursor&&e3.set($,g)}).catch(()=>{}),e5.set($,g),$}function e7(g){if(e4.has(g))return;let $=new Promise(($,ee)=>{let et=()=>{g.removeEventListener("complete",er),g.removeEventListener("error",en),g.removeEventListener("abort",en)},er=()=>{$(),et()},en=()=>{ee(g.error||new DOMException("AbortError","AbortError")),et()};g.addEventListener("complete",er),g.addEventListener("error",en),g.addEventListener("abort",en)});e4.set(g,$)}let te={get(g,$,ee){if(g instanceof IDBTransaction){if("done"===$)return e4.get(g);if("objectStoreNames"===$)return g.objectStoreNames||e6.get(g);if("store"===$)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return ts(g[$])},set:(g,$,ee)=>(g[$]=ee,!0),has:(g,$)=>g instanceof IDBTransaction&&("done"===$||"store"===$)||$ in g};function tt(g){te=g(te)}function tr(g){return g!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?e2().includes(g)?function(...$){return g.apply(tl(this),$),ts(e3.get(this))}:function(...$){return ts(g.apply(tl(this),$))}:function($,...ee){let et=g.call(tl(this),$,...ee);return e6.set(et,$.sort?$.sort():[$]),ts(et)}}function ti(g){return"function"==typeof g?tr(g):(g instanceof IDBTransaction&&e7(g),e0(g,e1()))?new Proxy(g,te):g}function ts(g){if(g instanceof IDBRequest)return e8(g);if(e9.has(g))return e9.get(g);let $=ti(g);return $!==g&&(e9.set(g,$),e5.set($,g)),$}let tl=g=>e5.get(g);function tu(g,$,{blocked:ee,upgrade:et,blocking:er,terminated:en}={}){let ei=indexedDB.open(g,$),es=ts(ei);return et&&ei.addEventListener("upgradeneeded",g=>{et(ts(ei.result),g.oldVersion,g.newVersion,ts(ei.transaction),g)}),ee&&ei.addEventListener("blocked",g=>ee(g.oldVersion,g.newVersion,g)),es.then(g=>{en&&g.addEventListener("close",()=>en()),er&&g.addEventListener("versionchange",g=>er(g.oldVersion,g.newVersion,g))}).catch(()=>{}),es}let th=["get","getKey","getAll","getAllKeys","count"],tp=["put","add","delete","clear"],tf=new Map;function tg(g,$){if(!(g instanceof IDBDatabase&&!($ in g)&&"string"==typeof $))return;if(tf.get($))return tf.get($);let ee=$.replace(/FromIndex$/,""),et=$!==ee,er=tp.includes(ee);if(!(ee in(et?IDBIndex:IDBObjectStore).prototype)||!(er||th.includes(ee)))return;let en=async function(g,...$){let en=this.transaction(g,er?"readwrite":"readonly"),ei=en.store;return et&&(ei=ei.index($.shift())),(await Promise.all([ei[ee](...$),er&&en.done]))[0]};return tf.set($,en),en}tt(g=>({...g,get:($,ee,et)=>tg($,ee)||g.get($,ee,et),has:($,ee)=>!!tg($,ee)||g.has($,ee)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(g){this.container=g}getPlatformInfoString(){return this.container.getProviders().map(g=>{if(!ty(g))return null;{let $=g.getImmediate();return`${$.library}/${$.version}`}}).filter(g=>g).join(" ")}}function ty(g){let $=g.getComponent();return(null==$?void 0:$.type)==="VERSION"}let tv="@firebase/app",tS="0.9.13",tT=new eZ("@firebase/app"),tE="9.23.0",tw="[DEFAULT]",tC={[tv]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},t_=new Map,tI=new Map;function tO(g,$){try{g.container.addComponent($)}catch(ee){tT.debug(`Component ${$.name} failed to register with FirebaseApp ${g.name}`,ee)}}function tA(g){let $=g.name;if(tI.has($))return tT.debug(`There were multiple attempts to register component ${$}.`),!1;for(let ee of(tI.set($,g),t_.values()))tO(ee,g);return!0}function tN(g,$){let ee=g.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),g.container.getProvider($)}let tD=new eL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(g,$,ee){this._isDeleted=!1,this._options=Object.assign({},g),this._config=Object.assign({},$),this._name=$.name,this._automaticDataCollectionEnabled=$.automaticDataCollectionEnabled,this._container=ee,this.container.addComponent(new eq("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(g){this.checkDestroyed(),this._automaticDataCollectionEnabled=g}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(g){this._isDeleted=g}checkDestroyed(){if(this.isDeleted)throw tD.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tk=tE;function tP(g,$={}){let ee=g;"object"!=typeof $&&($={name:$});let et=Object.assign({name:tw,automaticDataCollectionEnabled:!1},$),er=et.name;if("string"!=typeof er||!er)throw tD.create("bad-app-name",{appName:String(er)});if(ee||(ee=eN()),!ee)throw tD.create("no-options");let en=t_.get(er);if(en){if(ej(ee,en.options)&&ej(et,en.config))return en;throw tD.create("duplicate-app",{appName:er})}let ei=new eW(er);for(let g of tI.values())ei.addComponent(g);let es=new tR(ee,et,ei);return t_.set(er,es),es}function tM(g=tw){let $=t_.get(g);if(!$&&g===tw&&eN())return tP();if(!$)throw tD.create("no-app",{appName:g});return $}function tL(){return Array.from(t_.values())}function tF(g,$,ee){var et;let er=null!==(et=tC[g])&&void 0!==et?et:g;ee&&(er+=`-${ee}`);let en=er.match(/\s|\//),ei=$.match(/\s|\//);if(en||ei){let g=[`Unable to register library "${er}" with version "${$}":`];en&&g.push(`library name "${er}" contains illegal characters (whitespace or "/")`),en&&ei&&g.push("and"),ei&&g.push(`version name "${$}" contains illegal characters (whitespace or "/")`),tT.warn(g.join(" "));return}tA(new eq(`${er}-version`,()=>({library:er,version:$}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tB="firebase-heartbeat-database",tj=1,tU="firebase-heartbeat-store",tV=null;function tq(){return tV||(tV=tu(tB,tj,{upgrade:(g,$)=>{0===$&&g.createObjectStore(tU)}}).catch(g=>{throw tD.create("idb-open",{originalErrorMessage:g.message})})),tV}async function tz(g){try{let $=await tq();return await $.transaction(tU).objectStore(tU).get(t$(g))}catch(g){if(g instanceof eM)tT.warn(g.message);else{let $=tD.create("idb-get",{originalErrorMessage:null==g?void 0:g.message});tT.warn($.message)}}}async function tG(g,$){try{let ee=(await tq()).transaction(tU,"readwrite"),et=ee.objectStore(tU);await et.put($,t$(g)),await ee.done}catch(g){if(g instanceof eM)tT.warn(g.message);else{let $=tD.create("idb-set",{originalErrorMessage:null==g?void 0:g.message});tT.warn($.message)}}}function t$(g){return`${g.name}!${g.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tK=1024,tW=2592e6;class tH{constructor(g){this.container=g,this._heartbeatsCache=null;let $=this.container.getProvider("app").getImmediate();this._storage=new tJ($),this._heartbeatsCachePromise=this._storage.read().then(g=>(this._heartbeatsCache=g,g))}async triggerHeartbeat(){let g=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$=tQ();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===$||this._heartbeatsCache.heartbeats.some(g=>g.date===$))?void 0:(this._heartbeatsCache.heartbeats.push({date:$,agent:g}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(g=>{let $=new Date(g.date).valueOf();return Date.now()-$<=tW}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let g=tQ(),{heartbeatsToSend:$,unsentEntries:ee}=tY(this._heartbeatsCache.heartbeats),et=eS(JSON.stringify({version:2,heartbeats:$}));return this._heartbeatsCache.lastSentHeartbeatDate=g,ee.length>0?(this._heartbeatsCache.heartbeats=ee,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),et}}function tQ(){return new Date().toISOString().substring(0,10)}function tY(g,$=tK){let ee=[],et=g.slice();for(let er of g){let g=ee.find(g=>g.agent===er.agent);if(g){if(g.dates.push(er.date),tX(ee)>$){g.dates.pop();break}}else if(ee.push({agent:er.agent,dates:[er.date]}),tX(ee)>$){ee.pop();break}et=et.slice(1)}return{heartbeatsToSend:ee,unsentEntries:et}}class tJ{constructor(g){this.app=g,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ek()&&ex().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await tz(this.app)||{heartbeats:[]}}async overwrite(g){var $;if(await this._canUseIndexedDBPromise){let ee=await this.read();return tG(this.app,{lastSentHeartbeatDate:null!==($=g.lastSentHeartbeatDate)&&void 0!==$?$:ee.lastSentHeartbeatDate,heartbeats:g.heartbeats})}}async add(g){var $;if(await this._canUseIndexedDBPromise){let ee=await this.read();return tG(this.app,{lastSentHeartbeatDate:null!==($=g.lastSentHeartbeatDate)&&void 0!==$?$:ee.lastSentHeartbeatDate,heartbeats:[...ee.heartbeats,...g.heartbeats]})}}}function tX(g){return eS(JSON.stringify({version:2,heartbeats:g})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g){tA(new eq("platform-logger",g=>new tm(g),"PRIVATE")),tA(new eq("heartbeat",g=>new tH(g),"PRIVATE")),tF(tv,tS,""),tF(tv,tS,"esm2017"),tF("fire-js","")})(0),/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tF("firebase","9.23.0","app");var tZ,t0,t1=ee(73837),t2=ee(6113),t3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t4={},t6=t6||{},t9=t3||self;function t5(g){var $=typeof g;return"array"==($="object"!=$?$:g?Array.isArray(g)?"array":$:"null")||"object"==$&&"number"==typeof g.length}function t8(g){var $=typeof g;return"object"==$&&null!=g||"function"==$}function t7(g){return Object.prototype.hasOwnProperty.call(g,rt)&&g[rt]||(g[rt]=++rr)}var rt="closure_uid_"+(1e9*Math.random()>>>0),rr=0;function rn(g,$,ee){return g.call.apply(g.bind,arguments)}function ri(g,$,ee){if(!g)throw Error();if(2<arguments.length){var et=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,et),g.apply($,ee)}}return function(){return g.apply($,arguments)}}function rs(g,$,ee){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rn:ri).apply(null,arguments)}function ro(g,$){var ee=Array.prototype.slice.call(arguments,1);return function(){var $=ee.slice();return $.push.apply($,arguments),g.apply(this,$)}}function rl(g,$){function ee(){}ee.prototype=$.prototype,g.$=$.prototype,g.prototype=new ee,g.prototype.constructor=g,g.ac=function(g,ee,et){for(var er=Array(arguments.length-2),en=2;en<arguments.length;en++)er[en-2]=arguments[en];return $.prototype[ee].apply(g,er)}}function ru(){this.s=this.s,this.o=this.o}var rh=0;ru.prototype.s=!1,ru.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==rh)||t7(this)},ru.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let rp=Array.prototype.indexOf?function(g,$){return Array.prototype.indexOf.call(g,$,void 0)}:function(g,$){if("string"==typeof g)return"string"!=typeof $||1!=$.length?-1:g.indexOf($,0);for(let ee=0;ee<g.length;ee++)if(ee in g&&g[ee]===$)return ee;return -1};function rf(g){let $=g.length;if(0<$){let ee=Array($);for(let et=0;et<$;et++)ee[et]=g[et];return ee}return[]}function rg(g,$){for(let $=1;$<arguments.length;$++){let ee=arguments[$];if(t5(ee)){let $=g.length||0,et=ee.length||0;g.length=$+et;for(let er=0;er<et;er++)g[$+er]=ee[er]}else g.push(ee)}}function rm(g,$){this.type=g,this.g=this.target=$,this.defaultPrevented=!1}rm.prototype.h=function(){this.defaultPrevented=!0};var ry=function(){if(!t9.addEventListener||!Object.defineProperty)return!1;var g=!1,$=Object.defineProperty({},"passive",{get:function(){g=!0}});try{t9.addEventListener("test",()=>{},$),t9.removeEventListener("test",()=>{},$)}catch(g){}return g}();function rv(g){return/^[\s\xa0]*$/.test(g)}function rS(){var g=t9.navigator;return g&&(g=g.userAgent)?g:""}function rT(g){return -1!=rS().indexOf(g)}function rE(g){return rE[" "](g),g}function rw(g,$){var ee=sH;return Object.prototype.hasOwnProperty.call(ee,g)?ee[g]:ee[g]=$(g)}rE[" "]=function(){};var rC=rT("Opera"),r_=rT("Trident")||rT("MSIE"),rI=rT("Edge"),rO=rI||r_,rA=rT("Gecko")&&!(-1!=rS().toLowerCase().indexOf("webkit")&&!rT("Edge"))&&!(rT("Trident")||rT("MSIE"))&&!rT("Edge"),rN=-1!=rS().toLowerCase().indexOf("webkit")&&!rT("Edge");function rD(){var g=t9.document;return g?g.documentMode:void 0}e:{var rR="",rk=function(){var g=rS();return rA?/rv:([^\);]+)(\)|;)/.exec(g):rI?/Edge\/([\d\.]+)/.exec(g):r_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(g):rN?/WebKit\/(\S+)/.exec(g):rC?/(?:Version)[ \/]?(\S+)/.exec(g):void 0}();if(rk&&(rR=rk?rk[1]:""),r_){var rx=rD();if(null!=rx&&rx>parseFloat(rR)){en=String(rx);break e}}en=rR}var rP=ei=t9.document&&r_&&(rD()||parseInt(en,10))||void 0;function rM(g,$){if(rm.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var ee=this.type=g.type,et=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=$,$=g.relatedTarget){if(rA){e:{try{rE($.nodeName);var er=!0;break e}catch(g){}er=!1}er||($=null)}}else"mouseover"==ee?$=g.fromElement:"mouseout"==ee&&($=g.toElement);this.relatedTarget=$,et?(this.clientX=void 0!==et.clientX?et.clientX:et.pageX,this.clientY=void 0!==et.clientY?et.clientY:et.pageY,this.screenX=et.screenX||0,this.screenY=et.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:rL[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&rM.$.h.call(this)}}rl(rM,rm);var rL={2:"touch",3:"pen",4:"mouse"};rM.prototype.h=function(){rM.$.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var rF="closure_listenable_"+(1e6*Math.random()|0),rB=0;function rj(g,$,ee,et,er){this.listener=g,this.proxy=null,this.src=$,this.type=ee,this.capture=!!et,this.la=er,this.key=++rB,this.fa=this.ia=!1}function rU(g){g.fa=!0,g.listener=null,g.proxy=null,g.src=null,g.la=null}function rV(g,$,ee){for(let et in g)$.call(ee,g[et],et,g)}function rq(g,$){for(let ee in g)$.call(void 0,g[ee],ee,g)}function rz(g){let $={};for(let ee in g)$[ee]=g[ee];return $}let rG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r$(g,$){let ee,et;for(let $=1;$<arguments.length;$++){for(ee in et=arguments[$])g[ee]=et[ee];for(let $=0;$<rG.length;$++)ee=rG[$],Object.prototype.hasOwnProperty.call(et,ee)&&(g[ee]=et[ee])}}function rK(g){this.src=g,this.g={},this.h=0}function rW(g,$){var ee=$.type;if(ee in g.g){var et,er=g.g[ee],en=rp(er,$);(et=0<=en)&&Array.prototype.splice.call(er,en,1),et&&(rU($),0==g.g[ee].length&&(delete g.g[ee],g.h--))}}function rH(g,$,ee,et){for(var er=0;er<g.length;++er){var en=g[er];if(!en.fa&&en.listener==$&&!!ee==en.capture&&en.la==et)return er}return -1}rK.prototype.add=function(g,$,ee,et,er){var en=g.toString();(g=this.g[en])||(g=this.g[en]=[],this.h++);var ei=rH(g,$,et,er);return -1<ei?($=g[ei],ee||($.ia=!1)):(($=new rj($,this.src,en,!!et,er)).ia=ee,g.push($)),$};var rQ="closure_lm_"+(1e6*Math.random()|0),rY={};function rJ(g,$,ee,et,er){if(et&&et.once)return r0(g,$,ee,et,er);if(Array.isArray($)){for(var en=0;en<$.length;en++)rJ(g,$[en],ee,et,er);return null}return ee=r5(ee),g&&g[rF]?g.O($,ee,t8(et)?!!et.capture:!!et,er):rX(g,$,ee,!1,et,er)}function rX(g,$,ee,et,er,en){if(!$)throw Error("Invalid event type");var ei=t8(er)?!!er.capture:!!er,es=r6(g);if(es||(g[rQ]=es=new rK(g)),(ee=es.add($,ee,et,ei,en)).proxy)return ee;if(et=rZ(),ee.proxy=et,et.src=g,et.listener=ee,g.addEventListener)ry||(er=ei),void 0===er&&(er=!1),g.addEventListener($.toString(),et,er);else if(g.attachEvent)g.attachEvent(r3($.toString()),et);else if(g.addListener&&g.removeListener)g.addListener(et);else throw Error("addEventListener and attachEvent are unavailable.");return ee}function rZ(){function g(ee){return $.call(g.src,g.listener,ee)}let $=r4;return g}function r0(g,$,ee,et,er){if(Array.isArray($)){for(var en=0;en<$.length;en++)r0(g,$[en],ee,et,er);return null}return ee=r5(ee),g&&g[rF]?g.P($,ee,t8(et)?!!et.capture:!!et,er):rX(g,$,ee,!0,et,er)}function r1(g,$,ee,et,er){if(Array.isArray($))for(var en=0;en<$.length;en++)r1(g,$[en],ee,et,er);else(et=t8(et)?!!et.capture:!!et,ee=r5(ee),g&&g[rF])?(g=g.i,($=String($).toString())in g.g&&-1<(ee=rH(en=g.g[$],ee,et,er))&&(rU(en[ee]),Array.prototype.splice.call(en,ee,1),0==en.length&&(delete g.g[$],g.h--))):g&&(g=r6(g))&&($=g.g[$.toString()],g=-1,$&&(g=rH($,ee,et,er)),(ee=-1<g?$[g]:null)&&r2(ee))}function r2(g){if("number"!=typeof g&&g&&!g.fa){var $=g.src;if($&&$[rF])rW($.i,g);else{var ee=g.type,et=g.proxy;$.removeEventListener?$.removeEventListener(ee,et,g.capture):$.detachEvent?$.detachEvent(r3(ee),et):$.addListener&&$.removeListener&&$.removeListener(et),(ee=r6($))?(rW(ee,g),0==ee.h&&(ee.src=null,$[rQ]=null)):rU(g)}}}function r3(g){return g in rY?rY[g]:rY[g]="on"+g}function r4(g,$){if(g.fa)g=!0;else{$=new rM($,this);var ee=g.listener,et=g.la||g.src;g.ia&&r2(g),g=ee.call(et,$)}return g}function r6(g){return(g=g[rQ])instanceof rK?g:null}var r9="__closure_events_fn_"+(1e9*Math.random()>>>0);function r5(g){return"function"==typeof g?g:(g[r9]||(g[r9]=function($){return g.handleEvent($)}),g[r9])}function r8(){ru.call(this),this.i=new rK(this),this.S=this,this.J=null}function r7(g,$){var ee,et=g.J;if(et)for(ee=[];et;et=et.J)ee.push(et);if(g=g.S,et=$.type||$,"string"==typeof $)$=new rm($,g);else if($ instanceof rm)$.target=$.target||g;else{var er=$;r$($=new rm(et,g),er)}if(er=!0,ee)for(var en=ee.length-1;0<=en;en--){var ei=$.g=ee[en];er=ne(ei,et,!0,$)&&er}if(er=ne(ei=$.g=g,et,!0,$)&&er,er=ne(ei,et,!1,$)&&er,ee)for(en=0;en<ee.length;en++)er=ne(ei=$.g=ee[en],et,!1,$)&&er}function ne(g,$,ee,et){if(!($=g.i.g[String($)]))return!0;$=$.concat();for(var er=!0,en=0;en<$.length;++en){var ei=$[en];if(ei&&!ei.fa&&ei.capture==ee){var es=ei.listener,eo=ei.la||ei.src;ei.ia&&rW(g.i,ei),er=!1!==es.call(eo,et)&&er}}return er&&!et.defaultPrevented}rl(r8,ru),r8.prototype[rF]=!0,r8.prototype.removeEventListener=function(g,$,ee,et){r1(this,g,$,ee,et)},r8.prototype.N=function(){if(r8.$.N.call(this),this.i){var g,$=this.i;for(g in $.g){for(var ee=$.g[g],et=0;et<ee.length;et++)rU(ee[et]);delete $.g[g],$.h--}}this.J=null},r8.prototype.O=function(g,$,ee,et){return this.i.add(String(g),$,!1,ee,et)},r8.prototype.P=function(g,$,ee,et){return this.i.add(String(g),$,!0,ee,et)};var nt=t9.JSON.stringify;class nn{constructor(g,$){this.i=g,this.j=$,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ni(){var g=ny;let $=null;return g.g&&($=g.g,g.g=g.g.next,g.g||(g.h=null),$.next=null),$}class no{constructor(){this.h=this.g=null}add(g,$){let ee=nu.get();ee.set(g,$),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var nu=new nn(()=>new nh,g=>g.reset());class nh{constructor(){this.next=this.g=this.h=null}set(g,$){this.h=g,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}function np(g){var $=1;g=g.split(":");let ee=[];for(;0<$&&g.length;)ee.push(g.shift()),$--;return g.length&&ee.push(g.join(":")),ee}function nf(g){t9.setTimeout(()=>{throw g},0)}let ng,nm=!1,ny=new no,nv=()=>{let g=t9.Promise.resolve(void 0);ng=()=>{g.then(nS)}};var nS=()=>{for(var g;g=ni();){try{g.h.call(g.g)}catch(g){nf(g)}var $=nu;$.j(g),100>$.h&&($.h++,g.next=$.g,$.g=g)}nm=!1};function nT(g,$){r8.call(this),this.h=g||1,this.g=$||t9,this.j=rs(this.qb,this),this.l=Date.now()}function nE(g){g.ga=!1,g.T&&(g.g.clearTimeout(g.T),g.T=null)}function nw(g,$,ee){if("function"==typeof g)ee&&(g=rs(g,ee));else if(g&&"function"==typeof g.handleEvent)g=rs(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:t9.setTimeout(g,$||0)}function nC(g){g.g=nw(()=>{g.g=null,g.i&&(g.i=!1,nC(g))},g.j);let $=g.h;g.h=null,g.m.apply(null,$)}rl(nT,r8),(t0=nT.prototype).ga=!1,t0.T=null,t0.qb=function(){if(this.ga){var g=Date.now()-this.l;0<g&&g<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-g):(this.T&&(this.g.clearTimeout(this.T),this.T=null),r7(this,"tick"),this.ga&&(nE(this),this.start()))}},t0.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},t0.N=function(){nT.$.N.call(this),nE(this),delete this.g};class n_ extends ru{constructor(g,$){super(),this.m=g,this.j=$,this.h=null,this.i=!1,this.g=null}l(g){this.h=arguments,this.g?this.i=!0:nC(this)}N(){super.N(),this.g&&(t9.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nI(g){ru.call(this),this.h=g,this.g={}}rl(nI,ru);var nO=[];function nA(g,$,ee,et){Array.isArray(ee)||(ee&&(nO[0]=ee.toString()),ee=nO);for(var er=0;er<ee.length;er++){var en=rJ($,ee[er],et||g.handleEvent,!1,g.h||g);if(!en)break;g.g[en.key]=en}}function nN(g){rV(g.g,function(g,$){this.g.hasOwnProperty($)&&r2(g)},g),g.g={}}function nD(){this.g=!0}function nR(g,$,ee,et,er,en){g.info(function(){if(g.g){if(en)for(var ei="",es=en.split("&"),eo=0;eo<es.length;eo++){var eu=es[eo].split("=");if(1<eu.length){var eh=eu[0];eu=eu[1];var ep=eh.split("_");ei=2<=ep.length&&"type"==ep[1]?ei+(eh+"=")+eu+"&":ei+(eh+"=redacted&")}}else ei=null}else ei=en;return"XMLHTTP REQ ("+et+") [attempt "+er+"]: "+$+"\n"+ee+"\n"+ei})}function nk(g,$,ee,et,er,en,ei){g.info(function(){return"XMLHTTP RESP ("+et+") [ attempt "+er+"]: "+$+"\n"+ee+"\n"+en+" "+ei})}function nx(g,$,ee,et){g.info(function(){return"XMLHTTP TEXT ("+$+"): "+nM(g,ee)+(et?" "+et:"")})}function nP(g,$){g.info(function(){return"TIMEOUT: "+$})}function nM(g,$){if(!g.g)return $;if(!$)return null;try{var ee=JSON.parse($);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var et=ee[g];if(!(2>et.length)){var er=et[1];if(Array.isArray(er)&&!(1>er.length)){var en=er[0];if("noop"!=en&&"stop"!=en&&"close"!=en)for(var ei=1;ei<er.length;ei++)er[ei]=""}}}}return nt(ee)}catch(g){return $}}nI.prototype.N=function(){nI.$.N.call(this),nN(this)},nI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nD.prototype.Ea=function(){this.g=!1},nD.prototype.info=function(){};var nL={},nF=null;function nB(){return nF=nF||new r8}function nj(g){rm.call(this,nL.Ta,g)}function nU(g){let $=nB();r7($,new nj($))}function nV(g,$){rm.call(this,nL.STAT_EVENT,g),this.stat=$}function nq(g){let $=nB();r7($,new nV($,g))}function nz(g,$){rm.call(this,nL.Ua,g),this.size=$}function nG(g,$){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return t9.setTimeout(function(){g()},$)}nL.Ta="serverreachability",rl(nj,rm),nL.STAT_EVENT="statevent",rl(nV,rm),nL.Ua="timingevent",rl(nz,rm);var n$={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nK={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function nW(){}function nH(g){return g.h||(g.h=g.i())}function nQ(){}nW.prototype.h=null;var nY={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nJ(){rm.call(this,"d")}function nX(){rm.call(this,"c")}function nZ(){}function n0(g,$,ee,et){this.l=g,this.j=$,this.m=ee,this.W=et||1,this.U=new nI(this),this.P=n4,g=rO?125:void 0,this.V=new nT(g),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new n3}function n3(){this.i=null,this.g="",this.h=!1}rl(nJ,rm),rl(nX,rm),rl(nZ,nW),nZ.prototype.g=function(){return new XMLHttpRequest},nZ.prototype.i=function(){return{}},es=new nZ;var n4=45e3,n6={},n9={};function n5(g,$,ee){g.L=1,g.v=iI(iT($)),g.s=ee,g.S=!0,n8(g,null)}function n8(g,$){g.G=Date.now(),ii(g),g.A=iT(g.v);var ee=g.A,et=g.W;Array.isArray(et)||(et=[String(et)]),ij(ee.i,"t",et),g.C=0,ee=g.l.J,g.h=new n3,g.g=sB(g.l,ee?$:null,!g.s),0<g.O&&(g.M=new n_(rs(g.Pa,g,g.g),g.O)),nA(g.U,g.g,"readystatechange",g.nb),$=g.I?rz(g.I):{},g.s?(g.u||(g.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",g.g.ha(g.A,g.u,g.s,$)):(g.u="GET",g.g.ha(g.A,g.u,null,$)),nU(),nR(g.j,g.u,g.A,g.m,g.W,g.s)}function n7(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.l.Ha}function ie(g,$,ee){let et=!0,er;for(;!g.J&&g.C<ee.length;)if((er=ir(g,ee))==n9){4==$&&(g.o=4,nq(14),et=!1),nx(g.j,g.m,null,"[Incomplete Response]");break}else if(er==n6){g.o=4,nq(15),nx(g.j,g.m,ee,"[Invalid Chunk]"),et=!1;break}else nx(g.j,g.m,er,null),ih(g,er);n7(g)&&er!=n9&&er!=n6&&(g.h.g="",g.C=0),4!=$||0!=ee.length||g.h.h||(g.o=1,nq(16),et=!1),g.i=g.i&&et,et?0<ee.length&&!g.ba&&(g.ba=!0,($=g.l).g==g&&$.ca&&!$.M&&($.l.info("Great, no buffering proxy detected. Bytes received: "+ee.length),sD($),$.M=!0,nq(11))):(nx(g.j,g.m,ee,"[Invalid Chunked Response]"),iu(g),il(g))}function ir(g,$){var ee=g.C,et=$.indexOf("\n",ee);return -1==et?n9:isNaN(ee=Number($.substring(ee,et)))?n6:(et+=1)+ee>$.length?n9:($=$.slice(et,et+ee),g.C=et+ee,$)}function ii(g){g.Y=Date.now()+g.P,is(g,g.P)}function is(g,$){if(null!=g.B)throw Error("WatchDog timer not null");g.B=nG(rs(g.lb,g),$)}function io(g){g.B&&(t9.clearTimeout(g.B),g.B=null)}function il(g){0==g.l.H||g.J||sx(g.l,g)}function iu(g){io(g);var $=g.M;$&&"function"==typeof $.sa&&$.sa(),g.M=null,nE(g.V),nN(g.U),g.g&&($=g.g,g.g=null,$.abort(),$.sa())}function ih(g,$){try{var ee=g.l;if(0!=ee.H&&(ee.g==g||iW(ee.i,g))){if(!g.K&&iW(ee.i,g)&&3==ee.H){try{var et=ee.Ja.g.parse($)}catch(g){et=null}if(Array.isArray(et)&&3==et.length){var er=et;if(0==er[0]){e:if(!ee.u){if(ee.g){if(ee.g.G+3e3<g.G)sk(ee),sT(ee);else break e}sN(ee),nq(18)}}else ee.Fa=er[1],0<ee.Fa-ee.V&&37500>er[2]&&ee.G&&0==ee.A&&!ee.v&&(ee.v=nG(rs(ee.ib,ee),6e3));if(1>=iK(ee.i)&&ee.oa){try{ee.oa()}catch(g){}ee.oa=void 0}}else sM(ee,11)}else if((g.K||ee.g==g)&&sk(ee),!rv($))for(er=ee.Ja.g.parse($),$=0;$<er.length;$++){let eu=er[$];if(ee.V=eu[0],eu=eu[1],2==ee.H){if("c"==eu[0]){ee.K=eu[1],ee.pa=eu[2];let $=eu[3];null!=$&&(ee.ra=$,ee.l.info("VER="+ee.ra));let er=eu[4];null!=er&&(ee.Ga=er,ee.l.info("SVER="+ee.Ga));let eh=eu[5];null!=eh&&"number"==typeof eh&&0<eh&&(et=1.5*eh,ee.L=et,ee.l.info("backChannelRequestTimeoutMs_="+et)),et=ee;let ep=g.g;if(ep){let g=ep.g?ep.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var en=et.i;en.g||-1==g.indexOf("spdy")&&-1==g.indexOf("quic")&&-1==g.indexOf("h2")||(en.j=en.l,en.g=new Set,en.h&&(iH(en,en.h),en.h=null))}if(et.F){let g=ep.g?ep.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(et.Da=g,i_(et.I,et.F,g))}}ee.H=3,ee.h&&ee.h.Ba(),ee.ca&&(ee.S=Date.now()-g.G,ee.l.info("Handshake RTT: "+ee.S+"ms")),et=ee;var ei=g;if(et.wa=sF(et,et.J?et.pa:null,et.Y),ei.K){iQ(et.i,ei);var es=ei,eo=et.L;eo&&es.setTimeout(eo),es.B&&(io(es),ii(es)),et.g=ei}else sA(et);0<ee.j.length&&sw(ee)}else"stop"!=eu[0]&&"close"!=eu[0]||sM(ee,7)}else 3==ee.H&&("stop"==eu[0]||"close"==eu[0]?"stop"==eu[0]?sM(ee,7):sS(ee):"noop"!=eu[0]&&ee.h&&ee.h.Aa(eu),ee.A=0)}}nU(4)}catch(g){}}function ip(g){if(g.Z&&"function"==typeof g.Z)return g.Z();if("undefined"!=typeof Map&&g instanceof Map||"undefined"!=typeof Set&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(t5(g)){for(var $=[],ee=g.length,et=0;et<ee;et++)$.push(g[et]);return $}for(et in $=[],ee=0,g)$[ee++]=g[et];return $}function ig(g){if(g.ta&&"function"==typeof g.ta)return g.ta();if(!g.Z||"function"!=typeof g.Z){if("undefined"!=typeof Map&&g instanceof Map)return Array.from(g.keys());if(!("undefined"!=typeof Set&&g instanceof Set)){if(t5(g)||"string"==typeof g){var $=[];g=g.length;for(var ee=0;ee<g;ee++)$.push(ee);return $}for(let et in $=[],ee=0,g)$[ee++]=et;return $}}}function im(g,$){if(g.forEach&&"function"==typeof g.forEach)g.forEach($,void 0);else if(t5(g)||"string"==typeof g)Array.prototype.forEach.call(g,$,void 0);else for(var ee=ig(g),et=ip(g),er=et.length,en=0;en<er;en++)$.call(void 0,et[en],ee&&ee[en],g)}(t0=n0.prototype).setTimeout=function(g){this.P=g},t0.nb=function(g){g=g.target;let $=this.M;$&&3==sh(g)?$.l():this.Pa(g)},t0.Pa=function(g){try{if(g==this.g)e:{let eh=sh(this.g);var $=this.g.Ia();let ep=this.g.da();if(!(3>eh)&&(3!=eh||rO||this.g&&(this.h.h||this.g.ja()||sp(this.g)))){this.J||4!=eh||7==$||(8==$||0>=ep?nU(3):nU(2)),io(this);var ee=this.g.da();this.ca=ee;t:if(n7(this)){var et=sp(this.g);g="";var er=et.length,en=4==sh(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){iu(this),il(this);var ei="";break t}this.h.i=new t9.TextDecoder}for($=0;$<er;$++)this.h.h=!0,g+=this.h.i.decode(et[$],{stream:en&&$==er-1});et.splice(0,er),this.h.g+=g,this.C=0,ei=this.h.g}else ei=this.g.ja();if(this.i=200==ee,nk(this.j,this.u,this.A,this.m,this.W,eh,ee),this.i){if(this.aa&&!this.K){t:{if(this.g){var es,eo=this.g;if((es=eo.g?eo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rv(es)){var eu=es;break t}}eu=null}if(ee=eu)nx(this.j,this.m,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ih(this,ee);else{this.i=!1,this.o=3,nq(12),iu(this),il(this);break e}}this.S?(ie(this,eh,ei),rO&&this.i&&3==eh&&(nA(this.U,this.V,"tick",this.mb),this.V.start())):(nx(this.j,this.m,ei,null),ih(this,ei)),4==eh&&iu(this),this.i&&!this.J&&(4==eh?sx(this.l,this):(this.i=!1,ii(this)))}else sf(this.g),400==ee&&0<ei.indexOf("Unknown SID")?(this.o=3,nq(12)):(this.o=0,nq(13)),iu(this),il(this)}}}catch(g){}finally{}},t0.mb=function(){if(this.g){var g=sh(this.g),$=this.g.ja();this.C<$.length&&(io(this),ie(this,g,$),this.i&&4!=g&&ii(this))}},t0.cancel=function(){this.J=!0,iu(this)},t0.lb=function(){this.B=null;let g=Date.now();0<=g-this.Y?(nP(this.j,this.A),2!=this.L&&(nU(),nq(17)),iu(this),this.o=2,il(this)):is(this,this.Y-g)};var iy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iv(g,$){if(g){g=g.split("&");for(var ee=0;ee<g.length;ee++){var et=g[ee].indexOf("="),er=null;if(0<=et){var en=g[ee].substring(0,et);er=g[ee].substring(et+1)}else en=g[ee];$(en,er?decodeURIComponent(er.replace(/\+/g," ")):"")}}}function iS(g){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,g instanceof iS){this.h=g.h,iE(this,g.j),this.s=g.s,this.g=g.g,iw(this,g.m),this.l=g.l;var $=g.i,ee=new iM;ee.i=$.i,$.g&&(ee.g=new Map($.g),ee.h=$.h),iC(this,ee),this.o=g.o}else g&&($=String(g).match(iy))?(this.h=!1,iE(this,$[1]||"",!0),this.s=iO($[2]||""),this.g=iO($[3]||"",!0),iw(this,$[4]),this.l=iO($[5]||"",!0),iC(this,$[6]||"",!0),this.o=iO($[7]||"")):(this.h=!1,this.i=new iM(null,this.h))}function iT(g){return new iS(g)}function iE(g,$,ee){g.j=ee?iO($,!0):$,g.j&&(g.j=g.j.replace(/:$/,""))}function iw(g,$){if($){if(isNaN($=Number($))||0>$)throw Error("Bad port number "+$);g.m=$}else g.m=null}function iC(g,$,ee){$ instanceof iM?(g.i=$,iV(g.i,g.h)):(ee||($=iA($,ix)),g.i=new iM($,g.h))}function i_(g,$,ee){g.i.set($,ee)}function iI(g){return i_(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function iO(g,$){return g?$?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function iA(g,$,ee){return"string"==typeof g?(g=encodeURI(g).replace($,iN),ee&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function iN(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}iS.prototype.toString=function(){var g=[],$=this.j;$&&g.push(iA($,iD,!0),":");var ee=this.g;return(ee||"file"==$)&&(g.push("//"),($=this.s)&&g.push(iA($,iD,!0),"@"),g.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.m)&&g.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&g.push("/"),g.push(iA(ee,"/"==ee.charAt(0)?ik:iR,!0))),(ee=this.i.toString())&&g.push("?",ee),(ee=this.o)&&g.push("#",iA(ee,iP)),g.join("")};var iD=/[#\/\?@]/g,iR=/[#\?:]/g,ik=/[#\?]/g,ix=/[#\?@]/g,iP=/#/g;function iM(g,$){this.h=this.g=null,this.i=g||null,this.j=!!$}function iL(g){g.g||(g.g=new Map,g.h=0,g.i&&iv(g.i,function($,ee){g.add(decodeURIComponent($.replace(/\+/g," ")),ee)}))}function iF(g,$){iL(g),$=iU(g,$),g.g.has($)&&(g.i=null,g.h-=g.g.get($).length,g.g.delete($))}function iB(g,$){return iL(g),$=iU(g,$),g.g.has($)}function ij(g,$,ee){iF(g,$),0<ee.length&&(g.i=null,g.g.set(iU(g,$),rf(ee)),g.h+=ee.length)}function iU(g,$){return $=String($),g.j&&($=$.toLowerCase()),$}function iV(g,$){$&&!g.j&&(iL(g),g.i=null,g.g.forEach(function(g,$){var ee=$.toLowerCase();$!=ee&&(iF(this,$),ij(this,ee,g))},g)),g.j=$}(t0=iM.prototype).add=function(g,$){iL(this),this.i=null,g=iU(this,g);var ee=this.g.get(g);return ee||this.g.set(g,ee=[]),ee.push($),this.h+=1,this},t0.forEach=function(g,$){iL(this),this.g.forEach(function(ee,et){ee.forEach(function(ee){g.call($,ee,et,this)},this)},this)},t0.ta=function(){iL(this);let g=Array.from(this.g.values()),$=Array.from(this.g.keys()),ee=[];for(let et=0;et<$.length;et++){let er=g[et];for(let g=0;g<er.length;g++)ee.push($[et])}return ee},t0.Z=function(g){iL(this);let $=[];if("string"==typeof g)iB(this,g)&&($=$.concat(this.g.get(iU(this,g))));else{g=Array.from(this.g.values());for(let ee=0;ee<g.length;ee++)$=$.concat(g[ee])}return $},t0.set=function(g,$){return iL(this),this.i=null,iB(this,g=iU(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[$]),this.h+=1,this},t0.get=function(g,$){return g&&0<(g=this.Z(g)).length?String(g[0]):$},t0.toString=function(){if(this.i)return this.i;if(!this.g)return"";let g=[],$=Array.from(this.g.keys());for(var ee=0;ee<$.length;ee++){var et=$[ee];let en=encodeURIComponent(String(et)),ei=this.Z(et);for(et=0;et<ei.length;et++){var er=en;""!==ei[et]&&(er+="="+encodeURIComponent(String(ei[et]))),g.push(er)}}return this.i=g.join("&")};var iq=class{constructor(g,$){this.g=g,this.map=$}};function iz(g){this.l=g||iG,g=t9.PerformanceNavigationTiming?0<(g=t9.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(t9.g&&t9.g.Ka&&t9.g.Ka()&&t9.g.Ka().ec),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var iG=10;function i$(g){return!!g.h||!!g.g&&g.g.size>=g.j}function iK(g){return g.h?1:g.g?g.g.size:0}function iW(g,$){return g.h?g.h==$:!!g.g&&g.g.has($)}function iH(g,$){g.g?g.g.add($):g.h=$}function iQ(g,$){g.h&&g.h==$?g.h=null:g.g&&g.g.has($)&&g.g.delete($)}function iY(g){if(null!=g.h)return g.i.concat(g.h.F);if(null!=g.g&&0!==g.g.size){let $=g.i;for(let ee of g.g.values())$=$.concat(ee.F);return $}return rf(g.i)}iz.prototype.cancel=function(){if(this.i=iY(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let g of this.g.values())g.cancel();this.g.clear()}};var iJ=class{stringify(g){return t9.JSON.stringify(g,void 0)}parse(g){return t9.JSON.parse(g,void 0)}};function iX(){this.g=new iJ}function iZ(g,$,ee){let et=ee||"";try{im(g,function(g,ee){let er=g;t8(g)&&(er=nt(g)),$.push(et+ee+"="+encodeURIComponent(er))})}catch(g){throw $.push(et+"type="+encodeURIComponent("_badmap")),g}}function i0(g,$){let ee=new nD;if(t9.Image){let et=new Image;et.onload=ro(i1,ee,et,"TestLoadImage: loaded",!0,$),et.onerror=ro(i1,ee,et,"TestLoadImage: error",!1,$),et.onabort=ro(i1,ee,et,"TestLoadImage: abort",!1,$),et.ontimeout=ro(i1,ee,et,"TestLoadImage: timeout",!1,$),t9.setTimeout(function(){et.ontimeout&&et.ontimeout()},1e4),et.src=g}else $(!1)}function i1(g,$,ee,et,er){try{$.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null,er(et)}catch(g){}}function i2(g){this.l=g.fc||null,this.j=g.ob||!1}function i3(g,$){r8.call(this),this.F=g,this.u=$,this.m=void 0,this.readyState=i4,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rl(i2,nW),i2.prototype.g=function(){return new i3(this.l,this.j)},i2.prototype.i=function(g){return function(){return g}}({}),rl(i3,r8);var i4=0;function i6(g){g.j.read().then(g.Xa.bind(g)).catch(g.ka.bind(g))}function i9(g){g.readyState=4,g.l=null,g.j=null,g.A=null,i5(g)}function i5(g){g.onreadystatechange&&g.onreadystatechange.call(g)}(t0=i3.prototype).open=function(g,$){if(this.readyState!=i4)throw this.abort(),Error("Error reopening a connection");this.C=g,this.B=$,this.readyState=1,i5(this)},t0.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let $={headers:this.v,method:this.C,credentials:this.m,cache:void 0};g&&($.body=g),(this.F||t9).fetch(new Request(this.B,$)).then(this.$a.bind(this),this.ka.bind(this))},t0.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,i9(this)),this.readyState=i4},t0.$a=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,i5(this)),this.g&&(this.readyState=3,i5(this),this.g))){if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==t9.ReadableStream&&"body"in g){if(this.j=g.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;i6(this)}else g.text().then(this.Za.bind(this),this.ka.bind(this))}},t0.Xa=function(g){if(this.g){if(this.u&&g.value)this.response.push(g.value);else if(!this.u){var $=g.value?g.value:new Uint8Array(0);($=this.A.decode($,{stream:!g.done}))&&(this.response=this.responseText+=$)}g.done?i9(this):i5(this),3==this.readyState&&i6(this)}},t0.Za=function(g){this.g&&(this.response=this.responseText=g,i9(this))},t0.Ya=function(g){this.g&&(this.response=g,i9(this))},t0.ka=function(){this.g&&i9(this)},t0.setRequestHeader=function(g,$){this.v.append(g,$)},t0.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t0.getAllResponseHeaders=function(){if(!this.h)return"";let g=[],$=this.h.entries();for(var ee=$.next();!ee.done;)g.push((ee=ee.value)[0]+": "+ee[1]),ee=$.next();return g.join("\r\n")},Object.defineProperty(i3.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}});var i8=t9.JSON.parse;function i7(g){r8.call(this),this.headers=new Map,this.u=g||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=se,this.L=this.M=!1}rl(i7,r8);var se="",st=/^https?$/i,sr=["POST","PUT"];function sn(g){return r_&&"number"==typeof g.timeout&&void 0!==g.ontimeout}function si(g,$){g.h=!1,g.g&&(g.l=!0,g.g.abort(),g.l=!1),g.j=$,g.m=5,ss(g),sl(g)}function ss(g){g.F||(g.F=!0,r7(g,"complete"),r7(g,"error"))}function so(g){if(g.h&&void 0!==t6&&(!g.C[1]||4!=sh(g)||2!=g.da())){if(g.v&&4==sh(g))nw(g.La,0,g);else if(r7(g,"readystatechange"),4==sh(g)){g.h=!1;try{let ei=g.da();switch(ei){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $,ee,et=!0;break;default:et=!1}if(!($=et)){if(ee=0===ei){var er=String(g.I).match(iy)[1]||null;!er&&t9.self&&t9.self.location&&(er=t9.self.location.protocol.slice(0,-1)),ee=!st.test(er?er.toLowerCase():"")}$=ee}if($)r7(g,"complete"),r7(g,"success");else{g.m=6;try{var en=2<sh(g)?g.g.statusText:""}catch(g){en=""}g.j=en+" ["+g.da()+"]",ss(g)}}finally{sl(g)}}}}function sl(g,$){if(g.g){su(g);let ee=g.g,et=g.C[0]?()=>{}:null;g.g=null,g.C=null,$||r7(g,"ready");try{ee.onreadystatechange=et}catch(g){}}}function su(g){g.g&&g.L&&(g.g.ontimeout=null),g.A&&(t9.clearTimeout(g.A),g.A=null)}function sh(g){return g.g?g.g.readyState:0}function sp(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.K){case se:case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch(g){return null}}function sf(g){let $={};g=(g.g&&2<=sh(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let et=0;et<g.length;et++){if(rv(g[et]))continue;var ee=np(g[et]);let er=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();let en=$[er]||[];$[er]=en,en.push(ee)}rq($,function(g){return g.join(", ")})}function sg(g){let $="";return rV(g,function(g,ee){$+=ee+":"+g+"\r\n"}),$}function sm(g,$,ee){e:{for(et in ee){var et=!1;break e}et=!0}et||(ee=sg(ee),"string"==typeof g?null!=ee&&encodeURIComponent(String(ee)):i_(g,$,ee))}function sy(g,$,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[g]||$}function sv(g){this.Ga=0,this.j=[],this.l=new nD,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sy("failFast",!1,g),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sy("baseRetryDelayMs",5e3,g),this.hb=sy("retryDelaySeedMs",1e4,g),this.eb=sy("forwardChannelMaxRetries",2,g),this.xa=sy("forwardChannelRequestTimeoutMs",2e4,g),this.va=g&&g.xmlHttpFactory||void 0,this.Ha=g&&g.dc||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.i=new iz(g&&g.concurrentRequestLimit),this.Ja=new iX,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=g&&g.bc||!1,g&&g.Ea&&this.l.Ea(),g&&g.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&g&&g.detectBufferingProxy||!1,this.qa=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.qa=g.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sS(g){if(sE(g),3==g.H){var $=g.W++,ee=iT(g.I);if(i_(ee,"SID",g.K),i_(ee,"RID",$),i_(ee,"TYPE","terminate"),sI(g,ee),($=new n0(g,g.l,$)).L=2,$.v=iI(iT(ee)),ee=!1,t9.navigator&&t9.navigator.sendBeacon)try{ee=t9.navigator.sendBeacon($.v.toString(),"")}catch(g){}!ee&&t9.Image&&((new Image).src=$.v,ee=!0),ee||($.g=sB($.l,null),$.g.ha($.v)),$.G=Date.now(),ii($)}sL(g)}function sT(g){g.g&&(sD(g),g.g.cancel(),g.g=null)}function sE(g){sT(g),g.u&&(t9.clearTimeout(g.u),g.u=null),sk(g),g.i.cancel(),g.m&&("number"==typeof g.m&&t9.clearTimeout(g.m),g.m=null)}function sw(g){if(!i$(g.i)&&!g.m){g.m=!0;var $=g.Na;ng||nv(),nm||(ng(),nm=!0),ny.add($,g),g.C=0}}function sC(g,$){return!(iK(g.i)>=g.i.j-(g.m?1:0))&&(g.m?(g.j=$.F.concat(g.j),!0):1!=g.H&&2!=g.H&&!(g.C>=(g.cb?0:g.eb))&&(g.m=nG(rs(g.Na,g,$),sP(g,g.C)),g.C++,!0))}function s_(g,$){var ee;ee=$?$.m:g.W++;let et=iT(g.I);i_(et,"SID",g.K),i_(et,"RID",ee),i_(et,"AID",g.V),sI(g,et),g.o&&g.s&&sm(et,g.o,g.s),ee=new n0(g,g.l,ee,g.C+1),null===g.o&&(ee.I=g.s),$&&(g.j=$.F.concat(g.j)),$=sO(g,ee,1e3),ee.setTimeout(Math.round(.5*g.xa)+Math.round(.5*g.xa*Math.random())),iH(g.i,ee),n5(ee,et,$)}function sI(g,$){g.na&&rV(g.na,function(g,ee){i_($,ee,g)}),g.h&&im({},function(g,ee){i_($,ee,g)})}function sO(g,$,ee){ee=Math.min(g.j.length,ee);var et=g.h?rs(g.h.Va,g.h,g):null;e:{var er=g.j;let $=-1;for(;;){let g=["count="+ee];-1==$?0<ee?($=er[0].g,g.push("ofs="+$)):$=0:g.push("ofs="+$);let en=!0;for(let ei=0;ei<ee;ei++){let ee=er[ei].g,es=er[ei].map;if(0>(ee-=$))$=Math.max(0,er[ei].g-100),en=!1;else try{iZ(es,g,"req"+ee+"_")}catch(g){et&&et(es)}}if(en){et=g.join("&");break e}}}return g=g.j.splice(0,ee),$.F=g,et}function sA(g){if(!g.g&&!g.u){g.ba=1;var $=g.Ma;ng||nv(),nm||(ng(),nm=!0),ny.add($,g),g.A=0}}function sN(g){return!g.g&&!g.u&&!(3<=g.A)&&(g.ba++,g.u=nG(rs(g.Ma,g),sP(g,g.A)),g.A++,!0)}function sD(g){null!=g.B&&(t9.clearTimeout(g.B),g.B=null)}function sR(g){g.g=new n0(g,g.l,"rpc",g.ba),null===g.o&&(g.g.I=g.s),g.g.O=0;var $=iT(g.wa);i_($,"RID","rpc"),i_($,"SID",g.K),i_($,"AID",g.V),i_($,"CI",g.G?"0":"1"),!g.G&&g.qa&&i_($,"TO",g.qa),i_($,"TYPE","xmlhttp"),sI(g,$),g.o&&g.s&&sm($,g.o,g.s),g.L&&g.g.setTimeout(g.L);var ee=g.g;g=g.pa,ee.L=1,ee.v=iI(iT($)),ee.s=null,ee.S=!0,n8(ee,g)}function sk(g){null!=g.v&&(t9.clearTimeout(g.v),g.v=null)}function sx(g,$){var ee=null;if(g.g==$){sk(g),sD(g),g.g=null;var et=2}else{if(!iW(g.i,$))return;ee=$.F,iQ(g.i,$),et=1}if(0!=g.H){if($.i){if(1==et){ee=$.s?$.s.length:0,$=Date.now()-$.G;var er=g.C;r7(et=nB(),new nz(et,ee)),sw(g)}else sA(g)}else if(3==(er=$.o)||0==er&&0<$.ca||!(1==et&&sC(g,$)||2==et&&sN(g)))switch(ee&&0<ee.length&&(($=g.i).i=$.i.concat(ee)),er){case 1:sM(g,5);break;case 4:sM(g,10);break;case 3:sM(g,6);break;default:sM(g,2)}}}function sP(g,$){let ee=g.ab+Math.floor(Math.random()*g.hb);return g.isActive()||(ee*=2),ee*$}function sM(g,$){if(g.l.info("Error code "+$),2==$){var ee=null;g.h&&(ee=null);var et=rs(g.pb,g);ee||(ee=new iS("//www.google.com/images/cleardot.gif"),t9.location&&"http"==t9.location.protocol||iE(ee,"https"),iI(ee)),i0(ee.toString(),et)}else nq(2);g.H=0,g.h&&g.h.za($),sL(g),sE(g)}function sL(g){if(g.H=0,g.ma=[],g.h){let $=iY(g.i);(0!=$.length||0!=g.j.length)&&(rg(g.ma,$),rg(g.ma,g.j),g.i.i.length=0,rf(g.j),g.j.length=0),g.h.ya()}}function sF(g,$,ee){var et=ee instanceof iS?iT(ee):new iS(ee);if(""!=et.g)$&&(et.g=$+"."+et.g),iw(et,et.m);else{var er=t9.location;et=er.protocol,$=$?$+"."+er.hostname:er.hostname,er=+er.port;var en=new iS(null);et&&iE(en,et),$&&(en.g=$),er&&iw(en,er),ee&&(en.l=ee),et=en}return ee=g.F,$=g.Da,ee&&$&&i_(et,ee,$),i_(et,"VER",g.ra),sI(g,et),et}function sB(g,$,ee){if($&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return($=new i7(ee&&g.Ha&&!g.va?new i2({ob:!0}):g.va)).Oa(g.J),$}function sj(){}function sU(){if(r_&&!(10<=Number(rP)))throw Error("Environmental error: no available transport.")}function sV(g,$){r8.call(this),this.g=new sv($),this.l=g,this.h=$&&$.messageUrlParams||null,g=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.s=g,g=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(g?g["X-WebChannel-Content-Type"]=$.messageContentType:g={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.Ca&&(g?g["X-WebChannel-Client-Profile"]=$.Ca:g={"X-WebChannel-Client-Profile":$.Ca}),this.g.U=g,(g=$&&$.cc)&&!rv(g)&&(this.g.o=g),this.A=$&&$.supportsCrossDomainXhr||!1,this.v=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!rv($)&&(this.g.F=$,null!==(g=this.h)&&$ in g&&$ in(g=this.h)&&delete g[$]),this.j=new sG(this)}function sq(g){nJ.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var $=g.__sm__;if($){e:{for(let ee in $){g=ee;break e}g=void 0}(this.i=g)&&(g=this.i,$=null!==$&&g in $?$[g]:void 0),this.data=$}else this.data=g}function sz(){nX.call(this),this.status=1}function sG(g){this.g=g}function s$(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sK(g,$,ee){ee||(ee=0);var et=Array(16);if("string"==typeof $)for(var er=0;16>er;++er)et[er]=$.charCodeAt(ee++)|$.charCodeAt(ee++)<<8|$.charCodeAt(ee++)<<16|$.charCodeAt(ee++)<<24;else for(er=0;16>er;++er)et[er]=$[ee++]|$[ee++]<<8|$[ee++]<<16|$[ee++]<<24;$=g.g[0],ee=g.g[1],er=g.g[2];var en=g.g[3],ei=$+(en^ee&(er^en))+et[0]+3614090360&4294967295;ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[1]+3905402710&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[2]+606105819&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[3]+3250441966&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[4]+4118548399&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[5]+1200080426&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[6]+2821735955&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[7]+4249261313&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[8]+1770035416&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[9]+2336552879&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[10]+4294925233&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[11]+2304563134&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[12]+1804603682&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[13]+4254626195&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[14]+2792965006&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[15]+1236535329&4294967295,ee=er+(ei<<22&4294967295|ei>>>10),ei=$+(er^en&(ee^er))+et[1]+4129170786&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[6]+3225465664&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[11]+643717713&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[0]+3921069994&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[5]+3593408605&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[10]+38016083&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[15]+3634488961&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[4]+3889429448&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[9]+568446438&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[14]+3275163606&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[3]+4107603335&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[8]+1163531501&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[13]+2850285829&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[2]+4243563512&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[7]+1735328473&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[12]+2368359562&4294967295,ei=$+((ee=er+(ei<<20&4294967295|ei>>>12))^er^en)+et[5]+4294588738&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[8]+2272392833&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[11]+1839030562&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[14]+4259657740&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[1]+2763975236&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[4]+1272893353&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[7]+4139469664&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[10]+3200236656&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[13]+681279174&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[0]+3936430074&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[3]+3572445317&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[6]+76029189&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[9]+3654602809&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[12]+3873151461&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[15]+530742520&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[2]+3299628645&4294967295,ee=er+(ei<<23&4294967295|ei>>>9),ei=$+(er^(ee|~en))+et[0]+4096336452&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[7]+1126891415&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[14]+2878612391&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[5]+4237533241&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[12]+1700485571&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[3]+2399980690&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[10]+4293915773&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[1]+2240044497&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[8]+1873313359&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[15]+4264355552&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[6]+2734768916&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[13]+1309151649&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[4]+4149444226&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[11]+3174756917&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[2]+718787259&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[9]+3951481745&4294967295,g.g[0]=g.g[0]+$&4294967295,g.g[1]=g.g[1]+(er+(ei<<21&4294967295|ei>>>11))&4294967295,g.g[2]=g.g[2]+er&4294967295,g.g[3]=g.g[3]+en&4294967295}function sW(g,$){this.h=$;for(var ee=[],et=!0,er=g.length-1;0<=er;er--){var en=0|g[er];et&&en==$||(ee[er]=en,et=!1)}this.g=ee}(t0=i7.prototype).Oa=function(g){this.M=g},t0.ha=function(g,$,ee,et){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+g);$=$?$.toUpperCase():"GET",this.I=g,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():es.g(),this.C=this.u?nH(this.u):nH(es),this.g.onreadystatechange=rs(this.La,this);try{this.G=!0,this.g.open($,String(g),!0),this.G=!1}catch(g){si(this,g);return}if(g=ee||"",ee=new Map(this.headers),et){if(Object.getPrototypeOf(et)===Object.prototype)for(var er in et)ee.set(er,et[er]);else if("function"==typeof et.keys&&"function"==typeof et.get)for(let g of et.keys())ee.set(g,et.get(g));else throw Error("Unknown input type for opt_headers: "+String(et))}for(let[en,ei]of(et=Array.from(ee.keys()).find(g=>"content-type"==g.toLowerCase()),er=t9.FormData&&g instanceof t9.FormData,!(0<=rp(sr,$))||et||er||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),ee))this.g.setRequestHeader(en,ei);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{su(this),0<this.B&&((this.L=sn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.ua,this)):this.A=nw(this.ua,this.B,this)),this.v=!0,this.g.send(g),this.v=!1}catch(g){si(this,g)}},t0.ua=function(){void 0!==t6&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,r7(this,"timeout"),this.abort(8))},t0.abort=function(g){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=g||7,r7(this,"complete"),r7(this,"abort"),sl(this))},t0.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sl(this,!0)),i7.$.N.call(this)},t0.La=function(){this.s||(this.G||this.v||this.l?so(this):this.kb())},t0.kb=function(){so(this)},t0.isActive=function(){return!!this.g},t0.da=function(){try{return 2<sh(this)?this.g.status:-1}catch(g){return -1}},t0.ja=function(){try{return this.g?this.g.responseText:""}catch(g){return""}},t0.Wa=function(g){if(this.g){var $=this.g.responseText;return g&&0==$.indexOf(g)&&($=$.substring(g.length)),i8($)}},t0.Ia=function(){return this.m},t0.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(t0=sv.prototype).ra=8,t0.H=1,t0.Na=function(g){if(this.m){if(this.m=null,1==this.H){if(!g){this.W=Math.floor(1e5*Math.random()),g=this.W++;let er=new n0(this,this.l,g),en=this.s;if(this.U&&(en?r$(en=rz(en),this.U):en=this.U),null!==this.o||this.O||(er.I=en,en=null),this.P)e:{for(var $=0,ee=0;ee<this.j.length;ee++){t:{var et=this.j[ee];if("__data__"in et.map&&"string"==typeof(et=et.map.__data__)){et=et.length;break t}et=void 0}if(void 0===et)break;if(4096<($+=et)){$=ee;break e}if(4096===$||ee===this.j.length-1){$=ee+1;break e}}$=1e3}else $=1e3;$=sO(this,er,$),i_(ee=iT(this.I),"RID",g),i_(ee,"CVER",22),this.F&&i_(ee,"X-HTTP-Session-Id",this.F),sI(this,ee),en&&(this.O?$="headers="+encodeURIComponent(String(sg(en)))+"&"+$:this.o&&sm(ee,this.o,en)),iH(this.i,er),this.bb&&i_(ee,"TYPE","init"),this.P?(i_(ee,"$req",$),i_(ee,"SID","null"),er.aa=!0,n5(er,ee,null)):n5(er,ee,$),this.H=2}}else 3==this.H&&(g?s_(this,g):0==this.j.length||i$(this.i)||s_(this))}},t0.Ma=function(){if(this.u=null,sR(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var g=2*this.S;this.l.info("BP detection timer enabled: "+g),this.B=nG(rs(this.jb,this),g)}},t0.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nq(10),sT(this),sR(this))},t0.ib=function(){null!=this.v&&(this.v=null,sT(this),sN(this),nq(19))},t0.pb=function(g){g?(this.l.info("Successfully pinged google.com"),nq(2)):(this.l.info("Failed to ping google.com"),nq(1))},t0.isActive=function(){return!!this.h&&this.h.isActive(this)},(t0=sj.prototype).Ba=function(){},t0.Aa=function(){},t0.za=function(){},t0.ya=function(){},t0.isActive=function(){return!0},t0.Va=function(){},sU.prototype.g=function(g,$){return new sV(g,$)},rl(sV,r8),sV.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var g=this.g,$=this.l,ee=this.h||void 0;nq(0),g.Y=$,g.na=ee||{},g.G=g.aa,g.I=sF(g,null,g.Y),sw(g)},sV.prototype.close=function(){sS(this.g)},sV.prototype.u=function(g){var $=this.g;if("string"==typeof g){var ee={};ee.__data__=g,g=ee}else this.v&&((ee={}).__data__=nt(g),g=ee);$.j.push(new iq($.fb++,g)),3==$.H&&sw($)},sV.prototype.N=function(){this.g.h=null,delete this.j,sS(this.g),delete this.g,sV.$.N.call(this)},rl(sq,nJ),rl(sz,nX),rl(sG,sj),sG.prototype.Ba=function(){r7(this.g,"a")},sG.prototype.Aa=function(g){r7(this.g,new sq(g))},sG.prototype.za=function(g){r7(this.g,new sz)},sG.prototype.ya=function(){r7(this.g,"b")},rl(s$,function(){this.blockSize=-1}),s$.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},s$.prototype.j=function(g,$){void 0===$&&($=g.length);for(var ee=$-this.blockSize,et=this.m,er=this.h,en=0;en<$;){if(0==er)for(;en<=ee;)sK(this,g,en),en+=this.blockSize;if("string"==typeof g){for(;en<$;)if(et[er++]=g.charCodeAt(en++),er==this.blockSize){sK(this,et),er=0;break}}else for(;en<$;)if(et[er++]=g[en++],er==this.blockSize){sK(this,et),er=0;break}}this.h=er,this.i+=$},s$.prototype.l=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var $=1;$<g.length-8;++$)g[$]=0;var ee=8*this.i;for($=g.length-8;$<g.length;++$)g[$]=255&ee,ee/=256;for(this.j(g),g=Array(16),$=ee=0;4>$;++$)for(var et=0;32>et;et+=8)g[ee++]=this.g[$]>>>et&255;return g};var sH={};function sQ(g){return -128<=g&&128>g?rw(g,function(g){return new sW([0|g],0>g?-1:0)}):new sW([0|g],0>g?-1:0)}function sY(g){if(isNaN(g)||!isFinite(g))return sZ;if(0>g)return s4(sY(-g));for(var $=[],ee=1,et=0;g>=ee;et++)$[et]=g/ee|0,ee*=sX;return new sW($,0)}function sJ(g,$){if(0==g.length)throw Error("number format error: empty string");if(2>($=$||10)||36<$)throw Error("radix out of range: "+$);if("-"==g.charAt(0))return s4(sJ(g.substring(1),$));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var ee=sY(Math.pow($,8)),et=sZ,er=0;er<g.length;er+=8){var en=Math.min(8,g.length-er),ei=parseInt(g.substring(er,er+en),$);8>en?(en=sY(Math.pow($,en)),et=et.R(en).add(sY(ei))):et=(et=et.R(ee)).add(sY(ei))}return et}var sX=4294967296,sZ=sQ(0),s0=sQ(1),s1=sQ(16777216);function s2(g){if(0!=g.h)return!1;for(var $=0;$<g.g.length;$++)if(0!=g.g[$])return!1;return!0}function s3(g){return -1==g.h}function s4(g){for(var $=g.g.length,ee=[],et=0;et<$;et++)ee[et]=~g.g[et];return new sW(ee,~g.h).add(s0)}function s6(g,$){return g.add(s4($))}function s9(g,$){for(;(65535&g[$])!=g[$];)g[$+1]+=g[$]>>>16,g[$]&=65535,$++}function s5(g,$){this.g=g,this.h=$}function s8(g,$){if(s2($))throw Error("division by zero");if(s2(g))return new s5(sZ,sZ);if(s3(g))return $=s8(s4(g),$),new s5(s4($.g),s4($.h));if(s3($))return $=s8(g,s4($)),new s5(s4($.g),$.h);if(30<g.g.length){if(s3(g)||s3($))throw Error("slowDivide_ only works with positive integers.");for(var ee=s0,et=$;0>=et.X(g);)ee=s7(ee),et=s7(et);var er=oe(ee,1),en=oe(et,1);for(et=oe(et,2),ee=oe(ee,2);!s2(et);){var ei=en.add(et);0>=ei.X(g)&&(er=er.add(ee),en=ei),et=oe(et,1),ee=oe(ee,1)}return $=s6(g,er.R($)),new s5(er,$)}for(er=sZ;0<=g.X($);){for(et=48>=(et=Math.ceil(Math.log(ee=Math.max(1,Math.floor(g.ea()/$.ea())))/Math.LN2))?1:Math.pow(2,et-48),ei=(en=sY(ee)).R($);s3(ei)||0<ei.X(g);)ee-=et,ei=(en=sY(ee)).R($);s2(en)&&(en=s0),er=er.add(en),g=s6(g,ei)}return new s5(er,g)}function s7(g){for(var $=g.g.length+1,ee=[],et=0;et<$;et++)ee[et]=g.D(et)<<1|g.D(et-1)>>>31;return new sW(ee,g.h)}function oe(g,$){var ee=$>>5;$%=32;for(var et=g.g.length-ee,er=[],en=0;en<et;en++)er[en]=0<$?g.D(en+ee)>>>$|g.D(en+ee+1)<<32-$:g.D(en+ee);return new sW(er,g.h)}(t0=sW.prototype).ea=function(){if(s3(this))return-s4(this).ea();for(var g=0,$=1,ee=0;ee<this.g.length;ee++){var et=this.D(ee);g+=(0<=et?et:sX+et)*$,$*=sX}return g},t0.toString=function(g){if(2>(g=g||10)||36<g)throw Error("radix out of range: "+g);if(s2(this))return"0";if(s3(this))return"-"+s4(this).toString(g);for(var $=sY(Math.pow(g,6)),ee=this,et="";;){var er=s8(ee,$).g,en=((0<(ee=s6(ee,er.R($))).g.length?ee.g[0]:ee.h)>>>0).toString(g);if(s2(ee=er))return en+et;for(;6>en.length;)en="0"+en;et=en+et}},t0.D=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h},t0.X=function(g){return s3(g=s6(this,g))?-1:s2(g)?0:1},t0.abs=function(){return s3(this)?s4(this):this},t0.add=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0,er=0;er<=$;er++){var en=et+(65535&this.D(er))+(65535&g.D(er)),ei=(en>>>16)+(this.D(er)>>>16)+(g.D(er)>>>16);et=ei>>>16,en&=65535,ei&=65535,ee[er]=ei<<16|en}return new sW(ee,-2147483648&ee[ee.length-1]?-1:0)},t0.R=function(g){if(s2(this)||s2(g))return sZ;if(s3(this))return s3(g)?s4(this).R(s4(g)):s4(s4(this).R(g));if(s3(g))return s4(this.R(s4(g)));if(0>this.X(s1)&&0>g.X(s1))return sY(this.ea()*g.ea());for(var $=this.g.length+g.g.length,ee=[],et=0;et<2*$;et++)ee[et]=0;for(et=0;et<this.g.length;et++)for(var er=0;er<g.g.length;er++){var en=this.D(et)>>>16,ei=65535&this.D(et),es=g.D(er)>>>16,eo=65535&g.D(er);ee[2*et+2*er]+=ei*eo,s9(ee,2*et+2*er),ee[2*et+2*er+1]+=en*eo,s9(ee,2*et+2*er+1),ee[2*et+2*er+1]+=ei*es,s9(ee,2*et+2*er+1),ee[2*et+2*er+2]+=en*es,s9(ee,2*et+2*er+2)}for(et=0;et<$;et++)ee[et]=ee[2*et+1]<<16|ee[2*et];for(et=$;et<2*$;et++)ee[et]=0;return new sW(ee,0)},t0.gb=function(g){return s8(this,g).h},t0.and=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)&g.D(et);return new sW(ee,this.h&g.h)},t0.or=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)|g.D(et);return new sW(ee,this.h|g.h)},t0.xor=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)^g.D(et);return new sW(ee,this.h^g.h)},sU.prototype.createWebChannel=sU.prototype.g,sV.prototype.send=sV.prototype.u,sV.prototype.open=sV.prototype.m,sV.prototype.close=sV.prototype.close,n$.NO_ERROR=0,n$.TIMEOUT=8,n$.HTTP_ERROR=6,nK.COMPLETE="complete",nQ.EventType=nY,nY.OPEN="a",nY.CLOSE="b",nY.ERROR="c",nY.MESSAGE="d",r8.prototype.listen=r8.prototype.O,i7.prototype.listenOnce=i7.prototype.P,i7.prototype.getLastError=i7.prototype.Sa,i7.prototype.getLastErrorCode=i7.prototype.Ia,i7.prototype.getStatus=i7.prototype.da,i7.prototype.getResponseJson=i7.prototype.Wa,i7.prototype.getResponseText=i7.prototype.ja,i7.prototype.send=i7.prototype.ha,i7.prototype.setWithCredentials=i7.prototype.Oa,s$.prototype.digest=s$.prototype.l,s$.prototype.reset=s$.prototype.reset,s$.prototype.update=s$.prototype.j,sW.prototype.add=sW.prototype.add,sW.prototype.multiply=sW.prototype.R,sW.prototype.modulo=sW.prototype.gb,sW.prototype.compare=sW.prototype.X,sW.prototype.toNumber=sW.prototype.ea,sW.prototype.toString=sW.prototype.toString,sW.prototype.getBits=sW.prototype.D,sW.fromNumber=sY,sW.fromString=sJ,t4.createWebChannelTransport=function(){return new sU},t4.getStatEventTarget=function(){return nB()},t4.ErrorCode=n$,t4.EventType=nK,t4.Event=nL,t4.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},t4.FetchXmlHttpFactory=i2,t4.WebChannel=nQ,t4.XhrIo=i7,t4.Md5=s$;var ot=t4.Integer=sW,or=ee(22165),on=ee(58715);let oi="@firebase/firestore",oo="3.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(g){this.uid=g}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(g){return g.uid===this.uid}}ol.UNAUTHENTICATED=new ol(null),ol.GOOGLE_CREDENTIALS=new ol("google-credentials-uid"),ol.FIRST_PARTY=new ol("first-party-uid"),ol.MOCK_USER=new ol("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou="9.23.0";function oh(g){ou=g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(g){return(0,t1.inspect)(g,{depth:100})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=new eZ("@firebase/firestore");function om(){return og.logLevel}function oy(g,...$){if(og.logLevel<=tZ.DEBUG){let ee=$.map(oT);og.debug(`Firestore (${ou}): ${g}`,...ee)}}function ov(g,...$){if(og.logLevel<=tZ.ERROR){let ee=$.map(oT);og.error(`Firestore (${ou}): ${g}`,...ee)}}function oS(g,...$){if(og.logLevel<=tZ.WARN){let ee=$.map(oT);og.warn(`Firestore (${ou}): ${g}`,...ee)}}function oT(g){if("string"==typeof g)return g;try{return of(g)}catch($){return g}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(g="Unexpected state"){let $=`FIRESTORE (${ou}) INTERNAL ASSERTION FAILED: `+g;throw ov($),Error($)}function ow(g,$){g||oE()}function oC(g,$){return g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oI extends eM{constructor(g,$){super(g,$),this.code=g,this.message=$,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.promise=new Promise((g,$)=>{this.resolve=g,this.reject=$})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(g,$){this.user=$,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${g}`)}}class oN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(g,$){g.enqueueRetryable(()=>$(ol.UNAUTHENTICATED))}shutdown(){}}class oD{constructor(g){this.token=g,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(g,$){this.changeListener=$,g.enqueueRetryable(()=>$(this.token.user))}shutdown(){this.changeListener=null}}class oR{constructor(g){this.authProvider=g,this.currentUser=ol.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(g,$){let ee=this.tokenCounter,et=g=>this.tokenCounter!==ee?(ee=this.tokenCounter,$(g)):Promise.resolve(),er=new oO;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),er.resolve(),er=new oO,g.enqueueRetryable(()=>et(this.currentUser))};let en=()=>{let $=er;g.enqueueRetryable(async()=>{await $.promise,await et(this.currentUser)})},ei=g=>{oy("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.tokenListener),en()};this.authProvider.onInit(g=>ei(g)),setTimeout(()=>{if(!this.auth){let g=this.authProvider.getImmediate({optional:!0});g?ei(g):(oy("FirebaseAuthCredentialsProvider","Auth not yet detected"),er.resolve(),er=new oO)}},0),en()}getToken(){let g=this.tokenCounter,$=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken($).then($=>this.tokenCounter!==g?(oy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):$?(ow("string"==typeof $.accessToken),new oA($.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let g=this.auth&&this.auth.getUid();return ow(null===g||"string"==typeof g),new ol(g)}}class ok{constructor(g,$,ee){this.sessionIndex=g,this.iamToken=$,this.authTokenFactory=ee,this.type="FirstParty",this.user=ol.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let g=this.getAuthToken();return g&&this._headers.set("Authorization",g),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class ox{constructor(g,$,ee){this.sessionIndex=g,this.iamToken=$,this.authTokenFactory=ee}getToken(){return Promise.resolve(new ok(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(g,$){g.enqueueRetryable(()=>$(ol.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oP{constructor(g){this.value=g,this.type="AppCheck",this.headers=new Map,g&&g.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oM{constructor(g){this.appCheckProvider=g,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(g,$){let ee=g=>{null!=g.error&&oy("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);let ee=g.token!==this.latestAppCheckToken;return this.latestAppCheckToken=g.token,oy("FirebaseAppCheckTokenProvider",`Received ${ee?"new":"existing"} token.`),ee?$(g.token):Promise.resolve()};this.tokenListener=$=>{g.enqueueRetryable(()=>ee($))};let et=g=>{oy("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(g=>et(g)),setTimeout(()=>{if(!this.appCheck){let g=this.appCheckProvider.getImmediate({optional:!0});g?et(g):oy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let g=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(g).then(g=>g?(ow("string"==typeof g.token),this.latestAppCheckToken=g.token,new oP(g.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}}function oL(g){if(!g)return new oN;switch(g.type){case"firstParty":return new ox(g.sessionIndex||"0",g.iamToken||null,g.authTokenFactory||null);case"provider":return g.client;default:throw new oI(o_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(g){return(0,t2.randomBytes)(g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{static newId(){let g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",$=Math.floor(256/g.length)*g.length,ee="",et=20;for(;ee.length<et;){let er=oF(40);for(let en=0;en<er.length;++en)ee.length<et&&er[en]<$&&(ee+=g.charAt(er[en]%g.length))}return ee}}function oj(g,$){return g<$?-1:g>$?1:0}function oU(g,$,ee){return g.length===$.length&&g.every((g,et)=>ee(g,$[et]))}function oV(g){return g+"\x00"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oq=-62135596800,oz=1e6;class oG{constructor(g,$){if(this.seconds=g,this.nanoseconds=$,$<0||$>=1e9)throw new oI(o_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+$);if(g<oq||g>=253402300800)throw new oI(o_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+g)}static now(){return oG.fromMillis(Date.now())}static fromDate(g){return oG.fromMillis(g.getTime())}static fromMillis(g){let $=Math.floor(g/1e3),ee=Math.floor((g-1e3*$)*oz);return new oG($,ee)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oz}_compareTo(g){return this.seconds===g.seconds?oj(this.nanoseconds,g.nanoseconds):oj(this.seconds,g.seconds)}isEqual(g){return g.seconds===this.seconds&&g.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-oq).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(g){this.timestamp=g}static fromTimestamp(g){return new o$(g)}static min(){return new o$(new oG(0,0))}static max(){return new o$(new oG(253402300799,1e9-1))}compareTo(g){return this.timestamp._compareTo(g.timestamp)}isEqual(g){return this.timestamp.isEqual(g.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oK="__name__";class oW{constructor(g,$,ee){void 0===$?$=0:$>g.length&&oE(),void 0===ee?ee=g.length-$:ee>g.length-$&&oE(),this.segments=g,this.offset=$,this.len=ee}get length(){return this.len}isEqual(g){return 0===oW.comparator(this,g)}child(g){let $=this.segments.slice(this.offset,this.limit());return g instanceof oW?g.forEach(g=>{$.push(g)}):$.push(g),this.construct($)}limit(){return this.offset+this.length}popFirst(g){return g=void 0===g?1:g,this.construct(this.segments,this.offset+g,this.length-g)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(g){return this.segments[this.offset+g]}isEmpty(){return 0===this.length}isPrefixOf(g){if(g.length<this.length)return!1;for(let $=0;$<this.length;$++)if(this.get($)!==g.get($))return!1;return!0}isImmediateParentOf(g){if(this.length+1!==g.length)return!1;for(let $=0;$<this.length;$++)if(this.get($)!==g.get($))return!1;return!0}forEach(g){for(let $=this.offset,ee=this.limit();$<ee;$++)g(this.segments[$])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(g,$){let ee=Math.min(g.length,$.length);for(let et=0;et<ee;et++){let ee=g.get(et),er=$.get(et);if(ee<er)return -1;if(ee>er)return 1}return g.length<$.length?-1:g.length>$.length?1:0}}class oH extends oW{construct(g,$,ee){return new oH(g,$,ee)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...g){let $=[];for(let ee of g){if(ee.indexOf("//")>=0)throw new oI(o_.INVALID_ARGUMENT,`Invalid segment (${ee}). Paths must not contain // in them.`);$.push(...ee.split("/").filter(g=>g.length>0))}return new oH($)}static emptyPath(){return new oH([])}}let oQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oY extends oW{construct(g,$,ee){return new oY(g,$,ee)}static isValidIdentifier(g){return oQ.test(g)}canonicalString(){return this.toArray().map(g=>(g=g.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oY.isValidIdentifier(g)||(g="`"+g+"`"),g)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===oK}static keyField(){return new oY([oK])}static fromServerFormat(g){let $=[],ee="",et=0,er=()=>{if(0===ee.length)throw new oI(o_.INVALID_ARGUMENT,`Invalid field path (${g}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);$.push(ee),ee=""},en=!1;for(;et<g.length;){let $=g[et];if("\\"===$){if(et+1===g.length)throw new oI(o_.INVALID_ARGUMENT,"Path has trailing escape character: "+g);let $=g[et+1];if(!("\\"===$||"."===$||"`"===$))throw new oI(o_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+g);ee+=$,et+=2}else"`"===$?en=!en:"."!==$||en?ee+=$:er(),et++}if(er(),en)throw new oI(o_.INVALID_ARGUMENT,"Unterminated ` in path: "+g);return new oY($)}static emptyPath(){return new oY([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(g){this.path=g}static fromPath(g){return new oJ(oH.fromString(g))}static fromName(g){return new oJ(oH.fromString(g).popFirst(5))}static empty(){return new oJ(oH.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(g){return this.path.length>=2&&this.path.get(this.path.length-2)===g}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(g){return null!==g&&0===oH.comparator(this.path,g.path)}toString(){return this.path.toString()}static comparator(g,$){return oH.comparator(g.path,$.path)}static isDocumentKey(g){return g.length%2==0}static fromSegments(g){return new oJ(new oH(g.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oX=-1,oZ=0;class o0{constructor(g,$,ee,et){this.indexId=g,this.collectionGroup=$,this.fields=ee,this.indexState=et}}function o1(g){return g.fields.find(g=>2===g.kind)}function o2(g){return g.fields.filter(g=>2!==g.kind)}function o3(g){let $=o2(g);return 0===$.length?0:$[$.length-1].kind}function o4(g,$){let ee=oj(g.collectionGroup,$.collectionGroup);if(0!==ee)return ee;for(let et=0;et<Math.min(g.fields.length,$.fields.length);++et)if(0!==(ee=o5(g.fields[et],$.fields[et])))return ee;return oj(g.fields.length,$.fields.length)}function o6(g){return`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`}o0.UNKNOWN_ID=-1;class o9{constructor(g,$){this.fieldPath=g,this.kind=$}}function o5(g,$){let ee=oY.comparator(g.fieldPath,$.fieldPath);return 0!==ee?ee:oj(g.kind,$.kind)}class o8{constructor(g,$){this.sequenceNumber=g,this.offset=$}static empty(){return new o8(oZ,ar.min())}}function o7(g,$){let ee=g.toTimestamp().seconds,et=g.toTimestamp().nanoseconds+1;return new ar(o$.fromTimestamp(1e9===et?new oG(ee+1,0):new oG(ee,et)),oJ.empty(),$)}function at(g){return new ar(g.readTime,g.key,oX)}class ar{constructor(g,$,ee){this.readTime=g,this.documentKey=$,this.largestBatchId=ee}static min(){return new ar(o$.min(),oJ.empty(),oX)}static max(){return new ar(o$.max(),oJ.empty(),oX)}}function an(g,$){let ee=g.readTime.compareTo($.readTime);return 0!==ee||0!==(ee=oJ.comparator(g.documentKey,$.documentKey))?ee:oj(g.largestBatchId,$.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class as{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(g){this.onCommittedListeners.push(g)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(g=>g())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(g){if(g.code===o_.FAILED_PRECONDITION&&g.message===ai)oy("LocalStore","Unexpectedly lost primary lease");else throw g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(g){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,g(g=>{this.isDone=!0,this.result=g,this.nextCallback&&this.nextCallback(g)},g=>{this.isDone=!0,this.error=g,this.catchCallback&&this.catchCallback(g)})}catch(g){return this.next(void 0,g)}next(g,$){return(this.callbackAttached&&oE(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure($,this.error):this.wrapSuccess(g,this.result):new al((ee,et)=>{this.nextCallback=$=>{this.wrapSuccess(g,$).next(ee,et)},this.catchCallback=g=>{this.wrapFailure($,g).next(ee,et)}})}toPromise(){return new Promise((g,$)=>{this.next(g,$)})}wrapUserFunction(g){try{let $=g();if($ instanceof al)return $;return al.resolve($)}catch(g){return al.reject(g)}}wrapSuccess(g,$){return g?this.wrapUserFunction(()=>g($)):al.resolve($)}wrapFailure(g,$){return g?this.wrapUserFunction(()=>g($)):al.reject($)}static resolve(g){return new al(($,ee)=>{$(g)})}static reject(g){return new al(($,ee)=>{ee(g)})}static waitFor(g){return new al(($,ee)=>{let et=0,er=0,en=!1;g.forEach(g=>{++et,g.next(()=>{++er,en&&er===et&&$()},g=>ee(g))}),en=!0,er===et&&$()})}static or(g){let $=al.resolve(!1);for(let ee of g)$=$.next(g=>g?al.resolve(g):ee());return $}static forEach(g,$){let ee=[];return g.forEach((g,et)=>{ee.push($.call(this,g,et))}),this.waitFor(ee)}static mapArray(g,$){return new al((ee,et)=>{let er=g.length,en=Array(er),ei=0;for(let es=0;es<er;es++){let eo=es;$(g[eo]).next(g=>{en[eo]=g,++ei===er&&ee(en)},g=>et(g))}})}static doWhile(g,$){return new al((ee,et)=>{let er=()=>{!0===g()?$().next(()=>{er()},et):ee()};er()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="SimpleDb",ah=3;class ap{constructor(g,$){this.action=g,this.transaction=$,this.aborted=!1,this.completionDeferred=new oO,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{$.error?this.completionDeferred.reject(new am(g,$.error)):this.completionDeferred.resolve()},this.transaction.onerror=$=>{let ee=aE($.target.error);this.completionDeferred.reject(new am(g,ee))}}static open(g,$,ee,et){try{return new ap($,g.transaction(et,ee))}catch(g){throw new am($,g)}}get completionPromise(){return this.completionDeferred.promise}abort(g){g&&this.completionDeferred.reject(g),this.aborted||(oy(au,"Aborting transaction:",g?g.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let g=this.transaction;this.aborted||"function"!=typeof g.commit||g.commit()}store(g){return new av(this.transaction.objectStore(g))}}class af{constructor(g,$,ee){this.name=g,this.version=$,this.schemaConverter=ee,12.2===af.getIOSVersion(getUA())&&ov("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(g){return oy(au,"Removing database:",g),aS(window.indexedDB.deleteDatabase(g)).toPromise()}static isAvailable(){if(!isIndexedDBAvailable())return!1;if(af.isMockPersistence())return!0;let g=getUA(),$=af.getIOSVersion(g),ee=0<$&&$<10,et=af.getAndroidVersion(g),er=0<et&&et<4.5;return!(g.indexOf("MSIE ")>0||g.indexOf("Trident/")>0||g.indexOf("Edge/")>0)&&!ee&&!er}static isMockPersistence(){var g;return"undefined"!=typeof process&&(null===(g=process.env)||void 0===g?void 0:g.USE_MOCK_PERSISTENCE)==="YES"}static getStore(g,$){return g.store($)}static getIOSVersion(g){let $=g.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number($?$[1].split("_").slice(0,2).join("."):"-1")}static getAndroidVersion(g){let $=g.match(/Android ([\d.]+)/i);return Number($?$[1].split(".").slice(0,2).join("."):"-1")}async ensureDb(g){return this.db||(oy(au,"Opening database:",this.name),this.db=await new Promise(($,ee)=>{let et=indexedDB.open(this.name,this.version);et.onsuccess=g=>{$(g.target.result)},et.onblocked=()=>{ee(new am(g,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},et.onerror=$=>{let et=$.target.error;"VersionError"===et.name?ee(new oI(o_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===et.name?ee(new oI(o_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+et)):ee(new am(g,et))},et.onupgradeneeded=g=>{oy(au,'Database "'+this.name+'" requires upgrade from version:',g.oldVersion);let $=g.target.result;this.schemaConverter.createOrUpgrade($,et.transaction,g.oldVersion,this.version).next(()=>{oy(au,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=g=>this.versionchangelistener(g)),this.db}setVersionChangeListener(g){this.versionchangelistener=g,this.db&&(this.db.onversionchange=$=>g($))}async runTransaction(g,$,ee,et){let er="readonly"===$,en=0;for(;;){++en;try{this.db=await this.ensureDb(g);let $=ap.open(this.db,g,er?"readonly":"readwrite",ee),en=et($).next(g=>($.maybeCommit(),g)).catch(g=>($.abort(g),al.reject(g))).toPromise();return en.catch(()=>{}),await $.completionPromise,en}catch(ee){let g=ee,$="FirebaseError"!==g.name&&en<ah;if(oy(au,"Transaction failed with error:",g.message,"Retrying:",$),this.close(),!$)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ag{constructor(g){this.dbCursor=g,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(g){this.dbCursor=g}done(){this.shouldStop=!0}skip(g){this.nextKey=g}delete(){return aS(this.dbCursor.delete())}}class am extends null{constructor(g,$){super(o_.UNAVAILABLE,`IndexedDB transaction '${g}' failed: ${$}`),this.name="IndexedDbTransactionError"}}function ay(g){return"IndexedDbTransactionError"===g.name}class av{constructor(g){this.store=g}put(g,$){let ee;return void 0!==$?(oy(au,"PUT",this.store.name,g,$),ee=this.store.put($,g)):(oy(au,"PUT",this.store.name,"<auto-key>",g),ee=this.store.put(g)),aS(ee)}add(g){return oy(au,"ADD",this.store.name,g,g),aS(this.store.add(g))}get(g){return aS(this.store.get(g)).next($=>(void 0===$&&($=null),oy(au,"GET",this.store.name,g,$),$))}delete(g){return oy(au,"DELETE",this.store.name,g),aS(this.store.delete(g))}count(){return oy(au,"COUNT",this.store.name),aS(this.store.count())}loadAll(g,$){let ee=this.options(g,$);if(ee.index||"function"!=typeof this.store.getAll){let g=this.cursor(ee),$=[];return this.iterateCursor(g,(g,ee)=>{$.push(ee)}).next(()=>$)}{let g=this.store.getAll(ee.range);return new al(($,ee)=>{g.onerror=g=>{ee(g.target.error)},g.onsuccess=g=>{$(g.target.result)}})}}loadFirst(g,$){let ee=this.store.getAll(g,null===$?void 0:$);return new al((g,$)=>{ee.onerror=g=>{$(g.target.error)},ee.onsuccess=$=>{g($.target.result)}})}deleteAll(g,$){oy(au,"DELETE ALL",this.store.name);let ee=this.options(g,$);ee.keysOnly=!1;let et=this.cursor(ee);return this.iterateCursor(et,(g,$,ee)=>ee.delete())}iterate(g,$){let ee;$?ee=g:(ee={},$=g);let et=this.cursor(ee);return this.iterateCursor(et,$)}iterateSerial(g){let $=this.cursor({});return new al((ee,et)=>{$.onerror=g=>{et(aE(g.target.error))},$.onsuccess=$=>{let et=$.target.result;if(!et){ee();return}g(et.primaryKey,et.value).next(g=>{g?et.continue():ee()})}})}iterateCursor(g,$){let ee=[];return new al((et,er)=>{g.onerror=g=>{er(g.target.error)},g.onsuccess=g=>{let er=g.target.result;if(!er){et();return}let en=new ag(er),ei=$(er.primaryKey,er.value,en);if(ei instanceof al){let g=ei.catch(g=>(en.done(),al.reject(g)));ee.push(g)}en.isDone?et():null===en.skipToKey?er.continue():er.continue(en.skipToKey)}}).next(()=>al.waitFor(ee))}options(g,$){let ee;return void 0!==g&&("string"==typeof g?ee=g:$=g),{index:ee,range:$}}cursor(g){let $="next";if(g.reverse&&($="prev"),!g.index)return this.store.openCursor(g.range,$);{let ee=this.store.index(g.index);return g.keysOnly?ee.openKeyCursor(g.range,$):ee.openCursor(g.range,$)}}}function aS(g){return new al(($,ee)=>{g.onsuccess=g=>{$(g.target.result)},g.onerror=g=>{ee(aE(g.target.error))}})}let aT=!1;function aE(g){let $=af.getIOSVersion(getUA());if($>=12.2&&$<13){let $="An internal error was encountered in the Indexed Database server";if(g.message.indexOf($)>=0){let g=new oI("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${$}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aT||(aT=!0,setTimeout(()=>{throw g},0)),g}}return g}let aw="IndexBackiller",aC=null,a_=null,aI=50;class aO{constructor(g,$){this.asyncQueue=g,this.backfiller=$,this.task=null}start(){this.schedule(aC)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(g){oy(aw,`Scheduled in ${g}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",g,async()=>{this.task=null;try{let g=await this.backfiller.backfill();oy(aw,`Documents written: ${g}`)}catch(g){ay(g)?oy(aw,"Ignoring IndexedDB error during index backfill: ",g):await ao(g)}await this.schedule(a_)})}}class aA{constructor(g,$){this.localStore=g,this.persistence=$}async backfill(g=aI){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",$=>this.writeIndexEntries($,g))}writeIndexEntries(g,$){let ee=new Set,et=$,er=!0;return al.doWhile(()=>!0===er&&et>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(g).next($=>{if(!(null===$||ee.has($)))return oy(aw,`Processing collection: ${$}`),this.writeEntriesForCollectionGroup(g,$,et).next(g=>{et-=g,ee.add($)});er=!1})).next(()=>$-et)}writeEntriesForCollectionGroup(g,$,ee){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(g,$).next(et=>this.localStore.localDocuments.getNextDocuments(g,$,et,ee).next(ee=>{let er=ee.changes;return this.localStore.indexManager.updateIndexEntries(g,er).next(()=>this.getNewOffset(et,ee)).next(ee=>(oy(aw,`Updating offset: ${ee}`),this.localStore.indexManager.updateCollectionGroup(g,$,ee))).next(()=>er.size)}))}getNewOffset(g,$){let ee=g;return $.changes.forEach((g,$)=>{let et=at($);an(et,ee)>0&&(ee=et)}),new ar(ee.readTime,ee.documentKey,Math.max($.batchId,g.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(g,$){this.previousValue=g,$&&($.sequenceNumberHandler=g=>this.setPreviousValue(g),this.writeNewSequenceNumber=g=>$.writeSequenceNumber(g))}setPreviousValue(g){return this.previousValue=Math.max(g,this.previousValue),this.previousValue}next(){let g=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(g),g}}aN.INVALID=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aD="\x01",aR="\x01",ak="\x10",ax="\x11";function aP(g){let $="";for(let ee=0;ee<g.length;ee++)$.length>0&&($=aL($)),$=aM(g.get(ee),$);return aL($)}function aM(g,$){let ee=$,et=g.length;for(let $=0;$<et;$++){let et=g.charAt($);switch(et){case"\x00":ee+=aD+ak;break;case aD:ee+=aD+ax;break;default:ee+=et}}return ee}function aL(g){return g+aD+aR}function aF(g){let $=g.length;if(ow($>=2),2===$)return ow(g.charAt(0)===aD&&g.charAt(1)===aR),oH.emptyPath();let ee=$-2,et=[],er="";for(let en=0;en<$;){let $=g.indexOf(aD,en);switch(($<0||$>ee)&&oE(),g.charAt($+1)){case aR:let ei;let es=g.substring(en,$);0===er.length?ei=es:(er+=es,ei=er,er=""),et.push(ei);break;case ak:er+=g.substring(en,$)+"\x00";break;case ax:er+=g.substring(en,$+1);break;default:oE()}en=$+2}return new oH(et)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aB="remoteDocuments",aj="owner",aU="owner",aV="mutationQueues",aq="userId",az="mutations",aG="batchId",a$="userMutationsIndex",aK=null;function aW(g){return[g]}function aH(g,$){return[g,aP($)]}function aQ(g,$,ee){return[g,aP($),ee]}let aY={},aJ="documentMutations",aX="remoteDocumentsV14",aZ=null,a0="documentKeyIndex",a1=null,a2="collectionGroupIndex",a3=null,a4="remoteDocumentGlobal",a6="remoteDocumentGlobalKey",a9="targets",a5="targetId",a8="queryTargetsIndex",a7=null,lt="targetDocuments",lr=null,ln="documentTargetsIndex",li=null,ls="targetGlobalKey",ll="targetGlobal",lu="collectionParents",lh=null,lp="clientMetadata",lf="clientId",lg="bundles",lm="bundleId",ly="namedQueries",lv="name",lS="indexConfiguration",lT="indexId",lE="collectionGroupIndex",lw="collectionGroup",lC="indexState",l_=null,lI="sequenceNumberIndex",lO=null,lA="indexEntries",lN=null,lD="documentKeyIndex",lR=null,lk="documentOverlays",lx=null,lP="collectionPathOverlayIndex",lM=null,lL="collectionGroupOverlayIndex",lF=null,lB=[aV,az,aJ,aB,a9,aj,ll,lt,lp,a4,lu,lg,ly],lj=[...lB,lk],lU=[aV,az,aJ,aX,a9,aj,ll,lt,lp,a4,lu,lg,ly,lk],lV=lU,lq=[...lV,lS,lC,lA];function lz(g){return 15===g?lq:14===g?lV:13===g?lU:12===g?lj:11===g?lB:void oE()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG extends null{constructor(g,$){super(),this.simpleDbTransaction=g,this.currentSequenceNumber=$}}function l$(g,$){let ee=oC(g);return af.getStore(ee.simpleDbTransaction,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(g){let $=0;for(let ee in g)Object.prototype.hasOwnProperty.call(g,ee)&&$++;return $}function lW(g,$){for(let ee in g)Object.prototype.hasOwnProperty.call(g,ee)&&$(ee,g[ee])}function lH(g){for(let $ in g)if(Object.prototype.hasOwnProperty.call(g,$))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(g,$){this.comparator=g,this.root=$||lJ.EMPTY}insert(g,$){return new lQ(this.comparator,this.root.insert(g,$,this.comparator).copy(null,null,lJ.BLACK,null,null))}remove(g){return new lQ(this.comparator,this.root.remove(g,this.comparator).copy(null,null,lJ.BLACK,null,null))}get(g){let $=this.root;for(;!$.isEmpty();){let ee=this.comparator(g,$.key);if(0===ee)return $.value;ee<0?$=$.left:ee>0&&($=$.right)}return null}indexOf(g){let $=0,ee=this.root;for(;!ee.isEmpty();){let et=this.comparator(g,ee.key);if(0===et)return $+ee.left.size;et<0?ee=ee.left:($+=ee.left.size+1,ee=ee.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(g){return this.root.inorderTraversal(g)}forEach(g){this.inorderTraversal(($,ee)=>(g($,ee),!1))}toString(){let g=[];return this.inorderTraversal(($,ee)=>(g.push(`${$}:${ee}`),!1)),`{${g.join(", ")}}`}reverseTraversal(g){return this.root.reverseTraversal(g)}getIterator(){return new lY(this.root,null,this.comparator,!1)}getIteratorFrom(g){return new lY(this.root,g,this.comparator,!1)}getReverseIterator(){return new lY(this.root,null,this.comparator,!0)}getReverseIteratorFrom(g){return new lY(this.root,g,this.comparator,!0)}}class lY{constructor(g,$,ee,et){this.isReverse=et,this.nodeStack=[];let er=1;for(;!g.isEmpty();)if(er=$?ee(g.key,$):1,$&&et&&(er*=-1),er<0)g=this.isReverse?g.left:g.right;else if(0===er){this.nodeStack.push(g);break}else this.nodeStack.push(g),g=this.isReverse?g.right:g.left}getNext(){let g=this.nodeStack.pop(),$={key:g.key,value:g.value};if(this.isReverse)for(g=g.left;!g.isEmpty();)this.nodeStack.push(g),g=g.right;else for(g=g.right;!g.isEmpty();)this.nodeStack.push(g),g=g.left;return $}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let g=this.nodeStack[this.nodeStack.length-1];return{key:g.key,value:g.value}}}class lJ{constructor(g,$,ee,et,er){this.key=g,this.value=$,this.color=null!=ee?ee:lJ.RED,this.left=null!=et?et:lJ.EMPTY,this.right=null!=er?er:lJ.EMPTY,this.size=this.left.size+1+this.right.size}copy(g,$,ee,et,er){return new lJ(null!=g?g:this.key,null!=$?$:this.value,null!=ee?ee:this.color,null!=et?et:this.left,null!=er?er:this.right)}isEmpty(){return!1}inorderTraversal(g){return this.left.inorderTraversal(g)||g(this.key,this.value)||this.right.inorderTraversal(g)}reverseTraversal(g){return this.right.reverseTraversal(g)||g(this.key,this.value)||this.left.reverseTraversal(g)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(g,$,ee){let et=this,er=ee(g,et.key);return(et=er<0?et.copy(null,null,null,et.left.insert(g,$,ee),null):0===er?et.copy(null,$,null,null,null):et.copy(null,null,null,null,et.right.insert(g,$,ee))).fixUp()}removeMin(){if(this.left.isEmpty())return lJ.EMPTY;let g=this;return g.left.isRed()||g.left.left.isRed()||(g=g.moveRedLeft()),(g=g.copy(null,null,null,g.left.removeMin(),null)).fixUp()}remove(g,$){let ee;let et=this;if(0>$(g,et.key))et.left.isEmpty()||et.left.isRed()||et.left.left.isRed()||(et=et.moveRedLeft()),et=et.copy(null,null,null,et.left.remove(g,$),null);else{if(et.left.isRed()&&(et=et.rotateRight()),et.right.isEmpty()||et.right.isRed()||et.right.left.isRed()||(et=et.moveRedRight()),0===$(g,et.key)){if(et.right.isEmpty())return lJ.EMPTY;ee=et.right.min(),et=et.copy(ee.key,ee.value,null,null,et.right.removeMin())}et=et.copy(null,null,null,null,et.right.remove(g,$))}return et.fixUp()}isRed(){return this.color}fixUp(){let g=this;return g.right.isRed()&&!g.left.isRed()&&(g=g.rotateLeft()),g.left.isRed()&&g.left.left.isRed()&&(g=g.rotateRight()),g.left.isRed()&&g.right.isRed()&&(g=g.colorFlip()),g}moveRedLeft(){let g=this.colorFlip();return g.right.left.isRed()&&(g=(g=(g=g.copy(null,null,null,null,g.right.rotateRight())).rotateLeft()).colorFlip()),g}moveRedRight(){let g=this.colorFlip();return g.left.left.isRed()&&(g=(g=g.rotateRight()).colorFlip()),g}rotateLeft(){let g=this.copy(null,null,lJ.RED,null,this.right.left);return this.right.copy(null,null,this.color,g,null)}rotateRight(){let g=this.copy(null,null,lJ.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,g)}colorFlip(){let g=this.left.copy(null,null,!this.left.color,null,null),$=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,g,$)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oE();let g=this.left.check();if(g===this.right.check())return g+(this.isRed()?0:1);throw oE()}}lJ.EMPTY=null,lJ.RED=!0,lJ.BLACK=!1;class lX{constructor(){this.size=0}get key(){throw oE()}get value(){throw oE()}get color(){throw oE()}get left(){throw oE()}get right(){throw oE()}copy(g,$,ee,et,er){return this}insert(g,$,ee){return new lJ(g,$)}remove(g,$){return this}isEmpty(){return!0}inorderTraversal(g){return!1}reverseTraversal(g){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}lJ.EMPTY=new lX;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(g){this.comparator=g,this.data=new lQ(this.comparator)}has(g){return null!==this.data.get(g)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(g){return this.data.indexOf(g)}forEach(g){this.data.inorderTraversal(($,ee)=>(g($),!1))}forEachInRange(g,$){let ee=this.data.getIteratorFrom(g[0]);for(;ee.hasNext();){let et=ee.getNext();if(this.comparator(et.key,g[1])>=0)return;$(et.key)}}forEachWhile(g,$){let ee;for(ee=void 0!==$?this.data.getIteratorFrom($):this.data.getIterator();ee.hasNext();)if(!g(ee.getNext().key))return}firstAfterOrEqual(g){let $=this.data.getIteratorFrom(g);return $.hasNext()?$.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(g){return new l0(this.data.getIteratorFrom(g))}add(g){return this.copy(this.data.remove(g).insert(g,!0))}delete(g){return this.has(g)?this.copy(this.data.remove(g)):this}isEmpty(){return this.data.isEmpty()}unionWith(g){let $=this;return $.size<g.size&&($=g,g=this),g.forEach(g=>{$=$.add(g)}),$}isEqual(g){if(!(g instanceof lZ)||this.size!==g.size)return!1;let $=this.data.getIterator(),ee=g.data.getIterator();for(;$.hasNext();){let g=$.getNext().key,et=ee.getNext().key;if(0!==this.comparator(g,et))return!1}return!0}toArray(){let g=[];return this.forEach($=>{g.push($)}),g}toString(){let g=[];return this.forEach($=>g.push($)),"SortedSet("+g.toString()+")"}copy(g){let $=new lZ(this.comparator);return $.data=g,$}}class l0{constructor(g){this.iter=g}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function l1(g,$,ee,et,er){let en=g.getIterator(),ei=$.getIterator(),es=l2(en),eo=l2(ei);for(;es||eo;){let g=!1,$=!1;if(es&&eo){let et=ee(es,eo);et<0?$=!0:et>0&&(g=!0)}else null!=es?$=!0:g=!0;g?(et(eo),eo=l2(ei)):$?(er(es),es=l2(en)):(es=l2(en),eo=l2(ei))}}function l2(g){return g.hasNext()?g.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(g){this.fields=g,g.sort(oY.comparator)}static empty(){return new l3([])}unionWith(g){let $=new lZ(oY.comparator);for(let g of this.fields)$=$.add(g);for(let ee of g)$=$.add(ee);return new l3($.toArray())}covers(g){for(let $ of this.fields)if($.isPrefixOf(g))return!0;return!1}isEqual(g){return oU(this.fields,g.fields,(g,$)=>g.isEqual($))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(g){return Buffer.from(g,"base64").toString("binary")}function l6(g){return Buffer.from(g,"binary").toString("base64")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(g){this.binaryString=g}static fromBase64String(g){return new l9(l4(g))}static fromUint8Array(g){return new l9(l5(g))}[Symbol.iterator](){let g=0;return{next:()=>g<this.binaryString.length?{value:this.binaryString.charCodeAt(g++),done:!1}:{value:void 0,done:!0}}}toBase64(){return l6(this.binaryString)}toUint8Array(){return l8(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(g){return oj(this.binaryString,g.binaryString)}isEqual(g){return this.binaryString===g.binaryString}}function l5(g){let $="";for(let ee=0;ee<g.length;++ee)$+=String.fromCharCode(g[ee]);return $}function l8(g){let $=new Uint8Array(g.length);for(let ee=0;ee<g.length;ee++)$[ee]=g.charCodeAt(ee);return $}l9.EMPTY_BYTE_STRING=new l9("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ue(g){if(ow(!!g),"string"==typeof g){let $=0,ee=l7.exec(g);if(ow(!!ee),ee[1]){let g=ee[1];$=Number(g=(g+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(g).getTime()/1e3),nanos:$}}return{seconds:ut(g.seconds),nanos:ut(g.nanos)}}function ut(g){return"number"==typeof g?g:"string"==typeof g?Number(g):0}function ur(g){return"string"==typeof g?l9.fromBase64String(g):l9.fromUint8Array(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let un="server_timestamp",ui="__type__",us="__previous_value__",uo="__local_write_time__";function ul(g){var $,ee;return(null===(ee=((null===($=null==g?void 0:g.mapValue)||void 0===$?void 0:$.fields)||{})[ui])||void 0===ee?void 0:ee.stringValue)===un}function uu(g,$){let ee={fields:{[ui]:{stringValue:un},[uo]:{timestampValue:{seconds:g.seconds,nanos:g.nanoseconds}}}};return $&&ul($)&&($=uh($)),$&&(ee.fields[us]=$),{mapValue:ee}}function uh(g){let $=g.mapValue.fields[us];return ul($)?uh($):$}function up(g){let $=ue(g.mapValue.fields[uo].timestampValue);return new oG($.seconds,$.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(g,$,ee,et,er,en,ei,es,eo){this.databaseId=g,this.appId=$,this.persistenceKey=ee,this.host=et,this.ssl=er,this.forceLongPolling=en,this.autoDetectLongPolling=ei,this.longPollingOptions=es,this.useFetchStreams=eo}}let ug="(default)";class um{constructor(g,$){this.projectId=g,this.database=$||ug}static empty(){return new um("","")}get isDefaultDatabase(){return this.database===ug}isEqual(g){return g instanceof um&&g.projectId===this.projectId&&g.database===this.database}}function uy(g,$){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oI(o_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new um(g.options.projectId,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uv=-1;function uS(g){return null==g}function uT(g){return 0===g&&1/g==-1/0}function uE(g){return"number"==typeof g&&Number.isInteger(g)&&!uT(g)&&g<=Number.MAX_SAFE_INTEGER&&g>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uw="__max__",uC={mapValue:{fields:{__type__:{stringValue:uw}}}},u_={nullValue:"NULL_VALUE"};function uI(g){if("nullValue"in g)return 0;if("booleanValue"in g)return 1;if("integerValue"in g||"doubleValue"in g)return 2;if("timestampValue"in g)return 3;if("stringValue"in g)return 5;if("bytesValue"in g)return 6;if("referenceValue"in g)return 7;else if("geoPointValue"in g)return 8;else if("arrayValue"in g)return 9;else if(!("mapValue"in g))return oE();else return ul(g)?4:u8(g)?9007199254740991:10}function uO(g,$){if(g===$)return!0;let ee=uI(g);if(ee!==uI($))return!1;switch(ee){case 0:case 9007199254740991:return!0;case 1:return g.booleanValue===$.booleanValue;case 4:return up(g).isEqual(up($));case 3:return uA(g,$);case 5:return g.stringValue===$.stringValue;case 6:return uD(g,$);case 7:return g.referenceValue===$.referenceValue;case 8:return uN(g,$);case 2:return uR(g,$);case 9:return oU(g.arrayValue.values||[],$.arrayValue.values||[],uO);case 10:return uk(g,$);default:return oE()}}function uA(g,$){if("string"==typeof g.timestampValue&&"string"==typeof $.timestampValue&&g.timestampValue.length===$.timestampValue.length)return g.timestampValue===$.timestampValue;let ee=ue(g.timestampValue),et=ue($.timestampValue);return ee.seconds===et.seconds&&ee.nanos===et.nanos}function uN(g,$){return ut(g.geoPointValue.latitude)===ut($.geoPointValue.latitude)&&ut(g.geoPointValue.longitude)===ut($.geoPointValue.longitude)}function uD(g,$){return ur(g.bytesValue).isEqual(ur($.bytesValue))}function uR(g,$){if("integerValue"in g&&"integerValue"in $)return ut(g.integerValue)===ut($.integerValue);if("doubleValue"in g&&"doubleValue"in $){let ee=ut(g.doubleValue),et=ut($.doubleValue);return ee===et?uT(ee)===uT(et):isNaN(ee)&&isNaN(et)}return!1}function uk(g,$){let ee=g.mapValue.fields||{},et=$.mapValue.fields||{};if(lK(ee)!==lK(et))return!1;for(let g in ee)if(ee.hasOwnProperty(g)&&(void 0===et[g]||!uO(ee[g],et[g])))return!1;return!0}function ux(g,$){return void 0!==(g.values||[]).find(g=>uO(g,$))}function uP(g,$){if(g===$)return 0;let ee=uI(g),et=uI($);if(ee!==et)return oj(ee,et);switch(ee){case 0:case 9007199254740991:return 0;case 1:return oj(g.booleanValue,$.booleanValue);case 2:return uM(g,$);case 3:return uL(g.timestampValue,$.timestampValue);case 4:return uL(up(g),up($));case 5:return oj(g.stringValue,$.stringValue);case 6:return uj(g.bytesValue,$.bytesValue);case 7:return uF(g.referenceValue,$.referenceValue);case 8:return uB(g.geoPointValue,$.geoPointValue);case 9:return uU(g.arrayValue,$.arrayValue);case 10:return uV(g.mapValue,$.mapValue);default:throw oE()}}function uM(g,$){let ee=ut(g.integerValue||g.doubleValue),et=ut($.integerValue||$.doubleValue);return ee<et?-1:ee>et?1:ee===et?0:isNaN(ee)?isNaN(et)?0:-1:1}function uL(g,$){if("string"==typeof g&&"string"==typeof $&&g.length===$.length)return oj(g,$);let ee=ue(g),et=ue($),er=oj(ee.seconds,et.seconds);return 0!==er?er:oj(ee.nanos,et.nanos)}function uF(g,$){let ee=g.split("/"),et=$.split("/");for(let g=0;g<ee.length&&g<et.length;g++){let $=oj(ee[g],et[g]);if(0!==$)return $}return oj(ee.length,et.length)}function uB(g,$){let ee=oj(ut(g.latitude),ut($.latitude));return 0!==ee?ee:oj(ut(g.longitude),ut($.longitude))}function uj(g,$){let ee=ur(g),et=ur($);return ee.compareTo(et)}function uU(g,$){let ee=g.values||[],et=$.values||[];for(let g=0;g<ee.length&&g<et.length;++g){let $=uP(ee[g],et[g]);if($)return $}return oj(ee.length,et.length)}function uV(g,$){if(g===uC.mapValue&&$===uC.mapValue)return 0;if(g===uC.mapValue)return 1;if($===uC.mapValue)return -1;let ee=g.fields||{},et=Object.keys(ee),er=$.fields||{},en=Object.keys(er);et.sort(),en.sort();for(let g=0;g<et.length&&g<en.length;++g){let $=oj(et[g],en[g]);if(0!==$)return $;let ei=uP(ee[et[g]],er[en[g]]);if(0!==ei)return ei}return oj(et.length,en.length)}function uq(g){return uz(g)}function uz(g){if("nullValue"in g)return"null";if("booleanValue"in g)return""+g.booleanValue;if("integerValue"in g)return""+g.integerValue;if("doubleValue"in g)return""+g.doubleValue;if("timestampValue"in g)return u$(g.timestampValue);if("stringValue"in g)return g.stringValue;if("bytesValue"in g)return uG(g.bytesValue);else if("referenceValue"in g)return uW(g.referenceValue);else if("geoPointValue"in g)return uK(g.geoPointValue);else if("arrayValue"in g)return uQ(g.arrayValue);else if("mapValue"in g)return uH(g.mapValue);else return oE()}function uG(g){return ur(g).toBase64()}function u$(g){let $=ue(g);return`time(${$.seconds},${$.nanos})`}function uK(g){return`geo(${g.latitude},${g.longitude})`}function uW(g){return oJ.fromName(g).toString()}function uH(g){let $=Object.keys(g.fields||{}).sort(),ee="{",et=!0;for(let er of $)et?et=!1:ee+=",",ee+=`${er}:${uz(g.fields[er])}`;return ee+"}"}function uQ(g){let $="[",ee=!0;for(let et of g.values||[])ee?ee=!1:$+=",",$+=uz(et);return $+"]"}function uY(g){switch(uI(g)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let $=uh(g);return $?16+uY($):16;case 5:return 2*g.stringValue.length;case 6:return ur(g.bytesValue).approximateByteSize();case 7:return g.referenceValue.length;case 9:return uX(g.arrayValue);case 10:return uJ(g.mapValue);default:throw oE()}}function uJ(g){let $=0;return lW(g.fields,(g,ee)=>{$+=g.length+uY(ee)}),$}function uX(g){return(g.values||[]).reduce((g,$)=>g+uY($),0)}function uZ(g,$){return{referenceValue:`projects/${g.projectId}/databases/${g.database}/documents/${$.path.canonicalString()}`}}function u0(g){return!!g&&"integerValue"in g}function u1(g){return!!g&&"doubleValue"in g}function u2(g){return u0(g)||u1(g)}function u3(g){return!!g&&"arrayValue"in g}function u4(g){return!!g&&"nullValue"in g}function u6(g){return!!g&&"doubleValue"in g&&isNaN(Number(g.doubleValue))}function u9(g){return!!g&&"mapValue"in g}function u5(g){if(g.geoPointValue)return{geoPointValue:Object.assign({},g.geoPointValue)};if(g.timestampValue&&"object"==typeof g.timestampValue)return{timestampValue:Object.assign({},g.timestampValue)};if(g.mapValue){let $={mapValue:{fields:{}}};return lW(g.mapValue.fields,(g,ee)=>$.mapValue.fields[g]=u5(ee)),$}{if(!g.arrayValue)return Object.assign({},g);let $={arrayValue:{values:[]}};for(let ee=0;ee<(g.arrayValue.values||[]).length;++ee)$.arrayValue.values[ee]=u5(g.arrayValue.values[ee]);return $}}function u8(g){return(((g.mapValue||{}).fields||{}).__type__||{}).stringValue===uw}function u7(g){if("nullValue"in g)return u_;if("booleanValue"in g)return{booleanValue:!1};if("integerValue"in g||"doubleValue"in g)return{doubleValue:NaN};if("timestampValue"in g)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in g)return{stringValue:""};if("bytesValue"in g)return{bytesValue:""};if("referenceValue"in g)return uZ(um.empty(),oJ.empty());else if("geoPointValue"in g)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in g)return{arrayValue:{}};else if("mapValue"in g)return{mapValue:{}};else return oE()}function ce(g){if("nullValue"in g)return{booleanValue:!1};if("booleanValue"in g)return{doubleValue:NaN};if("integerValue"in g||"doubleValue"in g)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in g)return{stringValue:""};if("stringValue"in g)return{bytesValue:""};if("bytesValue"in g)return uZ(um.empty(),oJ.empty());if("referenceValue"in g)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in g)return{arrayValue:{}};else if("arrayValue"in g)return{mapValue:{}};else if("mapValue"in g)return uC;else return oE()}function ct(g,$){let ee=uP(g.value,$.value);return 0!==ee?ee:g.inclusive&&!$.inclusive?-1:!g.inclusive&&$.inclusive?1:0}function cr(g,$){let ee=uP(g.value,$.value);return 0!==ee?ee:g.inclusive&&!$.inclusive?1:!g.inclusive&&$.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(g){this.value=g}static empty(){return new cn({mapValue:{}})}field(g){if(g.isEmpty())return this.value;{let $=this.value;for(let ee=0;ee<g.length-1;++ee)if(!u9($=($.mapValue.fields||{})[g.get(ee)]))return null;return($=($.mapValue.fields||{})[g.lastSegment()])||null}}set(g,$){this.getFieldsMap(g.popLast())[g.lastSegment()]=u5($)}setAll(g){let $=oY.emptyPath(),ee={},et=[];g.forEach((g,er)=>{if(!$.isImmediateParentOf(er)){let g=this.getFieldsMap($);this.applyChanges(g,ee,et),ee={},et=[],$=er.popLast()}g?ee[er.lastSegment()]=u5(g):et.push(er.lastSegment())});let er=this.getFieldsMap($);this.applyChanges(er,ee,et)}delete(g){let $=this.field(g.popLast());u9($)&&$.mapValue.fields&&delete $.mapValue.fields[g.lastSegment()]}isEqual(g){return uO(this.value,g.value)}getFieldsMap(g){let $=this.value;$.mapValue.fields||($.mapValue={fields:{}});for(let ee=0;ee<g.length;++ee){let et=$.mapValue.fields[g.get(ee)];u9(et)&&et.mapValue.fields||(et={mapValue:{fields:{}}},$.mapValue.fields[g.get(ee)]=et),$=et}return $.mapValue.fields}applyChanges(g,$,ee){for(let et of(lW($,($,ee)=>g[$]=ee),ee))delete g[et]}clone(){return new cn(u5(this.value))}}function ci(g){let $=[];return lW(g.fields,(g,ee)=>{let et=new oY([g]);if(u9(ee)){let g=ci(ee.mapValue).fields;if(0===g.length)$.push(et);else for(let ee of g)$.push(et.child(ee))}else $.push(et)}),new l3($)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(g,$,ee,et,er,en,ei){this.key=g,this.documentType=$,this.version=ee,this.readTime=et,this.createTime=er,this.data=en,this.documentState=ei}static newInvalidDocument(g){return new cs(g,0,o$.min(),o$.min(),o$.min(),cn.empty(),0)}static newFoundDocument(g,$,ee,et){return new cs(g,1,$,o$.min(),ee,et,0)}static newNoDocument(g,$){return new cs(g,2,$,o$.min(),o$.min(),cn.empty(),0)}static newUnknownDocument(g,$){return new cs(g,3,$,o$.min(),o$.min(),cn.empty(),2)}convertToFoundDocument(g,$){return this.createTime.isEqual(o$.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=g),this.version=g,this.documentType=1,this.data=$,this.documentState=0,this}convertToNoDocument(g){return this.version=g,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(g){return this.version=g,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=o$.min(),this}setReadTime(g){return this.readTime=g,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(g){return g instanceof cs&&this.key.isEqual(g.key)&&this.version.isEqual(g.version)&&this.documentType===g.documentType&&this.documentState===g.documentState&&this.data.isEqual(g.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function co(g,$,ee){let et=$.data.field(g),er=ee.data.field(g);return null!==et&&null!==er?uP(et,er):oE()}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(g,$){this.position=g,this.inclusive=$}}function cu(g,$,ee){let et=0;for(let er=0;er<g.position.length;er++){let en=$[er],ei=g.position[er];if(et=en.field.isKeyField()?oJ.comparator(oJ.fromName(ei.referenceValue),ee.key):uP(ei,ee.data.field(en.field)),"desc"===en.dir&&(et*=-1),0!==et)break}return et}function ch(g,$,ee){let et=cu(g,$,ee);return g.inclusive?et>=0:et>0}function cp(g,$,ee){let et=cu(g,$,ee);return g.inclusive?et<=0:et<0}function cf(g,$){if(null===g)return null===$;if(null===$||g.inclusive!==$.inclusive||g.position.length!==$.position.length)return!1;for(let ee=0;ee<g.position.length;ee++)if(!uO(g.position[ee],$.position[ee]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(g,$="asc"){this.field=g,this.dir=$}}function cy(g){return g.field.canonicalString()+g.dir}function cv(g){return`${g.field.canonicalString()} (${g.dir})`}function cS(g,$){return g.dir===$.dir&&g.field.isEqual($.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class cE extends cT{constructor(g,$,ee){super(),this.field=g,this.op=$,this.value=ee}static create(g,$,ee){return g.isKeyField()?"in"===$||"not-in"===$?this.createKeyFieldInFilter(g,$,ee):new cL(g,$,ee):"array-contains"===$?new cU(g,ee):"in"===$?new cV(g,ee):"not-in"===$?new cq(g,ee):"array-contains-any"===$?new cz(g,ee):new cE(g,$,ee)}static createKeyFieldInFilter(g,$,ee){return"in"===$?new cF(g,ee):new cB(g,ee)}matches(g){let $=g.data.field(this.field);return"!="===this.op?null!==$&&this.matchesComparison(uP($,this.value)):null!==$&&uI(this.value)===uI($)&&this.matchesComparison(uP($,this.value))}matchesComparison(g){switch(this.op){case"<":return g<0;case"<=":return g<=0;case"==":return 0===g;case"!=":return 0!==g;case">":return g>0;case">=":return g>=0;default:return oE()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class cw extends cT{constructor(g,$){super(),this.filters=g,this.op=$,this.memoizedFlattenedFilters=null}static create(g,$){return new cw(g,$)}matches(g){return cC(this)?void 0===this.filters.find($=>!$.matches(g)):void 0!==this.filters.find($=>$.matches(g))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((g,$)=>g.concat($.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let g=this.findFirstMatchingFilter(g=>g.isInequality());return null!==g?g.field:null}findFirstMatchingFilter(g){for(let $ of this.getFlattenedFilters())if(g($))return $;return null}}function cC(g){return"and"===g.op}function c_(g){return"or"===g.op}function cI(g){return cO(g)&&cC(g)}function cO(g){for(let $ of g.filters)if($ instanceof cw)return!1;return!0}function cA(g){if(g instanceof cE)return g.field.canonicalString()+g.op.toString()+uq(g.value);if(cI(g))return g.filters.map(g=>cA(g)).join(",");{let $=g.filters.map(g=>cA(g)).join(",");return`${g.op}(${$})`}}function cN(g,$){return g instanceof cE?cD(g,$):g instanceof cw?cR(g,$):void oE()}function cD(g,$){return $ instanceof cE&&g.op===$.op&&g.field.isEqual($.field)&&uO(g.value,$.value)}function cR(g,$){return $ instanceof cw&&g.op===$.op&&g.filters.length===$.filters.length&&g.filters.reduce((g,ee,et)=>g&&cN(ee,$.filters[et]),!0)}function ck(g,$){let ee=g.filters.concat($);return cw.create(ee,g.op)}function cx(g){return g instanceof cE?cM(g):g instanceof cw?cP(g):"Filter"}function cP(g){return g.op.toString()+" {"+g.getFilters().map(cx).join(" ,")+"}"}function cM(g){return`${g.field.canonicalString()} ${g.op} ${uq(g.value)}`}class cL extends cE{constructor(g,$,ee){super(g,$,ee),this.key=oJ.fromName(ee.referenceValue)}matches(g){let $=oJ.comparator(g.key,this.key);return this.matchesComparison($)}}class cF extends cE{constructor(g,$){super(g,"in",$),this.keys=cj("in",$)}matches(g){return this.keys.some($=>$.isEqual(g.key))}}class cB extends cE{constructor(g,$){super(g,"not-in",$),this.keys=cj("not-in",$)}matches(g){return!this.keys.some($=>$.isEqual(g.key))}}function cj(g,$){var ee;return((null===(ee=$.arrayValue)||void 0===ee?void 0:ee.values)||[]).map(g=>oJ.fromName(g.referenceValue))}class cU extends cE{constructor(g,$){super(g,"array-contains",$)}matches(g){let $=g.data.field(this.field);return u3($)&&ux($.arrayValue,this.value)}}class cV extends cE{constructor(g,$){super(g,"in",$)}matches(g){let $=g.data.field(this.field);return null!==$&&ux(this.value.arrayValue,$)}}class cq extends cE{constructor(g,$){super(g,"not-in",$)}matches(g){if(ux(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let $=g.data.field(this.field);return null!==$&&!ux(this.value.arrayValue,$)}}class cz extends cE{constructor(g,$){super(g,"array-contains-any",$)}matches(g){let $=g.data.field(this.field);return!!u3($)&&!!$.arrayValue.values&&$.arrayValue.values.some(g=>ux(this.value.arrayValue,g))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(g,$=null,ee=[],et=[],er=null,en=null,ei=null){this.path=g,this.collectionGroup=$,this.orderBy=ee,this.filters=et,this.limit=er,this.startAt=en,this.endAt=ei,this.memoizedCanonicalId=null}}function c$(g,$=null,ee=[],et=[],er=null,en=null,ei=null){return new cG(g,$,ee,et,er,en,ei)}function cK(g){let $=oC(g);if(null===$.memoizedCanonicalId){let g=$.path.canonicalString();null!==$.collectionGroup&&(g+="|cg:"+$.collectionGroup),g+="|f:"+$.filters.map(g=>cA(g)).join(",")+"|ob:"+$.orderBy.map(g=>cy(g)).join(","),uS($.limit)||(g+="|l:"+$.limit),$.startAt&&(g+="|lb:"+($.startAt.inclusive?"b:":"a:")+$.startAt.position.map(g=>uq(g)).join(",")),$.endAt&&(g+="|ub:"+($.endAt.inclusive?"a:":"b:")+$.endAt.position.map(g=>uq(g)).join(",")),$.memoizedCanonicalId=g}return $.memoizedCanonicalId}function cW(g){let $=g.path.canonicalString();return null!==g.collectionGroup&&($+=" collectionGroup="+g.collectionGroup),g.filters.length>0&&($+=`, filters: [${g.filters.map(g=>cx(g)).join(", ")}]`),uS(g.limit)||($+=", limit: "+g.limit),g.orderBy.length>0&&($+=`, orderBy: [${g.orderBy.map(g=>cv(g)).join(", ")}]`),g.startAt&&($+=", startAt: "+(g.startAt.inclusive?"b:":"a:")+g.startAt.position.map(g=>uq(g)).join(",")),g.endAt&&($+=", endAt: "+(g.endAt.inclusive?"a:":"b:")+g.endAt.position.map(g=>uq(g)).join(",")),`Target(${$})`}function cH(g,$){if(g.limit!==$.limit||g.orderBy.length!==$.orderBy.length)return!1;for(let ee=0;ee<g.orderBy.length;ee++)if(!cS(g.orderBy[ee],$.orderBy[ee]))return!1;if(g.filters.length!==$.filters.length)return!1;for(let ee=0;ee<g.filters.length;ee++)if(!cN(g.filters[ee],$.filters[ee]))return!1;return!!(g.collectionGroup===$.collectionGroup&&g.path.isEqual($.path)&&cf(g.startAt,$.startAt))&&cf(g.endAt,$.endAt)}function cQ(g){return oJ.isDocumentKey(g.path)&&null===g.collectionGroup&&0===g.filters.length}function cY(g,$){return g.filters.filter(g=>g instanceof cE&&g.field.isEqual($))}function cJ(g,$){let ee=o1($);if(void 0===ee)return null;for(let $ of cY(g,ee.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}function cX(g,$){let ee=new Map;for(let et of o2($))for(let $ of cY(g,et.fieldPath))switch($.op){case"==":case"in":ee.set(et.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return ee.set(et.fieldPath.canonicalString(),$.value),Array.from(ee.values())}return null}function cZ(g,$){let ee=[],et=!0;for(let er of o2($)){let $=0===er.kind?c4(g,er.fieldPath,g.startAt):c6(g,er.fieldPath,g.startAt);ee.push($.value),et&&(et=$.inclusive)}return new cl(ee,et)}function c0(g,$){let ee=[],et=!0;for(let er of o2($)){let $=0===er.kind?c6(g,er.fieldPath,g.endAt):c4(g,er.fieldPath,g.endAt);ee.push($.value),et&&(et=$.inclusive)}return new cl(ee,et)}function c4(g,$,ee){let et=u_,er=!0;for(let ee of cY(g,$)){let g=u_,$=!0;switch(ee.op){case"<":case"<=":g=u7(ee.value);break;case"==":case"in":case">=":g=ee.value;break;case">":g=ee.value,$=!1;break;case"!=":case"not-in":g=u_}0>ct({value:et,inclusive:er},{value:g,inclusive:$})&&(et=g,er=$)}if(null!==ee){for(let en=0;en<g.orderBy.length;++en)if(g.orderBy[en].field.isEqual($)){let g=ee.position[en];0>ct({value:et,inclusive:er},{value:g,inclusive:ee.inclusive})&&(et=g,er=ee.inclusive);break}}return{value:et,inclusive:er}}function c6(g,$,ee){let et=uC,er=!0;for(let ee of cY(g,$)){let g=uC,$=!0;switch(ee.op){case">=":case">":g=ce(ee.value),$=!1;break;case"==":case"in":case"<=":g=ee.value;break;case"<":g=ee.value,$=!1;break;case"!=":case"not-in":g=uC}cr({value:et,inclusive:er},{value:g,inclusive:$})>0&&(et=g,er=$)}if(null!==ee){for(let en=0;en<g.orderBy.length;++en)if(g.orderBy[en].field.isEqual($)){let g=ee.position[en];cr({value:et,inclusive:er},{value:g,inclusive:ee.inclusive})>0&&(et=g,er=ee.inclusive);break}}return{value:et,inclusive:er}}function c9(g){let $=new lZ(oY.comparator),ee=!1;for(let et of g.filters)for(let g of et.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?ee=!0:$=$.add(g.field));for(let ee of g.orderBy)ee.field.isKeyField()||($=$.add(ee.field));return $.size+(ee?1:0)}function c5(g){return null!==g.limit}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(g,$=null,ee=[],et=[],er=null,en="F",ei=null,es=null){this.path=g,this.collectionGroup=$,this.explicitOrderBy=ee,this.filters=et,this.limit=er,this.limitType=en,this.startAt=ei,this.endAt=es,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt,this.endAt}}function c7(g,$,ee,et,er,en,ei,es){return new c8(g,$,ee,et,er,en,ei,es)}function he(g){return new c8(g)}function ht(g,$){return new c8($,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}function hr(g){return 0===g.filters.length&&null===g.limit&&null==g.startAt&&null==g.endAt&&(0===g.explicitOrderBy.length||1===g.explicitOrderBy.length&&g.explicitOrderBy[0].field.isKeyField())}function hn(g){return g.explicitOrderBy.length>0?g.explicitOrderBy[0].field:null}function hs(g){for(let $ of g.filters){let g=$.getFirstInequalityField();if(null!==g)return g}return null}function ho(g){return oJ.isDocumentKey(g.path)&&null===g.collectionGroup&&0===g.filters.length}function hl(g){return null!==g.collectionGroup}function hu(g){let $=oC(g);if(null===$.memoizedOrderBy){$.memoizedOrderBy=[];let g=hs($),ee=hn($);if(null!==g&&null===ee)g.isKeyField()||$.memoizedOrderBy.push(new cm(g)),$.memoizedOrderBy.push(new cm(oY.keyField(),"asc"));else{let g=!1;for(let ee of $.explicitOrderBy)$.memoizedOrderBy.push(ee),ee.field.isKeyField()&&(g=!0);if(!g){let g=$.explicitOrderBy.length>0?$.explicitOrderBy[$.explicitOrderBy.length-1].dir:"asc";$.memoizedOrderBy.push(new cm(oY.keyField(),g))}}}return $.memoizedOrderBy}function hh(g){let $=oC(g);if(!$.memoizedTarget){if("F"===$.limitType)$.memoizedTarget=c$($.path,$.collectionGroup,hu($),$.filters,$.limit,$.startAt,$.endAt);else{let g=[];for(let ee of hu($)){let $="desc"===ee.dir?"asc":"desc";g.push(new cm(ee.field,$))}let ee=$.endAt?new cl($.endAt.position,$.endAt.inclusive):null,et=$.startAt?new cl($.startAt.position,$.startAt.inclusive):null;$.memoizedTarget=c$($.path,$.collectionGroup,g,$.filters,$.limit,ee,et)}}return $.memoizedTarget}function hp(g,$){$.getFirstInequalityField(),hs(g);let ee=g.filters.concat([$]);return new c8(g.path,g.collectionGroup,g.explicitOrderBy.slice(),ee,g.limit,g.limitType,g.startAt,g.endAt)}function hf(g,$){let ee=g.explicitOrderBy.concat([$]);return new c8(g.path,g.collectionGroup,ee,g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}function hg(g,$,ee){return new c8(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),$,ee,g.startAt,g.endAt)}function hm(g,$){return new c8(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,$,g.endAt)}function hy(g,$){return new c8(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,$)}function hv(g,$){return cH(hh(g),hh($))&&g.limitType===$.limitType}function hS(g){return`${cK(hh(g))}|lt:${g.limitType}`}function hT(g){return`Query(target=${cW(hh(g))}; limitType=${g.limitType})`}function hE(g,$){return $.isFoundDocument()&&hw(g,$)&&hC(g,$)&&h_(g,$)&&hI(g,$)}function hw(g,$){let ee=$.key.path;return null!==g.collectionGroup?$.key.hasCollectionId(g.collectionGroup)&&g.path.isPrefixOf(ee):oJ.isDocumentKey(g.path)?g.path.isEqual(ee):g.path.isImmediateParentOf(ee)}function hC(g,$){for(let ee of hu(g))if(!ee.field.isKeyField()&&null===$.data.field(ee.field))return!1;return!0}function h_(g,$){for(let ee of g.filters)if(!ee.matches($))return!1;return!0}function hI(g,$){return(!g.startAt||!!cp(g.startAt,hu(g),$))&&(!g.endAt||!!ch(g.endAt,hu(g),$))}function hO(g){return g.collectionGroup||(g.path.length%2==1?g.path.lastSegment():g.path.get(g.path.length-2))}function hA(g){return($,ee)=>{let et=!1;for(let er of hu(g)){let g=hN(er,$,ee);if(0!==g)return g;et=et||er.field.isKeyField()}return 0}}function hN(g,$,ee){let et=g.field.isKeyField()?oJ.comparator($.key,ee.key):co(g.field,$,ee);switch(g.dir){case"asc":return et;case"desc":return -1*et;default:return oE()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(g,$){this.mapKeyFn=g,this.equalsFn=$,this.inner={},this.innerSize=0}get(g){let $=this.mapKeyFn(g),ee=this.inner[$];if(void 0!==ee){for(let[$,et]of ee)if(this.equalsFn($,g))return et}}has(g){return void 0!==this.get(g)}set(g,$){let ee=this.mapKeyFn(g),et=this.inner[ee];if(void 0===et){this.inner[ee]=[[g,$]],this.innerSize++;return}for(let ee=0;ee<et.length;ee++)if(this.equalsFn(et[ee][0],g)){et[ee]=[g,$];return}et.push([g,$]),this.innerSize++}delete(g){let $=this.mapKeyFn(g),ee=this.inner[$];if(void 0===ee)return!1;for(let et=0;et<ee.length;et++)if(this.equalsFn(ee[et][0],g))return 1===ee.length?delete this.inner[$]:ee.splice(et,1),this.innerSize--,!0;return!1}forEach(g){lW(this.inner,($,ee)=>{for(let[$,et]of ee)g($,et)})}isEmpty(){return lH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hR=new lQ(oJ.comparator);function hk(){return hR}let hx=new lQ(oJ.comparator);function hP(...g){let $=hx;for(let ee of g)$=$.insert(ee.key,ee);return $}function hM(){return hj()}function hL(g){let $=hx;return g.forEach((g,ee)=>$=$.insert(g,ee.overlayedDocument)),$}function hF(){return hj()}function hB(){return hj()}function hj(){return new hD(g=>g.toString(),(g,$)=>g.isEqual($))}let hU=new lQ(oJ.comparator);function hV(){return hU}let hq=new lZ(oJ.comparator);function hz(...g){let $=hq;for(let ee of g)$=$.add(ee);return $}let hG=new lZ(oj);function h$(){return hG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(g,$){if(g.useProto3Json){if(isNaN($))return{doubleValue:"NaN"};if($===1/0)return{doubleValue:"Infinity"};if($===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uT($)?"-0":$}}function hW(g){return{integerValue:""+g}}function hH(g,$){return uE($)?hW($):hK(g,$)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(){this._=void 0}}function hY(g,$,ee){return g instanceof h0?uu(ee,$):g instanceof h1?h2(g,$):g instanceof h3?h4(g,$):h9(g,$)}function hJ(g,$,ee){return g instanceof h1?h2(g,$):g instanceof h3?h4(g,$):ee}function hX(g,$){return g instanceof h6?u2($)?$:{integerValue:0}:null}function hZ(g,$){return g instanceof h1&&$ instanceof h1||g instanceof h3&&$ instanceof h3?oU(g.elements,$.elements,uO):g instanceof h6&&$ instanceof h6?uO(g.operand,$.operand):g instanceof h0&&$ instanceof h0}class h0 extends hQ{}class h1 extends hQ{constructor(g){super(),this.elements=g}}function h2(g,$){let ee=h8($);for(let $ of g.elements)ee.some(g=>uO(g,$))||ee.push($);return{arrayValue:{values:ee}}}class h3 extends hQ{constructor(g){super(),this.elements=g}}function h4(g,$){let ee=h8($);for(let $ of g.elements)ee=ee.filter(g=>!uO(g,$));return{arrayValue:{values:ee}}}class h6 extends hQ{constructor(g,$){super(),this.serializer=g,this.operand=$}}function h9(g,$){let ee=hX(g,$),et=h5(ee)+h5(g.operand);return u0(ee)&&u0(g.operand)?hW(et):hK(g.serializer,et)}function h5(g){return ut(g.integerValue||g.doubleValue)}function h8(g){return u3(g)&&g.arrayValue.values?g.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(g,$){this.field=g,this.transform=$}}function de(g,$){return g.field.isEqual($.field)&&hZ(g.transform,$.transform)}function dt(g,$){return void 0===g&&void 0===$||!!g&&!!$&&oU(g,$,(g,$)=>de(g,$))}class dr{constructor(g,$){this.version=g,this.transformResults=$}}class dn{constructor(g,$){this.updateTime=g,this.exists=$}static none(){return new dn}static exists(g){return new dn(void 0,g)}static updateTime(g){return new dn(g)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(g){return this.exists===g.exists&&(this.updateTime?!!g.updateTime&&this.updateTime.isEqual(g.updateTime):!g.updateTime)}}function di(g,$){return void 0!==g.updateTime?$.isFoundDocument()&&$.version.isEqual(g.updateTime):void 0===g.exists||g.exists===$.isFoundDocument()}class ds{}function dl(g,$){if(!g.hasLocalMutations||$&&0===$.fields.length)return null;if(null===$)return g.isNoDocument()?new dI(g.key,dn.none()):new dg(g.key,g.data,dn.none());{let ee=g.data,et=cn.empty(),er=new lZ(oY.comparator);for(let g of $.fields)if(!er.has(g)){let $=ee.field(g);null===$&&g.length>1&&(g=g.popLast(),$=ee.field(g)),null===$?et.delete(g):et.set(g,$),er=er.add(g)}return new dS(g.key,et,new l3(er.toArray()),dn.none())}}function du(g,$,ee){g instanceof dg?dm(g,$,ee):g instanceof dS?dT(g,$,ee):dO(g,$,ee)}function dh(g,$,ee,et){return g instanceof dg?dy(g,$,ee,et):g instanceof dS?dE(g,$,ee,et):dA(g,$,ee)}function dp(g,$){let ee=null;for(let et of g.fieldTransforms){let g=$.data.field(et.field),er=hX(et.transform,g||null);null!=er&&(null===ee&&(ee=cn.empty()),ee.set(et.field,er))}return ee||null}function df(g,$){return!!(g.type===$.type&&g.key.isEqual($.key)&&g.precondition.isEqual($.precondition)&&dt(g.fieldTransforms,$.fieldTransforms))&&(0===g.type?g.value.isEqual($.value):1!==g.type||g.data.isEqual($.data)&&g.fieldMask.isEqual($.fieldMask))}class dg extends ds{constructor(g,$,ee,et=[]){super(),this.key=g,this.value=$,this.precondition=ee,this.fieldTransforms=et,this.type=0}getFieldMask(){return null}}function dm(g,$,ee){let et=g.value.clone(),er=dC(g.fieldTransforms,$,ee.transformResults);et.setAll(er),$.convertToFoundDocument(ee.version,et).setHasCommittedMutations()}function dy(g,$,ee,et){if(!di(g.precondition,$))return ee;let er=g.value.clone(),en=d_(g.fieldTransforms,et,$);return er.setAll(en),$.convertToFoundDocument($.version,er).setHasLocalMutations(),null}class dS extends ds{constructor(g,$,ee,et,er=[]){super(),this.key=g,this.data=$,this.fieldMask=ee,this.precondition=et,this.fieldTransforms=er,this.type=1}getFieldMask(){return this.fieldMask}}function dT(g,$,ee){if(!di(g.precondition,$)){$.convertToUnknownDocument(ee.version);return}let et=dC(g.fieldTransforms,$,ee.transformResults),er=$.data;er.setAll(dw(g)),er.setAll(et),$.convertToFoundDocument(ee.version,er).setHasCommittedMutations()}function dE(g,$,ee,et){if(!di(g.precondition,$))return ee;let er=d_(g.fieldTransforms,et,$),en=$.data;return(en.setAll(dw(g)),en.setAll(er),$.convertToFoundDocument($.version,en).setHasLocalMutations(),null===ee)?null:ee.unionWith(g.fieldMask.fields).unionWith(g.fieldTransforms.map(g=>g.field))}function dw(g){let $=new Map;return g.fieldMask.fields.forEach(ee=>{if(!ee.isEmpty()){let et=g.data.field(ee);$.set(ee,et)}}),$}function dC(g,$,ee){let et=new Map;ow(g.length===ee.length);for(let er=0;er<ee.length;er++){let en=g[er],ei=en.transform,es=$.data.field(en.field);et.set(en.field,hJ(ei,es,ee[er]))}return et}function d_(g,$,ee){let et=new Map;for(let er of g){let g=er.transform,en=ee.data.field(er.field);et.set(er.field,hY(g,en,$))}return et}class dI extends ds{constructor(g,$){super(),this.key=g,this.precondition=$,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function dO(g,$,ee){$.convertToNoDocument(ee.version).setHasCommittedMutations()}function dA(g,$,ee){return di(g.precondition,$)?($.convertToNoDocument($.version).setHasLocalMutations(),null):ee}class dN extends ds{constructor(g,$){super(),this.key=g,this.precondition=$,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(g,$,ee,et){this.batchId=g,this.localWriteTime=$,this.baseMutations=ee,this.mutations=et}applyToRemoteDocument(g,$){let ee=$.mutationResults;for(let $=0;$<this.mutations.length;$++){let et=this.mutations[$];et.key.isEqual(g.key)&&du(et,g,ee[$])}}applyToLocalView(g,$){for(let ee of this.baseMutations)ee.key.isEqual(g.key)&&($=dh(ee,g,$,this.localWriteTime));for(let ee of this.mutations)ee.key.isEqual(g.key)&&($=dh(ee,g,$,this.localWriteTime));return $}applyToLocalDocumentSet(g,$){let ee=hB();return this.mutations.forEach(et=>{let er=g.get(et.key),en=er.overlayedDocument,ei=this.applyToLocalView(en,er.mutatedFields),es=dl(en,ei=$.has(et.key)?null:ei);null!==es&&ee.set(et.key,es),en.isValidDocument()||en.convertToNoDocument(o$.min())}),ee}keys(){return this.mutations.reduce((g,$)=>g.add($.key),hz())}isEqual(g){return this.batchId===g.batchId&&oU(this.mutations,g.mutations,(g,$)=>df(g,$))&&oU(this.baseMutations,g.baseMutations,(g,$)=>df(g,$))}}class dR{constructor(g,$,ee,et){this.batch=g,this.commitVersion=$,this.mutationResults=ee,this.docVersions=et}static from(g,$,ee){ow(g.mutations.length===ee.length);let et=hV(),er=g.mutations;for(let g=0;g<er.length;g++)et=et.insert(er[g].key,ee[g].version);return new dR(g,$,ee,et)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(g,$){this.largestBatchId=g,this.mutation=$}getKey(){return this.mutation.key}isEqual(g){return null!==g&&this.mutation===g.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(g,$){this.count=g,this.unchangedNames=$}}function dP(g){switch(g){case o_.OK:return oE();case o_.CANCELLED:case o_.UNKNOWN:case o_.DEADLINE_EXCEEDED:case o_.RESOURCE_EXHAUSTED:case o_.INTERNAL:case o_.UNAVAILABLE:case o_.UNAUTHENTICATED:return!1;case o_.INVALID_ARGUMENT:case o_.NOT_FOUND:case o_.ALREADY_EXISTS:case o_.PERMISSION_DENIED:case o_.FAILED_PRECONDITION:case o_.ABORTED:case o_.OUT_OF_RANGE:case o_.UNIMPLEMENTED:case o_.DATA_LOSS:return!0;default:return oE()}}function dM(g){return dP(g)&&g!==o_.ABORTED}function dL(g){if(void 0===g)return ov("GRPC error has no .code"),o_.UNKNOWN;switch(g){case eo.OK:return o_.OK;case eo.CANCELLED:return o_.CANCELLED;case eo.UNKNOWN:return o_.UNKNOWN;case eo.DEADLINE_EXCEEDED:return o_.DEADLINE_EXCEEDED;case eo.RESOURCE_EXHAUSTED:return o_.RESOURCE_EXHAUSTED;case eo.INTERNAL:return o_.INTERNAL;case eo.UNAVAILABLE:return o_.UNAVAILABLE;case eo.UNAUTHENTICATED:return o_.UNAUTHENTICATED;case eo.INVALID_ARGUMENT:return o_.INVALID_ARGUMENT;case eo.NOT_FOUND:return o_.NOT_FOUND;case eo.ALREADY_EXISTS:return o_.ALREADY_EXISTS;case eo.PERMISSION_DENIED:return o_.PERMISSION_DENIED;case eo.FAILED_PRECONDITION:return o_.FAILED_PRECONDITION;case eo.ABORTED:return o_.ABORTED;case eo.OUT_OF_RANGE:return o_.OUT_OF_RANGE;case eo.UNIMPLEMENTED:return o_.UNIMPLEMENTED;case eo.DATA_LOSS:return o_.DATA_LOSS;default:return oE()}}!function(g){g[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS"}(eo||(eo={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF extends null{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return dj}static getOrCreateInstance(){return null===dj&&(dj=new dB),dj}onExistenceFilterMismatch(g){let $=Symbol();return this.onExistenceFilterMismatchCallbacks.set($,g),()=>this.onExistenceFilterMismatchCallbacks.delete($)}notifyOnExistenceFilterMismatch(g){this.onExistenceFilterMismatchCallbacks.forEach($=>$(g))}}let dj=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(){return new TextEncoder}function dV(){return new TextDecoder("utf-8")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dq=new ot([4294967295,4294967295],0);function dz(g){let $=dU().encode(g),ee=new Md5;return ee.update($),new Uint8Array(ee.digest())}function dG(g){let $=new DataView(g.buffer),ee=$.getUint32(0,!0),et=$.getUint32(4,!0),er=$.getUint32(8,!0),en=$.getUint32(12,!0);return[new Integer([ee,et],0),new Integer([er,en],0)]}class d${constructor(g,$,ee){if(this.bitmap=g,this.padding=$,this.hashCount=ee,$<0||$>=8)throw new dK(`Invalid padding: ${$}`);if(ee<0||g.length>0&&0===this.hashCount)throw new dK(`Invalid hash count: ${ee}`);if(0===g.length&&0!==$)throw new dK(`Invalid padding when bitmap length is 0: ${$}`);this.bitCount=8*g.length-$,this.bitCountInInteger=Integer.fromNumber(this.bitCount)}getBitIndex(g,$,ee){let et=g.add($.multiply(Integer.fromNumber(ee)));return 1===et.compare(dq)&&(et=new Integer([et.getBits(0),et.getBits(1)],0)),et.modulo(this.bitCountInInteger).toNumber()}isBitSet(g){return(this.bitmap[Math.floor(g/8)]&1<<g%8)!=0}mightContain(g){if(0===this.bitCount)return!1;let[$,ee]=dG(dz(g));for(let g=0;g<this.hashCount;g++){let et=this.getBitIndex($,ee,g);if(!this.isBitSet(et))return!1}return!0}static create(g,$,ee){let et=g%8==0?0:8-g%8,er=new d$(new Uint8Array(Math.ceil(g/8)),et,$);return ee.forEach(g=>er.insert(g)),er}insert(g){if(0===this.bitCount)return;let[$,ee]=dG(dz(g));for(let g=0;g<this.hashCount;g++){let et=this.getBitIndex($,ee,g);this.setBit(et)}}setBit(g){let $=Math.floor(g/8),ee=g%8;this.bitmap[$]|=1<<ee}}class dK extends null{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(g,$,ee,et,er){this.snapshotVersion=g,this.targetChanges=$,this.targetMismatches=ee,this.documentUpdates=et,this.resolvedLimboDocuments=er}static createSynthesizedRemoteEventForCurrentChange(g,$,ee){let et=new Map;return et.set(g,dH.createSynthesizedTargetChangeForCurrentChange(g,$,ee)),new dW(o$.min(),et,new lQ(oj),hk(),hz())}}class dH{constructor(g,$,ee,et,er){this.resumeToken=g,this.current=$,this.addedDocuments=ee,this.modifiedDocuments=et,this.removedDocuments=er}static createSynthesizedTargetChangeForCurrentChange(g,$,ee){return new dH(ee,$,hz(),hz(),hz())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(g,$,ee,et){this.updatedTargetIds=g,this.removedTargetIds=$,this.key=ee,this.newDoc=et}}class dY{constructor(g,$){this.targetId=g,this.existenceFilter=$}}class dJ{constructor(g,$,ee=l9.EMPTY_BYTE_STRING,et=null){this.state=g,this.targetIds=$,this.resumeToken=ee,this.cause=et}}class dX{constructor(){this.pendingResponses=0,this.documentChanges=d4(),this._resumeToken=l9.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(g){g.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=g)}toTargetChange(){let g=hz(),$=hz(),ee=hz();return this.documentChanges.forEach((et,er)=>{switch(er){case 0:g=g.add(et);break;case 2:$=$.add(et);break;case 1:ee=ee.add(et);break;default:oE()}}),new dH(this._resumeToken,this._current,g,$,ee)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=d4()}addDocumentChange(g,$){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(g,$)}removeDocumentChange(g){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(g)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let dZ="WatchChangeAggregator";class d0{constructor(g){this.metadataProvider=g,this.targetStates=new Map,this.pendingDocumentUpdates=hk(),this.pendingDocumentTargetMapping=d3(),this.pendingTargetResets=new lQ(oj)}handleDocumentChange(g){for(let $ of g.updatedTargetIds)g.newDoc&&g.newDoc.isFoundDocument()?this.addDocumentToTarget($,g.newDoc):this.removeDocumentFromTarget($,g.key,g.newDoc);for(let $ of g.removedTargetIds)this.removeDocumentFromTarget($,g.key,g.newDoc)}handleTargetChange(g){this.forEachTarget(g,$=>{let ee=this.ensureTargetState($);switch(g.state){case 0:this.isActiveTarget($)&&ee.updateResumeToken(g.resumeToken);break;case 1:ee.recordTargetResponse(),ee.isPending||ee.clearPendingChanges(),ee.updateResumeToken(g.resumeToken);break;case 2:ee.recordTargetResponse(),ee.isPending||this.removeTarget($);break;case 3:this.isActiveTarget($)&&(ee.markCurrent(),ee.updateResumeToken(g.resumeToken));break;case 4:this.isActiveTarget($)&&(this.resetTarget($),ee.updateResumeToken(g.resumeToken));break;default:oE()}})}forEachTarget(g,$){g.targetIds.length>0?g.targetIds.forEach($):this.targetStates.forEach((g,ee)=>{this.isActiveTarget(ee)&&$(ee)})}handleExistenceFilter(g){var $;let ee=g.targetId,et=g.existenceFilter.count,er=this.targetDataForActiveTarget(ee);if(er){let en=er.target;if(cQ(en)){if(0===et){let g=new oJ(en.path);this.removeDocumentFromTarget(ee,g,cs.newNoDocument(g,o$.min()))}else ow(1===et)}else{let er=this.getCurrentDocumentCountForTarget(ee);if(er!==et){let et=this.applyBloomFilter(g,er);if(0!==et){this.resetTarget(ee);let g=2===et?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(ee,g)}null===($=dB.instance)||void 0===$||$.notifyOnExistenceFilterMismatch(d6(et,er,g.existenceFilter))}}}}applyBloomFilter(g,$){let ee,et;let{unchangedNames:er,count:en}=g.existenceFilter;if(!er||!er.bits)return 1;let{bits:{bitmap:ei="",padding:es=0},hashCount:eo=0}=er;try{ee=ur(ei).toUint8Array()}catch(g){if(g instanceof dF)return oS("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw g}try{et=new d$(ee,es,eo)}catch(g){return g instanceof dK?oS("BloomFilter error: ",g):oS("Applying bloom filter failed: ",g),1}return 0===et.bitCount?1:en!==$-this.filterRemovedDocuments(g.targetId,et)?2:0}filterRemovedDocuments(g,$){let ee=this.metadataProvider.getRemoteKeysForTarget(g),et=0;return ee.forEach(ee=>{let er=this.metadataProvider.getDatabaseId(),en=`projects/${er.projectId}/databases/${er.database}/documents/${ee.path.canonicalString()}`;!$.mightContain(en)&&(this.removeDocumentFromTarget(g,ee,null),et++)}),et}createRemoteEvent(g){let $=new Map;this.targetStates.forEach((ee,et)=>{let er=this.targetDataForActiveTarget(et);if(er){if(ee.current&&cQ(er.target)){let $=new oJ(er.target.path);null!==this.pendingDocumentUpdates.get($)||this.targetContainsDocument(et,$)||this.removeDocumentFromTarget(et,$,cs.newNoDocument($,g))}ee.hasPendingChanges&&($.set(et,ee.toTargetChange()),ee.clearPendingChanges())}});let ee=hz();this.pendingDocumentTargetMapping.forEach((g,$)=>{let et=!0;$.forEachWhile(g=>{let $=this.targetDataForActiveTarget(g);return!$||"TargetPurposeLimboResolution"===$.purpose||(et=!1,!1)}),et&&(ee=ee.add(g))}),this.pendingDocumentUpdates.forEach(($,ee)=>ee.setReadTime(g));let et=new dW(g,$,this.pendingTargetResets,this.pendingDocumentUpdates,ee);return this.pendingDocumentUpdates=hk(),this.pendingDocumentTargetMapping=d3(),this.pendingTargetResets=new lQ(oj),et}addDocumentToTarget(g,$){if(!this.isActiveTarget(g))return;let ee=this.targetContainsDocument(g,$.key)?2:0;this.ensureTargetState(g).addDocumentChange($.key,ee),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert($.key,$),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert($.key,this.ensureDocumentTargetMapping($.key).add(g))}removeDocumentFromTarget(g,$,ee){if(!this.isActiveTarget(g))return;let et=this.ensureTargetState(g);this.targetContainsDocument(g,$)?et.addDocumentChange($,1):et.removeDocumentChange($),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert($,this.ensureDocumentTargetMapping($).delete(g)),ee&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert($,ee))}removeTarget(g){this.targetStates.delete(g)}getCurrentDocumentCountForTarget(g){let $=this.ensureTargetState(g).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(g).size+$.addedDocuments.size-$.removedDocuments.size}recordPendingTargetRequest(g){this.ensureTargetState(g).recordPendingTargetRequest()}ensureTargetState(g){let $=this.targetStates.get(g);return $||($=new dX,this.targetStates.set(g,$)),$}ensureDocumentTargetMapping(g){let $=this.pendingDocumentTargetMapping.get(g);return $||($=new lZ(oj),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(g,$)),$}isActiveTarget(g){let $=null!==this.targetDataForActiveTarget(g);return $||oy(dZ,"Detected inactive target",g),$}targetDataForActiveTarget(g){let $=this.targetStates.get(g);return $&&$.isPending?null:this.metadataProvider.getTargetDataForTarget(g)}resetTarget(g){this.targetStates.set(g,new dX),this.metadataProvider.getRemoteKeysForTarget(g).forEach($=>{this.removeDocumentFromTarget(g,$,null)})}targetContainsDocument(g,$){return this.metadataProvider.getRemoteKeysForTarget(g).has($)}}function d3(){return new lQ(oJ.comparator)}function d4(){return new lQ(oJ.comparator)}function d6(g,$,ee){var et,er,en,ei,es,eo;let eu={localCacheCount:$,existenceFilterCount:ee.count},eh=ee.unchangedNames;return eh&&(eu.bloomFilter={applied:0===g,hashCount:null!==(et=null==eh?void 0:eh.hashCount)&&void 0!==et?et:0,bitmapLength:null!==(ei=null===(en=null===(er=null==eh?void 0:eh.bits)||void 0===er?void 0:er.bitmap)||void 0===en?void 0:en.length)&&void 0!==ei?ei:0,padding:null!==(eo=null===(es=null==eh?void 0:eh.bits)||void 0===es?void 0:es.padding)&&void 0!==eo?eo:0}),eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d9=(()=>{let g={};return g.asc="ASCENDING",g.desc="DESCENDING",g})(),d5=(()=>{let g={};return g["<"]="LESS_THAN",g["<="]="LESS_THAN_OR_EQUAL",g[">"]="GREATER_THAN",g[">="]="GREATER_THAN_OR_EQUAL",g["=="]="EQUAL",g["!="]="NOT_EQUAL",g["array-contains"]="ARRAY_CONTAINS",g.in="IN",g["not-in"]="NOT_IN",g["array-contains-any"]="ARRAY_CONTAINS_ANY",g})(),d8=(()=>{let g={};return g.and="AND",g.or="OR",g})();class d7{constructor(g,$){this.databaseId=g,this.useProto3Json=$}}function pe(g){return new oI(void 0===g.code?o_.UNKNOWN:dL(g.code),g.message||"")}function pt(g,$){return g.useProto3Json||uS($)?$:{value:$}}function pr(g){let $;return uS($="object"==typeof g?g.value:g)?null:$}function pn(g,$){if(!g.useProto3Json)return{seconds:""+$.seconds,nanos:$.nanoseconds};{let g=new Date(1e3*$.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),ee=("000000000"+$.nanoseconds).slice(-9);return`${g}.${ee}Z`}}function pi(g){let $=ue(g);return new oG($.seconds,$.nanos)}function ps(g,$){return g.useProto3Json?$.toBase64():$.toUint8Array()}function po(g,$){return g.useProto3Json?(ow(void 0===$||"string"==typeof $),l9.fromBase64String($||"")):(ow(void 0===$||$ instanceof Uint8Array),l9.fromUint8Array($||new Uint8Array))}function pl(g,$){return pn(g,$.toTimestamp())}function pu(g){return ow(!!g),o$.fromTimestamp(pi(g))}function ph(g,$){return pS(g).child("documents").child($).canonicalString()}function pp(g){let $=oH.fromString(g);return ow(fv($)),$}function pf(g,$){return ph(g.databaseId,$.path)}function pg(g,$){let ee=pp($);if(ee.get(1)!==g.databaseId.projectId)throw new oI(o_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+ee.get(1)+" vs "+g.databaseId.projectId);if(ee.get(3)!==g.databaseId.database)throw new oI(o_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+ee.get(3)+" vs "+g.databaseId.database);return new oJ(pT(ee))}function pm(g,$){return ph(g.databaseId,$)}function py(g){let $=pp(g);return 4===$.length?oH.emptyPath():pT($)}function pv(g){return new oH(["projects",g.databaseId.projectId,"databases",g.databaseId.database]).canonicalString()}function pS(g){return new oH(["projects",g.projectId,"databases",g.database])}function pT(g){return ow(g.length>4&&"documents"===g.get(4)),g.popFirst(5)}function pE(g,$,ee){return{name:pf(g,$),fields:ee.value.mapValue.fields}}function pw(g,$){return{name:pf(g,$.key),fields:$.data.value.mapValue.fields,updateTime:pn(g,$.version.toTimestamp()),createTime:pn(g,$.createTime.toTimestamp())}}function pC(g,$,ee){let et=pg(g,$.name),er=pu($.updateTime),en=$.createTime?pu($.createTime):o$.min(),ei=new cn({mapValue:{fields:$.fields}}),es=cs.newFoundDocument(et,er,en,ei);return ee&&es.setHasCommittedMutations(),ee?es.setHasCommittedMutations():es}function p_(g,$){ow(!!$.found),$.found.name,$.found.updateTime;let ee=pg(g,$.found.name),et=pu($.found.updateTime),er=$.found.createTime?pu($.found.createTime):o$.min(),en=new cn({mapValue:{fields:$.found.fields}});return cs.newFoundDocument(ee,et,er,en)}function pI(g,$){ow(!!$.missing),ow(!!$.readTime);let ee=pg(g,$.missing),et=pu($.readTime);return cs.newNoDocument(ee,et)}function pO(g,$){return"found"in $?p_(g,$):"missing"in $?pI(g,$):oE()}function pA(g,$){let ee;if("targetChange"in $){$.targetChange;let et=pN($.targetChange.targetChangeType||"NO_CHANGE"),er=$.targetChange.targetIds||[],en=po(g,$.targetChange.resumeToken),ei=$.targetChange.cause;ee=new dJ(et,er,en,ei&&pe(ei)||null)}else if("documentChange"in $){$.documentChange;let et=$.documentChange;et.document,et.document.name,et.document.updateTime;let er=pg(g,et.document.name),en=pu(et.document.updateTime),ei=et.document.createTime?pu(et.document.createTime):o$.min(),es=new cn({mapValue:{fields:et.document.fields}}),eo=cs.newFoundDocument(er,en,ei,es);ee=new dQ(et.targetIds||[],et.removedTargetIds||[],eo.key,eo)}else if("documentDelete"in $){$.documentDelete;let et=$.documentDelete;et.document;let er=pg(g,et.document),en=et.readTime?pu(et.readTime):o$.min(),ei=cs.newNoDocument(er,en);ee=new dQ([],et.removedTargetIds||[],ei.key,ei)}else if("documentRemove"in $){$.documentRemove;let et=$.documentRemove;et.document;let er=pg(g,et.document);ee=new dQ([],et.removedTargetIds||[],er,null)}else{if(!("filter"in $))return oE();$.filter;let g=$.filter;g.targetId;let{count:et=0,unchangedNames:er}=g,en=new dx(et,er);ee=new dY(g.targetId,en)}return ee}function pN(g){return"NO_CHANGE"===g?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:oE()}function pD(g){if(!("targetChange"in g))return o$.min();let $=g.targetChange;return $.targetIds&&$.targetIds.length||!$.readTime?o$.min():pu($.readTime)}function pR(g,$){let ee;if($ instanceof dg)ee={update:pE(g,$.key,$.value)};else if($ instanceof dI)ee={delete:pf(g,$.key)};else if($ instanceof dS)ee={update:pE(g,$.key,$.data),updateMask:fm($.fieldMask)};else{if(!($ instanceof dN))return oE();ee={verify:pf(g,$.key)}}return $.fieldTransforms.length>0&&(ee.updateTransforms=$.fieldTransforms.map($=>pF(g,$))),$.precondition.isNone||(ee.currentDocument=px(g,$.precondition)),ee}function pk(g,$){let ee=$.currentDocument?pP($.currentDocument):dn.none(),et=$.updateTransforms?$.updateTransforms.map($=>pB(g,$)):[];if($.update){$.update.name;let er=pg(g,$.update.name),en=new cn({mapValue:{fields:$.update.fields}});return $.updateMask?new dS(er,en,fy($.updateMask),ee,et):new dg(er,en,ee,et)}return $.delete?new dI(pg(g,$.delete),ee):$.verify?new dN(pg(g,$.verify),ee):oE()}function px(g,$){return void 0!==$.updateTime?{updateTime:pl(g,$.updateTime)}:void 0!==$.exists?{exists:$.exists}:oE()}function pP(g){return void 0!==g.updateTime?dn.updateTime(pu(g.updateTime)):void 0!==g.exists?dn.exists(g.exists):dn.none()}function pM(g,$){let ee=g.updateTime?pu(g.updateTime):pu($);return ee.isEqual(o$.min())&&(ee=pu($)),new dr(ee,g.transformResults||[])}function pL(g,$){return g&&g.length>0?(ow(void 0!==$),g.map(g=>pM(g,$))):[]}function pF(g,$){let ee=$.transform;if(ee instanceof h0)return{fieldPath:$.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ee instanceof h1)return{fieldPath:$.field.canonicalString(),appendMissingElements:{values:ee.elements}};if(ee instanceof h3)return{fieldPath:$.field.canonicalString(),removeAllFromArray:{values:ee.elements}};if(ee instanceof h6)return{fieldPath:$.field.canonicalString(),increment:ee.operand};throw oE()}function pB(g,$){let ee=null;return"setToServerValue"in $?(ow("REQUEST_TIME"===$.setToServerValue),ee=new h0):"appendMissingElements"in $?ee=new h1($.appendMissingElements.values||[]):"removeAllFromArray"in $?ee=new h3($.removeAllFromArray.values||[]):"increment"in $?ee=new h6(g,$.increment):oE(),new h7(oY.fromServerFormat($.fieldPath),ee)}function pj(g,$){return{documents:[pm(g,$.path)]}}function pU(g){return ow(1===g.documents.length),hh(he(py(g.documents[0])))}function pV(g,$){let ee={structuredQuery:{}},et=$.path;null!==$.collectionGroup?(ee.parent=pm(g,et),ee.structuredQuery.from=[{collectionId:$.collectionGroup,allDescendants:!0}]):(ee.parent=pm(g,et.popLast()),ee.structuredQuery.from=[{collectionId:et.lastSegment()}]);let er=pH($.filters);er&&(ee.structuredQuery.where=er);let en=pJ($.orderBy);en&&(ee.structuredQuery.orderBy=en);let ei=pt(g,$.limit);return null!==ei&&(ee.structuredQuery.limit=ei),$.startAt&&(ee.structuredQuery.startAt=pZ($.startAt)),$.endAt&&(ee.structuredQuery.endAt=p0($.endAt)),ee}function pq(g,$,ee){let et=pV(g,$),er={},en=[],ei=0;return ee.forEach(g=>{let $=`aggregate_${ei++}`;er[$]=g.alias,"count"===g.aggregateType?en.push({alias:$,count:{}}):"avg"===g.aggregateType?en.push({alias:$,avg:{field:ft(g.fieldPath)}}):"sum"===g.aggregateType&&en.push({alias:$,sum:{field:ft(g.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:en,structuredQuery:et.structuredQuery},parent:et.parent},aliasMap:er}}function pz(g){let $=py(g.parent),ee=g.structuredQuery,et=ee.from?ee.from.length:0,er=null;if(et>0){ow(1===et);let g=ee.from[0];g.allDescendants?er=g.collectionId:$=$.child(g.collectionId)}let en=[];ee.where&&(en=pQ(ee.where));let ei=[];ee.orderBy&&(ei=pX(ee.orderBy));let es=null;ee.limit&&(es=pr(ee.limit));let eo=null;ee.startAt&&(eo=p3(ee.startAt));let eu=null;return ee.endAt&&(eu=p4(ee.endAt)),c7($,er,ei,en,es,"F",eo,eu)}function pG(g){return hh(pz(g))}function p$(g,$){let ee=pK($.purpose);return null==ee?null:{"goog-listen-tags":ee}}function pK(g){switch(g){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oE()}}function pW(g,$){let ee;let et=$.target;if((ee=cQ(et)?{documents:pj(g,et)}:{query:pV(g,et)}).targetId=$.targetId,$.resumeToken.approximateByteSize()>0){ee.resumeToken=ps(g,$.resumeToken);let et=pt(g,$.expectedCount);null!==et&&(ee.expectedCount=et)}else if($.snapshotVersion.compareTo(o$.min())>0){ee.readTime=pn(g,$.snapshotVersion.toTimestamp());let et=pt(g,$.expectedCount);null!==et&&(ee.expectedCount=et)}return ee}function pH(g){if(0!==g.length)return fl(cw.create(g,"and"))}function pQ(g){let $=pY(g);return $ instanceof cw&&cI($)?$.getFilters():[$]}function pY(g){return void 0!==g.unaryFilter?fp(g):void 0!==g.fieldFilter?ff(g):void 0!==g.compositeFilter?fg(g):oE()}function pJ(g){if(0!==g.length)return g.map(g=>fi(g))}function pX(g){return g.map(g=>fo(g))}function pZ(g){return{before:g.inclusive,values:g.position}}function p0(g){return{before:!g.inclusive,values:g.position}}function p3(g){let $=!!g.before;return new cl(g.values||[],$)}function p4(g){let $=!g.before;return new cl(g.values||[],$)}function p6(g){return d9[g]}function p9(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function p5(g){return d5[g]}function p8(g){return d8[g]}function p7(g){switch(g){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oE()}}function fe(g){switch(g){case"AND":return"and";case"OR":return"or";default:return oE()}}function ft(g){return{fieldPath:g.canonicalString()}}function fr(g){return oY.fromServerFormat(g.fieldPath)}function fi(g){return{field:ft(g.field),direction:p6(g.dir)}}function fo(g){return new cm(fr(g.field),p9(g.direction))}function fl(g){return g instanceof cE?fh(g):g instanceof cw?fu(g):oE()}function fu(g){let $=g.getFilters().map(g=>fl(g));return 1===$.length?$[0]:{compositeFilter:{op:p8(g.op),filters:$}}}function fh(g){if("=="===g.op){if(u6(g.value))return{unaryFilter:{field:ft(g.field),op:"IS_NAN"}};if(u4(g.value))return{unaryFilter:{field:ft(g.field),op:"IS_NULL"}}}else if("!="===g.op){if(u6(g.value))return{unaryFilter:{field:ft(g.field),op:"IS_NOT_NAN"}};if(u4(g.value))return{unaryFilter:{field:ft(g.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ft(g.field),op:p5(g.op),value:g.value}}}function fp(g){switch(g.unaryFilter.op){case"IS_NAN":let $=fr(g.unaryFilter.field);return cE.create($,"==",{doubleValue:NaN});case"IS_NULL":let ee=fr(g.unaryFilter.field);return cE.create(ee,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let et=fr(g.unaryFilter.field);return cE.create(et,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let er=fr(g.unaryFilter.field);return cE.create(er,"!=",{nullValue:"NULL_VALUE"});default:return oE()}}function ff(g){return cE.create(fr(g.fieldFilter.field),p7(g.fieldFilter.op),g.fieldFilter.value)}function fg(g){return cw.create(g.compositeFilter.filters.map(g=>pY(g)),fe(g.compositeFilter.op))}function fm(g){let $=[];return g.fields.forEach(g=>$.push(g.canonicalString())),{fieldPaths:$}}function fy(g){return new l3((g.fieldPaths||[]).map(g=>oY.fromServerFormat(g)))}function fv(g){return g.length>=4&&"projects"===g.get(0)&&"databases"===g.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(g,$,ee,et,er=o$.min(),en=o$.min(),ei=l9.EMPTY_BYTE_STRING,es=null){this.target=g,this.targetId=$,this.purpose=ee,this.sequenceNumber=et,this.snapshotVersion=er,this.lastLimboFreeSnapshotVersion=en,this.resumeToken=ei,this.expectedCount=es}withSequenceNumber(g){return new fS(this.target,this.targetId,this.purpose,g,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(g,$){return new fS(this.target,this.targetId,this.purpose,this.sequenceNumber,$,this.lastLimboFreeSnapshotVersion,g,null)}withExpectedCount(g){return new fS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,g)}withLastLimboFreeSnapshotVersion(g){return new fS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,g,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(g){this.remoteSerializer=g}}function fE(g,$){let ee;if($.document)ee=pC(g.remoteSerializer,$.document,!!$.hasCommittedMutations);else if($.noDocument){let g=oJ.fromSegments($.noDocument.path),et=fO($.noDocument.readTime);ee=cs.newNoDocument(g,et),$.hasCommittedMutations&&ee.setHasCommittedMutations()}else{if(!$.unknownDocument)return oE();let g=oJ.fromSegments($.unknownDocument.path),et=fO($.unknownDocument.version);ee=cs.newUnknownDocument(g,et)}return $.readTime&&ee.setReadTime(f_($.readTime)),ee}function fw(g,$){let ee=$.key,et={prefixPath:ee.getCollectionPath().popLast().toArray(),collectionGroup:ee.collectionGroup,documentId:ee.path.lastSegment(),readTime:fC($.readTime),hasCommittedMutations:$.hasCommittedMutations};if($.isFoundDocument())et.document=pw(g.remoteSerializer,$);else if($.isNoDocument())et.noDocument={path:ee.path.toArray(),readTime:fI($.version)};else{if(!$.isUnknownDocument())return oE();et.unknownDocument={path:ee.path.toArray(),version:fI($.version)}}return et}function fC(g){let $=g.toTimestamp();return[$.seconds,$.nanoseconds]}function f_(g){let $=new oG(g[0],g[1]);return o$.fromTimestamp($)}function fI(g){let $=g.toTimestamp();return{seconds:$.seconds,nanoseconds:$.nanoseconds}}function fO(g){let $=new oG(g.seconds,g.nanoseconds);return o$.fromTimestamp($)}function fA(g,$,ee){let et=ee.baseMutations.map($=>pR(g.remoteSerializer,$)),er=ee.mutations.map($=>pR(g.remoteSerializer,$));return{userId:$,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:et,mutations:er}}function fN(g,$){let ee=($.baseMutations||[]).map($=>pk(g.remoteSerializer,$));for(let g=0;g<$.mutations.length-1;++g){let ee=$.mutations[g];if(g+1<$.mutations.length&&void 0!==$.mutations[g+1].transform){let et=$.mutations[g+1];ee.updateTransforms=et.transform.fieldTransforms,$.mutations.splice(g+1,1),++g}}let et=$.mutations.map($=>pk(g.remoteSerializer,$)),er=oG.fromMillis($.localWriteTimeMs);return new dD($.batchId,er,ee,et)}function fD(g){let $;let ee=fO(g.readTime),et=void 0!==g.lastLimboFreeSnapshotVersion?fO(g.lastLimboFreeSnapshotVersion):o$.min();return new fS($=fk(g.query)?pU(g.query):pG(g.query),g.targetId,"TargetPurposeListen",g.lastListenSequenceNumber,ee,et,l9.fromBase64String(g.resumeToken))}function fR(g,$){let ee;let et=fI($.snapshotVersion),er=fI($.lastLimboFreeSnapshotVersion);ee=cQ($.target)?pj(g.remoteSerializer,$.target):pV(g.remoteSerializer,$.target);let en=$.resumeToken.toBase64();return{targetId:$.targetId,canonicalId:cK($.target),readTime:et,resumeToken:en,lastListenSequenceNumber:$.sequenceNumber,lastLimboFreeSnapshotVersion:er,query:ee}}function fk(g){return void 0!==g.documents}function fx(g){return{id:g.bundleId,createTime:fO(g.createTime),version:g.version}}function fP(g){return{bundleId:g.id,createTime:fI(pu(g.createTime)),version:g.version}}function fM(g){return{name:g.name,query:fF(g.bundledQuery),readTime:fO(g.readTime)}}function fL(g){return{name:g.name,readTime:fI(pu(g.readTime)),bundledQuery:g.bundledQuery}}function fF(g){let $=pz({parent:g.parent,structuredQuery:g.structuredQuery});return"LAST"===g.limitType?hg($,$.limit,"L"):$}function fB(g){return{name:g.name,query:fF(g.bundledQuery),readTime:pu(g.readTime)}}function fj(g){return{id:g.id,version:g.version,createTime:pu(g.createTime)}}function fU(g,$){return new dk($.largestBatchId,pk(g.remoteSerializer,$.overlayMutation))}function fV(g,$,ee){let[et,er,en]=fq($,ee.mutation.key);return{userId:$,collectionPath:er,documentId:en,collectionGroup:ee.mutation.key.getCollectionGroup(),largestBatchId:ee.largestBatchId,overlayMutation:pR(g.remoteSerializer,ee.mutation)}}function fq(g,$){let ee=$.path.lastSegment();return[g,aP($.path.popLast()),ee]}function fz(g){return{indexId:g.indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}function fG(g,$){let ee=$?new o8($.sequenceNumber,new ar(fO($.readTime),new oJ(aF($.documentKey)),$.largestBatchId)):o8.empty(),et=g.fields.map(([g,$])=>new o9(oY.fromServerFormat(g),$));return new o0(g.indexId,g.collectionGroup,et,ee)}function f$(g,$,ee,et){return{indexId:g,uid:$.uid||"",sequenceNumber:ee,readTime:fI(et.readTime),documentKey:aP(et.documentKey.path),largestBatchId:et.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{getBundleMetadata(g,$){return fW(g).get($).next(g=>{if(g)return fx(g)})}saveBundleMetadata(g,$){return fW(g).put(fP($))}getNamedQuery(g,$){return fH(g).get($).next(g=>{if(g)return fM(g)})}saveNamedQuery(g,$){return fH(g).put(fL($))}}function fW(g){return l$(g,lg)}function fH(g){return l$(g,ly)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(g,$){this.serializer=g,this.userId=$}static forUser(g,$){return new fQ(g,$.uid||"")}getOverlay(g,$){return fY(g).get(fq(this.userId,$)).next(g=>g?fU(this.serializer,g):null)}getOverlays(g,$){let ee=hF();return al.forEach($,$=>this.getOverlay(g,$).next(g=>{null!==g&&ee.set($,g)})).next(()=>ee)}saveOverlays(g,$,ee){let et=[];return ee.forEach((ee,er)=>{let en=new dk($,er);et.push(this.saveOverlay(g,en))}),al.waitFor(et)}removeOverlaysForBatchId(g,$,ee){let et=new Set;$.forEach(g=>et.add(aP(g.getCollectionPath())));let er=[];return et.forEach($=>{let et=IDBKeyRange.bound([this.userId,$,ee],[this.userId,$,ee+1],!1,!0);er.push(fY(g).deleteAll(lP,et))}),al.waitFor(er)}getOverlaysForCollection(g,$,ee){let et=hF(),er=aP($),en=IDBKeyRange.bound([this.userId,er,ee],[this.userId,er,Number.POSITIVE_INFINITY],!0);return fY(g).loadAll(lP,en).next(g=>{for(let $ of g){let g=fU(this.serializer,$);et.set(g.getKey(),g)}return et})}getOverlaysForCollectionGroup(g,$,ee,et){let er;let en=hF(),ei=IDBKeyRange.bound([this.userId,$,ee],[this.userId,$,Number.POSITIVE_INFINITY],!0);return fY(g).iterate({index:lL,range:ei},(g,$,ee)=>{let ei=fU(this.serializer,$);en.size()<et||ei.largestBatchId===er?(en.set(ei.getKey(),ei),er=ei.largestBatchId):ee.done()}).next(()=>en)}saveOverlay(g,$){return fY(g).put(fV(this.serializer,this.userId,$))}}function fY(g){return l$(g,lk)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fJ=5,fX=10,fZ=13,f0=15,f3=20,f4=25,f6=30,f9=37,f5=45,f8=50,f7=55,ge=60,gt=2;class gr{constructor(){}writeIndexValue(g,$){this.writeIndexValueAux(g,$),$.writeInfinity()}writeIndexValueAux(g,$){if("nullValue"in g)this.writeValueTypeLabel($,fJ);else if("booleanValue"in g)this.writeValueTypeLabel($,fX),$.writeNumber(g.booleanValue?1:0);else if("integerValue"in g)this.writeValueTypeLabel($,f0),$.writeNumber(ut(g.integerValue));else if("doubleValue"in g){let ee=ut(g.doubleValue);isNaN(ee)?this.writeValueTypeLabel($,fZ):(this.writeValueTypeLabel($,f0),uT(ee)?$.writeNumber(0):$.writeNumber(ee))}else if("timestampValue"in g){let ee=g.timestampValue;this.writeValueTypeLabel($,f3),"string"==typeof ee?$.writeString(ee):($.writeString(`${ee.seconds||""}`),$.writeNumber(ee.nanos||0))}else if("stringValue"in g)this.writeIndexString(g.stringValue,$),this.writeTruncationMarker($);else if("bytesValue"in g)this.writeValueTypeLabel($,f6),$.writeBytes(ur(g.bytesValue)),this.writeTruncationMarker($);else if("referenceValue"in g)this.writeIndexEntityRef(g.referenceValue,$);else if("geoPointValue"in g){let ee=g.geoPointValue;this.writeValueTypeLabel($,f5),$.writeNumber(ee.latitude||0),$.writeNumber(ee.longitude||0)}else"mapValue"in g?u8(g)?this.writeValueTypeLabel($,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(g.mapValue,$),this.writeTruncationMarker($)):"arrayValue"in g?(this.writeIndexArray(g.arrayValue,$),this.writeTruncationMarker($)):oE()}writeIndexString(g,$){this.writeValueTypeLabel($,f4),this.writeUnlabeledIndexString(g,$)}writeUnlabeledIndexString(g,$){$.writeString(g)}writeIndexMap(g,$){let ee=g.fields||{};for(let g of(this.writeValueTypeLabel($,f7),Object.keys(ee)))this.writeIndexString(g,$),this.writeIndexValueAux(ee[g],$)}writeIndexArray(g,$){let ee=g.values||[];for(let g of(this.writeValueTypeLabel($,f8),ee))this.writeIndexValueAux(g,$)}writeIndexEntityRef(g,$){this.writeValueTypeLabel($,f9),oJ.fromName(g).path.forEach(g=>{this.writeValueTypeLabel($,ge),this.writeUnlabeledIndexString(g,$)})}writeValueTypeLabel(g,$){g.writeNumber($)}writeTruncationMarker(g){g.writeNumber(gt)}}gr.INSTANCE=new gr;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn="\uD800",gi="\uDBFF",gs=0,go=255,ga=1,gl=255,gu=255,gh=0,gp=64,gf=8,gg=1024;function gm(g){let $=new DataView(new ArrayBuffer(8));return $.setFloat64(0,g,!1),new Uint8Array($.buffer)}function gy(g){if(0===g)return 8;let $=0;return g>>4==0&&($+=4,g<<=4),g>>6==0&&($+=2,g<<=2),g>>7==0&&($+=1),$}function gv(g){let $=0;for(let ee=0;ee<8;++ee){let et=gy(255&g[ee]);if($+=et,8!==et)break}return $}function gS(g){return Math.ceil((gp-gv(g))/gf)}class gT{constructor(){this.buffer=new Uint8Array(gg),this.position=0}writeBytesAscending(g){let $=g[Symbol.iterator](),ee=$.next();for(;!ee.done;)this.writeByteAscending(ee.value),ee=$.next();this.writeSeparatorAscending()}writeBytesDescending(g){let $=g[Symbol.iterator](),ee=$.next();for(;!ee.done;)this.writeByteDescending(ee.value),ee=$.next();this.writeSeparatorDescending()}writeUtf8Ascending(g){for(let $ of g){let g=$.charCodeAt(0);if(g<128)this.writeByteAscending(g);else if(g<2048)this.writeByteAscending(960|g>>>6),this.writeByteAscending(128|63&g);else if($<gn||gi<$)this.writeByteAscending(480|g>>>12),this.writeByteAscending(128|63&g>>>6),this.writeByteAscending(128|63&g);else{let g=$.codePointAt(0);this.writeByteAscending(240|g>>>18),this.writeByteAscending(128|63&g>>>12),this.writeByteAscending(128|63&g>>>6),this.writeByteAscending(128|63&g)}}this.writeSeparatorAscending()}writeUtf8Descending(g){for(let $ of g){let g=$.charCodeAt(0);if(g<128)this.writeByteDescending(g);else if(g<2048)this.writeByteDescending(960|g>>>6),this.writeByteDescending(128|63&g);else if($<gn||gi<$)this.writeByteDescending(480|g>>>12),this.writeByteDescending(128|63&g>>>6),this.writeByteDescending(128|63&g);else{let g=$.codePointAt(0);this.writeByteDescending(240|g>>>18),this.writeByteDescending(128|63&g>>>12),this.writeByteDescending(128|63&g>>>6),this.writeByteDescending(128|63&g)}}this.writeSeparatorDescending()}writeNumberAscending(g){let $=this.toOrderedBits(g),ee=gS($);this.ensureAvailable(1+ee),this.buffer[this.position++]=255&ee;for(let g=$.length-ee;g<$.length;++g)this.buffer[this.position++]=255&$[g]}writeNumberDescending(g){let $=this.toOrderedBits(g),ee=gS($);this.ensureAvailable(1+ee),this.buffer[this.position++]=~(255&ee);for(let g=$.length-ee;g<$.length;++g)this.buffer[this.position++]=~(255&$[g])}writeInfinityAscending(){this.writeEscapedByteAscending(gl),this.writeEscapedByteAscending(gu)}writeInfinityDescending(){this.writeEscapedByteDescending(gl),this.writeEscapedByteDescending(gu)}reset(){this.position=0}seed(g){this.ensureAvailable(g.length),this.buffer.set(g,this.position),this.position+=g.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(g){let $=gm(g),ee=(128&$[0])!=0;$[0]^=ee?255:128;for(let g=1;g<$.length;++g)$[g]^=ee?255:0;return $}writeByteAscending(g){let $=255&g;$===gs?(this.writeEscapedByteAscending(gs),this.writeEscapedByteAscending(go)):$===gl?(this.writeEscapedByteAscending(gl),this.writeEscapedByteAscending(gh)):this.writeEscapedByteAscending($)}writeByteDescending(g){let $=255&g;$===gs?(this.writeEscapedByteDescending(gs),this.writeEscapedByteDescending(go)):$===gl?(this.writeEscapedByteDescending(gl),this.writeEscapedByteDescending(gh)):this.writeEscapedByteDescending(g)}writeSeparatorAscending(){this.writeEscapedByteAscending(gs),this.writeEscapedByteAscending(ga)}writeSeparatorDescending(){this.writeEscapedByteDescending(gs),this.writeEscapedByteDescending(ga)}writeEscapedByteAscending(g){this.ensureAvailable(1),this.buffer[this.position++]=g}writeEscapedByteDescending(g){this.ensureAvailable(1),this.buffer[this.position++]=~g}ensureAvailable(g){let $=g+this.position;if($<=this.buffer.length)return;let ee=2*this.buffer.length;ee<$&&(ee=$);let et=new Uint8Array(ee);et.set(this.buffer),this.buffer=et}}class gE{constructor(g){this.orderedCode=g}writeBytes(g){this.orderedCode.writeBytesAscending(g)}writeString(g){this.orderedCode.writeUtf8Ascending(g)}writeNumber(g){this.orderedCode.writeNumberAscending(g)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class gw{constructor(g){this.orderedCode=g}writeBytes(g){this.orderedCode.writeBytesDescending(g)}writeString(g){this.orderedCode.writeUtf8Descending(g)}writeNumber(g){this.orderedCode.writeNumberDescending(g)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class gC{constructor(){this.orderedCode=new gT,this.ascending=new gE(this.orderedCode),this.descending=new gw(this.orderedCode)}seed(g){this.orderedCode.seed(g)}forKind(g){return 0===g?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(g,$,ee,et){this.indexId=g,this.documentKey=$,this.arrayValue=ee,this.directionalValue=et}successor(){let g=this.directionalValue.length,$=0===g||255===this.directionalValue[g-1]?g+1:g,ee=new Uint8Array($);return ee.set(this.directionalValue,0),$!==g?ee.set([0],this.directionalValue.length):++ee[ee.length-1],new g_(this.indexId,this.documentKey,this.arrayValue,ee)}}function gI(g,$){let ee=g.indexId-$.indexId;return 0!==ee||0!==(ee=gO(g.arrayValue,$.arrayValue))||0!==(ee=gO(g.directionalValue,$.directionalValue))?ee:oJ.comparator(g.documentKey,$.documentKey)}function gO(g,$){for(let ee=0;ee<g.length&&ee<$.length;++ee){let et=g[ee]-$[ee];if(0!==et)return et}return g.length-$.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(g){for(let $ of(this.collectionId=null!=g.collectionGroup?g.collectionGroup:g.path.lastSegment(),this.orderBys=g.orderBy,this.equalityFilters=[],g.filters)){let g=$;g.isInequality()?this.inequalityFilter=g:this.equalityFilters.push(g)}}servedByIndex(g){ow(g.collectionGroup===this.collectionId);let $=o1(g);if(void 0!==$&&!this.hasMatchingEqualityFilter($))return!1;let ee=o2(g),et=new Set,er=0,en=0;for(;er<ee.length;++er)if(this.hasMatchingEqualityFilter(ee[er]))et=et.add(ee[er].fieldPath.canonicalString());else break;if(er===ee.length)return!0;if(void 0!==this.inequalityFilter){if(!et.has(this.inequalityFilter.field.canonicalString())){let g=ee[er];if(!this.matchesFilter(this.inequalityFilter,g)||!this.matchesOrderBy(this.orderBys[en++],g))return!1}++er}for(;er<ee.length;++er){let g=ee[er];if(en>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[en++],g))return!1}return!0}hasMatchingEqualityFilter(g){for(let $ of this.equalityFilters)if(this.matchesFilter($,g))return!0;return!1}matchesFilter(g,$){if(void 0===g||!g.field.isEqual($.fieldPath))return!1;let ee="array-contains"===g.op||"array-contains-any"===g.op;return 2===$.kind===ee}matchesOrderBy(g,$){return!!g.field.isEqual($.fieldPath)&&(0===$.kind&&"asc"===g.dir||1===$.kind&&"desc"===g.dir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(g){var $,ee;if(ow(g instanceof cE||g instanceof cw),g instanceof cE){if(!(g instanceof cV))return g;{let et=(null===(ee=null===($=g.value.arrayValue)||void 0===$?void 0:$.values)||void 0===ee?void 0:ee.map($=>cE.create(g.field,"==",$)))||[];return cw.create(et,"or")}}let et=g.filters.map(g=>gN(g));return cw.create(et,g.op)}function gD(g){if(0===g.getFilters().length)return[];let $=gM(gN(g));return(ow(gx($)),gR($)||gk($))?[$]:$.getFilters()}function gR(g){return g instanceof cE}function gk(g){return g instanceof cw&&cI(g)}function gx(g){return gR(g)||gk(g)||gP(g)}function gP(g){if(g instanceof cw&&c_(g)){for(let $ of g.getFilters())if(!gR($)&&!gk($))return!1;return!0}return!1}function gM(g){if(ow(g instanceof cE||g instanceof cw),g instanceof cE)return g;if(1===g.filters.length)return gM(g.filters[0]);let $=g.filters.map(g=>gM(g)),ee=cw.create($,g.op);return gx(ee=gU(ee))?ee:(ow(ee instanceof cw),ow(cC(ee)),ow(ee.filters.length>1),ee.filters.reduce((g,$)=>gL(g,$)))}function gL(g,$){let ee;return ow(g instanceof cE||g instanceof cw),ow($ instanceof cE||$ instanceof cw),gU(ee=g instanceof cE?$ instanceof cE?gF(g,$):gj(g,$):$ instanceof cE?gj($,g):gB(g,$))}function gF(g,$){return cw.create([g,$],"and")}function gB(g,$){if(ow(g.filters.length>0&&$.filters.length>0),cC(g)&&cC($))return ck(g,$.getFilters());let ee=c_(g)?g:$,et=c_(g)?$:g,er=ee.filters.map(g=>gL(g,et));return cw.create(er,"or")}function gj(g,$){if(cC($))return ck($,g.getFilters());{let ee=$.filters.map($=>gL(g,$));return cw.create(ee,"or")}}function gU(g){if(ow(g instanceof cE||g instanceof cw),g instanceof cE)return g;let $=g.getFilters();if(1===$.length)return gU($[0]);if(cO(g))return g;let ee=$.map(g=>gU(g)),et=[];return(ee.forEach($=>{$ instanceof cE?et.push($):$ instanceof cw&&($.op===g.op?et.push(...$.filters):et.push($))}),1===et.length)?et[0]:cw.create(et,g.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.collectionParentIndex=new gq}addToCollectionParentIndex(g,$){return this.collectionParentIndex.add($),al.resolve()}getCollectionParents(g,$){return al.resolve(this.collectionParentIndex.getEntries($))}addFieldIndex(g,$){return al.resolve()}deleteFieldIndex(g,$){return al.resolve()}getDocumentsMatchingTarget(g,$){return al.resolve(null)}getIndexType(g,$){return al.resolve(0)}getFieldIndexes(g,$){return al.resolve([])}getNextCollectionGroupToUpdate(g){return al.resolve(null)}getMinOffset(g,$){return al.resolve(ar.min())}getMinOffsetFromCollectionGroup(g,$){return al.resolve(ar.min())}updateCollectionGroup(g,$,ee){return al.resolve()}updateIndexEntries(g,$){return al.resolve()}}class gq{constructor(){this.index={}}add(g){let $=g.lastSegment(),ee=g.popLast(),et=this.index[$]||new lZ(oH.comparator),er=!et.has(ee);return this.index[$]=et.add(ee),er}has(g){let $=g.lastSegment(),ee=g.popLast(),et=this.index[$];return et&&et.has(ee)}getEntries(g){return(this.index[g]||new lZ(oH.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gz="IndexedDbIndexManager",gG=new Uint8Array(0);class g${constructor(g,$){this.user=g,this.databaseId=$,this.collectionParentsCache=new gq,this.targetToDnfSubTargets=new hD(g=>cK(g),(g,$)=>cH(g,$)),this.uid=g.uid||""}addToCollectionParentIndex(g,$){if(!this.collectionParentsCache.has($)){let ee=$.lastSegment(),et=$.popLast();g.addOnCommittedListener(()=>{this.collectionParentsCache.add($)});let er={collectionId:ee,parent:aP(et)};return gK(g).put(er)}return al.resolve()}getCollectionParents(g,$){let ee=[],et=IDBKeyRange.bound([$,""],[oV($),""],!1,!0);return gK(g).loadAll(et).next(g=>{for(let et of g){if(et.collectionId!==$)break;ee.push(aF(et.parent))}return ee})}addFieldIndex(g,$){let ee=gH(g),et=fz($);delete et.indexId;let er=ee.add(et);if(!$.indexState)return er.next();{let ee=gQ(g);return er.next(g=>{ee.put(f$(g,this.user,$.indexState.sequenceNumber,$.indexState.offset))})}}deleteFieldIndex(g,$){let ee=gH(g),et=gQ(g),er=gW(g);return ee.delete($.indexId).next(()=>et.delete(IDBKeyRange.bound([$.indexId],[$.indexId+1],!1,!0))).next(()=>er.delete(IDBKeyRange.bound([$.indexId],[$.indexId+1],!1,!0)))}getDocumentsMatchingTarget(g,$){let ee=gW(g),et=!0,er=new Map;return al.forEach(this.getSubTargets($),$=>this.getFieldIndex(g,$).next(g=>{et&&(et=!!g),er.set($,g)})).next(()=>{if(!et)return al.resolve(null);{let g=hz(),et=[];return al.forEach(er,(er,en)=>{oy(gz,`Using index ${o6(er)} to execute ${cK($)}`);let ei=cJ(en,er),es=cX(en,er),eo=cZ(en,er),eu=c0(en,er),eh=this.encodeBound(er,en,eo),ep=this.encodeBound(er,en,eu),ef=this.encodeValues(er,en,es),eg=this.generateIndexRanges(er.indexId,ei,eh,eo.inclusive,ep,eu.inclusive,ef);return al.forEach(eg,er=>ee.loadFirst(er,$.limit).next($=>{$.forEach($=>{let ee=oJ.fromSegments($.documentKey);g.has(ee)||(g=g.add(ee),et.push(ee))})}))}).next(()=>et)}})}getSubTargets(g){let $=this.targetToDnfSubTargets.get(g);return $||($=0===g.filters.length?[g]:gD(cw.create(g.filters,"and")).map($=>c$(g.path,g.collectionGroup,g.orderBy,$.getFilters(),g.limit,g.startAt,g.endAt)),this.targetToDnfSubTargets.set(g,$)),$}generateIndexRanges(g,$,ee,et,er,en,ei){let es=(null!=$?$.length:1)*Math.max(ee.length,er.length),eo=es/(null!=$?$.length:1),eu=[];for(let eh=0;eh<es;++eh){let es=$?this.encodeSingleElement($[eh/eo]):gG,ep=this.generateLowerBound(g,es,ee[eh%eo],et),ef=this.generateUpperBound(g,es,er[eh%eo],en),eg=ei.map($=>this.generateLowerBound(g,es,$,!0));eu.push(...this.createRange(ep,ef,eg))}return eu}generateLowerBound(g,$,ee,et){let er=new g_(g,oJ.empty(),$,ee);return et?er:er.successor()}generateUpperBound(g,$,ee,et){let er=new g_(g,oJ.empty(),$,ee);return et?er.successor():er}getFieldIndex(g,$){let ee=new gA($),et=null!=$.collectionGroup?$.collectionGroup:$.path.lastSegment();return this.getFieldIndexes(g,et).next(g=>{let $=null;for(let et of g)ee.servedByIndex(et)&&(!$||et.fields.length>$.fields.length)&&($=et);return $})}getIndexType(g,$){let ee=2,et=this.getSubTargets($);return al.forEach(et,$=>this.getFieldIndex(g,$).next(g=>{g?0!==ee&&g.fields.length<c9($)&&(ee=1):ee=0})).next(()=>c5($)&&et.length>1&&2===ee?1:ee)}encodeDirectionalElements(g,$){let ee=new gC;for(let et of o2(g)){let g=$.data.field(et.fieldPath);if(null==g)return null;let er=ee.forKind(et.kind);gr.INSTANCE.writeIndexValue(g,er)}return ee.encodedBytes()}encodeSingleElement(g){let $=new gC;return gr.INSTANCE.writeIndexValue(g,$.forKind(0)),$.encodedBytes()}encodeDirectionalKey(g,$){let ee=new gC;return gr.INSTANCE.writeIndexValue(uZ(this.databaseId,$),ee.forKind(o3(g))),ee.encodedBytes()}encodeValues(g,$,ee){if(null===ee)return[];let et=[];et.push(new gC);let er=0;for(let en of o2(g)){let g=ee[er++];for(let ee of et)if(this.isInFilter($,en.fieldPath)&&u3(g))et=this.expandIndexValues(et,en,g);else{let $=ee.forKind(en.kind);gr.INSTANCE.writeIndexValue(g,$)}}return this.getEncodedBytes(et)}encodeBound(g,$,ee){return this.encodeValues(g,$,ee.position)}getEncodedBytes(g){let $=[];for(let ee=0;ee<g.length;++ee)$[ee]=g[ee].encodedBytes();return $}expandIndexValues(g,$,ee){let et=[...g],er=[];for(let g of ee.arrayValue.values||[])for(let ee of et){let et=new gC;et.seed(ee.encodedBytes()),gr.INSTANCE.writeIndexValue(g,et.forKind($.kind)),er.push(et)}return er}isInFilter(g,$){return!!g.filters.find(g=>g instanceof cE&&g.field.isEqual($)&&("in"===g.op||"not-in"===g.op))}getFieldIndexes(g,$){let ee=gH(g),et=gQ(g);return($?ee.loadAll(lE,IDBKeyRange.bound($,$)):ee.loadAll()).next(g=>{let $=[];return al.forEach(g,g=>et.get([g.indexId,this.uid]).next(ee=>{$.push(fG(g,ee))})).next(()=>$)})}getNextCollectionGroupToUpdate(g){return this.getFieldIndexes(g).next(g=>0===g.length?null:(g.sort((g,$)=>{let ee=g.indexState.sequenceNumber-$.indexState.sequenceNumber;return 0!==ee?ee:oj(g.collectionGroup,$.collectionGroup)}),g[0].collectionGroup))}updateCollectionGroup(g,$,ee){let et=gH(g),er=gQ(g);return this.getNextSequenceNumber(g).next(g=>et.loadAll(lE,IDBKeyRange.bound($,$)).next($=>al.forEach($,$=>er.put(f$($.indexId,this.user,g,ee)))))}updateIndexEntries(g,$){let ee=new Map;return al.forEach($,($,et)=>{let er=ee.get($.collectionGroup);return(er?al.resolve(er):this.getFieldIndexes(g,$.collectionGroup)).next(er=>(ee.set($.collectionGroup,er),al.forEach(er,ee=>this.getExistingIndexEntries(g,$,ee).next($=>{let er=this.computeIndexEntries(et,ee);return $.isEqual(er)?al.resolve():this.updateEntries(g,et,ee,$,er)}))))})}addIndexEntry(g,$,ee,et){return gW(g).put({indexId:et.indexId,uid:this.uid,arrayValue:et.arrayValue,directionalValue:et.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(ee,$.key),documentKey:$.key.path.toArray()})}deleteIndexEntry(g,$,ee,et){return gW(g).delete([et.indexId,this.uid,et.arrayValue,et.directionalValue,this.encodeDirectionalKey(ee,$.key),$.key.path.toArray()])}getExistingIndexEntries(g,$,ee){let et=gW(g),er=new lZ(gI);return et.iterate({index:lD,range:IDBKeyRange.only([ee.indexId,this.uid,this.encodeDirectionalKey(ee,$)])},(g,et)=>{er=er.add(new g_(ee.indexId,$,et.arrayValue,et.directionalValue))}).next(()=>er)}computeIndexEntries(g,$){let ee=new lZ(gI),et=this.encodeDirectionalElements($,g);if(null==et)return ee;let er=o1($);if(null!=er){let en=g.data.field(er.fieldPath);if(u3(en))for(let er of en.arrayValue.values||[])ee=ee.add(new g_($.indexId,g.key,this.encodeSingleElement(er),et))}else ee=ee.add(new g_($.indexId,g.key,gG,et));return ee}updateEntries(g,$,ee,et,er){oy(gz,"Updating index entries for document '%s'",$.key);let en=[];return l1(et,er,gI,et=>{en.push(this.addIndexEntry(g,$,ee,et))},et=>{en.push(this.deleteIndexEntry(g,$,ee,et))}),al.waitFor(en)}getNextSequenceNumber(g){let $=1;return gQ(g).iterate({index:lI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(g,ee,et)=>{et.done(),$=ee.sequenceNumber+1}).next(()=>$)}createRange(g,$,ee){ee=ee.sort((g,$)=>gI(g,$)).filter((g,$,ee)=>!$||0!==gI(g,ee[$-1]));let et=[];for(let er of(et.push(g),ee)){let ee=gI(er,g),en=gI(er,$);if(0===ee)et[0]=g.successor();else if(ee>0&&en<0)et.push(er),et.push(er.successor());else if(en>0)break}et.push($);let er=[];for(let g=0;g<et.length;g+=2){if(this.isRangeMatchable(et[g],et[g+1]))return[];let $=[et[g].indexId,this.uid,et[g].arrayValue,et[g].directionalValue,gG,[]],ee=[et[g+1].indexId,this.uid,et[g+1].arrayValue,et[g+1].directionalValue,gG,[]];er.push(IDBKeyRange.bound($,ee))}return er}isRangeMatchable(g,$){return gI(g,$)>0}getMinOffsetFromCollectionGroup(g,$){return this.getFieldIndexes(g,$).next(gY)}getMinOffset(g,$){return al.mapArray(this.getSubTargets($),$=>this.getFieldIndex(g,$).next(g=>g||oE())).next(gY)}}function gK(g){return l$(g,lu)}function gW(g){return l$(g,lA)}function gH(g){return l$(g,lS)}function gQ(g){return l$(g,lC)}function gY(g){ow(0!==g.length);let $=g[0].indexState.offset,ee=$.largestBatchId;for(let et=1;et<g.length;et++){let er=g[et].indexState.offset;0>an(er,$)&&($=er),ee<er.largestBatchId&&(ee=er.largestBatchId)}return new ar($.readTime,$.documentKey,ee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(g,$,ee){let et=g.store(az),er=g.store(aJ),en=[],ei=IDBKeyRange.only(ee.batchId),es=0,eo=et.iterate({range:ei},(g,$,ee)=>(es++,ee.delete()));en.push(eo.next(()=>{ow(1===es)}));let eu=[];for(let g of ee.mutations){let et=aQ($,g.key.path,ee.batchId);en.push(er.delete(et)),eu.push(g.key)}return al.waitFor(en).next(()=>eu)}function gX(g){let $;if(!g)return 0;if(g.document)$=g.document;else if(g.unknownDocument)$=g.unknownDocument;else if(g.noDocument)$=g.noDocument;else throw oE();return JSON.stringify($).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(g,$,ee,et){this.userId=g,this.serializer=$,this.indexManager=ee,this.referenceDelegate=et,this.documentKeysByBatchId={}}static forUser(g,$,ee,et){return ow(""!==g.uid),new gZ(g.isAuthenticated()?g.uid:"",$,ee,et)}checkEmpty(g){let $=!0,ee=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return g2(g).iterate({index:a$,range:ee},(g,ee,et)=>{$=!1,et.done()}).next(()=>$)}addMutationBatch(g,$,ee,et){let er=g3(g),en=g2(g);return en.add({}).next(ei=>{ow("number"==typeof ei);let es=new dD(ei,$,ee,et),eo=fA(this.serializer,this.userId,es),eu=[],eh=new lZ((g,$)=>oj(g.canonicalString(),$.canonicalString()));for(let g of et){let $=aQ(this.userId,g.key.path,ei);eh=eh.add(g.key.path.popLast()),eu.push(en.put(eo)),eu.push(er.put($,aY))}return eh.forEach($=>{eu.push(this.indexManager.addToCollectionParentIndex(g,$))}),g.addOnCommittedListener(()=>{this.documentKeysByBatchId[ei]=es.keys()}),al.waitFor(eu).next(()=>es)})}lookupMutationBatch(g,$){return g2(g).get($).next(g=>g?(ow(g.userId===this.userId),fN(this.serializer,g)):null)}lookupMutationKeys(g,$){return this.documentKeysByBatchId[$]?al.resolve(this.documentKeysByBatchId[$]):this.lookupMutationBatch(g,$).next(g=>{if(!g)return null;{let ee=g.keys();return this.documentKeysByBatchId[$]=ee,ee}})}getNextMutationBatchAfterBatchId(g,$){let ee=$+1,et=IDBKeyRange.lowerBound([this.userId,ee]),er=null;return g2(g).iterate({index:a$,range:et},(g,$,et)=>{$.userId===this.userId&&(ow($.batchId>=ee),er=fN(this.serializer,$)),et.done()}).next(()=>er)}getHighestUnacknowledgedBatchId(g){let $=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),ee=uv;return g2(g).iterate({index:a$,range:$,reverse:!0},(g,$,et)=>{ee=$.batchId,et.done()}).next(()=>ee)}getAllMutationBatches(g){let $=IDBKeyRange.bound([this.userId,uv],[this.userId,Number.POSITIVE_INFINITY]);return g2(g).loadAll(a$,$).next(g=>g.map(g=>fN(this.serializer,g)))}getAllMutationBatchesAffectingDocumentKey(g,$){let ee=aH(this.userId,$.path),et=IDBKeyRange.lowerBound(ee),er=[];return g3(g).iterate({range:et},(ee,et,en)=>{let[ei,es,eo]=ee,eu=aF(es);if(ei!==this.userId||!$.path.isEqual(eu)){en.done();return}return g2(g).get(eo).next(g=>{if(!g)throw oE();ow(g.userId===this.userId),er.push(fN(this.serializer,g))})}).next(()=>er)}getAllMutationBatchesAffectingDocumentKeys(g,$){let ee=new lZ(oj),et=[];return $.forEach($=>{let er=aH(this.userId,$.path),en=IDBKeyRange.lowerBound(er),ei=g3(g).iterate({range:en},(g,et,er)=>{let[en,ei,es]=g,eo=aF(ei);if(en!==this.userId||!$.path.isEqual(eo)){er.done();return}ee=ee.add(es)});et.push(ei)}),al.waitFor(et).next(()=>this.lookupMutationBatches(g,ee))}getAllMutationBatchesAffectingQuery(g,$){let ee=$.path,et=ee.length+1,er=aH(this.userId,ee),en=IDBKeyRange.lowerBound(er),ei=new lZ(oj);return g3(g).iterate({range:en},(g,$,er)=>{let[en,es,eo]=g,eu=aF(es);if(en!==this.userId||!ee.isPrefixOf(eu)){er.done();return}eu.length===et&&(ei=ei.add(eo))}).next(()=>this.lookupMutationBatches(g,ei))}lookupMutationBatches(g,$){let ee=[],et=[];return $.forEach($=>{et.push(g2(g).get($).next(g=>{if(null===g)throw oE();ow(g.userId===this.userId),ee.push(fN(this.serializer,g))}))}),al.waitFor(et).next(()=>ee)}removeMutationBatch(g,$){return gJ(g.simpleDbTransaction,this.userId,$).next(ee=>(g.addOnCommittedListener(()=>{this.removeCachedMutationKeys($.batchId)}),al.forEach(ee,$=>this.referenceDelegate.markPotentiallyOrphaned(g,$))))}removeCachedMutationKeys(g){delete this.documentKeysByBatchId[g]}performConsistencyCheck(g){return this.checkEmpty(g).next($=>{if(!$)return al.resolve();let ee=IDBKeyRange.lowerBound(aW(this.userId)),et=[];return g3(g).iterate({range:ee},(g,$,ee)=>{if(g[0]!==this.userId){ee.done();return}{let $=aF(g[1]);et.push($)}}).next(()=>{ow(0===et.length)})})}containsKey(g,$){return g0(g,this.userId,$)}getMutationQueueMetadata(g){return g4(g).get(this.userId).next(g=>g||{userId:this.userId,lastAcknowledgedBatchId:uv,lastStreamToken:""})}}function g0(g,$,ee){let et=aH($,ee.path),er=et[1],en=IDBKeyRange.lowerBound(et),ei=!1;return g3(g).iterate({range:en,keysOnly:!0},(g,ee,et)=>{let[en,es,eo]=g;en===$&&es===er&&(ei=!0),et.done()}).next(()=>ei)}function g1(g,$){let ee=!1;return g4(g).iterateSerial(et=>g0(g,et,$).next(g=>(g&&(ee=!0),al.resolve(!g)))).next(()=>ee)}function g2(g){return l$(g,az)}function g3(g){return l$(g,aJ)}function g4(g){return l$(g,aV)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g6=2;class g9{constructor(g){this.lastId=g}next(){return this.lastId+=g6,this.lastId}static forTargetCache(){return new g9(2-g6)}static forSyncEngine(){return new g9(1-g6)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(g,$){this.referenceDelegate=g,this.serializer=$}allocateTargetId(g){return this.retrieveMetadata(g).next($=>{let ee=new g9($.highestTargetId);return $.highestTargetId=ee.next(),this.saveMetadata(g,$).next(()=>$.highestTargetId)})}getLastRemoteSnapshotVersion(g){return this.retrieveMetadata(g).next(g=>o$.fromTimestamp(new oG(g.lastRemoteSnapshotVersion.seconds,g.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(g){return this.retrieveMetadata(g).next(g=>g.highestListenSequenceNumber)}setTargetsMetadata(g,$,ee){return this.retrieveMetadata(g).next(et=>(et.highestListenSequenceNumber=$,ee&&(et.lastRemoteSnapshotVersion=ee.toTimestamp()),$>et.highestListenSequenceNumber&&(et.highestListenSequenceNumber=$),this.saveMetadata(g,et)))}addTargetData(g,$){return this.saveTargetData(g,$).next(()=>this.retrieveMetadata(g).next(ee=>(ee.targetCount+=1,this.updateMetadataFromTargetData($,ee),this.saveMetadata(g,ee))))}updateTargetData(g,$){return this.saveTargetData(g,$)}removeTargetData(g,$){return this.removeMatchingKeysForTargetId(g,$.targetId).next(()=>g8(g).delete($.targetId)).next(()=>this.retrieveMetadata(g)).next($=>(ow($.targetCount>0),$.targetCount-=1,this.saveMetadata(g,$)))}removeTargets(g,$,ee){let et=0,er=[];return g8(g).iterate((en,ei)=>{let es=fD(ei);es.sequenceNumber<=$&&null===ee.get(es.targetId)&&(et++,er.push(this.removeTargetData(g,es)))}).next(()=>al.waitFor(er)).next(()=>et)}forEachTarget(g,$){return g8(g).iterate((g,ee)=>{$(fD(ee))})}retrieveMetadata(g){return g7(g).get(ls).next(g=>(ow(null!==g),g))}saveMetadata(g,$){return g7(g).put(ls,$)}saveTargetData(g,$){return g8(g).put(fR(this.serializer,$))}updateMetadataFromTargetData(g,$){let ee=!1;return g.targetId>$.highestTargetId&&($.highestTargetId=g.targetId,ee=!0),g.sequenceNumber>$.highestListenSequenceNumber&&($.highestListenSequenceNumber=g.sequenceNumber,ee=!0),ee}getTargetCount(g){return this.retrieveMetadata(g).next(g=>g.targetCount)}getTargetData(g,$){let ee=cK($),et=IDBKeyRange.bound([ee,Number.NEGATIVE_INFINITY],[ee,Number.POSITIVE_INFINITY]),er=null;return g8(g).iterate({range:et,index:a8},(g,ee,et)=>{let en=fD(ee);cH($,en.target)&&(er=en,et.done())}).next(()=>er)}addMatchingKeys(g,$,ee){let et=[],er=me(g);return $.forEach($=>{let en=aP($.path);et.push(er.put({targetId:ee,path:en})),et.push(this.referenceDelegate.addReference(g,ee,$))}),al.waitFor(et)}removeMatchingKeys(g,$,ee){let et=me(g);return al.forEach($,$=>{let er=aP($.path);return al.waitFor([et.delete([ee,er]),this.referenceDelegate.removeReference(g,ee,$)])})}removeMatchingKeysForTargetId(g,$){let ee=me(g),et=IDBKeyRange.bound([$],[$+1],!1,!0);return ee.delete(et)}getMatchingKeysForTargetId(g,$){let ee=IDBKeyRange.bound([$],[$+1],!1,!0),et=me(g),er=hz();return et.iterate({range:ee,keysOnly:!0},(g,$,ee)=>{let et=new oJ(aF(g[1]));er=er.add(et)}).next(()=>er)}containsKey(g,$){let ee=aP($.path),et=IDBKeyRange.bound([ee],[oV(ee)],!1,!0),er=0;return me(g).iterate({index:ln,keysOnly:!0,range:et},([g,$],ee,et)=>{0!==g&&(er++,et.done())}).next(()=>er>0)}getTargetDataForTarget(g,$){return g8(g).get($).next(g=>g?fD(g):null)}}function g8(g){return l$(g,a9)}function g7(g){return l$(g,ll)}function me(g){return l$(g,lt)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mr=-1,mn=41943040;class mi{constructor(g,$,ee){this.cacheSizeCollectionThreshold=g,this.percentileToCollect=$,this.maximumSequenceNumbersToCollect=ee}static withCacheSize(g){return new mi(g,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(mn,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(mr,0,0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms="LruGarbageCollector",mo=1048576,ml=null,mu=null;function mh([g,$],[ee,et]){let er=oj(g,ee);return 0===er?oj($,et):er}class mp{constructor(g){this.maxElements=g,this.buffer=new lZ(mh),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(g){let $=[g,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add($);else{let g=this.buffer.last();0>mh($,g)&&(this.buffer=this.buffer.delete(g).add($))}}get maxValue(){return this.buffer.last()[0]}}class mf{constructor(g,$,ee){this.garbageCollector=g,this.asyncQueue=$,this.localStore=ee,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==mr&&this.scheduleGC(ml)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(g){oy(ms,`Garbage collection scheduled in ${g}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",g,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(g){ay(g)?oy(ms,"Ignoring IndexedDB error during garbage collection: ",g):await ao(g)}await this.scheduleGC(mu)})}}class mg{constructor(g,$){this.delegate=g,this.params=$}calculateTargetCount(g,$){return this.delegate.getSequenceNumberCount(g).next(g=>Math.floor($/100*g))}nthSequenceNumber(g,$){if(0===$)return al.resolve(aN.INVALID);let ee=new mp($);return this.delegate.forEachTarget(g,g=>ee.addElement(g.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(g,g=>ee.addElement(g))).next(()=>ee.maxValue)}removeTargets(g,$,ee){return this.delegate.removeTargets(g,$,ee)}removeOrphanedDocuments(g,$){return this.delegate.removeOrphanedDocuments(g,$)}collect(g,$){return this.params.cacheSizeCollectionThreshold===mr?(oy("LruGarbageCollector","Garbage collection skipped; disabled"),al.resolve(mt)):this.getCacheSize(g).next(ee=>ee<this.params.cacheSizeCollectionThreshold?(oy("LruGarbageCollector",`Garbage collection skipped; Cache size ${ee} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mt):this.runGarbageCollection(g,$))}getCacheSize(g){return this.delegate.getCacheSize(g)}runGarbageCollection(g,$){let ee,et,er,en,ei,es,eo;let eu=Date.now();return this.calculateTargetCount(g,this.params.percentileToCollect).next($=>($>this.params.maximumSequenceNumbersToCollect?(oy("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$}`),et=this.params.maximumSequenceNumbersToCollect):et=$,en=Date.now(),this.nthSequenceNumber(g,et))).next(et=>(ee=et,ei=Date.now(),this.removeTargets(g,ee,$))).next($=>(er=$,es=Date.now(),this.removeOrphanedDocuments(g,ee))).next(g=>(eo=Date.now(),om()<=LogLevel.DEBUG&&oy("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${en-eu}ms
	Determined least recently used ${et} in ${ei-en}ms
	Removed ${er} targets in ${es-ei}ms
	Removed ${g} documents in ${eo-es}ms
Total Duration: ${eo-eu}ms`),al.resolve({didRun:!0,sequenceNumbersCollected:et,targetsRemoved:er,documentsRemoved:g})))}}function mm(g,$){return new mg(g,$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(g,$){this.db=g,this.garbageCollector=mm(this,$)}getSequenceNumberCount(g){let $=this.orphanedDocumentCount(g);return this.db.getTargetCache().getTargetCount(g).next(g=>$.next($=>g+$))}orphanedDocumentCount(g){let $=0;return this.forEachOrphanedDocumentSequenceNumber(g,g=>{$++}).next(()=>$)}forEachTarget(g,$){return this.db.getTargetCache().forEachTarget(g,$)}forEachOrphanedDocumentSequenceNumber(g,$){return this.forEachOrphanedDocument(g,(g,ee)=>$(ee))}addReference(g,$,ee){return mT(g,ee)}removeReference(g,$,ee){return mT(g,ee)}removeTargets(g,$,ee){return this.db.getTargetCache().removeTargets(g,$,ee)}markPotentiallyOrphaned(g,$){return mT(g,$)}isPinned(g,$){return g1(g,$)}removeOrphanedDocuments(g,$){let ee=this.db.getRemoteDocumentCache().newChangeBuffer(),et=[],er=0;return this.forEachOrphanedDocument(g,(en,ei)=>{if(ei<=$){let $=this.isPinned(g,en).next($=>{if(!$)return er++,ee.getEntry(g,en).next(()=>(ee.removeEntry(en,o$.min()),me(g).delete(mv(en))))});et.push($)}}).next(()=>al.waitFor(et)).next(()=>ee.apply(g)).next(()=>er)}removeTarget(g,$){let ee=$.withSequenceNumber(g.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(g,ee)}updateLimboDocument(g,$){return mT(g,$)}forEachOrphanedDocument(g,$){let ee;let et=me(g),er=aN.INVALID;return et.iterate({index:ln},([g,et],{path:en,sequenceNumber:ei})=>{0===g?(er!==aN.INVALID&&$(new oJ(aF(ee)),er),er=ei,ee=en):er=aN.INVALID}).next(()=>{er!==aN.INVALID&&$(new oJ(aF(ee)),er)})}getCacheSize(g){return this.db.getRemoteDocumentCache().getSize(g)}}function mv(g){return[0,aP(g.path)]}function mS(g,$){return{targetId:0,path:aP(g.path),sequenceNumber:$}}function mT(g,$){return me(g).put(mS($,g.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.changes=new hD(g=>g.toString(),(g,$)=>g.isEqual($)),this.changesApplied=!1}addEntry(g){this.assertNotApplied(),this.changes.set(g.key,g)}removeEntry(g,$){this.assertNotApplied(),this.changes.set(g,cs.newInvalidDocument(g).setReadTime($))}getEntry(g,$){this.assertNotApplied();let ee=this.changes.get($);return void 0!==ee?al.resolve(ee):this.getFromCache(g,$)}getEntries(g,$){return this.getAllFromCache(g,$)}apply(g){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(g)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(g){this.serializer=g}setIndexManager(g){this.indexManager=g}addEntry(g,$,ee){return mO(g).put(ee)}removeEntry(g,$,ee){return mO(g).delete(mN($,ee))}updateMetadata(g,$){return this.getMetadata(g).next(ee=>(ee.byteSize+=$,this.setMetadata(g,ee)))}getEntry(g,$){let ee=cs.newInvalidDocument($);return mO(g).iterate({index:a0,range:IDBKeyRange.only(mA($))},(g,et)=>{ee=this.maybeDecodeDocument($,et)}).next(()=>ee)}getSizedEntry(g,$){let ee={size:0,document:cs.newInvalidDocument($)};return mO(g).iterate({index:a0,range:IDBKeyRange.only(mA($))},(g,et)=>{ee={document:this.maybeDecodeDocument($,et),size:gX(et)}}).next(()=>ee)}getEntries(g,$){let ee=hk();return this.forEachDbEntry(g,$,(g,$)=>{let et=this.maybeDecodeDocument(g,$);ee=ee.insert(g,et)}).next(()=>ee)}getSizedEntries(g,$){let ee=hk(),et=new lQ(oJ.comparator);return this.forEachDbEntry(g,$,(g,$)=>{let er=this.maybeDecodeDocument(g,$);ee=ee.insert(g,er),et=et.insert(g,gX($))}).next(()=>({documents:ee,sizeMap:et}))}forEachDbEntry(g,$,ee){if($.isEmpty())return al.resolve();let et=new lZ(mR);$.forEach(g=>et=et.add(g));let er=IDBKeyRange.bound(mA(et.first()),mA(et.last())),en=et.getIterator(),ei=en.getNext();return mO(g).iterate({index:a0,range:er},(g,$,et)=>{let er=oJ.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;ei&&0>mR(ei,er);)ee(ei,null),ei=en.getNext();ei&&ei.isEqual(er)&&(ee(ei,$),ei=en.hasNext()?en.getNext():null),ei?et.skip(mA(ei)):et.done()}).next(()=>{for(;ei;)ee(ei,null),ei=en.hasNext()?en.getNext():null})}getDocumentsMatchingQuery(g,$,ee,et){let er=$.path,en=[er.popLast().toArray(),er.lastSegment(),fC(ee.readTime),ee.documentKey.path.isEmpty()?"":ee.documentKey.path.lastSegment()],ei=[er.popLast().toArray(),er.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mO(g).loadAll(IDBKeyRange.bound(en,ei,!0)).next(g=>{let ee=hk();for(let er of g){let g=this.maybeDecodeDocument(oJ.fromSegments(er.prefixPath.concat(er.collectionGroup,er.documentId)),er);g.isFoundDocument()&&(hE($,g)||et.has(g.key))&&(ee=ee.insert(g.key,g))}return ee})}getAllFromCollectionGroup(g,$,ee,et){let er=hk(),en=mD($,ee),ei=mD($,ar.max());return mO(g).iterate({index:a2,range:IDBKeyRange.bound(en,ei,!0)},(g,$,ee)=>{let en=this.maybeDecodeDocument(oJ.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);(er=er.insert(en.key,en)).size===et&&ee.done()}).next(()=>er)}newChangeBuffer(g){return new m_(this,!!g&&g.trackRemovals)}getSize(g){return this.getMetadata(g).next(g=>g.byteSize)}getMetadata(g){return mI(g).get(a6).next(g=>(ow(!!g),g))}setMetadata(g,$){return mI(g).put(a6,$)}maybeDecodeDocument(g,$){if($){let g=fE(this.serializer,$);if(!(g.isNoDocument()&&g.version.isEqual(o$.min())))return g}return cs.newInvalidDocument(g)}}function mC(g){return new mw(g)}class m_ extends null{constructor(g,$){super(),this.documentCache=g,this.trackRemovals=$,this.documentStates=new hD(g=>g.toString(),(g,$)=>g.isEqual($))}applyChanges(g){let $=[],ee=0,et=new lZ((g,$)=>oj(g.canonicalString(),$.canonicalString()));return this.changes.forEach((er,en)=>{let ei=this.documentStates.get(er);if($.push(this.documentCache.removeEntry(g,er,ei.readTime)),en.isValidDocument()){let es=fw(this.documentCache.serializer,en);et=et.add(er.path.popLast());let eo=gX(es);ee+=eo-ei.size,$.push(this.documentCache.addEntry(g,er,es))}else if(ee-=ei.size,this.trackRemovals){let ee=fw(this.documentCache.serializer,en.convertToNoDocument(o$.min()));$.push(this.documentCache.addEntry(g,er,ee))}}),et.forEach(ee=>{$.push(this.documentCache.indexManager.addToCollectionParentIndex(g,ee))}),$.push(this.documentCache.updateMetadata(g,ee)),al.waitFor($)}getFromCache(g,$){return this.documentCache.getSizedEntry(g,$).next(g=>(this.documentStates.set($,{size:g.size,readTime:g.document.readTime}),g.document))}getAllFromCache(g,$){return this.documentCache.getSizedEntries(g,$).next(({documents:g,sizeMap:$})=>($.forEach(($,ee)=>{this.documentStates.set($,{size:ee,readTime:g.get($).readTime})}),g))}}function mI(g){return l$(g,a4)}function mO(g){return l$(g,aX)}function mA(g){let $=g.path.toArray();return[$.slice(0,$.length-2),$[$.length-2],$[$.length-1]]}function mN(g,$){let ee=g.path.toArray();return[ee.slice(0,ee.length-2),ee[ee.length-2],fC($),ee[ee.length-1]]}function mD(g,$){let ee=$.documentKey.path.toArray();return[g,fC($.readTime),ee.slice(0,ee.length-2),ee.length>0?ee[ee.length-1]:""]}function mR(g,$){let ee=g.path.toArray(),et=$.path.toArray(),er=0;for(let g=0;g<ee.length-2&&g<et.length-2;++g)if(er=oj(ee[g],et[g]))return er;return(er=oj(ee.length,et.length))||(er=oj(ee[ee.length-2],et[et.length-2]))?er:oj(ee[ee.length-1],et[et.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mk=15;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(g,$){this.overlayedDocument=g,this.mutatedFields=$}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(g,$,ee,et){this.remoteDocumentCache=g,this.mutationQueue=$,this.documentOverlayCache=ee,this.indexManager=et}getDocument(g,$){let ee=null;return this.documentOverlayCache.getOverlay(g,$).next(et=>(ee=et,this.remoteDocumentCache.getEntry(g,$))).next(g=>(null!==ee&&dh(ee.mutation,g,l3.empty(),oG.now()),g))}getDocuments(g,$){return this.remoteDocumentCache.getEntries(g,$).next($=>this.getLocalViewOfDocuments(g,$,hz()).next(()=>$))}getLocalViewOfDocuments(g,$,ee=hz()){let et=hF();return this.populateOverlays(g,et,$).next(()=>this.computeViews(g,$,et,ee).next(g=>{let $=hP();return g.forEach((g,ee)=>{$=$.insert(g,ee.overlayedDocument)}),$}))}getOverlayedDocuments(g,$){let ee=hF();return this.populateOverlays(g,ee,$).next(()=>this.computeViews(g,$,ee,hz()))}populateOverlays(g,$,ee){let et=[];return ee.forEach(g=>{$.has(g)||et.push(g)}),this.documentOverlayCache.getOverlays(g,et).next(g=>{g.forEach((g,ee)=>{$.set(g,ee)})})}computeViews(g,$,ee,et){let er=hk(),en=hj(),ei=hM();return $.forEach((g,$)=>{let ei=ee.get($.key);et.has($.key)&&(void 0===ei||ei.mutation instanceof dS)?er=er.insert($.key,$):void 0!==ei?(en.set($.key,ei.mutation.getFieldMask()),dh(ei.mutation,$,ei.mutation.getFieldMask(),oG.now())):en.set($.key,l3.empty())}),this.recalculateAndSaveOverlays(g,er).next(g=>(g.forEach((g,$)=>en.set(g,$)),$.forEach((g,$)=>{var ee;return ei.set(g,new mx($,null!==(ee=en.get(g))&&void 0!==ee?ee:null))}),ei))}recalculateAndSaveOverlays(g,$){let ee=hj(),et=new lQ((g,$)=>g-$),er=hz();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(g,$).next(g=>{for(let er of g)er.keys().forEach(g=>{let en=$.get(g);if(null===en)return;let ei=ee.get(g)||l3.empty();ei=er.applyToLocalView(en,ei),ee.set(g,ei);let es=(et.get(er.batchId)||hz()).add(g);et=et.insert(er.batchId,es)})}).next(()=>{let en=[],ei=et.getReverseIterator();for(;ei.hasNext();){let et=ei.getNext(),es=et.key,eo=et.value,eu=hB();eo.forEach(g=>{if(!er.has(g)){let et=dl($.get(g),ee.get(g));null!==et&&eu.set(g,et),er=er.add(g)}}),en.push(this.documentOverlayCache.saveOverlays(g,es,eu))}return al.waitFor(en)}).next(()=>ee)}recalculateAndSaveOverlaysForDocumentKeys(g,$){return this.remoteDocumentCache.getEntries(g,$).next($=>this.recalculateAndSaveOverlays(g,$))}getDocumentsMatchingQuery(g,$,ee){return ho($)?this.getDocumentsMatchingDocumentQuery(g,$.path):hl($)?this.getDocumentsMatchingCollectionGroupQuery(g,$,ee):this.getDocumentsMatchingCollectionQuery(g,$,ee)}getNextDocuments(g,$,ee,et){return this.remoteDocumentCache.getAllFromCollectionGroup(g,$,ee,et).next(er=>{let en=et-er.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(g,$,ee.largestBatchId,et-er.size):al.resolve(hF()),ei=oX,es=er;return en.next($=>al.forEach($,($,ee)=>(ei<ee.largestBatchId&&(ei=ee.largestBatchId),er.get($))?al.resolve():this.remoteDocumentCache.getEntry(g,$).next(g=>{es=es.insert($,g)})).next(()=>this.populateOverlays(g,$,er)).next(()=>this.computeViews(g,es,$,hz())).next(g=>({batchId:ei,changes:hL(g)})))})}getDocumentsMatchingDocumentQuery(g,$){return this.getDocument(g,new oJ($)).next(g=>{let $=hP();return g.isFoundDocument()&&($=$.insert(g.key,g)),$})}getDocumentsMatchingCollectionGroupQuery(g,$,ee){let et=$.collectionGroup,er=hP();return this.indexManager.getCollectionParents(g,et).next(en=>al.forEach(en,en=>{let ei=ht($,en.child(et));return this.getDocumentsMatchingCollectionQuery(g,ei,ee).next(g=>{g.forEach((g,$)=>{er=er.insert(g,$)})})}).next(()=>er))}getDocumentsMatchingCollectionQuery(g,$,ee){let et;return this.documentOverlayCache.getOverlaysForCollection(g,$.path,ee.largestBatchId).next(er=>(et=er,this.remoteDocumentCache.getDocumentsMatchingQuery(g,$,ee,et))).next(g=>{et.forEach(($,ee)=>{let et=ee.getKey();null===g.get(et)&&(g=g.insert(et,cs.newInvalidDocument(et)))});let ee=hP();return g.forEach((g,er)=>{let en=et.get(g);void 0!==en&&dh(en.mutation,er,l3.empty(),oG.now()),hE($,er)&&(ee=ee.insert(g,er))}),ee})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(g){this.serializer=g,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(g,$){return al.resolve(this.bundles.get($))}saveBundleMetadata(g,$){return this.bundles.set($.id,fj($)),al.resolve()}getNamedQuery(g,$){return al.resolve(this.namedQueries.get($))}saveNamedQuery(g,$){return this.namedQueries.set($.name,fB($)),al.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.overlays=new lQ(oJ.comparator),this.overlayByBatchId=new Map}getOverlay(g,$){return al.resolve(this.overlays.get($))}getOverlays(g,$){let ee=hF();return al.forEach($,$=>this.getOverlay(g,$).next(g=>{null!==g&&ee.set($,g)})).next(()=>ee)}saveOverlays(g,$,ee){return ee.forEach((ee,et)=>{this.saveOverlay(g,$,et)}),al.resolve()}removeOverlaysForBatchId(g,$,ee){let et=this.overlayByBatchId.get(ee);return void 0!==et&&(et.forEach(g=>this.overlays=this.overlays.remove(g)),this.overlayByBatchId.delete(ee)),al.resolve()}getOverlaysForCollection(g,$,ee){let et=hF(),er=$.length+1,en=new oJ($.child("")),ei=this.overlays.getIteratorFrom(en);for(;ei.hasNext();){let g=ei.getNext().value,en=g.getKey();if(!$.isPrefixOf(en.path))break;en.path.length===er&&g.largestBatchId>ee&&et.set(g.getKey(),g)}return al.resolve(et)}getOverlaysForCollectionGroup(g,$,ee,et){let er=new lQ((g,$)=>g-$),en=this.overlays.getIterator();for(;en.hasNext();){let g=en.getNext().value;if(g.getKey().getCollectionGroup()===$&&g.largestBatchId>ee){let $=er.get(g.largestBatchId);null===$&&($=hF(),er=er.insert(g.largestBatchId,$)),$.set(g.getKey(),g)}}let ei=hF(),es=er.getIterator();for(;es.hasNext()&&(es.getNext().value.forEach((g,$)=>ei.set(g,$)),!(ei.size()>=et)););return al.resolve(ei)}saveOverlay(g,$,ee){let et=this.overlays.get(ee.key);if(null!==et){let g=this.overlayByBatchId.get(et.largestBatchId).delete(ee.key);this.overlayByBatchId.set(et.largestBatchId,g)}this.overlays=this.overlays.insert(ee.key,new dk($,ee));let er=this.overlayByBatchId.get($);void 0===er&&(er=hz(),this.overlayByBatchId.set($,er)),this.overlayByBatchId.set($,er.add(ee.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(){this.refsByKey=new lZ(mB.compareByKey),this.refsByTarget=new lZ(mB.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(g,$){let ee=new mB(g,$);this.refsByKey=this.refsByKey.add(ee),this.refsByTarget=this.refsByTarget.add(ee)}addReferences(g,$){g.forEach(g=>this.addReference(g,$))}removeReference(g,$){this.removeRef(new mB(g,$))}removeReferences(g,$){g.forEach(g=>this.removeReference(g,$))}removeReferencesForId(g){let $=new oJ(new oH([])),ee=new mB($,g),et=new mB($,g+1),er=[];return this.refsByTarget.forEachInRange([ee,et],g=>{this.removeRef(g),er.push(g.key)}),er}removeAllReferences(){this.refsByKey.forEach(g=>this.removeRef(g))}removeRef(g){this.refsByKey=this.refsByKey.delete(g),this.refsByTarget=this.refsByTarget.delete(g)}referencesForId(g){let $=new oJ(new oH([])),ee=new mB($,g),et=new mB($,g+1),er=hz();return this.refsByTarget.forEachInRange([ee,et],g=>{er=er.add(g.key)}),er}containsKey(g){let $=new mB(g,0),ee=this.refsByKey.firstAfterOrEqual($);return null!==ee&&g.isEqual(ee.key)}}class mB{constructor(g,$){this.key=g,this.targetOrBatchId=$}static compareByKey(g,$){return oJ.comparator(g.key,$.key)||oj(g.targetOrBatchId,$.targetOrBatchId)}static compareByTargetId(g,$){return oj(g.targetOrBatchId,$.targetOrBatchId)||oJ.comparator(g.key,$.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(g,$){this.indexManager=g,this.referenceDelegate=$,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new lZ(mB.compareByKey)}checkEmpty(g){return al.resolve(0===this.mutationQueue.length)}addMutationBatch(g,$,ee,et){let er=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let en=new dD(er,$,ee,et);for(let $ of(this.mutationQueue.push(en),et))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new mB($.key,er)),this.indexManager.addToCollectionParentIndex(g,$.key.path.popLast());return al.resolve(en)}lookupMutationBatch(g,$){return al.resolve(this.findMutationBatch($))}getNextMutationBatchAfterBatchId(g,$){let ee=$+1,et=this.indexOfBatchId(ee),er=et<0?0:et;return al.resolve(this.mutationQueue.length>er?this.mutationQueue[er]:null)}getHighestUnacknowledgedBatchId(){return al.resolve(0===this.mutationQueue.length?uv:this.nextBatchId-1)}getAllMutationBatches(g){return al.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(g,$){let ee=new mB($,0),et=new mB($,Number.POSITIVE_INFINITY),er=[];return this.batchesByDocumentKey.forEachInRange([ee,et],g=>{let $=this.findMutationBatch(g.targetOrBatchId);er.push($)}),al.resolve(er)}getAllMutationBatchesAffectingDocumentKeys(g,$){let ee=new lZ(oj);return $.forEach(g=>{let $=new mB(g,0),et=new mB(g,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([$,et],g=>{ee=ee.add(g.targetOrBatchId)})}),al.resolve(this.findMutationBatches(ee))}getAllMutationBatchesAffectingQuery(g,$){let ee=$.path,et=ee.length+1,er=ee;oJ.isDocumentKey(er)||(er=er.child(""));let en=new mB(new oJ(er),0),ei=new lZ(oj);return this.batchesByDocumentKey.forEachWhile(g=>{let $=g.key.path;return!!ee.isPrefixOf($)&&($.length===et&&(ei=ei.add(g.targetOrBatchId)),!0)},en),al.resolve(this.findMutationBatches(ei))}findMutationBatches(g){let $=[];return g.forEach(g=>{let ee=this.findMutationBatch(g);null!==ee&&$.push(ee)}),$}removeMutationBatch(g,$){ow(0===this.indexOfExistingBatchId($.batchId,"removed")),this.mutationQueue.shift();let ee=this.batchesByDocumentKey;return al.forEach($.mutations,et=>{let er=new mB(et.key,$.batchId);return ee=ee.delete(er),this.referenceDelegate.markPotentiallyOrphaned(g,et.key)}).next(()=>{this.batchesByDocumentKey=ee})}removeCachedMutationKeys(g){}containsKey(g,$){let ee=new mB($,0),et=this.batchesByDocumentKey.firstAfterOrEqual(ee);return al.resolve($.isEqual(et&&et.key))}performConsistencyCheck(g){return this.mutationQueue.length,al.resolve()}indexOfExistingBatchId(g,$){return this.indexOfBatchId(g)}indexOfBatchId(g){return 0===this.mutationQueue.length?0:g-this.mutationQueue[0].batchId}findMutationBatch(g){let $=this.indexOfBatchId(g);return $<0||$>=this.mutationQueue.length?null:this.mutationQueue[$]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(){return new lQ(oJ.comparator)}class mV{constructor(g){this.sizer=g,this.docs=mU(),this.size=0}setIndexManager(g){this.indexManager=g}addEntry(g,$){let ee=$.key,et=this.docs.get(ee),er=et?et.size:0,en=this.sizer($);return this.docs=this.docs.insert(ee,{document:$.mutableCopy(),size:en}),this.size+=en-er,this.indexManager.addToCollectionParentIndex(g,ee.path.popLast())}removeEntry(g){let $=this.docs.get(g);$&&(this.docs=this.docs.remove(g),this.size-=$.size)}getEntry(g,$){let ee=this.docs.get($);return al.resolve(ee?ee.document.mutableCopy():cs.newInvalidDocument($))}getEntries(g,$){let ee=hk();return $.forEach(g=>{let $=this.docs.get(g);ee=ee.insert(g,$?$.document.mutableCopy():cs.newInvalidDocument(g))}),al.resolve(ee)}getDocumentsMatchingQuery(g,$,ee,et){let er=hk(),en=$.path,ei=new oJ(en.child("")),es=this.docs.getIteratorFrom(ei);for(;es.hasNext();){let{key:g,value:{document:ei}}=es.getNext();if(!en.isPrefixOf(g.path))break;!(g.path.length>en.length+1||0>=an(at(ei),ee))&&(et.has(ei.key)||hE($,ei))&&(er=er.insert(ei.key,ei.mutableCopy()))}return al.resolve(er)}getAllFromCollectionGroup(g,$,ee,et){oE()}forEachDocumentKey(g,$){return al.forEach(this.docs,g=>$(g))}newChangeBuffer(g){return new mz(this)}getSize(g){return al.resolve(this.size)}}function mq(g){return new mV(g)}class mz extends mE{constructor(g){super(),this.documentCache=g}applyChanges(g){let $=[];return this.changes.forEach((ee,et)=>{et.isValidDocument()?$.push(this.documentCache.addEntry(g,et)):this.documentCache.removeEntry(ee)}),al.waitFor($)}getFromCache(g,$){return this.documentCache.getEntry(g,$)}getAllFromCache(g,$){return this.documentCache.getEntries(g,$)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(g){this.persistence=g,this.targets=new hD(g=>cK(g),cH),this.lastRemoteSnapshotVersion=o$.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new mF,this.targetCount=0,this.targetIdGenerator=g9.forTargetCache()}forEachTarget(g,$){return this.targets.forEach((g,ee)=>$(ee)),al.resolve()}getLastRemoteSnapshotVersion(g){return al.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(g){return al.resolve(this.highestSequenceNumber)}allocateTargetId(g){return this.highestTargetId=this.targetIdGenerator.next(),al.resolve(this.highestTargetId)}setTargetsMetadata(g,$,ee){return ee&&(this.lastRemoteSnapshotVersion=ee),$>this.highestSequenceNumber&&(this.highestSequenceNumber=$),al.resolve()}saveTargetData(g){this.targets.set(g.target,g);let $=g.targetId;$>this.highestTargetId&&(this.targetIdGenerator=new g9($),this.highestTargetId=$),g.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=g.sequenceNumber)}addTargetData(g,$){return this.saveTargetData($),this.targetCount+=1,al.resolve()}updateTargetData(g,$){return this.saveTargetData($),al.resolve()}removeTargetData(g,$){return this.targets.delete($.target),this.references.removeReferencesForId($.targetId),this.targetCount-=1,al.resolve()}removeTargets(g,$,ee){let et=0,er=[];return this.targets.forEach((en,ei)=>{ei.sequenceNumber<=$&&null===ee.get(ei.targetId)&&(this.targets.delete(en),er.push(this.removeMatchingKeysForTargetId(g,ei.targetId)),et++)}),al.waitFor(er).next(()=>et)}getTargetCount(g){return al.resolve(this.targetCount)}getTargetData(g,$){let ee=this.targets.get($)||null;return al.resolve(ee)}addMatchingKeys(g,$,ee){return this.references.addReferences($,ee),al.resolve()}removeMatchingKeys(g,$,ee){this.references.removeReferences($,ee);let et=this.persistence.referenceDelegate,er=[];return et&&$.forEach($=>{er.push(et.markPotentiallyOrphaned(g,$))}),al.waitFor(er)}removeMatchingKeysForTargetId(g,$){return this.references.removeReferencesForId($),al.resolve()}getMatchingKeysForTargetId(g,$){let ee=this.references.referencesForId($);return al.resolve(ee)}containsKey(g,$){return al.resolve(this.references.containsKey($))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m$="MemoryPersistence";class mK{constructor(g,$){this.mutationQueues={},this.overlays={},this.listenSequence=new aN(0),this._started=!1,this._started=!0,this.referenceDelegate=g(this),this.targetCache=new mG(this);let ee=g=>this.referenceDelegate.documentSize(g);this.indexManager=new gV,this.remoteDocumentCache=mq(ee),this.serializer=new fT($),this.bundleCache=new mM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(g){return this.indexManager}getDocumentOverlayCache(g){let $=this.overlays[g.toKey()];return $||($=new mL,this.overlays[g.toKey()]=$),$}getMutationQueue(g,$){let ee=this.mutationQueues[g.toKey()];return ee||(ee=new mj($,this.referenceDelegate),this.mutationQueues[g.toKey()]=ee),ee}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(g,$,ee){oy(m$,"Starting transaction:",g);let et=new mW(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),ee(et).next(g=>this.referenceDelegate.onTransactionCommitted(et).next(()=>g)).toPromise().then(g=>(et.raiseOnCommittedEvent(),g))}mutationQueuesContainKey(g,$){return al.or(Object.values(this.mutationQueues).map(ee=>()=>ee.containsKey(g,$)))}}class mW extends as{constructor(g){super(),this.currentSequenceNumber=g}}class mH{constructor(g){this.persistence=g,this.localViewReferences=new mF,this._orphanedDocuments=null}static factory(g){return new mH(g)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw oE()}addReference(g,$,ee){return this.localViewReferences.addReference(ee,$),this.orphanedDocuments.delete(ee.toString()),al.resolve()}removeReference(g,$,ee){return this.localViewReferences.removeReference(ee,$),this.orphanedDocuments.add(ee.toString()),al.resolve()}markPotentiallyOrphaned(g,$){return this.orphanedDocuments.add($.toString()),al.resolve()}removeTarget(g,$){this.localViewReferences.removeReferencesForId($.targetId).forEach(g=>this.orphanedDocuments.add(g.toString()));let ee=this.persistence.getTargetCache();return ee.getMatchingKeysForTargetId(g,$.targetId).next(g=>{g.forEach(g=>this.orphanedDocuments.add(g.toString()))}).next(()=>ee.removeTargetData(g,$))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(g){let $=this.persistence.getRemoteDocumentCache().newChangeBuffer();return al.forEach(this.orphanedDocuments,ee=>{let et=oJ.fromPath(ee);return this.isReferenced(g,et).next(g=>{g||$.removeEntry(et,o$.min())})}).next(()=>(this._orphanedDocuments=null,$.apply(g)))}updateLimboDocument(g,$){return this.isReferenced(g,$).next(g=>{g?this.orphanedDocuments.delete($.toString()):this.orphanedDocuments.add($.toString())})}documentSize(g){return 0}isReferenced(g,$){return al.or([()=>al.resolve(this.localViewReferences.containsKey($)),()=>this.persistence.getTargetCache().containsKey(g,$),()=>this.persistence.mutationQueuesContainKey(g,$)])}}class mQ{constructor(g,$){this.persistence=g,this.orphanedSequenceNumbers=new hD(g=>aP(g.path),(g,$)=>g.isEqual($)),this.garbageCollector=mm(this,$)}static factory(g,$){return new mQ(g,$)}onTransactionStarted(){}onTransactionCommitted(g){return al.resolve()}forEachTarget(g,$){return this.persistence.getTargetCache().forEachTarget(g,$)}getSequenceNumberCount(g){let $=this.orphanedDocumentCount(g);return this.persistence.getTargetCache().getTargetCount(g).next(g=>$.next($=>g+$))}orphanedDocumentCount(g){let $=0;return this.forEachOrphanedDocumentSequenceNumber(g,g=>{$++}).next(()=>$)}forEachOrphanedDocumentSequenceNumber(g,$){return al.forEach(this.orphanedSequenceNumbers,(ee,et)=>this.isPinned(g,ee,et).next(g=>g?al.resolve():$(et)))}removeTargets(g,$,ee){return this.persistence.getTargetCache().removeTargets(g,$,ee)}removeOrphanedDocuments(g,$){let ee=0,et=this.persistence.getRemoteDocumentCache(),er=et.newChangeBuffer();return et.forEachDocumentKey(g,et=>this.isPinned(g,et,$).next(g=>{g||(ee++,er.removeEntry(et,o$.min()))})).next(()=>er.apply(g)).next(()=>ee)}markPotentiallyOrphaned(g,$){return this.orphanedSequenceNumbers.set($,g.currentSequenceNumber),al.resolve()}removeTarget(g,$){let ee=$.withSequenceNumber(g.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(g,ee)}addReference(g,$,ee){return this.orphanedSequenceNumbers.set(ee,g.currentSequenceNumber),al.resolve()}removeReference(g,$,ee){return this.orphanedSequenceNumbers.set(ee,g.currentSequenceNumber),al.resolve()}updateLimboDocument(g,$){return this.orphanedSequenceNumbers.set($,g.currentSequenceNumber),al.resolve()}documentSize(g){let $=g.key.toString().length;return g.isFoundDocument()&&($+=uY(g.data.value)),$}isPinned(g,$,ee){return al.or([()=>this.persistence.mutationQueuesContainKey(g,$),()=>this.persistence.getTargetCache().containsKey(g,$),()=>{let g=this.orphanedSequenceNumbers.get($);return al.resolve(void 0!==g&&g>ee)}])}getCacheSize(g){return this.persistence.getRemoteDocumentCache().getSize(g)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(g){this.serializer=g}createOrUpgrade(g,$,ee,et){let er=new ap("createOrUpgrade",$);ee<1&&et>=1&&(mX(g),mZ(g),m4(g),m1(g));let en=al.resolve();return ee<3&&et>=3&&(0!==ee&&(m6(g),m4(g)),en=en.next(()=>m5(er))),ee<4&&et>=4&&(0!==ee&&(en=en.next(()=>m0(g,er))),en=en.next(()=>{m8(g)})),ee<5&&et>=5&&(en=en.next(()=>this.removeAcknowledgedMutations(er))),ee<6&&et>=6&&(en=en.next(()=>(m3(g),this.addDocumentGlobal(er)))),ee<7&&et>=7&&(en=en.next(()=>this.ensureSequenceNumbers(er))),ee<8&&et>=8&&(en=en.next(()=>this.createCollectionParentIndex(g,er))),ee<9&&et>=9&&(en=en.next(()=>{m9(g)})),ee<10&&et>=10&&(en=en.next(()=>this.rewriteCanonicalIds(er))),ee<11&&et>=11&&(en=en.next(()=>{m7(g),ye(g)})),ee<12&&et>=12&&(en=en.next(()=>{yr(g)})),ee<13&&et>=13&&(en=en.next(()=>m2(g)).next(()=>this.rewriteRemoteDocumentCache(g,er)).next(()=>g.deleteObjectStore(aB))),ee<14&&et>=14&&(en=en.next(()=>this.runOverlayMigration(g,er))),ee<15&&et>=15&&(en=en.next(()=>yt(g))),en}addDocumentGlobal(g){let $=0;return g.store(aB).iterate((g,ee)=>{$+=gX(ee)}).next(()=>{let ee={byteSize:$};return g.store(a4).put(a6,ee)})}removeAcknowledgedMutations(g){let $=g.store(aV),ee=g.store(az);return $.loadAll().next($=>al.forEach($,$=>{let et=IDBKeyRange.bound([$.userId,uv],[$.userId,$.lastAcknowledgedBatchId]);return ee.loadAll(a$,et).next(ee=>al.forEach(ee,ee=>{ow(ee.userId===$.userId);let et=fN(this.serializer,ee);return gJ(g,$.userId,et).next(()=>{})}))}))}ensureSequenceNumbers(g){let $=g.store(lt),ee=g.store(aB);return g.store(ll).get(ls).next(g=>{let et=ee=>$.put({targetId:0,path:aP(ee),sequenceNumber:g.highestListenSequenceNumber}),er=[];return ee.iterate((g,ee)=>{let en=new oH(g),ei=mJ(en);er.push($.get(ei).next(g=>g?al.resolve():et(en)))}).next(()=>al.waitFor(er))})}createCollectionParentIndex(g,$){g.createObjectStore(lu,{keyPath:lh});let ee=$.store(lu),et=new gq,er=g=>{if(et.add(g)){let $=g.lastSegment(),et=g.popLast();return ee.put({collectionId:$,parent:aP(et)})}};return $.store(aB).iterate({keysOnly:!0},(g,$)=>er(new oH(g).popLast())).next(()=>$.store(aJ).iterate({keysOnly:!0},([g,$,ee],et)=>er(aF($).popLast())))}rewriteCanonicalIds(g){let $=g.store(a9);return $.iterate((g,ee)=>{let et=fD(ee),er=fR(this.serializer,et);return $.put(er)})}rewriteRemoteDocumentCache(g,$){let ee=$.store(aB),et=[];return ee.iterate((g,ee)=>{let er=$.store(aX),en=yn(ee).path.toArray(),ei={prefixPath:en.slice(0,en.length-2),collectionGroup:en[en.length-2],documentId:en[en.length-1],readTime:ee.readTime||[0,0],unknownDocument:ee.unknownDocument,noDocument:ee.noDocument,document:ee.document,hasCommittedMutations:!!ee.hasCommittedMutations};et.push(er.put(ei))}).next(()=>al.waitFor(et))}runOverlayMigration(g,$){let ee=$.store(az),et=mC(this.serializer),er=new mK(mH.factory,this.serializer.remoteSerializer);return ee.loadAll().next(g=>{let ee=new Map;return g.forEach(g=>{var $;let et=null!==($=ee.get(g.userId))&&void 0!==$?$:hz();fN(this.serializer,g).keys().forEach(g=>et=et.add(g)),ee.set(g.userId,et)}),al.forEach(ee,(g,ee)=>{let en=new ol(ee),ei=fQ.forUser(this.serializer,en),es=er.getIndexManager(en);return new mP(et,gZ.forUser(en,this.serializer,es,er.referenceDelegate),ei,es).recalculateAndSaveOverlaysForDocumentKeys(new lG($,aN.INVALID),g).next()})})}}function mJ(g){return[0,aP(g)]}function mX(g){g.createObjectStore(aj)}function mZ(g){g.createObjectStore(aV,{keyPath:aq}),g.createObjectStore(az,{keyPath:aG,autoIncrement:!0}).createIndex(a$,aK,{unique:!0}),g.createObjectStore(aJ)}function m0(g,$){return $.store(az).loadAll().next(ee=>{g.deleteObjectStore(az),g.createObjectStore(az,{keyPath:aG,autoIncrement:!0}).createIndex(a$,aK,{unique:!0});let et=$.store(az),er=ee.map(g=>et.put(g));return al.waitFor(er)})}function m1(g){g.createObjectStore(aB)}function m2(g){let $=g.createObjectStore(aX,{keyPath:aZ});$.createIndex(a0,a1),$.createIndex(a2,a3)}function m3(g){g.createObjectStore(a4)}function m4(g){g.createObjectStore(lt,{keyPath:lr}).createIndex(ln,li,{unique:!0}),g.createObjectStore(a9,{keyPath:a5}).createIndex(a8,a7,{unique:!0}),g.createObjectStore(ll)}function m6(g){g.deleteObjectStore(lt),g.deleteObjectStore(a9),g.deleteObjectStore(ll)}function m9(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}function m5(g){let $=g.store(ll),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:o$.min().toTimestamp(),targetCount:0};return $.put(ls,ee)}function m8(g){g.createObjectStore(lp,{keyPath:lf})}function m7(g){g.createObjectStore(lg,{keyPath:lm})}function ye(g){g.createObjectStore(ly,{keyPath:lv})}function yt(g){g.createObjectStore(lS,{keyPath:lT,autoIncrement:!0}).createIndex(lE,lw,{unique:!1}),g.createObjectStore(lC,{keyPath:l_}).createIndex(lI,lO,{unique:!1}),g.createObjectStore(lA,{keyPath:lN}).createIndex(lD,lR,{unique:!1})}function yr(g){let $=g.createObjectStore(lk,{keyPath:lx});$.createIndex(lP,lM,{unique:!1}),$.createIndex(lL,lF,{unique:!1})}function yn(g){return g.document?new oJ(oH.fromString(g.document.name).popFirst(5)):g.noDocument?oJ.fromSegments(g.noDocument.path):g.unknownDocument?oJ.fromSegments(g.unknownDocument.path):oE()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi="IndexedDbPersistence",ys=null,yo=5e3,yl=4e3,yu=null,yh=null,yp="firestore_zombie",yf="main";class yg{constructor(g,$,ee,et,er,en,ei,es,eo,eu,eh=mk){if(this.allowTabSynchronization=g,this.persistenceKey=$,this.clientId=ee,this.queue=er,this.window=en,this.document=ei,this.sequenceNumberSyncer=eo,this.forceOwningTab=eu,this.schemaVersion=eh,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=g=>Promise.resolve(),!yg.isAvailable())throw new oI(o_.UNIMPLEMENTED,yh);this.referenceDelegate=new my(this,et),this.dbName=$+yf,this.serializer=new fT(es),this.simpleDb=new af(this.dbName,this.schemaVersion,new mY(this.serializer)),this.targetCache=new g5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=mC(this.serializer),this.bundleCache=new fK,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===eu&&ov(yi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oI(o_.FAILED_PRECONDITION,yu);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",g=>this.targetCache.getHighestSequenceNumber(g))}).then(g=>{this.listenSequence=new aN(g,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(g=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(g)))}setPrimaryStateListener(g){return this.primaryStateListener=async $=>{if(this.started)return g($)},g(this.isPrimary)}setDatabaseDeletedListener(g){this.simpleDb.setVersionChangeListener(async $=>{null===$.newVersion&&await g()})}setNetworkEnabled(g){this.networkEnabled!==g&&(this.networkEnabled=g,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",g=>yy(g).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(g).next(g=>{g||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(g)).next($=>this.isPrimary&&!$?this.releasePrimaryLeaseIfHeld(g).next(()=>!1):!!$&&this.acquireOrExtendPrimaryLease(g).next(()=>!0))).catch(g=>{if(ay(g))return oy(yi,"Failed to extend owner lease: ",g),this.isPrimary;if(!this.allowTabSynchronization)throw g;return oy(yi,"Releasing owner lease after error during lease refresh",g),!1}).then(g=>{this.isPrimary!==g&&this.queue.enqueueRetryable(()=>this.primaryStateListener(g)),this.isPrimary=g})}verifyPrimaryLease(g){return ym(g).get(aU).next(g=>al.resolve(this.isLocalClient(g)))}removeClientMetadata(g){return yy(g).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,ys)){this.lastGarbageCollectionTime=Date.now();let g=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",g=>{let $=l$(g,lp);return $.loadAll().next(g=>{let ee=this.filterActiveClients(g,ys),et=g.filter(g=>-1===ee.indexOf(g));return al.forEach(et,g=>$.delete(g.clientId)).next(()=>et)})}).catch(()=>[]);if(this.webStorage)for(let $ of g)this.webStorage.removeItem(this.zombiedClientLocalStorageKey($.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",yl,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(g){return!!g&&g.ownerId===this.clientId}canActAsPrimary(g){return this.forceOwningTab?al.resolve(!0):ym(g).get(aU).next($=>{if(null!==$&&this.isWithinAge($.leaseTimestampMs,yo)&&!this.isClientZombied($.ownerId)){if(this.isLocalClient($)&&this.networkEnabled)return!0;if(!this.isLocalClient($)){if(!$.allowTabSynchronization)throw new oI(o_.FAILED_PRECONDITION,yu);return!1}}return!!this.networkEnabled&&!!this.inForeground||yy(g).loadAll().next(g=>void 0===this.filterActiveClients(g,yo).find(g=>{if(this.clientId!==g.clientId){let $=!this.networkEnabled&&g.networkEnabled,ee=!this.inForeground&&g.inForeground,et=this.networkEnabled===g.networkEnabled;if($||ee&&et)return!0}return!1}))}).next(g=>(this.isPrimary!==g&&oy(yi,`Client ${g?"is":"is not"} eligible for a primary lease.`),g))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[aj,lp],g=>{let $=new lG(g,aN.INVALID);return this.releasePrimaryLeaseIfHeld($).next(()=>this.removeClientMetadata($))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(g,$){return g.filter(g=>this.isWithinAge(g.updateTimeMs,$)&&!this.isClientZombied(g.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",g=>yy(g).loadAll().next(g=>this.filterActiveClients(g,ys).map(g=>g.clientId)))}get started(){return this._started}getMutationQueue(g,$){return gZ.forUser(g,this.serializer,$,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(g){return new g$(g,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(g){return fQ.forUser(this.serializer,g)}getBundleCache(){return this.bundleCache}runTransaction(g,$,ee){let et;oy(yi,"Starting transaction:",g);let er="readonly"===$?"readonly":"readwrite",en=lz(this.schemaVersion);return this.simpleDb.runTransaction(g,er,en,er=>(et=new lG(er,this.listenSequence?this.listenSequence.next():aN.INVALID),"readwrite-primary"===$)?this.verifyPrimaryLease(et).next(g=>!!g||this.canActAsPrimary(et)).next($=>{if(!$)throw ov(`Failed to obtain primary lease for action '${g}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new oI(o_.FAILED_PRECONDITION,ai);return ee(et)}).next(g=>this.acquireOrExtendPrimaryLease(et).next(()=>g)):this.verifyAllowTabSynchronization(et).next(()=>ee(et))).then(g=>(et.raiseOnCommittedEvent(),g))}verifyAllowTabSynchronization(g){return ym(g).get(aU).next(g=>{if(null!==g&&this.isWithinAge(g.leaseTimestampMs,yo)&&!this.isClientZombied(g.ownerId)&&!this.isLocalClient(g)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!g.allowTabSynchronization))throw new oI(o_.FAILED_PRECONDITION,yu)})}acquireOrExtendPrimaryLease(g){let $={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ym(g).put(aU,$)}static isAvailable(){return af.isAvailable()}releasePrimaryLeaseIfHeld(g){let $=ym(g);return $.get(aU).next(g=>this.isLocalClient(g)?(oy(yi,"Releasing primary lease."),$.delete(aU)):al.resolve())}isWithinAge(g,$){let ee=Date.now(),et=ee-$,er=ee;return!(g<et)&&(!(g>er)||(ov(`Detected an update time that is in the future: ${g} > ${er}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var g;"function"==typeof(null===(g=this.window)||void 0===g?void 0:g.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let g=/(?:Version|Mobile)\/1[456]/;isSafari()&&(navigator.appVersion.match(g)||navigator.userAgent.match(g))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(g){var $;try{let ee=(null===($=this.webStorage)||void 0===$?void 0:$.getItem(this.zombiedClientLocalStorageKey(g)))!==null;return oy(yi,`Client '${g}' ${ee?"is":"is not"} zombied in LocalStorage`),ee}catch(g){return ov(yi,"Failed to get zombied client id.",g),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(g){ov("Failed to set zombie client id.",g)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(g){}}zombiedClientLocalStorageKey(g){return`${yp}_${this.persistenceKey}_${g}`}}function ym(g){return l$(g,aj)}function yy(g){return l$(g,lp)}function yv(g,$){let ee=g.projectId;return g.isDefaultDatabase||(ee+="."+g.database),"firestore/"+$+"/"+ee+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(g,$,ee,et,er){$=[...$],(g=[...g]).sort(ee),$.sort(ee);let en=g.length,ei=$.length,es=0,eo=0;for(;es<ei&&eo<en;){let en=ee(g[eo],$[es]);en<0?er(g[eo++]):en>0?et($[es++]):(es++,eo++)}for(;es<ei;)et($[es++]);for(;eo<en;)er(g[eo++])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yT="LocalStore",yE=null;class yw{constructor(g,$,ee,et){this.persistence=g,this.queryEngine=$,this.serializer=et,this.targetDataByTarget=new lQ(oj),this.targetIdByTarget=new hD(g=>cK(g),cH),this.collectionGroupReadTime=new Map,this.remoteDocuments=g.getRemoteDocumentCache(),this.targetCache=g.getTargetCache(),this.bundleCache=g.getBundleCache(),this.initializeUserComponents(ee)}initializeUserComponents(g){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(g),this.indexManager=this.persistence.getIndexManager(g),this.mutationQueue=this.persistence.getMutationQueue(g,this.indexManager),this.localDocuments=new mP(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(g){return this.persistence.runTransaction("Collect garbage","readwrite-primary",$=>g.collect($,this.targetDataByTarget))}}function yC(g,$,ee,et){return new yw(g,$,ee,et)}async function y_(g,$){let ee=oC(g);return await ee.persistence.runTransaction("Handle user change","readonly",g=>{let et;return ee.mutationQueue.getAllMutationBatches(g).next(er=>(et=er,ee.initializeUserComponents($),ee.mutationQueue.getAllMutationBatches(g))).next($=>{let er=[],en=[],ei=hz();for(let g of et)for(let $ of(er.push(g.batchId),g.mutations))ei=ei.add($.key);for(let g of $)for(let $ of(en.push(g.batchId),g.mutations))ei=ei.add($.key);return ee.localDocuments.getDocuments(g,ei).next(g=>({affectedDocuments:g,removedBatchIds:er,addedBatchIds:en}))})})}function yI(g,$){let ee,et;let er=oC(g),en=oG.now(),ei=$.reduce((g,$)=>g.add($.key),hz());return er.persistence.runTransaction("Locally write mutations","readwrite",g=>{let es=hk(),eo=hz();return er.remoteDocuments.getEntries(g,ei).next(g=>{(es=g).forEach((g,$)=>{$.isValidDocument()||(eo=eo.add(g))})}).next(()=>er.localDocuments.getOverlayedDocuments(g,es)).next(et=>{ee=et;let ei=[];for(let g of $){let $=dp(g,ee.get(g.key).overlayedDocument);null!=$&&ei.push(new dS(g.key,$,ci($.value.mapValue),dn.exists(!0)))}return er.mutationQueue.addMutationBatch(g,en,ei,$)}).next($=>{et=$;let en=$.applyToLocalDocumentSet(ee,eo);return er.documentOverlayCache.saveOverlays(g,$.batchId,en)})}).then(()=>({batchId:et.batchId,changes:hL(ee)}))}function yO(g,$){let ee=oC(g);return ee.persistence.runTransaction("Acknowledge batch","readwrite-primary",g=>{let et=$.batch.keys(),er=ee.remoteDocuments.newChangeBuffer({trackRemovals:!0});return yq(ee,g,$,er).next(()=>er.apply(g)).next(()=>ee.mutationQueue.performConsistencyCheck(g)).next(()=>ee.documentOverlayCache.removeOverlaysForBatchId(g,et,$.batch.batchId)).next(()=>ee.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,yA($))).next(()=>ee.localDocuments.getDocuments(g,et))})}function yA(g){let $=hz();for(let ee=0;ee<g.mutationResults.length;++ee)g.mutationResults[ee].transformResults.length>0&&($=$.add(g.batch.mutations[ee].key));return $}function yN(g,$){let ee=oC(g);return ee.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let et;return ee.mutationQueue.lookupMutationBatch(g,$).next($=>(ow(null!==$),et=$.keys(),ee.mutationQueue.removeMutationBatch(g,$))).next(()=>ee.mutationQueue.performConsistencyCheck(g)).next(()=>ee.documentOverlayCache.removeOverlaysForBatchId(g,et,$)).next(()=>ee.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,et)).next(()=>ee.localDocuments.getDocuments(g,et))})}function yD(g){let $=oC(g);return $.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>$.mutationQueue.getHighestUnacknowledgedBatchId(g))}function yR(g){let $=oC(g);return $.persistence.runTransaction("Get last remote snapshot version","readonly",g=>$.targetCache.getLastRemoteSnapshotVersion(g))}function yk(g,$){let ee=oC(g),et=$.snapshotVersion,er=ee.targetDataByTarget;return ee.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{let en=ee.remoteDocuments.newChangeBuffer({trackRemovals:!0});er=ee.targetDataByTarget;let ei=[];$.targetChanges.forEach((en,es)=>{let eo=er.get(es);if(!eo)return;ei.push(ee.targetCache.removeMatchingKeys(g,en.removedDocuments,es).next(()=>ee.targetCache.addMatchingKeys(g,en.addedDocuments,es)));let eu=eo.withSequenceNumber(g.currentSequenceNumber);null!==$.targetMismatches.get(es)?eu=eu.withResumeToken(l9.EMPTY_BYTE_STRING,o$.min()).withLastLimboFreeSnapshotVersion(o$.min()):en.resumeToken.approximateByteSize()>0&&(eu=eu.withResumeToken(en.resumeToken,et)),er=er.insert(es,eu),yP(eo,eu,en)&&ei.push(ee.targetCache.updateTargetData(g,eu))});let es=hk(),eo=hz();if($.documentUpdates.forEach(et=>{$.resolvedLimboDocuments.has(et)&&ei.push(ee.persistence.referenceDelegate.updateLimboDocument(g,et))}),ei.push(yx(g,en,$.documentUpdates).next(g=>{es=g.changedDocuments,eo=g.existenceChangedKeys})),!et.isEqual(o$.min())){let $=ee.targetCache.getLastRemoteSnapshotVersion(g).next($=>ee.targetCache.setTargetsMetadata(g,g.currentSequenceNumber,et));ei.push($)}return al.waitFor(ei).next(()=>en.apply(g)).next(()=>ee.localDocuments.getLocalViewOfDocuments(g,es,eo)).next(()=>es)}).then(g=>(ee.targetDataByTarget=er,g))}function yx(g,$,ee){let et=hz(),er=hz();return ee.forEach(g=>et=et.add(g)),$.getEntries(g,et).next(g=>{let et=hk();return ee.forEach((ee,en)=>{let ei=g.get(ee);en.isFoundDocument()!==ei.isFoundDocument()&&(er=er.add(ee)),en.isNoDocument()&&en.version.isEqual(o$.min())?($.removeEntry(ee,en.readTime),et=et.insert(ee,en)):!ei.isValidDocument()||en.version.compareTo(ei.version)>0||0===en.version.compareTo(ei.version)&&ei.hasPendingWrites?($.addEntry(en),et=et.insert(ee,en)):oy(yT,"Ignoring outdated watch update for ",ee,". Current version:",ei.version," Watch version:",en.version)}),{changedDocuments:et,existenceChangedKeys:er}})}function yP(g,$,ee){return!!(0===g.resumeToken.approximateByteSize()||$.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=yE)||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}async function yM(g,$){let ee=oC(g);try{await ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>al.forEach($,$=>al.forEach($.addedKeys,et=>ee.persistence.referenceDelegate.addReference(g,$.targetId,et)).next(()=>al.forEach($.removedKeys,et=>ee.persistence.referenceDelegate.removeReference(g,$.targetId,et)))))}catch(g){if(ay(g))oy(yT,"Failed to update sequence numbers: "+g);else throw g}for(let g of $){let $=g.targetId;if(!g.fromCache){let g=ee.targetDataByTarget.get($),et=g.snapshotVersion,er=g.withLastLimboFreeSnapshotVersion(et);ee.targetDataByTarget=ee.targetDataByTarget.insert($,er)}}}function yL(g,$){let ee=oC(g);return ee.persistence.runTransaction("Get next mutation batch","readonly",g=>(void 0===$&&($=uv),ee.mutationQueue.getNextMutationBatchAfterBatchId(g,$)))}function yF(g,$){let ee=oC(g);return ee.persistence.runTransaction("read document","readonly",g=>ee.localDocuments.getDocument(g,$))}function yB(g,$){let ee=oC(g);return ee.persistence.runTransaction("Allocate target","readwrite",g=>{let et;return ee.targetCache.getTargetData(g,$).next(er=>er?(et=er,al.resolve(et)):ee.targetCache.allocateTargetId(g).next(er=>(et=new fS($,er,"TargetPurposeListen",g.currentSequenceNumber),ee.targetCache.addTargetData(g,et).next(()=>et))))}).then(g=>{let et=ee.targetDataByTarget.get(g.targetId);return(null===et||g.snapshotVersion.compareTo(et.snapshotVersion)>0)&&(ee.targetDataByTarget=ee.targetDataByTarget.insert(g.targetId,g),ee.targetIdByTarget.set($,g.targetId)),g})}function yj(g,$,ee){let et=oC(g),er=et.targetIdByTarget.get(ee);return void 0!==er?al.resolve(et.targetDataByTarget.get(er)):et.targetCache.getTargetData($,ee)}async function yU(g,$,ee){let et=oC(g),er=et.targetDataByTarget.get($),en=ee?"readwrite":"readwrite-primary";try{ee||await et.persistence.runTransaction("Release target",en,g=>et.persistence.referenceDelegate.removeTarget(g,er))}catch(g){if(ay(g))oy(yT,`Failed to update sequence numbers for target ${$}: ${g}`);else throw g}et.targetDataByTarget=et.targetDataByTarget.remove($),et.targetIdByTarget.delete(er.target)}function yV(g,$,ee){let et=oC(g),er=o$.min(),en=hz();return et.persistence.runTransaction("Execute query","readonly",g=>yj(et,g,hh($)).next($=>{if($)return er=$.lastLimboFreeSnapshotVersion,et.targetCache.getMatchingKeysForTargetId(g,$.targetId).next(g=>{en=g})}).next(()=>et.queryEngine.getDocumentsMatchingQuery(g,$,ee?er:o$.min(),ee?en:hz())).next(g=>(yH(et,hO($),g),{documents:g,remoteKeys:en})))}function yq(g,$,ee,et){let er=ee.batch,en=er.keys(),ei=al.resolve();return en.forEach(g=>{ei=ei.next(()=>et.getEntry($,g)).next($=>{let en=ee.docVersions.get(g);ow(null!==en),0>$.version.compareTo(en)&&(er.applyToRemoteDocument($,ee),$.isValidDocument()&&($.setReadTime(ee.commitVersion),et.addEntry($)))})}),ei.next(()=>g.mutationQueue.removeMutationBatch($,er))}function yz(g,$){let ee=oC(g),et=oC(ee.mutationQueue);return ee.persistence.runTransaction("Lookup mutation documents","readonly",g=>et.lookupMutationKeys(g,$).next($=>$?ee.localDocuments.getDocuments(g,$):al.resolve(null)))}function yG(g,$){oC(oC(g,yw).mutationQueue).removeCachedMutationKeys($)}function y$(g){return oC(oC(g,yw).persistence).getActiveClients()}function yK(g,$){let ee=oC(g),et=oC(ee.targetCache),er=ee.targetDataByTarget.get($);return er?Promise.resolve(er.target):ee.persistence.runTransaction("Get target data","readonly",g=>et.getTargetDataForTarget(g,$).next(g=>g?g.target:null))}function yW(g,$){let ee=oC(g),et=ee.collectionGroupReadTime.get($)||o$.min();return ee.persistence.runTransaction("Get new document changes","readonly",g=>ee.remoteDocuments.getAllFromCollectionGroup(g,$,o7(et,oX),Number.MAX_SAFE_INTEGER)).then(g=>(yH(ee,$,g),g))}function yH(g,$,ee){let et=g.collectionGroupReadTime.get($)||o$.min();ee.forEach((g,$)=>{$.readTime.compareTo(et)>0&&(et=$.readTime)}),g.collectionGroupReadTime.set($,et)}function yQ(g){return hh(he(oH.fromString(`__bundle__/docs/${g}`)))}async function yY(g,$,ee,et){let er=oC(g),en=hz(),ei=hk();for(let g of ee){let ee=$.toDocumentKey(g.metadata.name);g.document&&(en=en.add(ee));let et=$.toMutableDocument(g);et.setReadTime($.toSnapshotVersion(g.metadata.readTime)),ei=ei.insert(ee,et)}let es=er.remoteDocuments.newChangeBuffer({trackRemovals:!0}),eo=await yB(er,yQ(et));return er.persistence.runTransaction("Apply bundle documents","readwrite",g=>yx(g,es,ei).next($=>(es.apply(g),$)).next($=>er.targetCache.removeMatchingKeysForTargetId(g,eo.targetId).next(()=>er.targetCache.addMatchingKeys(g,en,eo.targetId)).next(()=>er.localDocuments.getLocalViewOfDocuments(g,$.changedDocuments,$.existenceChangedKeys)).next(()=>$.changedDocuments)))}function yJ(g,$){let ee=oC(g),et=pu($.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",g=>ee.bundleCache.getBundleMetadata(g,$.id)).then(g=>!!g&&g.createTime.compareTo(et)>=0)}function yX(g,$){let ee=oC(g);return ee.persistence.runTransaction("Save bundle","readwrite",g=>ee.bundleCache.saveBundleMetadata(g,$))}async function yZ(g,$,ee=hz()){let et=await yB(g,hh(fF($.bundledQuery))),er=oC(g);return er.persistence.runTransaction("Save named query","readwrite",g=>{let en=pu($.readTime);if(et.snapshotVersion.compareTo(en)>=0)return er.bundleCache.saveNamedQuery(g,$);let ei=et.withResumeToken(l9.EMPTY_BYTE_STRING,en);return er.targetDataByTarget=er.targetDataByTarget.insert(ei.targetId,ei),er.targetCache.updateTargetData(g,ei).next(()=>er.targetCache.removeMatchingKeysForTargetId(g,et.targetId)).next(()=>er.targetCache.addMatchingKeys(g,ee,et.targetId)).next(()=>er.bundleCache.saveNamedQuery(g,$))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.initialized=!1}initialize(g,$){this.localDocumentsView=g,this.indexManager=$,this.initialized=!0}getDocumentsMatchingQuery(g,$,ee,et){return this.performQueryUsingIndex(g,$).next(er=>er||this.performQueryUsingRemoteKeys(g,$,et,ee)).next(ee=>ee||this.executeFullCollectionScan(g,$))}performQueryUsingIndex(g,$){if(hr($))return al.resolve(null);let ee=hh($);return this.indexManager.getIndexType(g,ee).next(et=>0===et?null:(null!==$.limit&&1===et&&(ee=hh($=hg($,null,"F"))),this.indexManager.getDocumentsMatchingTarget(g,ee).next(et=>{let er=hz(...et);return this.localDocumentsView.getDocuments(g,er).next(et=>this.indexManager.getMinOffset(g,ee).next(ee=>{let en=this.applyQuery($,et);return this.needsRefill($,en,er,ee.readTime)?this.performQueryUsingIndex(g,hg($,null,"F")):this.appendRemainingResults(g,en,$,ee)}))})))}performQueryUsingRemoteKeys(g,$,ee,et){return hr($)||et.isEqual(o$.min())?this.executeFullCollectionScan(g,$):this.localDocumentsView.getDocuments(g,ee).next(er=>{let en=this.applyQuery($,er);return this.needsRefill($,en,ee,et)?this.executeFullCollectionScan(g,$):(om()<=tZ.DEBUG&&oy("QueryEngine","Re-using previous result from %s to execute query: %s",et.toString(),hT($)),this.appendRemainingResults(g,en,$,o7(et,oX)))})}applyQuery(g,$){let ee=new lZ(hA(g));return $.forEach(($,et)=>{hE(g,et)&&(ee=ee.add(et))}),ee}needsRefill(g,$,ee,et){if(null===g.limit)return!1;if(ee.size!==$.size)return!0;let er="F"===g.limitType?$.last():$.first();return!!er&&(er.hasPendingWrites||er.version.compareTo(et)>0)}executeFullCollectionScan(g,$){return om()<=tZ.DEBUG&&oy("QueryEngine","Using full collection scan to execute query:",hT($)),this.localDocumentsView.getDocumentsMatchingQuery(g,$,ar.min())}appendRemainingResults(g,$,ee,et){return this.localDocumentsView.getDocumentsMatchingQuery(g,ee,et).next(g=>($.forEach($=>{g=g.insert($.key,$)}),g))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y1="firestore_clients";function y2(g,$){return`${y1}_${g}_${$}`}let y3="firestore_mutations";function y4(g,$,ee){let et=`${y3}_${g}_${ee}`;return $.isAuthenticated()&&(et+=`_${$.uid}`),et}let y6="firestore_targets";function y9(g,$){return`${y6}_${g}_${$}`}let y5="firestore_online_state";function y8(g){return`${y5}_${g}`}let y7="firestore_bundle_loaded_v2";function ve(g){return`${y7}_${g}`}let vt="firestore_sequence_number";function vr(g){return`${vt}_${g}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vn="SharedClientState";class vi{constructor(g,$,ee,et){this.user=g,this.batchId=$,this.state=ee,this.error=et}static fromWebStorageEntry(g,$,ee){let et;let er=JSON.parse(ee),en="object"==typeof er&&-1!==["pending","acknowledged","rejected"].indexOf(er.state)&&(void 0===er.error||"object"==typeof er.error);return(en&&er.error&&(en="string"==typeof er.error.message&&"string"==typeof er.error.code)&&(et=new oI(er.error.code,er.error.message)),en)?new vi(g,$,er.state,et):(ov(vn,`Failed to parse mutation state for ID '${$}': ${ee}`),null)}toWebStorageJSON(){let g={state:this.state,updateTimeMs:Date.now()};return this.error&&(g.error={code:this.error.code,message:this.error.message}),JSON.stringify(g)}}class vs{constructor(g,$,ee){this.targetId=g,this.state=$,this.error=ee}static fromWebStorageEntry(g,$){let ee;let et=JSON.parse($),er="object"==typeof et&&-1!==["not-current","current","rejected"].indexOf(et.state)&&(void 0===et.error||"object"==typeof et.error);return(er&&et.error&&(er="string"==typeof et.error.message&&"string"==typeof et.error.code)&&(ee=new oI(et.error.code,et.error.message)),er)?new vs(g,et.state,ee):(ov(vn,`Failed to parse target state for ID '${g}': ${$}`),null)}toWebStorageJSON(){let g={state:this.state,updateTimeMs:Date.now()};return this.error&&(g.error={code:this.error.code,message:this.error.message}),JSON.stringify(g)}}class vo{constructor(g,$){this.clientId=g,this.activeTargetIds=$}static fromWebStorageEntry(g,$){let ee=JSON.parse($),et="object"==typeof ee&&ee.activeTargetIds instanceof Array,er=h$();for(let g=0;et&&g<ee.activeTargetIds.length;++g)et=uE(ee.activeTargetIds[g]),er=er.add(ee.activeTargetIds[g]);return et?new vo(g,er):(ov(vn,`Failed to parse client data for instance '${g}': ${$}`),null)}}class vl{constructor(g,$){this.clientId=g,this.onlineState=$}static fromWebStorageEntry(g){let $=JSON.parse(g);return"object"==typeof $&&-1!==["Unknown","Online","Offline"].indexOf($.onlineState)&&"string"==typeof $.clientId?new vl($.clientId,$.onlineState):(ov(vn,`Failed to parse online state: ${g}`),null)}}class vu{constructor(){this.activeTargetIds=h$()}addQueryTarget(g){this.activeTargetIds=this.activeTargetIds.add(g)}removeQueryTarget(g){this.activeTargetIds=this.activeTargetIds.delete(g)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class vh{constructor(g,$,ee,et,er){this.window=g,this.queue=$,this.persistenceKey=ee,this.localClientId=et,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new lQ(oj),this.started=!1,this.earlyEvents=[];let en=ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=er,this.localClientStorageKey=y2(this.persistenceKey,this.localClientId),this.sequenceNumberKey=vr(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new vu),this.clientStateKeyRe=RegExp(`^${y1}_${en}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${y3}_${en}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${y6}_${en}_(\\d+)$`),this.onlineStateKey=y8(this.persistenceKey),this.bundleLoadedKey=ve(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(g){return!!(g&&g.localStorage)}async start(){for(let g of(await this.syncEngine.getActiveClients())){if(g===this.localClientId)continue;let $=this.getItem(y2(this.persistenceKey,g));if($){let ee=vo.fromWebStorageEntry(g,$);ee&&(this.activeClients=this.activeClients.insert(ee.clientId,ee))}}this.persistClientState();let g=this.storage.getItem(this.onlineStateKey);if(g){let $=this.fromWebStorageOnlineState(g);$&&this.handleOnlineStateEvent($)}for(let g of this.earlyEvents)this.handleWebStorageEvent(g);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(g){this.setItem(this.sequenceNumberKey,JSON.stringify(g))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(g){let $=!1;return this.activeClients.forEach((ee,et)=>{et.activeTargetIds.has(g)&&($=!0)}),$}addPendingMutation(g){this.persistMutationState(g,"pending")}updateMutationState(g,$,ee){this.persistMutationState(g,$,ee),this.removeMutationState(g)}addLocalQueryTarget(g){let $="not-current";if(this.isActiveQueryTarget(g)){let ee=this.storage.getItem(y9(this.persistenceKey,g));if(ee){let et=vs.fromWebStorageEntry(g,ee);et&&($=et.state)}}return this.localClientState.addQueryTarget(g),this.persistClientState(),$}removeLocalQueryTarget(g){this.localClientState.removeQueryTarget(g),this.persistClientState()}isLocalQueryTarget(g){return this.localClientState.activeTargetIds.has(g)}clearQueryState(g){this.removeItem(y9(this.persistenceKey,g))}updateQueryState(g,$,ee){this.persistQueryTargetState(g,$,ee)}handleUserChange(g,$,ee){$.forEach(g=>{this.removeMutationState(g)}),this.currentUser=g,ee.forEach(g=>{this.addPendingMutation(g)})}setOnlineState(g){this.persistOnlineState(g)}notifyBundleLoaded(g){this.persistBundleLoadedState(g)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(g){let $=this.storage.getItem(g);return oy(vn,"READ",g,$),$}setItem(g,$){oy(vn,"SET",g,$),this.storage.setItem(g,$)}removeItem(g){oy(vn,"REMOVE",g),this.storage.removeItem(g)}handleWebStorageEvent(g){let $=g;if($.storageArea===this.storage){if(oy(vn,"EVENT",$.key,$.newValue),$.key===this.localClientStorageKey){ov("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(async()=>{if(!this.started){this.earlyEvents.push($);return}if(null!==$.key){if(this.clientStateKeyRe.test($.key)){if(null!=$.newValue){let g=this.fromWebStorageClientState($.key,$.newValue);if(g)return this.handleClientStateEvent(g.clientId,g)}else{let g=this.fromWebStorageClientStateKey($.key);return this.handleClientStateEvent(g,null)}}else if(this.mutationBatchKeyRe.test($.key)){if(null!==$.newValue){let g=this.fromWebStorageMutationMetadata($.key,$.newValue);if(g)return this.handleMutationBatchEvent(g)}}else if(this.queryTargetKeyRe.test($.key)){if(null!==$.newValue){let g=this.fromWebStorageQueryTargetMetadata($.key,$.newValue);if(g)return this.handleQueryTargetEvent(g)}}else if($.key===this.onlineStateKey){if(null!==$.newValue){let g=this.fromWebStorageOnlineState($.newValue);if(g)return this.handleOnlineStateEvent(g)}}else if($.key===this.sequenceNumberKey){let g=vp($.newValue);g!==aN.INVALID&&this.sequenceNumberHandler(g)}else if($.key===this.bundleLoadedKey){let g=this.fromWebStoreBundleLoadedState($.newValue);await Promise.all(g.map(g=>this.syncEngine.synchronizeWithChangedDocuments(g)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(g,$,ee){let et=new vi(this.currentUser,g,$,ee),er=y4(this.persistenceKey,this.currentUser,g);this.setItem(er,et.toWebStorageJSON())}removeMutationState(g){let $=y4(this.persistenceKey,this.currentUser,g);this.removeItem($)}persistOnlineState(g){let $={clientId:this.localClientId,onlineState:g};this.storage.setItem(this.onlineStateKey,JSON.stringify($))}persistQueryTargetState(g,$,ee){let et=y9(this.persistenceKey,g),er=new vs(g,$,ee);this.setItem(et,er.toWebStorageJSON())}persistBundleLoadedState(g){let $=JSON.stringify(Array.from(g));this.setItem(this.bundleLoadedKey,$)}fromWebStorageClientStateKey(g){let $=this.clientStateKeyRe.exec(g);return $?$[1]:null}fromWebStorageClientState(g,$){let ee=this.fromWebStorageClientStateKey(g);return vo.fromWebStorageEntry(ee,$)}fromWebStorageMutationMetadata(g,$){let ee=this.mutationBatchKeyRe.exec(g),et=Number(ee[1]),er=void 0!==ee[2]?ee[2]:null;return vi.fromWebStorageEntry(new ol(er),et,$)}fromWebStorageQueryTargetMetadata(g,$){let ee=Number(this.queryTargetKeyRe.exec(g)[1]);return vs.fromWebStorageEntry(ee,$)}fromWebStorageOnlineState(g){return vl.fromWebStorageEntry(g)}fromWebStoreBundleLoadedState(g){return JSON.parse(g)}async handleMutationBatchEvent(g){if(g.user.uid!==this.currentUser.uid){oy(vn,`Ignoring mutation for non-active user ${g.user.uid}`);return}return this.syncEngine.applyBatchState(g.batchId,g.state,g.error)}handleQueryTargetEvent(g){return this.syncEngine.applyTargetState(g.targetId,g.state,g.error)}handleClientStateEvent(g,$){let ee=$?this.activeClients.insert(g,$):this.activeClients.remove(g),et=this.extractActiveQueryTargets(this.activeClients),er=this.extractActiveQueryTargets(ee),en=[],ei=[];return er.forEach(g=>{et.has(g)||en.push(g)}),et.forEach(g=>{er.has(g)||ei.push(g)}),this.syncEngine.applyActiveTargetsChange(en,ei).then(()=>{this.activeClients=ee})}handleOnlineStateEvent(g){this.activeClients.get(g.clientId)&&this.onlineStateHandler(g.onlineState)}extractActiveQueryTargets(g){let $=h$();return g.forEach((g,ee)=>{$=$.unionWith(ee.activeTargetIds)}),$}}function vp(g){let $=aN.INVALID;if(null!=g)try{let ee=JSON.parse(g);ow("number"==typeof ee),$=ee}catch(g){ov(vn,"Failed to read sequence number from WebStorage",g)}return $}class vf{constructor(){this.localState=new vu,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(g){}updateMutationState(g,$,ee){}addLocalQueryTarget(g){return this.localState.addQueryTarget(g),this.queryState[g]||"not-current"}updateQueryState(g,$,ee){this.queryState[g]=$}removeLocalQueryTarget(g){this.localState.removeQueryTarget(g)}isLocalQueryTarget(g){return this.localState.activeTargetIds.has(g)}clearQueryState(g){delete this.queryState[g]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(g){return this.localState.activeTargetIds.has(g)}start(){return this.localState=new vu,Promise.resolve()}handleUserChange(g,$,ee){}setOnlineState(g){}shutdown(){}writeSequenceNumber(g){}notifyBundleLoaded(g){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{addCallback(g){}shutdown(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(g){this.sendFn=g.sendFn,this.closeFn=g.closeFn}onOpen(g){this.wrappedOnOpen=g}onClose(g){this.wrappedOnClose=g}onMessage(g){this.wrappedOnMessage=g}close(){this.closeFn()}send(g){this.sendFn(g)}callOnOpen(){this.wrappedOnOpen()}callOnClose(g){this.wrappedOnClose(g)}callOnMessage(g){this.wrappedOnMessage(g)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy=null;function vv(){return 268435456+Math.round(2147483648*Math.random())}function vS(){return null===vy?vy=vv():vy++,"0x"+vy.toString(16)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(g){return new Promise(($,ee)=>{g((g,et)=>{g?ee(g):$(et)})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vE="1.7.3",vw="GrpcConnection",vC=`gl-node/${process.versions.node} fire/${ou} grpc/${vE}`;function v_(g,$,ee,et){ow(null===$||"OAuth"===$.type);let er=new or.SF;return $&&$.headers.forEach((g,$)=>er.set($,g)),ee&&ee.headers.forEach((g,$)=>er.set($,g)),et&&er.set("X-Firebase-GMPID",et),er.set("X-Goog-Api-Client",vC),er.set("Google-Cloud-Resource-Prefix",g),er.set("x-goog-request-params",g),er}class vI{constructor(g,$){this.databaseInfo=$,this.cachedStub=null,this.firestore=g.google.firestore.v1,this.databasePath=`projects/${$.databaseId.projectId}/databases/${$.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){oy(vw,"Creating Firestore stub.");let g=this.databaseInfo.ssl?or.K9.createSsl():or.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,g)}return this.cachedStub}invokeRPC(g,$,ee,et,er){let en=vS(),ei=this.ensureActiveStub(),es=v_(this.databasePath,et,er,this.databaseInfo.appId),eo=Object.assign({database:this.databasePath},ee);return vT($=>(oy(vw,`RPC '${g}' ${en} invoked with request:`,ee),ei[g](eo,es,(ee,et)=>{ee?(oy(vw,`RPC '${g}' ${en} failed with error:`,ee),$(new oI(dL(ee.code),ee.message))):(oy(vw,`RPC '${g}' ${en} completed with response:`,et),$(void 0,et))})))}invokeStreamingRPC(g,$,ee,et,er,en){let ei=vS(),es=[],eo=new oO;oy(vw,`RPC '${g}' ${ei} invoked (streaming) with request:`,ee);let eu=this.ensureActiveStub(),eh=v_(this.databasePath,et,er,this.databaseInfo.appId),ep=Object.assign(Object.assign({},ee),{database:this.databasePath}),ef=eu[g](ep,eh),eg=!1;return ef.on("data",$=>{oy(vw,`RPC ${g} ${ei} received result:`,$),es.push($),void 0!==en&&es.length===en&&(eg=!0,eo.resolve(es))}),ef.on("end",()=>{oy(vw,`RPC '${g}' ${ei} completed.`),eg||(eg=!0,eo.resolve(es))}),ef.on("error",$=>{oy(vw,`RPC '${g}' ${ei} failed with error:`,$);let ee=dL($.code);eo.reject(new oI(ee,$.message))}),eo.promise}openStream(g,$,ee){let et=vS(),er=this.ensureActiveStub(),en=v_(this.databasePath,$,ee,this.databaseInfo.appId),ei=er[g](en),es=!1,eo=g=>{es||(es=!0,eu.callOnClose(g),ei.end())},eu=new vm({sendFn:$=>{if(es)oy(vw,`RPC '${g}' stream ${et} not sending because gRPC stream is closed:`,$);else{oy(vw,`RPC '${g}' stream ${et} sending:`,$);try{ei.write($)}catch(g){throw ov("Failure sending:",$),ov("Error:",g),g}}},closeFn:()=>{oy(vw,`RPC '${g}' stream ${et} closed locally via close().`),eo()}});return ei.on("data",$=>{es||(oy(vw,`RPC '${g}' stream ${et} received:`,$),eu.callOnMessage($))}),ei.on("end",()=>{oy(vw,`RPC '${g}' stream ${et} ended.`),eo()}),ei.on("error",$=>{es||(oS(vw,`RPC '${g}' stream ${et} error. Code:`,$.code,"Message:",$.message),eo(new oI(dL($.code),$.message)))}),oy(vw,`Opening RPC '${g}' stream ${et} to ${this.databaseInfo.host}`),setTimeout(()=>{eu.callOnOpen()},0),eu}}let vO={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var vA={nested:vO},vN=Object.freeze({__proto__:null,nested:vO,default:vA});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vD={longs:String,enums:String,defaults:!0,oneofs:!1};function vR(){let g=on.im(vN,vD);return or.Rz(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(g){return new vI(vR(),g)}function vx(){return new vg}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function vM(){return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(g){return new d7(g,!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vF="ExponentialBackoff",vB=1e3,vj=1.5,vU=6e4;class vV{constructor(g,$,ee=vB,et=vj,er=vU){this.queue=g,this.timerId=$,this.initialDelayMs=ee,this.backoffFactor=et,this.maxDelayMs=er,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(g){this.cancel();let $=Math.floor(this.currentBaseMs+this.jitterDelayMs()),ee=Math.max(0,Date.now()-this.lastAttemptTime),et=Math.max(0,$-ee);et>0&&oy(vF,`Backing off for ${et} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${$} ms, last attempt: ${ee} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,et,()=>(this.lastAttemptTime=Date.now(),g())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vq="PersistentStream",vz=6e4,vG=1e4;class v${constructor(g,$,ee,et,er,en,ei,es){this.queue=g,this.idleTimerId=ee,this.healthTimerId=et,this.connection=er,this.authCredentialsProvider=en,this.appCheckCredentialsProvider=ei,this.listener=es,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new vV(g,$)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,vz,()=>this.handleIdleCloseTimer()))}sendRequest(g){this.cancelIdleCheck(),this.stream.send(g)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(g,$){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==g?this.backoff.reset():$&&$.code===o_.RESOURCE_EXHAUSTED?(ov($.toString()),ov("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):$&&$.code===o_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=g,await this.listener.onClose($)}tearDown(){}auth(){this.state=1;let g=this.getCloseGuardedDispatcher(this.closeCount),$=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([g,ee])=>{this.closeCount===$&&this.startStream(g,ee)},$=>{g(()=>{let g=new oI(o_.UNKNOWN,"Fetching auth token failed: "+$.message);return this.handleStreamClose(g)})})}startStream(g,$){let ee=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(g,$),this.stream.onOpen(()=>{ee(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,vG,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(g=>{ee(()=>this.handleStreamClose(g))}),this.stream.onMessage(g=>{ee(()=>this.onMessage(g))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(g){return oy(vq,`close with error: ${g}`),this.stream=null,this.close(4,g)}getCloseGuardedDispatcher(g){return $=>{this.queue.enqueueAndForget(()=>this.closeCount===g?$():(oy(vq,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vK extends null{constructor(g,$,ee,et,er,en){super(g,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",$,ee,et,en),this.serializer=er}startRpc(g,$){return this.connection.openStream("Listen",g,$)}onMessage(g){this.backoff.reset();let $=pA(this.serializer,g),ee=pD(g);return this.listener.onWatchChange($,ee)}watch(g){let $={};$.database=pv(this.serializer),$.addTarget=pW(this.serializer,g);let ee=p$(this.serializer,g);ee&&($.labels=ee),this.sendRequest($)}unwatch(g){let $={};$.database=pv(this.serializer),$.removeTarget=g,this.sendRequest($)}}class vW extends v${constructor(g,$,ee,et,er,en){super(g,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",$,ee,et,en),this.serializer=er,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc(g,$){return this.connection.openStream("Write",g,$)}onMessage(g){if(ow(!!g.streamToken),this.lastStreamToken=g.streamToken,!this.handshakeComplete_)return ow(!g.writeResults||0===g.writeResults.length),this.handshakeComplete_=!0,this.listener.onHandshakeComplete();{this.backoff.reset();let $=pL(g.writeResults,g.commitTime),ee=pu(g.commitTime);return this.listener.onMutationResult(ee,$)}}writeHandshake(){let g={};g.database=pv(this.serializer),this.sendRequest(g)}writeMutations(g){let $={streamToken:this.lastStreamToken,writes:g.map(g=>pR(this.serializer,g))};this.sendRequest($)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{}class vQ extends vH{constructor(g,$,ee,et){super(),this.authCredentials=g,this.appCheckCredentials=$,this.connection=ee,this.serializer=et,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new oI(o_.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(g,$,ee){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([et,er])=>this.connection.invokeRPC(g,$,ee,et,er)).catch(g=>{if("FirebaseError"===g.name)throw g.code===o_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g;throw new oI(o_.UNKNOWN,g.toString())})}invokeStreamingRPC(g,$,ee,et){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([er,en])=>this.connection.invokeStreamingRPC(g,$,ee,er,en,et)).catch(g=>{if("FirebaseError"===g.name)throw g.code===o_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g;throw new oI(o_.UNKNOWN,g.toString())})}terminate(){this.terminated=!0}}function vY(g,$,ee,et){return new vQ(g,$,ee,et)}async function vJ(g,$){let ee=oC(g),et=pv(ee.serializer)+"/documents",er={writes:$.map(g=>pR(ee.serializer,g))};await ee.invokeRPC("Commit",et,er)}async function vX(g,$){let ee=oC(g),et=pv(ee.serializer)+"/documents",er={documents:$.map(g=>pf(ee.serializer,g))},en=await ee.invokeStreamingRPC("BatchGetDocuments",et,er,$.length),ei=new Map;en.forEach(g=>{let $=pO(ee.serializer,g);ei.set($.key.toString(),$)});let es=[];return $.forEach(g=>{let $=ei.get(g.toString());ow(!!$),es.push($)}),es}async function vZ(g,$,ee){var et;let er=oC(g),{request:en,aliasMap:ei}=pq(er.serializer,hh($),ee),es=en.parent;er.connection.shouldResourcePathBeIncludedInRequest||delete en.parent;let eo=(await er.invokeStreamingRPC("RunAggregationQuery",es,en,1)).filter(g=>!!g.result);ow(1===eo.length);let eu=null===(et=eo[0].result)||void 0===et?void 0:et.aggregateFields;return Object.keys(eu).reduce((g,$)=>(g[ei[$]]=eu[$],g),{})}function v0(g,$,ee){let et=oC(g);return et.verifyInitialized(),new vW($,et.connection,et.authCredentials,et.appCheckCredentials,et.serializer,ee)}function v3(g,$,ee){let et=oC(g);return et.verifyInitialized(),new vK($,et.connection,et.authCredentials,et.appCheckCredentials,et.serializer,ee)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v4="OnlineStateTracker",v6=1,v9=1e4;class v5{constructor(g,$){this.asyncQueue=g,this.onlineStateHandler=$,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",v9,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${v9/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(g){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=v6&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${v6} times. Most recent error: ${g.toString()}`),this.setAndBroadcast("Offline")))}set(g){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===g&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(g)}setAndBroadcast(g){g!==this.state&&(this.state=g,this.onlineStateHandler(g))}logClientOfflineWarningIfNecessary(g){let $=`Could not reach Cloud Firestore backend. ${g}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(ov($),this.shouldWarnClientIsOffline=!1):oy(v4,$)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v8="RemoteStore",v7=10;class bt{constructor(g,$,ee,et,er){this.localStore=g,this.datastore=$,this.asyncQueue=ee,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=er,this.connectivityMonitor.addCallback(g=>{ee.enqueueAndForget(async()=>{bg(this)&&(oy(v8,"Restarting streams for network reachability change."),await bM(this))})}),this.onlineStateTracker=new v5(ee,et)}}function br(g,$,ee,et,er){return new bt(g,$,ee,et,er)}async function bn(g){if(bg(g))for(let $ of g.onNetworkStatusChange)await $(!0)}async function bi(g){for(let $ of g.onNetworkStatusChange)await $(!1)}async function bs(g){let $=oC(g);oy(v8,"RemoteStore shutting down."),$.offlineCauses.add(5),await bi($),$.connectivityMonitor.shutdown(),$.onlineStateTracker.set("Unknown")}function bo(g,$){let ee=oC(g);!ee.listenTargets.has($.targetId)&&(ee.listenTargets.set($.targetId,$),bf(ee)?bp(ee):bB(ee).isOpen()&&bu(ee,$))}function bl(g,$){let ee=oC(g),et=bB(ee);ee.listenTargets.delete($),et.isOpen()&&bh(ee,$),0===ee.listenTargets.size&&(et.isOpen()?et.markIdle():bg(ee)&&ee.onlineStateTracker.set("Unknown"))}function bu(g,$){if(g.watchChangeAggregator.recordPendingTargetRequest($.targetId),$.resumeToken.approximateByteSize()>0||$.snapshotVersion.compareTo(o$.min())>0){let ee=g.remoteSyncer.getRemoteKeysForTarget($.targetId).size;$=$.withExpectedCount(ee)}bB(g).watch($)}function bh(g,$){g.watchChangeAggregator.recordPendingTargetRequest($),bB(g).unwatch($)}function bp(g){g.watchChangeAggregator=new d0({getRemoteKeysForTarget:$=>g.remoteSyncer.getRemoteKeysForTarget($),getTargetDataForTarget:$=>g.listenTargets.get($)||null,getDatabaseId:()=>g.datastore.serializer.databaseId}),bB(g).start(),g.onlineStateTracker.handleWatchStreamStart()}function bf(g){return bg(g)&&!bB(g).isStarted()&&g.listenTargets.size>0}function bg(g){return 0===oC(g).offlineCauses.size}function bm(g){g.watchChangeAggregator=void 0}async function by(g){g.listenTargets.forEach(($,ee)=>{bu(g,$)})}async function bv(g,$){bm(g),bf(g)?(g.onlineStateTracker.handleWatchStreamFailure($),bp(g)):g.onlineStateTracker.set("Unknown")}async function bS(g,$,ee){if(g.onlineStateTracker.set("Online"),$ instanceof dJ&&2===$.state&&$.cause){try{await bC(g,$)}catch(ee){oy(v8,"Failed to remove targets %s: %s ",$.targetIds.join(","),ee),await bT(g,ee)}return}if($ instanceof dQ?g.watchChangeAggregator.handleDocumentChange($):$ instanceof dY?g.watchChangeAggregator.handleExistenceFilter($):g.watchChangeAggregator.handleTargetChange($),!ee.isEqual(o$.min()))try{let $=await yR(g.localStore);ee.compareTo($)>=0&&await bw(g,ee)}catch($){oy(v8,"Failed to raise snapshot:",$),await bT(g,$)}}async function bT(g,$,ee){if(ay($))g.offlineCauses.add(1),await bi(g),g.onlineStateTracker.set("Offline"),ee||(ee=()=>yR(g.localStore)),g.asyncQueue.enqueueRetryable(async()=>{oy(v8,"Retrying IndexedDB access"),await ee(),g.offlineCauses.delete(1),await bn(g)});else throw $}function bE(g,$){return $().catch(ee=>bT(g,ee,$))}function bw(g,$){let ee=g.watchChangeAggregator.createRemoteEvent($);return ee.targetChanges.forEach((ee,et)=>{if(ee.resumeToken.approximateByteSize()>0){let er=g.listenTargets.get(et);er&&g.listenTargets.set(et,er.withResumeToken(ee.resumeToken,$))}}),ee.targetMismatches.forEach(($,ee)=>{let et=g.listenTargets.get($);et&&(g.listenTargets.set($,et.withResumeToken(l9.EMPTY_BYTE_STRING,et.snapshotVersion)),bh(g,$),bu(g,new fS(et.target,$,ee,et.sequenceNumber)))}),g.remoteSyncer.applyRemoteEvent(ee)}async function bC(g,$){let ee=$.cause;for(let et of $.targetIds)g.listenTargets.has(et)&&(await g.remoteSyncer.rejectListen(et,ee),g.listenTargets.delete(et),g.watchChangeAggregator.removeTarget(et))}async function b_(g){let $=oC(g),ee=bj($),et=$.writePipeline.length>0?$.writePipeline[$.writePipeline.length-1].batchId:uv;for(;bI($);)try{let g=await yL($.localStore,et);if(null===g){0===$.writePipeline.length&&ee.markIdle();break}et=g.batchId,bO($,g)}catch(g){await bT($,g)}bA($)&&bN($)}function bI(g){return bg(g)&&g.writePipeline.length<v7}function bO(g,$){g.writePipeline.push($);let ee=bj(g);ee.isOpen()&&ee.handshakeComplete&&ee.writeMutations($.mutations)}function bA(g){return bg(g)&&!bj(g).isStarted()&&g.writePipeline.length>0}function bN(g){bj(g).start()}async function bD(g){bj(g).writeHandshake()}async function bR(g){let $=bj(g);for(let ee of g.writePipeline)$.writeMutations(ee.mutations)}async function bk(g,$,ee){let et=g.writePipeline.shift(),er=dR.from(et,$,ee);await bE(g,()=>g.remoteSyncer.applySuccessfulWrite(er)),await b_(g)}async function bx(g,$){$&&bj(g).handshakeComplete&&await bP(g,$),bA(g)&&bN(g)}async function bP(g,$){if(dM($.code)){let ee=g.writePipeline.shift();bj(g).inhibitBackoff(),await bE(g,()=>g.remoteSyncer.rejectFailedWrite(ee.batchId,$)),await b_(g)}}async function bM(g){let $=oC(g);$.offlineCauses.add(4),await bi($),$.onlineStateTracker.set("Unknown"),$.offlineCauses.delete(4),await bn($)}async function bL(g,$){let ee=oC(g);ee.asyncQueue.verifyOperationInProgress(),oy(v8,"RemoteStore received new credentials");let et=bg(ee);ee.offlineCauses.add(3),await bi(ee),et&&ee.onlineStateTracker.set("Unknown"),await ee.remoteSyncer.handleCredentialChange($),ee.offlineCauses.delete(3),await bn(ee)}async function bF(g,$){let ee=oC(g);$?(ee.offlineCauses.delete(2),await bn(ee)):$||(ee.offlineCauses.add(2),await bi(ee),ee.onlineStateTracker.set("Unknown"))}function bB(g){return g.watchStream||(g.watchStream=v3(g.datastore,g.asyncQueue,{onOpen:by.bind(null,g),onClose:bv.bind(null,g),onWatchChange:bS.bind(null,g)}),g.onNetworkStatusChange.push(async $=>{$?(g.watchStream.inhibitBackoff(),bf(g)?bp(g):g.onlineStateTracker.set("Unknown")):(await g.watchStream.stop(),bm(g))})),g.watchStream}function bj(g){return g.writeStream||(g.writeStream=v0(g.datastore,g.asyncQueue,{onOpen:bD.bind(null,g),onClose:bx.bind(null,g),onHandshakeComplete:bR.bind(null,g),onMutationResult:bk.bind(null,g)}),g.onNetworkStatusChange.push(async $=>{$?(g.writeStream.inhibitBackoff(),await b_(g)):(await g.writeStream.stop(),g.writePipeline.length>0&&(oy(v8,`Stopping write stream with ${g.writePipeline.length} pending writes`),g.writePipeline=[]))})),g.writeStream}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bU="AsyncQueue";class bV{constructor(g,$,ee,et,er){this.asyncQueue=g,this.timerId=$,this.targetTimeMs=ee,this.op=et,this.removalCallback=er,this.deferred=new oO,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(g,$,ee,et,er){let en=new bV(g,$,Date.now()+ee,et,er);return en.start(ee),en}start(g){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),g)}skipDelay(){return this.handleDelayElapsed()}cancel(g){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oI(o_.CANCELLED,"Operation cancelled"+(g?": "+g:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(g=>this.deferred.resolve(g))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bq(g,$){if(ov(bU,`${$}: ${g}`),ay(g))return new oI(o_.UNAVAILABLE,`${$}: ${g}`);throw g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(g){g?this.comparator=($,ee)=>g($,ee)||oJ.comparator($.key,ee.key):this.comparator=(g,$)=>oJ.comparator(g.key,$.key),this.keyedMap=hP(),this.sortedSet=new lQ(this.comparator)}static emptySet(g){return new bz(g.comparator)}has(g){return null!=this.keyedMap.get(g)}get(g){return this.keyedMap.get(g)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(g){let $=this.keyedMap.get(g);return $?this.sortedSet.indexOf($):-1}get size(){return this.sortedSet.size}forEach(g){this.sortedSet.inorderTraversal(($,ee)=>(g($),!1))}add(g){let $=this.delete(g.key);return $.copy($.keyedMap.insert(g.key,g),$.sortedSet.insert(g,null))}delete(g){let $=this.get(g);return $?this.copy(this.keyedMap.remove(g),this.sortedSet.remove($)):this}isEqual(g){if(!(g instanceof bz)||this.size!==g.size)return!1;let $=this.sortedSet.getIterator(),ee=g.sortedSet.getIterator();for(;$.hasNext();){let g=$.getNext().key,et=ee.getNext().key;if(!g.isEqual(et))return!1}return!0}toString(){let g=[];return(this.forEach($=>{g.push($.toString())}),0===g.length)?"DocumentSet ()":"DocumentSet (\n  "+g.join("  \n")+"\n)"}copy(g,$){let ee=new bz;return ee.comparator=this.comparator,ee.keyedMap=g,ee.sortedSet=$,ee}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(){this.changeMap=new lQ(oJ.comparator)}track(g){let $=g.doc.key,ee=this.changeMap.get($);if(!ee){this.changeMap=this.changeMap.insert($,g);return}0!==g.type&&3===ee.type?this.changeMap=this.changeMap.insert($,g):3===g.type&&1!==ee.type?this.changeMap=this.changeMap.insert($,{type:ee.type,doc:g.doc}):2===g.type&&2===ee.type?this.changeMap=this.changeMap.insert($,{type:2,doc:g.doc}):2===g.type&&0===ee.type?this.changeMap=this.changeMap.insert($,{type:0,doc:g.doc}):1===g.type&&0===ee.type?this.changeMap=this.changeMap.remove($):1===g.type&&2===ee.type?this.changeMap=this.changeMap.insert($,{type:1,doc:ee.doc}):0===g.type&&1===ee.type?this.changeMap=this.changeMap.insert($,{type:2,doc:g.doc}):oE()}getChanges(){let g=[];return this.changeMap.inorderTraversal(($,ee)=>{g.push(ee)}),g}}class b${constructor(g,$,ee,et,er,en,ei,es,eo){this.query=g,this.docs=$,this.oldDocs=ee,this.docChanges=et,this.mutatedKeys=er,this.fromCache=en,this.syncStateChanged=ei,this.excludesMetadataChanges=es,this.hasCachedResults=eo}static fromInitialDocuments(g,$,ee,et,er){let en=[];return $.forEach(g=>{en.push({type:0,doc:g})}),new b$(g,$,bz.emptySet($),en,ee,et,!0,!1,er)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(g){if(this.fromCache!==g.fromCache||this.hasCachedResults!==g.hasCachedResults||this.syncStateChanged!==g.syncStateChanged||!this.mutatedKeys.isEqual(g.mutatedKeys)||!hv(this.query,g.query)||!this.docs.isEqual(g.docs)||!this.oldDocs.isEqual(g.oldDocs))return!1;let $=this.docChanges,ee=g.docChanges;if($.length!==ee.length)return!1;for(let g=0;g<$.length;g++)if($[g].type!==ee[g].type||!$[g].doc.isEqual(ee[g].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(){this.viewSnap=void 0,this.listeners=[]}}function bW(){return new bH}class bH{constructor(){this.queries=new hD(g=>hS(g),hv),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}}async function bQ(g,$){let ee=oC(g),et=$.query,er=!1,en=ee.queries.get(et);if(en||(er=!0,en=new bK),er)try{en.viewSnap=await ee.onListen(et)}catch(ee){let g=bq(ee,`Initialization of query '${hT($.query)}' failed`);$.onError(g);return}ee.queries.set(et,en),en.listeners.push($),$.applyOnlineStateChange(ee.onlineState),en.viewSnap&&$.onViewSnapshot(en.viewSnap)&&b0(ee)}async function bY(g,$){let ee=oC(g),et=$.query,er=!1,en=ee.queries.get(et);if(en){let g=en.listeners.indexOf($);g>=0&&(en.listeners.splice(g,1),er=0===en.listeners.length)}if(er)return ee.queries.delete(et),ee.onUnlisten(et)}function bJ(g,$){let ee=oC(g),et=!1;for(let g of $){let $=g.query,er=ee.queries.get($);if(er){for(let $ of er.listeners)$.onViewSnapshot(g)&&(et=!0);er.viewSnap=g}}et&&b0(ee)}function bX(g,$,ee){let et=oC(g),er=et.queries.get($);if(er)for(let g of er.listeners)g.onError(ee);et.queries.delete($)}function bZ(g,$){let ee=oC(g);ee.onlineState=$;let et=!1;ee.queries.forEach((g,ee)=>{for(let g of ee.listeners)g.applyOnlineStateChange($)&&(et=!0)}),et&&b0(ee)}function b0(g){g.snapshotsInSyncListeners.forEach(g=>{g.next()})}class b1{constructor(g,$,ee){this.query=g,this.queryObserver=$,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=ee||{}}onViewSnapshot(g){if(!this.options.includeMetadataChanges){let $=[];for(let ee of g.docChanges)3!==ee.type&&$.push(ee);g=new b$(g.query,g.docs,g.oldDocs,$,g.mutatedKeys,g.fromCache,g.syncStateChanged,!0,g.hasCachedResults)}let $=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(g)&&(this.queryObserver.next(g),$=!0):this.shouldRaiseInitialEvent(g,this.onlineState)&&(this.raiseInitialEvent(g),$=!0),this.snap=g,$}onError(g){this.queryObserver.error(g)}applyOnlineStateChange(g){this.onlineState=g;let $=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,g)&&(this.raiseInitialEvent(this.snap),$=!0),$}shouldRaiseInitialEvent(g,$){if(!g.fromCache)return!0;let ee="Offline"!==$;return(!this.options.waitForSyncWhenOnline||!ee)&&(!g.docs.isEmpty()||g.hasCachedResults||"Offline"===$)}shouldRaiseEvent(g){if(g.docChanges.length>0)return!0;let $=this.snap&&this.snap.hasPendingWrites!==g.hasPendingWrites;return(!!g.syncStateChanged||!!$)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(g){g=b$.fromInitialDocuments(g.query,g.docs,g.mutatedKeys,g.fromCache,g.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(g)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(g,$,ee,et){this.targetId=g,this.fromCache=$,this.addedKeys=ee,this.removedKeys=et}static fromSnapshot(g,$){let ee=hz(),et=hz();for(let g of $.docChanges)switch(g.type){case 0:ee=ee.add(g.doc.key);break;case 1:et=et.add(g.doc.key)}return new b2(g,$.fromCache,ee,et)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(g){this.serializer=g}toDocumentKey(g){return pg(this.serializer,g)}toMutableDocument(g){return g.metadata.exists?pC(this.serializer,g.document,!1):cs.newNoDocument(this.toDocumentKey(g.metadata.name),this.toSnapshotVersion(g.metadata.readTime))}toSnapshotVersion(g){return pu(g)}}class b4{constructor(g,$,ee){this.bundleMetadata=g,this.localStore=$,this.serializer=ee,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=b6(g)}addSizedElement(g){this.progress.bytesLoaded+=g.byteLength;let $=this.progress.documentsLoaded;if(g.payload.namedQuery)this.queries.push(g.payload.namedQuery);else if(g.payload.documentMetadata){this.documents.push({metadata:g.payload.documentMetadata}),!g.payload.documentMetadata.exists&&++$;let ee=oH.fromString(g.payload.documentMetadata.name);this.collectionGroups.add(ee.get(ee.length-2))}else g.payload.document&&(this.documents[this.documents.length-1].document=g.payload.document,++$);return $!==this.progress.documentsLoaded?(this.progress.documentsLoaded=$,Object.assign({},this.progress)):null}getQueryDocumentMapping(g){let $=new Map,ee=new b3(this.serializer);for(let et of g)if(et.metadata.queries){let g=ee.toDocumentKey(et.metadata.name);for(let ee of et.metadata.queries){let et=($.get(ee)||hz()).add(g);$.set(ee,et)}}return $}async complete(){let g=await yY(this.localStore,new b3(this.serializer),this.documents,this.bundleMetadata.id),$=this.getQueryDocumentMapping(this.documents);for(let g of this.queries)await yZ(this.localStore,g,$.get(g.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:g}}}function b6(g){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}function b9(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(g){this.key=g}}class b8{constructor(g){this.key=g}}class b7{constructor(g,$){this.query=g,this._syncedDocuments=$,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=hz(),this.mutatedKeys=hz(),this.docComparator=hA(g),this.documentSet=new bz(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(g,$){let ee=$?$.changeSet:new bG,et=$?$.documentSet:this.documentSet,er=$?$.mutatedKeys:this.mutatedKeys,en=et,ei=!1,es="F"===this.query.limitType&&et.size===this.query.limit?et.last():null,eo="L"===this.query.limitType&&et.size===this.query.limit?et.first():null;if(g.inorderTraversal((g,$)=>{let eu=et.get(g),eh=hE(this.query,$)?$:null,ep=!!eu&&this.mutatedKeys.has(eu.key),ef=!!eh&&(eh.hasLocalMutations||this.mutatedKeys.has(eh.key)&&eh.hasCommittedMutations),eg=!1;eu&&eh?eu.data.isEqual(eh.data)?ep!==ef&&(ee.track({type:3,doc:eh}),eg=!0):!this.shouldWaitForSyncedDocument(eu,eh)&&(ee.track({type:2,doc:eh}),eg=!0,(es&&this.docComparator(eh,es)>0||eo&&0>this.docComparator(eh,eo))&&(ei=!0)):!eu&&eh?(ee.track({type:0,doc:eh}),eg=!0):eu&&!eh&&(ee.track({type:1,doc:eu}),eg=!0,(es||eo)&&(ei=!0)),eg&&(eh?(en=en.add(eh),er=ef?er.add(g):er.delete(g)):(en=en.delete(g),er=er.delete(g)))}),null!==this.query.limit)for(;en.size>this.query.limit;){let g="F"===this.query.limitType?en.last():en.first();en=en.delete(g.key),er=er.delete(g.key),ee.track({type:1,doc:g})}return{documentSet:en,changeSet:ee,needsRefill:ei,mutatedKeys:er}}shouldWaitForSyncedDocument(g,$){return g.hasLocalMutations&&$.hasCommittedMutations&&!$.hasLocalMutations}applyChanges(g,$,ee){let et=this.documentSet;this.documentSet=g.documentSet,this.mutatedKeys=g.mutatedKeys;let er=g.changeSet.getChanges();er.sort((g,$)=>Se(g.type,$.type)||this.docComparator(g.doc,$.doc)),this.applyTargetChange(ee);let en=$?this.updateLimboDocuments():[],ei=0===this.limboDocuments.size&&this.current?1:0,es=ei!==this.syncState;return(this.syncState=ei,0!==er.length||es)?{snapshot:new b$(this.query,g.documentSet,et,er,g.mutatedKeys,0===ei,es,!1,!!ee&&ee.resumeToken.approximateByteSize()>0),limboChanges:en}:{limboChanges:en}}applyOnlineStateChange(g){return this.current&&"Offline"===g?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new bG,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(g){return!this._syncedDocuments.has(g)&&!!this.documentSet.has(g)&&!this.documentSet.get(g).hasLocalMutations}applyTargetChange(g){g&&(g.addedDocuments.forEach(g=>this._syncedDocuments=this._syncedDocuments.add(g)),g.modifiedDocuments.forEach(g=>{}),g.removedDocuments.forEach(g=>this._syncedDocuments=this._syncedDocuments.delete(g)),this.current=g.current)}updateLimboDocuments(){if(!this.current)return[];let g=this.limboDocuments;this.limboDocuments=hz(),this.documentSet.forEach(g=>{this.shouldBeInLimbo(g.key)&&(this.limboDocuments=this.limboDocuments.add(g.key))});let $=[];return g.forEach(g=>{this.limboDocuments.has(g)||$.push(new b8(g))}),this.limboDocuments.forEach(ee=>{g.has(ee)||$.push(new b5(ee))}),$}synchronizeWithPersistedState(g){this._syncedDocuments=g.remoteKeys,this.limboDocuments=hz();let $=this.computeDocChanges(g.documents);return this.applyChanges($,!0)}computeInitialSnapshot(){return b$.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function Se(g,$){let ee=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oE()}};return ee(g)-ee($)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let St="SyncEngine";class Sr{constructor(g,$,ee){this.query=g,this.targetId=$,this.view=ee}}class Sn{constructor(g){this.key=g,this.receivedDocument=!1}}class Si{constructor(g,$,ee,et,er,en){this.localStore=g,this.remoteStore=$,this.eventManager=ee,this.sharedClientState=et,this.currentUser=er,this.maxConcurrentLimboResolutions=en,this.syncEngineListener={},this.queryViewsByQuery=new hD(g=>hS(g),hv),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new lQ(oJ.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new mF,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=g9.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function Ss(g,$,ee,et,er,en,ei){let es=new Si(g,$,ee,et,er,en);return ei&&(es._isPrimaryClient=!0),es}async function So(g,$){let ee,et;let er=Sq(g),en=er.queryViewsByQuery.get($);if(en)ee=en.targetId,er.sharedClientState.addLocalQueryTarget(ee),et=en.view.computeInitialSnapshot();else{let g=await yB(er.localStore,hh($)),en=er.sharedClientState.addLocalQueryTarget(g.targetId);ee=g.targetId,et=await Sl(er,$,ee,"current"===en,g.resumeToken),er.isPrimaryClient&&bo(er.remoteStore,g)}return et}async function Sl(g,$,ee,et,er){g.applyDocChanges=($,ee,et)=>SN(g,$,ee,et);let en=await yV(g.localStore,$,!0),ei=new b7($,en.remoteKeys),es=ei.computeDocChanges(en.documents),eo=dH.createSynthesizedTargetChangeForCurrentChange(ee,et&&"Offline"!==g.onlineState,er),eu=ei.applyChanges(es,g.isPrimaryClient,eo);S_(g,ee,eu.limboChanges);let eh=new Sr($,ee,ei);return g.queryViewsByQuery.set($,eh),g.queriesByTarget.has(ee)?g.queriesByTarget.get(ee).push($):g.queriesByTarget.set(ee,[$]),eu.snapshot}async function Su(g,$){let ee=oC(g),et=ee.queryViewsByQuery.get($),er=ee.queriesByTarget.get(et.targetId);if(er.length>1){ee.queriesByTarget.set(et.targetId,er.filter(g=>!hv(g,$))),ee.queryViewsByQuery.delete($);return}ee.isPrimaryClient?(ee.sharedClientState.removeLocalQueryTarget(et.targetId),ee.sharedClientState.isActiveQueryTarget(et.targetId)||await yU(ee.localStore,et.targetId,!1).then(()=>{ee.sharedClientState.clearQueryState(et.targetId),bl(ee.remoteStore,et.targetId),Sw(ee,et.targetId)}).catch(ao)):(Sw(ee,et.targetId),await yU(ee.localStore,et.targetId,!0))}async function Sh(g,$,ee){let et=Sz(g);try{let g=await yI(et.localStore,$);et.sharedClientState.addPendingMutation(g.batchId),ST(et,g.batchId,ee),await SA(et,g.changes),await b_(et.remoteStore)}catch($){let g=bq($,"Failed to persist write");ee.reject(g)}}async function Sp(g,$){let ee=oC(g);try{let g=await yk(ee.localStore,$);$.targetChanges.forEach((g,$)=>{let et=ee.activeLimboResolutionsByTarget.get($);et&&(ow(g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size<=1),g.addedDocuments.size>0?et.receivedDocument=!0:g.modifiedDocuments.size>0?ow(et.receivedDocument):g.removedDocuments.size>0&&(ow(et.receivedDocument),et.receivedDocument=!1))}),await SA(ee,g,$)}catch(g){await ao(g)}}function Sf(g,$,ee){let et=oC(g);if(et.isPrimaryClient&&0===ee||!et.isPrimaryClient&&1===ee){let g=[];et.queryViewsByQuery.forEach((ee,et)=>{let er=et.view.applyOnlineStateChange($);er.snapshot&&g.push(er.snapshot)}),bZ(et.eventManager,$),g.length&&et.syncEngineListener.onWatchChange(g),et.onlineState=$,et.isPrimaryClient&&et.sharedClientState.setOnlineState($)}}async function Sg(g,$,ee){let et=oC(g);et.sharedClientState.updateQueryState($,"rejected",ee);let er=et.activeLimboResolutionsByTarget.get($),en=er&&er.key;if(en){let g=new lQ(oJ.comparator);g=g.insert(en,cs.newNoDocument(en,o$.min()));let ee=hz().add(en),er=new dW(o$.min(),new Map,new lQ(oj),g,ee);await Sp(et,er),et.activeLimboTargetsByKey=et.activeLimboTargetsByKey.remove(en),et.activeLimboResolutionsByTarget.delete($),SO(et)}else await yU(et.localStore,$,!1).then(()=>Sw(et,$,ee)).catch(ao)}async function Sm(g,$){let ee=oC(g),et=$.batch.batchId;try{let g=await yO(ee.localStore,$);SE(ee,et,null),Sv(ee,et),ee.sharedClientState.updateMutationState(et,"acknowledged"),await SA(ee,g)}catch(g){await ao(g)}}async function Sy(g,$,ee){let et=oC(g);try{let g=await yN(et.localStore,$);SE(et,$,ee),Sv(et,$),et.sharedClientState.updateMutationState($,"rejected",ee),await SA(et,g)}catch(g){await ao(g)}}function Sv(g,$){(g.pendingWritesCallbacks.get($)||[]).forEach(g=>{g.resolve()}),g.pendingWritesCallbacks.delete($)}function SS(g,$){g.pendingWritesCallbacks.forEach(g=>{g.forEach(g=>{g.reject(new oI(o_.CANCELLED,$))})}),g.pendingWritesCallbacks.clear()}function ST(g,$,ee){let et=g.mutationUserCallbacks[g.currentUser.toKey()];et||(et=new lQ(oj)),et=et.insert($,ee),g.mutationUserCallbacks[g.currentUser.toKey()]=et}function SE(g,$,ee){let et=oC(g),er=et.mutationUserCallbacks[et.currentUser.toKey()];if(er){let g=er.get($);g&&(ee?g.reject(ee):g.resolve(),er=er.remove($)),et.mutationUserCallbacks[et.currentUser.toKey()]=er}}function Sw(g,$,ee=null){for(let et of(g.sharedClientState.removeLocalQueryTarget($),g.queriesByTarget.get($)))g.queryViewsByQuery.delete(et),ee&&g.syncEngineListener.onWatchError(et,ee);g.queriesByTarget.delete($),g.isPrimaryClient&&g.limboDocumentRefs.removeReferencesForId($).forEach($=>{g.limboDocumentRefs.containsKey($)||SC(g,$)})}function SC(g,$){g.enqueuedLimboResolutions.delete($.path.canonicalString());let ee=g.activeLimboTargetsByKey.get($);null!==ee&&(bl(g.remoteStore,ee),g.activeLimboTargetsByKey=g.activeLimboTargetsByKey.remove($),g.activeLimboResolutionsByTarget.delete(ee),SO(g))}function S_(g,$,ee){for(let et of ee)et instanceof b5?(g.limboDocumentRefs.addReference(et.key,$),SI(g,et)):et instanceof b8?(oy(St,"Document no longer in limbo: "+et.key),g.limboDocumentRefs.removeReference(et.key,$),g.limboDocumentRefs.containsKey(et.key)||SC(g,et.key)):oE()}function SI(g,$){let ee=$.key,et=ee.path.canonicalString();g.activeLimboTargetsByKey.get(ee)||g.enqueuedLimboResolutions.has(et)||(oy(St,"New document in limbo: "+ee),g.enqueuedLimboResolutions.add(et),SO(g))}function SO(g){for(;g.enqueuedLimboResolutions.size>0&&g.activeLimboTargetsByKey.size<g.maxConcurrentLimboResolutions;){let $=g.enqueuedLimboResolutions.values().next().value;g.enqueuedLimboResolutions.delete($);let ee=new oJ(oH.fromString($)),et=g.limboTargetIdGenerator.next();g.activeLimboResolutionsByTarget.set(et,new Sn(ee)),g.activeLimboTargetsByKey=g.activeLimboTargetsByKey.insert(ee,et),bo(g.remoteStore,new fS(hh(he(ee.path)),et,"TargetPurposeLimboResolution",aN.INVALID))}}async function SA(g,$,ee){let et=oC(g),er=[],en=[],ei=[];et.queryViewsByQuery.isEmpty()||(et.queryViewsByQuery.forEach((g,es)=>{ei.push(et.applyDocChanges(es,$,ee).then(g=>{if((g||ee)&&et.isPrimaryClient&&et.sharedClientState.updateQueryState(es.targetId,(null==g?void 0:g.fromCache)?"not-current":"current"),g){er.push(g);let $=b2.fromSnapshot(es.targetId,g);en.push($)}}))}),await Promise.all(ei),et.syncEngineListener.onWatchChange(er),await yM(et.localStore,en))}async function SN(g,$,ee,et){let er=$.view.computeDocChanges(ee);er.needsRefill&&(er=await yV(g.localStore,$.query,!1).then(({documents:g})=>$.view.computeDocChanges(g,er)));let en=et&&et.targetChanges.get($.targetId),ei=$.view.applyChanges(er,g.isPrimaryClient,en);return S_(g,$.targetId,ei.limboChanges),ei.snapshot}async function SD(g,$){let ee=oC(g);if(!ee.currentUser.isEqual($)){oy(St,"User change. New user:",$.toKey());let g=await y_(ee.localStore,$);ee.currentUser=$,SS(ee,"'waitForPendingWrites' promise is rejected due to a user change."),ee.sharedClientState.handleUserChange($,g.removedBatchIds,g.addedBatchIds),await SA(ee,g.affectedDocuments)}}function SR(g,$){let ee=oC(g),et=ee.activeLimboResolutionsByTarget.get($);if(et&&et.receivedDocument)return hz().add(et.key);{let g=hz(),et=ee.queriesByTarget.get($);if(!et)return g;for(let $ of et){let et=ee.queryViewsByQuery.get($);g=g.unionWith(et.view.syncedDocuments)}return g}}async function Sk(g,$){let ee=oC(g),et=await yV(ee.localStore,$.query,!0),er=$.view.synchronizeWithPersistedState(et);return ee.isPrimaryClient&&S_(ee,$.targetId,er.limboChanges),er}async function Sx(g,$){let ee=oC(g);return yW(ee.localStore,$).then(g=>SA(ee,g))}async function SP(g,$,ee,et){let er=oC(g),en=await yz(er.localStore,$);if(null===en){oy(St,"Cannot apply mutation batch with id: "+$);return}"pending"===ee?await b_(er.remoteStore):"acknowledged"===ee||"rejected"===ee?(SE(er,$,et||null),Sv(er,$),yG(er.localStore,$)):oE(),await SA(er,en)}async function SM(g,$){let ee=oC(g);if(Sq(ee),Sz(ee),!0===$&&!0!==ee._isPrimaryClient){let g=ee.sharedClientState.getAllActiveQueryTargets(),$=await SF(ee,g.toArray());for(let g of(ee._isPrimaryClient=!0,await bF(ee.remoteStore,!0),$))bo(ee.remoteStore,g)}else if(!1===$&&!1!==ee._isPrimaryClient){let g=[],$=Promise.resolve();ee.queriesByTarget.forEach((et,er)=>{ee.sharedClientState.isLocalQueryTarget(er)?g.push(er):$=$.then(()=>(Sw(ee,er),yU(ee.localStore,er,!0))),bl(ee.remoteStore,er)}),await $,await SF(ee,g),SL(ee),ee._isPrimaryClient=!1,await bF(ee.remoteStore,!1)}}function SL(g){let $=oC(g);$.activeLimboResolutionsByTarget.forEach((g,ee)=>{bl($.remoteStore,ee)}),$.limboDocumentRefs.removeAllReferences(),$.activeLimboResolutionsByTarget=new Map,$.activeLimboTargetsByKey=new lQ(oJ.comparator)}async function SF(g,$,ee){let et=oC(g),er=[],en=[];for(let g of $){let $;let ee=et.queriesByTarget.get(g);if(ee&&0!==ee.length)for(let g of($=await yB(et.localStore,hh(ee[0])),ee)){let $=et.queryViewsByQuery.get(g),ee=await Sk(et,$);ee.snapshot&&en.push(ee.snapshot)}else{let ee=await yK(et.localStore,g);$=await yB(et.localStore,ee),await Sl(et,SB(ee),g,!1,$.resumeToken)}er.push($)}return et.syncEngineListener.onWatchChange(en),er}function SB(g){return c7(g.path,g.collectionGroup,g.orderBy,g.filters,g.limit,"F",g.startAt,g.endAt)}function Sj(g){return y$(oC(g).localStore)}async function SU(g,$,ee,et){let er=oC(g);if(er._isPrimaryClient){oy(St,"Ignoring unexpected query state notification.");return}let en=er.queriesByTarget.get($);if(en&&en.length>0)switch(ee){case"current":case"not-current":{let g=await yW(er.localStore,hO(en[0])),et=dW.createSynthesizedRemoteEventForCurrentChange($,"current"===ee,l9.EMPTY_BYTE_STRING);await SA(er,g,et);break}case"rejected":await yU(er.localStore,$,!0),Sw(er,$,et);break;default:oE()}}async function SV(g,$,ee){let et=Sq(g);if(et._isPrimaryClient){for(let g of $){if(et.queriesByTarget.has(g)){oy(St,"Adding an already active target "+g);continue}let $=await yK(et.localStore,g),ee=await yB(et.localStore,$);await Sl(et,SB($),ee.targetId,!1,ee.resumeToken),bo(et.remoteStore,ee)}for(let g of ee)et.queriesByTarget.has(g)&&await yU(et.localStore,g,!1).then(()=>{bl(et.remoteStore,g),Sw(et,g)}).catch(ao)}}function Sq(g){let $=oC(g);return $.remoteStore.remoteSyncer.applyRemoteEvent=Sp.bind(null,$),$.remoteStore.remoteSyncer.getRemoteKeysForTarget=SR.bind(null,$),$.remoteStore.remoteSyncer.rejectListen=Sg.bind(null,$),$.syncEngineListener.onWatchChange=bJ.bind(null,$.eventManager),$.syncEngineListener.onWatchError=bX.bind(null,$.eventManager),$}function Sz(g){let $=oC(g);return $.remoteStore.remoteSyncer.applySuccessfulWrite=Sm.bind(null,$),$.remoteStore.remoteSyncer.rejectFailedWrite=Sy.bind(null,$),$}async function SG(g,$,ee){try{let et=await $.getMetadata();if(await yJ(g.localStore,et))return await $.close(),ee._completeWith(b9(et)),Promise.resolve(new Set);ee._updateProgress(b6(et));let er=new b4(et,g.localStore,$.serializer),en=await $.nextElement();for(;en;){let g=await er.addSizedElement(en);g&&ee._updateProgress(g),en=await $.nextElement()}let ei=await er.complete();return await SA(g,ei.changedDocs,void 0),await yX(g.localStore,et),ee._completeWith(ei.progress),Promise.resolve(ei.changedCollectionGroups)}catch(g){return oS(St,`Loading bundle failed with ${g}`),ee._failWith(g),Promise.resolve(new Set)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this.synchronizeTabs=!1}async initialize(g){this.serializer=vL(g.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(g),this.persistence=this.createPersistence(g),await this.persistence.start(),this.localStore=this.createLocalStore(g),this.gcScheduler=this.createGarbageCollectionScheduler(g,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(g,this.localStore)}createGarbageCollectionScheduler(g,$){return null}createIndexBackfillerScheduler(g,$){return null}createLocalStore(g){return yC(this.persistence,new y0,g.initialUser,this.serializer)}createPersistence(g){return new mK(mH.factory,this.serializer)}createSharedClientState(g){return new vf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class SK extends null{constructor(g,$,ee){super(),this.onlineComponentProvider=g,this.cacheSizeBytes=$,this.forceOwnership=ee,this.synchronizeTabs=!1}async initialize(g){await super.initialize(g),await this.onlineComponentProvider.initialize(this,g),await Sz(this.onlineComponentProvider.syncEngine),await b_(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(g){return yC(this.persistence,new y0,g.initialUser,this.serializer)}createGarbageCollectionScheduler(g,$){return new mf(this.persistence.referenceDelegate.garbageCollector,g.asyncQueue,$)}createIndexBackfillerScheduler(g,$){let ee=new aA($,this.persistence);return new aO(g.asyncQueue,ee)}createPersistence(g){let $=yv(g.databaseInfo.databaseId,g.databaseInfo.persistenceKey),ee=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new yg(this.synchronizeTabs,$,g.clientId,ee,g.asyncQueue,vP(),vM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(g){return new vf}}class SW{async initialize(g,$){this.localStore||(this.localStore=g.localStore,this.sharedClientState=g.sharedClientState,this.datastore=this.createDatastore($),this.remoteStore=this.createRemoteStore($),this.eventManager=this.createEventManager($),this.syncEngine=this.createSyncEngine($,!g.synchronizeTabs),this.sharedClientState.onlineStateHandler=g=>Sf(this.syncEngine,g,1),this.remoteStore.remoteSyncer.handleCredentialChange=SD.bind(null,this.syncEngine),await bF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(g){return bW()}createDatastore(g){let $=vL(g.databaseInfo.databaseId),ee=vk(g.databaseInfo);return vY(g.authCredentials,g.appCheckCredentials,ee,$)}createRemoteStore(g){return br(this.localStore,this.datastore,g.asyncQueue,g=>Sf(this.syncEngine,g,0),vx())}createSyncEngine(g,$){return Ss(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,g.initialUser,g.maxConcurrentLimboResolutions,$)}terminate(){return bs(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SH=10240;function SQ(g,$=SH){let ee=0;return{async read(){if(ee<g.byteLength){let et={value:g.slice(ee,ee+$),done:!1};return ee+=$,et}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(g,$,ee){if(!ee)throw new oI(o_.INVALID_ARGUMENT,`Function ${g}() cannot be called with an empty ${$}.`)}function SJ(g,$,ee,et){if(!0===$&&!0===et)throw new oI(o_.INVALID_ARGUMENT,`${g} and ${ee} cannot be used together.`)}function SX(g){if(!oJ.isDocumentKey(g))throw new oI(o_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${g} has ${g.length}.`)}function SZ(g){if(oJ.isDocumentKey(g))throw new oI(o_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${g} has ${g.length}.`)}function S0(g){return"object"==typeof g&&null!==g&&(Object.getPrototypeOf(g)===Object.prototype||null===Object.getPrototypeOf(g))}function S1(g){if(void 0===g)return"undefined";if(null===g)return"null";if("string"==typeof g)return g.length>20&&(g=`${g.substring(0,20)}...`),JSON.stringify(g);if("number"==typeof g||"boolean"==typeof g)return""+g;if("object"==typeof g){if(g instanceof Array)return"an array";{let $=S2(g);return $?`a custom ${$} object`:"an object"}}if("function"==typeof g)return"a function";return oE()}function S2(g){return g.constructor?g.constructor.name:null}function S3(g,$){if("_delegate"in g&&(g=g._delegate),!(g instanceof $)){if($.name===g.constructor.name)throw new oI(o_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let ee=S1(g);throw new oI(o_.INVALID_ARGUMENT,`Expected type '${$.name}', but it was: ${ee}`)}}return g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(g,$){if(!(g instanceof Uint8Array))throw new oI(o_.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${S1(g)}`);return SQ(g,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(g){this.observer=g,this.muted=!1}next(g){this.observer.next&&this.scheduleEvent(this.observer.next,g)}error(g){this.observer.error?this.scheduleEvent(this.observer.error,g):ov("Uncaught Error in snapshot listener:",g.toString())}mute(){this.muted=!0}scheduleEvent(g,$){this.muted||setTimeout(()=>{this.muted||g($)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(g,$){this.payload=g,this.byteLength=$}isBundleMetadata(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(g,$){this.reader=g,this.serializer=$,this.metadata=new oO,this.buffer=new Uint8Array,this.textDecoder=dV(),this.nextElementImpl().then(g=>{g&&g.isBundleMetadata()?this.metadata.resolve(g.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==g?void 0:g.payload)}`))},g=>this.metadata.reject(g))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let g=await this.readLength();if(null===g)return null;let $=this.textDecoder.decode(g),ee=Number($);return isNaN(ee)&&this.raiseError(`length string (${$}) is not valid number`),new S9(JSON.parse(await this.readJsonString(ee)),g.length+ee)}indexOfOpenBracket(){return this.buffer.findIndex(g=>123===g)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let g=this.indexOfOpenBracket();g<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let $=this.buffer.slice(0,g);return this.buffer=this.buffer.slice(g),$}async readJsonString(g){for(;this.buffer.length<g;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let $=this.textDecoder.decode(this.buffer.slice(0,g));return this.buffer=this.buffer.slice(g),$}raiseError(g){throw this.reader.cancel(),Error(`Invalid bundle format: ${g}`)}async pullMoreDataToBuffer(){let g=await this.reader.read();if(!g.done){let $=new Uint8Array(this.buffer.length+g.value.length);$.set(this.buffer),$.set(g.value,this.buffer.length),this.buffer=$}return g.done}}function S8(g,$){return new S5(g,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(g){this.datastore=g,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(g){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new oI(o_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let $=await vX(this.datastore,g);return $.forEach(g=>this.recordVersion(g)),$}set(g,$){this.write($.toMutation(g,this.precondition(g))),this.writtenDocs.add(g.toString())}update(g,$){try{this.write($.toMutation(g,this.preconditionForUpdate(g)))}catch(g){this.lastWriteError=g}this.writtenDocs.add(g.toString())}delete(g){this.write(new dI(g,this.precondition(g))),this.writtenDocs.add(g.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let g=this.readVersions;this.mutations.forEach($=>{g.delete($.key.toString())}),g.forEach((g,$)=>{let ee=oJ.fromPath($);this.mutations.push(new dN(ee,this.precondition(ee)))}),await vJ(this.datastore,this.mutations),this.committed=!0}recordVersion(g){let $;if(g.isFoundDocument())$=g.version;else if(g.isNoDocument())$=o$.min();else throw oE();let ee=this.readVersions.get(g.key.toString());if(ee){if(!$.isEqual(ee))throw new oI(o_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(g.key.toString(),$)}precondition(g){let $=this.readVersions.get(g.toString());return this.writtenDocs.has(g.toString())||!$?dn.none():$.isEqual(o$.min())?dn.exists(!1):dn.updateTime($)}preconditionForUpdate(g){let $=this.readVersions.get(g.toString());if(this.writtenDocs.has(g.toString())||!$)return dn.exists(!0);if($.isEqual(o$.min()))throw new oI(o_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime($)}write(g){this.ensureCommitNotCalled(),this.mutations.push(g)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Te="FirestoreClient",Tt=100,Tr=11,Tn=20,Ti=22;class Ts{constructor(g,$,ee,et){this.authCredentials=g,this.appCheckCredentials=$,this.asyncQueue=ee,this.databaseInfo=et,this.user=ol.UNAUTHENTICATED,this.clientId=oB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(ee,async g=>{oy(Te,"Received user=",g.uid),await this.authCredentialListener(g),this.user=g}),this.appCheckCredentials.start(ee,g=>(oy(Te,"Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:Tt}}setCredentialChangeListener(g){this.authCredentialListener=g}setAppCheckTokenChangeListener(g){this.appCheckCredentialListener=g}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new oI(o_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let g=new oO;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),g.resolve()}catch(ee){let $=bq(ee,"Failed to shutdown persistence");g.reject($)}}),g.promise}}async function To(g,$){g.asyncQueue.verifyOperationInProgress(),oy(Te,"Initializing OfflineComponentProvider");let ee=await g.getConfiguration();await $.initialize(ee);let et=ee.initialUser;g.setCredentialChangeListener(async g=>{et.isEqual(g)||(await y_($.localStore,g),et=g)}),$.persistence.setDatabaseDeletedListener(()=>g.terminate()),g._offlineComponents=$}async function Tl(g,$){g.asyncQueue.verifyOperationInProgress();let ee=await Th(g);oy(Te,"Initializing OnlineComponentProvider");let et=await g.getConfiguration();await $.initialize(ee,et),g.setCredentialChangeListener(g=>bL($.remoteStore,g)),g.setAppCheckTokenChangeListener((g,ee)=>bL($.remoteStore,ee)),g._onlineComponents=$}function Tu(g){return"FirebaseError"===g.name?g.code===o_.FAILED_PRECONDITION||g.code===o_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||g.code===Ti||g.code===Tn||g.code===Tr}async function Th(g){if(!g._offlineComponents){if(g._uninitializedComponentsProvider){oy(Te,"Using user provided OfflineComponentProvider");try{await To(g,g._uninitializedComponentsProvider._offline)}catch(ee){let $=ee;if(!Tu($))throw $;oS("Error using user provided cache. Falling back to memory cache: "+$),await To(g,new S$)}}else oy(Te,"Using default OfflineComponentProvider"),await To(g,new S$)}return g._offlineComponents}async function Tp(g){return g._onlineComponents||(g._uninitializedComponentsProvider?(oy(Te,"Using user provided OnlineComponentProvider"),await Tl(g,g._uninitializedComponentsProvider._online)):(oy(Te,"Using default OnlineComponentProvider"),await Tl(g,new SW))),g._onlineComponents}function Tf(g){return Tp(g).then(g=>g.syncEngine)}function Tg(g){return Tp(g).then(g=>g.datastore)}function Tm(g,$){let ee=new oO;return g.asyncQueue.enqueueAndForget(async()=>Sh(await Tf(g),$,ee)),ee.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(g,$){return g.timeoutSeconds===$.timeoutSeconds}function Tv(g){let $={};return void 0!==g.timeoutSeconds&&($.timeoutSeconds=g.timeoutSeconds),$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TS="ComponentProvider",TT=new Map;function TE(g){let $=TT.get(g);$&&(oy(TS,"Removing Datastore"),TT.delete(g),$.terminate())}function Tw(g,$,ee,et){return new uf(g,$,ee,et.host,et.ssl,et.experimentalForceLongPolling,et.experimentalAutoDetectLongPolling,Tv(et.experimentalLongPollingOptions),et.useFetchStreams)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TC="firestore.googleapis.com",T_=!0,TI=5,TO=30,TA=!0;class TN{constructor(g){var $,ee;if(void 0===g.host){if(void 0!==g.ssl)throw new oI(o_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TC,this.ssl=T_}else this.host=g.host,this.ssl=null!==($=g.ssl)&&void 0!==$?$:T_;if(this.credentials=g.credentials,this.ignoreUndefinedProperties=!!g.ignoreUndefinedProperties,this.cache=g.localCache,void 0===g.cacheSizeBytes)this.cacheSizeBytes=mn;else{if(g.cacheSizeBytes!==mr&&g.cacheSizeBytes<mo)throw new oI(o_.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${mo}`);this.cacheSizeBytes=g.cacheSizeBytes}SJ("experimentalForceLongPolling",g.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",g.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!g.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===g.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=TA:this.experimentalAutoDetectLongPolling=!!g.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tv(null!==(ee=g.experimentalLongPollingOptions)&&void 0!==ee?ee:{}),TD(this.experimentalLongPollingOptions),this.useFetchStreams=!!g.useFetchStreams}isEqual(g){return this.host===g.host&&this.ssl===g.ssl&&this.credentials===g.credentials&&this.cacheSizeBytes===g.cacheSizeBytes&&this.experimentalForceLongPolling===g.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===g.experimentalAutoDetectLongPolling&&Ty(this.experimentalLongPollingOptions,g.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===g.ignoreUndefinedProperties&&this.useFetchStreams===g.useFetchStreams}}function TD(g){if(void 0!==g.timeoutSeconds){if(isNaN(g.timeoutSeconds))throw new oI(o_.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (must not be NaN)`);if(g.timeoutSeconds<TI)throw new oI(o_.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (minimum allowed value is ${TI})`);if(g.timeoutSeconds>TO)throw new oI(o_.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (maximum allowed value is ${TO})`)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(g,$,ee,et){this._authCredentials=g,this._appCheckCredentials=$,this._databaseId=ee,this._app=et,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new oI(o_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(g){if(this._settingsFrozen)throw new oI(o_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TN(g),void 0!==g.credentials&&(this._authCredentials=oL(g.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return TE(this),Promise.resolve()}}function Tk(g,$,ee,et={}){var er;let en=(g=S3(g,TR))._getSettings(),ei=`${$}:${ee}`;if(en.host!==TC&&en.host!==ei&&oS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),g._setSettings(Object.assign(Object.assign({},en),{host:ei,ssl:!1})),et.mockUserToken){let $,ee;if("string"==typeof et.mockUserToken)$=et.mockUserToken,ee=ol.MOCK_USER;else{$=eR(et.mockUserToken,null===(er=g._app)||void 0===er?void 0:er.options.projectId);let en=et.mockUserToken.sub||et.mockUserToken.user_id;if(!en)throw new oI(o_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ee=new ol(en)}g._authCredentials=new oD(new oA($,ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(g,$,ee){this.converter=$,this._key=ee,this.type="document",this.firestore=g}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new TM(this.firestore,this.converter,this._key.path.popLast())}withConverter(g){return new Tx(this.firestore,g,this._key)}}class TP{constructor(g,$,ee){this.converter=$,this._query=ee,this.type="query",this.firestore=g}withConverter(g){return new TP(this.firestore,g,this._query)}}class TM extends TP{constructor(g,$,ee){super(g,$,he(ee)),this._path=ee,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let g=this._path.popLast();return g.isEmpty()?null:new Tx(this.firestore,null,new oJ(g))}withConverter(g){return new TM(this.firestore,g,this._path)}}function TL(g,$,...ee){if(g=eV(g),SY("collection","path",$),g instanceof TR){let et=oH.fromString($,...ee);return SZ(et),new TM(g,null,et)}{if(!(g instanceof Tx)&&!(g instanceof TM))throw new oI(o_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let et=g._path.child(oH.fromString($,...ee));return SZ(et),new TM(g.firestore,null,et)}}function TF(g,$,...ee){if(g=eV(g),1==arguments.length&&($=oB.newId()),SY("doc","path",$),g instanceof TR){let et=oH.fromString($,...ee);return SX(et),new Tx(g,null,new oJ(et))}{if(!(g instanceof Tx)&&!(g instanceof TM))throw new oI(o_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let et=g._path.child(oH.fromString($,...ee));return SX(et),new Tx(g.firestore,g instanceof TM?g.converter:null,new oJ(et))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TB="AsyncQueue";class Tj{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new vV(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(g){this.enqueue(g)}enqueueAndForgetEvenWhileRestricted(g){this.verifyNotFailed(),this.enqueueInternal(g)}enterRestrictedMode(g){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=g||!1)}enqueue(g){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let $=new oO;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(g().then($.resolve,$.reject),$.promise)).then(()=>$.promise)}enqueueRetryable(g){this.enqueueAndForget(()=>(this.retryableOps.push(g),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(g){if(ay(g))oy(TB,"Operation failed with retryable error: "+g);else throw g}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(g){let $=this.tail.then(()=>(this.operationInProgress=!0,g().catch(g=>{throw this.failure=g,this.operationInProgress=!1,ov("INTERNAL UNHANDLED ERROR: ",TV(g)),g}).then(g=>(this.operationInProgress=!1,g))));return this.tail=$,$}enqueueAfterDelay(g,$,ee){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(g)>-1&&($=0);let et=bV.createAndSchedule(this,g,$,ee,g=>this.removeDelayedOperation(g));return this.delayedOperations.push(et),et}verifyNotFailed(){this.failure&&oE()}verifyOperationInProgress(){}async drain(){let g;do g=this.tail,await g;while(g!==this.tail)}containsDelayedOperation(g){for(let $ of this.delayedOperations)if($.timerId===g)return!0;return!1}runAllDelayedOperationsUntil(g){return this.drain().then(()=>{for(let $ of(this.delayedOperations.sort((g,$)=>g.targetTimeMs-$.targetTimeMs),this.delayedOperations))if($.skipDelay(),"all"!==g&&$.timerId===g)break;return this.drain()})}skipDelaysForTimerId(g){this.timerIdsToSkip.push(g)}removeDelayedOperation(g){let $=this.delayedOperations.indexOf(g);this.delayedOperations.splice($,1)}}function TU(){return new Tj}function TV(g){let $=g.message||"";return g.stack&&($=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),$}class Tq extends TR{constructor(g,$,ee,et){super(g,$,ee,et),this.type="firestore",this._queue=TU(),this._persistenceKey=(null==et?void 0:et.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||T$(this),this._firestoreClient.terminate()}}function Tz(g,$){let ee="object"==typeof g?g:tM(),et="string"==typeof g?g:$||ug,er=tN(ee,"firestore").getImmediate({identifier:et});if(!er._initialized){let g=eA("firestore");g&&Tk(er,...g)}return er}function TG(g){return g._firestoreClient||T$(g),g._firestoreClient.verifyNotTerminated(),g._firestoreClient}function T$(g){var $,ee,et;let er=g._freezeSettings(),en=Tw(g._databaseId,(null===($=g._app)||void 0===$?void 0:$.options.appId)||"",g._persistenceKey,er);g._firestoreClient=new Ts(g._authCredentials,g._appCheckCredentials,g._queue,en),(null===(ee=er.cache)||void 0===ee?void 0:ee._offlineComponentProvider)&&(null===(et=er.cache)||void 0===et?void 0:et._onlineComponentProvider)&&(g._firestoreClient._uninitializedComponentsProvider={_offlineKind:er.cache.kind,_offline:er.cache._offlineComponentProvider,_online:er.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(g,$=!0){oh(tk),tA(new eq("firestore",(g,{instanceIdentifier:ee,options:et})=>{let er=g.getProvider("app").getImmediate(),en=new Tq(new oR(g.getProvider("auth-internal")),new oM(g.getProvider("app-check-internal")),uy(er,ee),er);return et=Object.assign({useFetchStreams:$},et),en._setSettings(et),en},"PUBLIC").setMultipleInstances(!0)),tF(oi,oo,g),tF(oi,oo,"esm2017")}class TW{constructor(g,$,ee){this._userDataWriter=$,this._data=ee,this.type="AggregateQuerySnapshot",this.query=g}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(g){this._byteString=g}static fromBase64String(g){try{return new TH(l9.fromBase64String(g))}catch(g){throw new oI(o_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+g)}}static fromUint8Array(g){return new TH(l9.fromUint8Array(g))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(g){return this._byteString.isEqual(g._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(...g){for(let $=0;$<g.length;++$)if(0===g[$].length)throw new oI(o_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oY(g)}isEqual(g){return this._internalPath.isEqual(g._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(g){this._methodName=g}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(g,$){if(!isFinite(g)||g<-90||g>90)throw new oI(o_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+g);if(!isFinite($)||$<-180||$>180)throw new oI(o_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+$);this._lat=g,this._long=$}get latitude(){return this._lat}get longitude(){return this._long}isEqual(g){return this._lat===g._lat&&this._long===g._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(g){return oj(this._lat,g._lat)||oj(this._long,g._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TX=/^__.*__$/;class TZ{constructor(g,$,ee){this.data=g,this.fieldMask=$,this.fieldTransforms=ee}toMutation(g,$){return null!==this.fieldMask?new dS(g,this.data,this.fieldMask,$,this.fieldTransforms):new dg(g,this.data,$,this.fieldTransforms)}}class T0{constructor(g,$,ee){this.data=g,this.fieldMask=$,this.fieldTransforms=ee}toMutation(g,$){return new dS(g,this.data,this.fieldMask,$,this.fieldTransforms)}}function T1(g){switch(g){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oE()}}class T2{constructor(g,$,ee,et,er,en){this.settings=g,this.databaseId=$,this.serializer=ee,this.ignoreUndefinedProperties=et,void 0===er&&this.validatePath(),this.fieldTransforms=er||[],this.fieldMask=en||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(g){return new T2(Object.assign(Object.assign({},this.settings),g),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(g){var $;let ee=null===($=this.path)||void 0===$?void 0:$.child(g),et=this.contextWith({path:ee,arrayElement:!1});return et.validatePathSegment(g),et}childContextForFieldPath(g){var $;let ee=null===($=this.path)||void 0===$?void 0:$.child(g),et=this.contextWith({path:ee,arrayElement:!1});return et.validatePath(),et}childContextForArray(g){return this.contextWith({path:void 0,arrayElement:!0})}createError(g){return Eu(g,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(g){return void 0!==this.fieldMask.find($=>g.isPrefixOf($))||void 0!==this.fieldTransforms.find($=>g.isPrefixOf($.field))}validatePath(){if(this.path)for(let g=0;g<this.path.length;g++)this.validatePathSegment(this.path.get(g))}validatePathSegment(g){if(0===g.length)throw this.createError("Document fields must not be empty");if(T1(this.dataSource)&&TX.test(g))throw this.createError('Document fields cannot begin and end with "__"')}}class T3{constructor(g,$,ee){this.databaseId=g,this.ignoreUndefinedProperties=$,this.serializer=ee||vL(g)}createContext(g,$,ee,et=!1){return new T2({dataSource:g,methodName:$,targetDoc:ee,path:oY.emptyPath(),arrayElement:!1,hasConverter:et},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T4(g){let $=g._freezeSettings(),ee=vL(g._databaseId);return new T3(g._databaseId,!!$.ignoreUndefinedProperties,ee)}function T6(g,$,ee,et,er,en={}){let ei,es;let eo=g.createContext(en.merge||en.mergeFields?2:0,$,ee,er);Es("Data must be an object, but it was:",eo,et);let eu=Ee(et,eo);if(en.merge)ei=new l3(eo.fieldMask),es=eo.fieldTransforms;else if(en.mergeFields){let g=[];for(let et of en.mergeFields){let er=Eo($,et,ee);if(!eo.contains(er))throw new oI(o_.INVALID_ARGUMENT,`Field '${er}' is specified in your field mask but missing from your input data.`);Eh(g,er)||g.push(er)}ei=new l3(g),es=eo.fieldTransforms.filter(g=>ei.covers(g.field))}else ei=null,es=eo.fieldTransforms;return new TZ(new cn(eu),ei,es)}class T9 extends null{_toFieldTransform(g){if(2===g.dataSource)g.fieldMask.push(g.path);else if(1===g.dataSource)throw g.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw g.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(g){return g instanceof T9}}class T5 extends TY{_toFieldTransform(g){return new h7(g.path,new h0)}isEqual(g){return g instanceof T5}}function T8(g,$,ee,et=!1){return T7(ee,g.createContext(et?4:3,$))}function T7(g,$){if(Ei(g=eV(g)))return Es("Unsupported field value:",$,g),Ee(g,$);if(g instanceof TY)return Er(g,$),null;if(void 0===g&&$.ignoreUndefinedProperties)return null;if($.path&&$.fieldMask.push($.path),!(g instanceof Array))return En(g,$);if($.settings.arrayElement&&4!==$.dataSource)throw $.createError("Nested arrays are not supported");return Et(g,$)}function Ee(g,$){let ee={};return lH(g)?$.path&&$.path.length>0&&$.fieldMask.push($.path):lW(g,(g,et)=>{let er=T7(et,$.childContextForField(g));null!=er&&(ee[g]=er)}),{mapValue:{fields:ee}}}function Et(g,$){let ee=[],et=0;for(let er of g){let g=T7(er,$.childContextForArray(et));null==g&&(g={nullValue:"NULL_VALUE"}),ee.push(g),et++}return{arrayValue:{values:ee}}}function Er(g,$){if(!T1($.dataSource))throw $.createError(`${g._methodName}() can only be used with update() and set()`);if(!$.path)throw $.createError(`${g._methodName}() is not currently supported inside arrays`);let ee=g._toFieldTransform($);ee&&$.fieldTransforms.push(ee)}function En(g,$){if(null===(g=eV(g)))return{nullValue:"NULL_VALUE"};if("number"==typeof g)return hH($.serializer,g);if("boolean"==typeof g)return{booleanValue:g};if("string"==typeof g)return{stringValue:g};if(g instanceof Date){let ee=oG.fromDate(g);return{timestampValue:pn($.serializer,ee)}}if(g instanceof oG){let ee=new oG(g.seconds,1e3*Math.floor(g.nanoseconds/1e3));return{timestampValue:pn($.serializer,ee)}}if(g instanceof TJ)return{geoPointValue:{latitude:g.latitude,longitude:g.longitude}};else if(g instanceof TH)return{bytesValue:ps($.serializer,g._byteString)};else if(g instanceof Tx){let ee=$.databaseId,et=g.firestore._databaseId;if(!et.isEqual(ee))throw $.createError(`Document reference is for database ${et.projectId}/${et.database} but should be for database ${ee.projectId}/${ee.database}`);return{referenceValue:ph(g.firestore._databaseId||$.databaseId,g._key.path)}}else throw $.createError(`Unsupported field value: ${S1(g)}`)}function Ei(g){return"object"==typeof g&&null!==g&&!(g instanceof Array)&&!(g instanceof Date)&&!(g instanceof oG)&&!(g instanceof TJ)&&!(g instanceof TH)&&!(g instanceof Tx)&&!(g instanceof TY)}function Es(g,$,ee){if(!Ei(ee)||!S0(ee)){let et=S1(ee);if("an object"===et)throw $.createError(g+" a custom object");throw $.createError(g+" "+et)}}function Eo(g,$,ee){if(($=eV($))instanceof TQ)return $._internalPath;if("string"==typeof $)return El(g,$);throw Eu("Field path arguments must be of type string or ",g,!1,void 0,ee)}let Ea=RegExp("[~\\*/\\[\\]]");function El(g,$,ee){if($.search(Ea)>=0)throw Eu(`Invalid field path (${$}). Paths must not contain '~', '*', '/', '[', or ']'`,g,!1,void 0,ee);try{return new TQ(...$.split("."))._internalPath}catch(et){throw Eu(`Invalid field path (${$}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,g,!1,void 0,ee)}}function Eu(g,$,ee,et,er){let en=et&&!et.isEmpty(),ei=void 0!==er,es=`Function ${$}() called with invalid data`;ee&&(es+=" (via `toFirestore()`)"),es+=". ";let eo="";return(en||ei)&&(eo+=" (found",en&&(eo+=` in field ${et}`),ei&&(eo+=` in document ${er}`),eo+=")"),new oI(o_.INVALID_ARGUMENT,es+g+eo)}function Eh(g,$){return g.some(g=>g.isEqual($))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(g,$,ee,et,er){this._firestore=g,this._userDataWriter=$,this._key=ee,this._document=et,this._converter=er}get id(){return this._key.path.lastSegment()}get ref(){return new Tx(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let g=new Ef(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(g)}}}get(g){if(this._document){let $=this._document.data.field(Eg("DocumentSnapshot.get",g));if(null!==$)return this._userDataWriter.convertValue($)}}}class Ef extends null{data(){return super.data()}}function Eg(g,$){return"string"==typeof $?El(g,$):$ instanceof TQ?$._internalPath:$._delegate._internalPath}class Em extends null{constructor(g,$,ee){super(),this._field=g,this._op=$,this._value=ee,this.type="where"}static _create(g,$,ee){return new Em(g,$,ee)}_apply(g){let $=this._parse(g);return ER(g._query,$),new TP(g.firestore,g.converter,hp(g._query,$))}_parse(g){let $=T4(g.firestore);return EC(g._query,"where",$,g.firestore._databaseId,this._field,this._op,this._value)}}class Ey extends null{constructor(g,$){super(),this.type=g,this._queryConstraints=$}static _create(g,$){return new Ey(g,$)}_parse(g){let $=this._queryConstraints.map($=>$._parse(g)).filter(g=>g.getFilters().length>0);return 1===$.length?$[0]:cw.create($,this._getOperator())}_apply(g){let $=this._parse(g);return 0===$.getFilters().length?g:(Ek(g._query,$),new TP(g.firestore,g.converter,hp(g._query,$)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ev extends null{constructor(g,$){super(),this._field=g,this._direction=$,this.type="orderBy"}static _create(g,$){return new Ev(g,$)}_apply(g){let $=E_(g._query,this._field,this._direction);return new TP(g.firestore,g.converter,hf(g._query,$))}}class ES extends null{constructor(g,$,ee){super(),this.type=g,this._limit=$,this._limitType=ee}static _create(g,$,ee){return new ES(g,$,ee)}_apply(g){return new TP(g.firestore,g.converter,hg(g._query,this._limit,this._limitType))}}class ET extends null{constructor(g,$,ee){super(),this.type=g,this._docOrFields=$,this._inclusive=ee}static _create(g,$,ee){return new ET(g,$,ee)}_apply(g){let $=Ew(g,this.type,this._docOrFields,this._inclusive);return new TP(g.firestore,g.converter,hm(g._query,$))}}class EE extends null{constructor(g,$,ee){super(),this.type=g,this._docOrFields=$,this._inclusive=ee}static _create(g,$,ee){return new EE(g,$,ee)}_apply(g){let $=Ew(g,this.type,this._docOrFields,this._inclusive);return new TP(g.firestore,g.converter,hy(g._query,$))}}function Ew(g,$,ee,et){if(ee[0]=getModularInstance(ee[0]),ee[0]instanceof Ep)return EI(g._query,g.firestore._databaseId,$,ee[0]._document,et);{let er=T4(g.firestore);return EO(g._query,g.firestore._databaseId,er,$,ee,et)}}function EC(g,$,ee,et,er,en,ei){let es;if(er.isKeyField()){if("array-contains"===en||"array-contains-any"===en)throw new oI(o_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${en}' queries on documentId().`);if("in"===en||"not-in"===en){EN(ei,en);let $=[];for(let ee of ei)$.push(EA(et,g,ee));es={arrayValue:{values:$}}}else es=EA(et,g,ei)}else("in"===en||"not-in"===en||"array-contains-any"===en)&&EN(ei,en),es=T8(ee,$,ei,"in"===en||"not-in"===en);return cE.create(er,en,es)}function E_(g,$,ee){if(null!==g.startAt)throw new oI(o_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==g.endAt)throw new oI(o_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let et=new cm($,ee);return EP(g,et),et}function EI(g,$,ee,et,er){if(!et)throw new oI(o_.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${ee}().`);let en=[];for(let ee of hu(g))if(ee.field.isKeyField())en.push(uZ($,et.key));else{let g=et.data.field(ee.field);if(ul(g))throw new oI(o_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==g)en.push(g);else{let g=ee.field.canonicalString();throw new oI(o_.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}}return new cl(en,er)}function EO(g,$,ee,et,er,en){let ei=g.explicitOrderBy;if(er.length>ei.length)throw new oI(o_.INVALID_ARGUMENT,`Too many arguments provided to ${et}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let es=[];for(let en=0;en<er.length;en++){let eo=er[en];if(ei[en].field.isKeyField()){if("string"!=typeof eo)throw new oI(o_.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${et}(), but got a ${typeof eo}`);if(!hl(g)&&-1!==eo.indexOf("/"))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${et}() must be a plain document ID, but '${eo}' contains a slash.`);let ee=g.path.child(oH.fromString(eo));if(!oJ.isDocumentKey(ee))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${et}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);let er=new oJ(ee);es.push(uZ($,er))}else{let g=T8(ee,et,eo);es.push(g)}}return new cl(es,en)}function EA(g,$,ee){if("string"==typeof(ee=getModularInstance(ee))){if(""===ee)throw new oI(o_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl($)&&-1!==ee.indexOf("/"))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${ee}' contains a '/' character.`);let et=$.path.child(oH.fromString(ee));if(!oJ.isDocumentKey(et))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${et}' is not because it has an odd number of segments (${et.length}).`);return uZ(g,new oJ(et))}if(ee instanceof Tx)return uZ(g,ee._key);throw new oI(o_.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S1(ee)}.`)}function EN(g,$){if(!Array.isArray(g)||0===g.length)throw new oI(o_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${$.toString()}' filters.`)}function ED(g){switch(g){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function ER(g,$){if($.isInequality()){let ee=hs(g),et=$.field;if(null!==ee&&!ee.isEqual(et))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ee.toString()}' and '${et.toString()}'`);let er=hn(g);null!==er&&EM(g,et,er)}let ee=Ex(g.filters,ED($.op));if(null!==ee){if(ee===$.op)throw new oI(o_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${$.op.toString()}' filter.`);throw new oI(o_.INVALID_ARGUMENT,`Invalid query. You cannot use '${$.op.toString()}' filters with '${ee.toString()}' filters.`)}}function Ek(g,$){let ee=g;for(let g of $.getFlattenedFilters())ER(ee,g),ee=hp(ee,g)}function Ex(g,$){for(let ee of g)for(let g of ee.getFlattenedFilters())if($.indexOf(g.op)>=0)return g.op;return null}function EP(g,$){if(null===hn(g)){let ee=hs(g);null!==ee&&EM(g,ee,$.field)}}function EM(g,$,ee){if(!ee.isEqual($))throw new oI(o_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${$.toString()}' and so you must also use '${$.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${ee.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(g,$,ee){return g?ee&&(ee.merge||ee.mergeFields)?g.toFirestore($,ee):g.toFirestore($):$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(g,$){this.hasPendingWrites=g,this.fromCache=$}isEqual(g){return this.hasPendingWrites===g.hasPendingWrites&&this.fromCache===g.fromCache}}class EB extends null{data(g={}){return super.data(g)}}function Ej(g){switch(g){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oE()}}class EU extends null{constructor(g){super(),this.firestore=g}convertBytes(g){return new TH(g)}convertReference(g){let $=this.convertDocumentKey(g,this.firestore._databaseId);return new Tx(this.firestore,null,$)}}function EV(g,$){let ee=S3(g.firestore,Tq),et=TF(g),er=EL(g.converter,$);return Eq(ee,[T6(T4(g.firestore),"addDoc",et._key,er,null!==g.converter,{}).toMutation(et._key,dn.exists(!1))]).then(()=>et)}function Eq(g,$){return Tm(TG(g),$)}class Ez{constructor(g){this.forceOwnership=g,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(g){this._onlineComponentProvider=new SW,this._offlineComponentProvider=new SK(this._onlineComponentProvider,null==g?void 0:g.cacheSizeBytes,this.forceOwnership)}}function EG(){return new T5("serverTimestamp")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */TK("node");let E$={apiKey:"AIzaSyDaYfU47W0P4lQooXuSc_EG3orxEeacLtA",authDomain:"lvgt-sandbox-1.firebaseapp.com",projectId:"lvgt-sandbox-1",storageBucket:"lvgt-sandbox-1.appspot.com",messagingSenderId:"246009492692",appId:"1:246009492692:web:f86984f054cc05b2dd7741"},EK=Tz(0===tL().length?tP(E$):tL()[0]);function EW({vendorId:g,vendorName:$}){let[ee,et]=(0,eh.useState)(""),[er,en]=(0,eh.useState)(""),[ei,es]=(0,eh.useState)(""),[eo,ep]=(0,eh.useState)("idle"),[ef,eg]=(0,eh.useState)(""),em=async eo=>{if(eo.preventDefault(),!ee||!er){ep("error"),eg("Please fill in all required fields.");return}ep("loading");try{await EV(TL(EK,"bookings"),{vendorId:g,vendorName:$,customerName:ee,customerEmail:er,message:ei,submittedAt:EG(),status:"pending"}),ep("success"),eg("Booking submitted!"),et(""),en(""),es("")}catch(g){ep("error"),eg("Something went wrong. Try again."),console.error(g)}};return(0,eu.jsxs)("form",{onSubmit:em,className:"mt-6 p-6 bg-white rounded-lg shadow space-y-4 max-w-xl mx-auto",children:[(0,eu.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["Book ",$]}),eu.jsx("input",{type:"text",placeholder:"Your Name",value:ee,onChange:g=>et(g.target.value),className:"w-full p-2 border rounded",required:!0}),eu.jsx("input",{type:"email",placeholder:"Your Email",value:er,onChange:g=>en(g.target.value),className:"w-full p-2 border rounded",required:!0}),eu.jsx("textarea",{placeholder:"Message (optional)",value:ei,onChange:g=>es(g.target.value),className:"w-full p-2 border rounded",rows:4}),eu.jsx("button",{type:"submit",disabled:"loading"===eo,className:"bg-[#FFD700] text-black font-bold py-2 px-6 rounded hover:bg-yellow-400 transition",children:"loading"===eo?"Sending...":"Book Now"}),ef&&eu.jsx("p",{className:"success"===eo?"text-green-600":"text-red-600",children:ef})]})}},5e4:(g,$,ee)=>{"use strict";ee.r($),ee.d($,{default:()=>eu});var et=ee(95344),er=ee(72086),en=ee(28765),ei=ee(18822),es=ee(20783),eo=ee.n(es);function eu(){return et.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-black to-[#1a1a1a] border-t border-[#333] text-[#FFD700] z-50",children:(0,et.jsxs)("div",{className:"flex justify-around items-center py-3",children:[(0,et.jsxs)(eo(),{href:"/",className:"flex flex-col items-center text-sm",children:[et.jsx(er.Z,{size:22}),"Home"]}),(0,et.jsxs)(eo(),{href:"/search",className:"flex flex-col items-center text-sm",children:[et.jsx(en.Z,{size:22}),"Search"]}),(0,et.jsxs)(eo(),{href:"/profile",className:"flex flex-col items-center text-sm",children:[et.jsx(ei.Z,{size:22}),"Profile"]})]})})}},44903:(g,$,ee)=>{"use strict";ee.r($),ee.d($,{default:()=>ep,metadata:()=>eh});var et=ee(25036),er=ee(53640),en=ee.n(er);ee(5023);let ei=(0,ee(86843).createProxy)(String.raw`C:\Users\Owner\lvgt-sandbox\src\components\FooterNav.tsx`),{__esModule:es,$$typeof:eo}=ei,eu=ei.default,eh={title:"Vegas Good Times",description:"Concierge for Vegas experiences"};function ep({children:g}){return et.jsx("html",{lang:"en",children:(0,et.jsxs)("body",{className:`${en().className} bg-black text-white`,children:[et.jsx("div",{className:"pb-24",children:g}),et.jsx(eu,{})]})})}},71948:(g,$,ee)=>{"use strict";ee.r($),ee.d($,{default:()=>ef,generateStaticParams:()=>ep});var et=ee(25036),er=ee(12272),en=ee(51301),ei=ee(44551);let es=(0,ee(86843).createProxy)(String.raw`C:\Users\Owner\lvgt-sandbox\src\components\BookingForm.tsx`),{__esModule:eo,$$typeof:eu}=es,eh=es.default;async function ep(){return(await (0,er.PL)((0,er.hJ)(en.db,"vendors"))).docs.map(g=>({id:g.id}))}async function ef({params:g}){let $=(0,er.JU)(en.db,"vendors",g.id),ee=await (0,er.QT)($);ee.exists()||(0,ei.notFound)();let es=ee.data();return et.jsx("div",{className:"min-h-screen bg-black text-white p-4",children:(0,et.jsxs)("div",{className:"max-w-4xl mx-auto",children:[et.jsx("h1",{className:"text-4xl font-bold text-[#FFD700] mb-4",children:es.name}),et.jsx("p",{className:"text-gray-300 mb-2",children:es.description}),(0,et.jsxs)("p",{className:"text-sm text-purple-400",children:["Zone: ",es.zone]}),(0,et.jsxs)("div",{className:"mt-6",children:["direct"===es.bookingType&&et.jsx("button",{className:"bg-yellow-500 text-black font-bold py-2 px-6 rounded-full",children:"\uD83C\uDFAB Book Now"}),"inquiry"===es.bookingType&&et.jsx("button",{className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full",children:"\uD83D\uDCAC Request Info"}),"phone"===es.bookingType&&es.phone&&(0,et.jsxs)("a",{href:`tel:${es.phone}`,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full inline-block",children:["\uD83D\uDCDE Call ",es.phone]})]}),et.jsx("div",{className:"mt-10",children:et.jsx(eh,{vendorId:g.id,vendorName:es.name})})]})})}},51301:(g,$,ee)=>{"use strict";ee.d($,{db:()=>es});var et=ee(77010),er=ee(12272);let en={apiKey:"AIzaSyDaYfU47W0P4lQooXuSc_EG3orxEeacLtA",authDomain:"lvgt-sandbox-1.firebaseapp.com",projectId:"lvgt-sandbox-1",storageBucket:"lvgt-sandbox-1.appspot.com",messagingSenderId:"246009492692",appId:"1:246009492692:web:f86984f054cc05b2dd7741"},ei=0===(0,et.C6)().length?(0,et.ZF)(en):(0,et.C6)()[0],es=(0,er.ad)(ei)},5023:()=>{},65338:function(g,$){var ee;!function(et,er){function en(g){return g.default||g}void 0!==(ee=(function(){var g={};return er(g),en(g)}).apply($,[]))&&(g.exports=ee)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;/**
     * @license
     * Copyright 2009 The Closure Library Authors
     * Copyright 2020 Daniel Wirtz / The long.js Authors.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * SPDX-License-Identifier: Apache-2.0
     */var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ee(g,$,ee){this.low=0|g,this.high=0|$,this.unsigned=!!ee}function et(g){return!0===(g&&g.__isLong__)}function er(g){var $=Math.clz32(g&-g);return g?31-$:$}ee.prototype.__isLong__,Object.defineProperty(ee.prototype,"__isLong__",{value:!0}),ee.isLong=et;var en={},ei={};function es(g,$){var ee,et,er;return $?(g>>>=0,(er=0<=g&&g<256)&&(et=ei[g]))?et:(ee=eu(g,0,!0),er&&(ei[g]=ee),ee):(g|=0,(er=-128<=g&&g<128)&&(et=en[g]))?et:(ee=eu(g,g<0?-1:0,!1),er&&(en[g]=ee),ee)}function eo(g,$){if(isNaN(g))return $?eT:eS;if($){if(g<0)return eT;if(g>=em)return eI}else{if(g<=-ey)return eO;if(g+1>=ey)return e_}return g<0?eo(-g,$).neg():eu(g%eg|0,g/eg|0,$)}function eu(g,$,et){return new ee(g,$,et)}ee.fromInt=es,ee.fromNumber=eo,ee.fromBits=eu;var eh=Math.pow;function ep(g,$,ee){if(0===g.length)throw Error("empty string");if("number"==typeof $?(ee=$,$=!1):$=!!$,"NaN"===g||"Infinity"===g||"+Infinity"===g||"-Infinity"===g)return $?eT:eS;if((ee=ee||10)<2||36<ee)throw RangeError("radix");if((et=g.indexOf("-"))>0)throw Error("interior hyphen");if(0===et)return ep(g.substring(1),$,ee).neg();for(var et,er=eo(eh(ee,8)),en=eS,ei=0;ei<g.length;ei+=8){var es=Math.min(8,g.length-ei),eu=parseInt(g.substring(ei,ei+es),ee);if(es<8){var ef=eo(eh(ee,es));en=en.mul(ef).add(eo(eu))}else en=(en=en.mul(er)).add(eo(eu))}return en.unsigned=$,en}function ef(g,$){return"number"==typeof g?eo(g,$):"string"==typeof g?ep(g,$):eu(g.low,g.high,"boolean"==typeof $?$:g.unsigned)}ee.fromString=ep,ee.fromValue=ef;var eg=4294967296,em=18446744073709552e3,ey=0x7fffffffffffffff,ev=es(16777216),eS=es(0);ee.ZERO=eS;var eT=es(0,!0);ee.UZERO=eT;var eE=es(1);ee.ONE=eE;var ew=es(1,!0);ee.UONE=ew;var eC=es(-1);ee.NEG_ONE=eC;var e_=eu(-1,2147483647,!1);ee.MAX_VALUE=e_;var eI=eu(-1,-1,!0);ee.MAX_UNSIGNED_VALUE=eI;var eO=eu(0,-2147483648,!1);ee.MIN_VALUE=eO;var eA=ee.prototype;eA.toInt=function(){return this.unsigned?this.low>>>0:this.low},eA.toNumber=function(){return this.unsigned?(this.high>>>0)*eg+(this.low>>>0):this.high*eg+(this.low>>>0)},eA.toString=function(g){if((g=g||10)<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eO))return"-"+this.neg().toString(g);var $=eo(g),ee=this.div($),et=ee.mul($).sub(this);return ee.toString(g)+et.toInt().toString(g)}for(var er=eo(eh(g,6),this.unsigned),en=this,ei="";;){var es=en.div(er),eu=(en.sub(es.mul(er)).toInt()>>>0).toString(g);if((en=es).isZero())return eu+ei;for(;eu.length<6;)eu="0"+eu;ei=""+eu+ei}},eA.getHighBits=function(){return this.high},eA.getHighBitsUnsigned=function(){return this.high>>>0},eA.getLowBits=function(){return this.low},eA.getLowBitsUnsigned=function(){return this.low>>>0},eA.getNumBitsAbs=function(){if(this.isNegative())return this.eq(eO)?64:this.neg().getNumBitsAbs();for(var g=0!=this.high?this.high:this.low,$=31;$>0&&(g&1<<$)==0;$--);return 0!=this.high?$+33:$+1},eA.isSafeInteger=function(){var g=this.high>>21;return!g||!this.unsigned&&-1===g&&!(0===this.low&&-2097152===this.high)},eA.isZero=function(){return 0===this.high&&0===this.low},eA.eqz=eA.isZero,eA.isNegative=function(){return!this.unsigned&&this.high<0},eA.isPositive=function(){return this.unsigned||this.high>=0},eA.isOdd=function(){return(1&this.low)==1},eA.isEven=function(){return(1&this.low)==0},eA.equals=function(g){return et(g)||(g=ef(g)),(this.unsigned===g.unsigned||this.high>>>31!=1||g.high>>>31!=1)&&this.high===g.high&&this.low===g.low},eA.eq=eA.equals,eA.notEquals=function(g){return!this.eq(g)},eA.neq=eA.notEquals,eA.ne=eA.notEquals,eA.lessThan=function(g){return 0>this.comp(g)},eA.lt=eA.lessThan,eA.lessThanOrEqual=function(g){return 0>=this.comp(g)},eA.lte=eA.lessThanOrEqual,eA.le=eA.lessThanOrEqual,eA.greaterThan=function(g){return this.comp(g)>0},eA.gt=eA.greaterThan,eA.greaterThanOrEqual=function(g){return this.comp(g)>=0},eA.gte=eA.greaterThanOrEqual,eA.ge=eA.greaterThanOrEqual,eA.compare=function(g){if(et(g)||(g=ef(g)),this.eq(g))return 0;var $=this.isNegative(),ee=g.isNegative();return $&&!ee?-1:!$&&ee?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},eA.comp=eA.compare,eA.negate=function(){return!this.unsigned&&this.eq(eO)?eO:this.not().add(eE)},eA.neg=eA.negate,eA.add=function(g){et(g)||(g=ef(g));var $,ee,er=this.high>>>16,en=65535&this.high,ei=this.low>>>16,es=65535&this.low,eo=g.high>>>16,eh=65535&g.high,ep=g.low>>>16,eg=65535&g.low,em=0,ey=0;return $=0+((ee=0+(es+eg))>>>16),ee&=65535,$+=ei+ep,ey+=$>>>16,$&=65535,ey+=en+eh,em+=ey>>>16,ey&=65535,em+=er+eo,eu($<<16|ee,(em&=65535)<<16|ey,this.unsigned)},eA.subtract=function(g){return et(g)||(g=ef(g)),this.add(g.neg())},eA.sub=eA.subtract,eA.multiply=function(g){if(this.isZero())return this;if(et(g)||(g=ef(g)),$)return eu($.mul(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned);if(g.isZero())return this.unsigned?eT:eS;if(this.eq(eO))return g.isOdd()?eO:eS;if(g.eq(eO))return this.isOdd()?eO:eS;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(ev)&&g.lt(ev))return eo(this.toNumber()*g.toNumber(),this.unsigned);var ee,er,en=this.high>>>16,ei=65535&this.high,es=this.low>>>16,eh=65535&this.low,ep=g.high>>>16,eg=65535&g.high,em=g.low>>>16,ey=65535&g.low,eE=0,ew=0;return ee=0+((er=0+eh*ey)>>>16),er&=65535,ee+=es*ey,ew+=ee>>>16,ee&=65535,ee+=eh*em,ew+=ee>>>16,ee&=65535,ew+=ei*ey,eE+=ew>>>16,ew&=65535,ew+=es*em,eE+=ew>>>16,ew&=65535,ew+=eh*eg,eE+=ew>>>16,ew&=65535,eE+=en*ey+ei*em+es*eg+eh*ep,eu(ee<<16|er,(eE&=65535)<<16|ew,this.unsigned)},eA.mul=eA.multiply,eA.divide=function(g){if(et(g)||(g=ef(g)),g.isZero())throw Error("division by zero");if($){var ee,er,en;return this.unsigned||-2147483648!==this.high||-1!==g.low||-1!==g.high?eu((this.unsigned?$.div_u:$.div_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?eT:eS;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return eT;if(g.gt(this.shru(1)))return ew;en=eT}else{if(this.eq(eO))return g.eq(eE)||g.eq(eC)?eO:g.eq(eO)?eE:(ee=this.shr(1).div(g).shl(1)).eq(eS)?g.isNegative()?eE:eC:(er=this.sub(g.mul(ee)),en=ee.add(er.div(g)));if(g.eq(eO))return this.unsigned?eT:eS;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();en=eS}for(er=this;er.gte(g);){for(var ei=Math.ceil(Math.log(ee=Math.max(1,Math.floor(er.toNumber()/g.toNumber())))/Math.LN2),es=ei<=48?1:eh(2,ei-48),ep=eo(ee),eg=ep.mul(g);eg.isNegative()||eg.gt(er);)ee-=es,eg=(ep=eo(ee,this.unsigned)).mul(g);ep.isZero()&&(ep=eE),en=en.add(ep),er=er.sub(eg)}return en},eA.div=eA.divide,eA.modulo=function(g){return(et(g)||(g=ef(g)),$)?eu((this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this.sub(this.div(g).mul(g))},eA.mod=eA.modulo,eA.rem=eA.modulo,eA.not=function(){return eu(~this.low,~this.high,this.unsigned)},eA.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},eA.clz=eA.countLeadingZeros,eA.countTrailingZeros=function(){return this.low?er(this.low):er(this.high)+32},eA.ctz=eA.countTrailingZeros,eA.and=function(g){return et(g)||(g=ef(g)),eu(this.low&g.low,this.high&g.high,this.unsigned)},eA.or=function(g){return et(g)||(g=ef(g)),eu(this.low|g.low,this.high|g.high,this.unsigned)},eA.xor=function(g){return et(g)||(g=ef(g)),eu(this.low^g.low,this.high^g.high,this.unsigned)},eA.shiftLeft=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):eu(0,this.low<<g-32,this.unsigned)},eA.shl=eA.shiftLeft,eA.shiftRight=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):eu(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},eA.shr=eA.shiftRight,eA.shiftRightUnsigned=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low>>>g|this.high<<32-g,this.high>>>g,this.unsigned):32===g?eu(this.high,0,this.unsigned):eu(this.high>>>g-32,0,this.unsigned)},eA.shru=eA.shiftRightUnsigned,eA.shr_u=eA.shiftRightUnsigned,eA.rotateLeft=function(g){var $;return(et(g)&&(g=g.toInt()),0==(g&=63))?this:32===g?eu(this.high,this.low,this.unsigned):g<32?($=32-g,eu(this.low<<g|this.high>>>$,this.high<<g|this.low>>>$,this.unsigned)):(g-=32,$=32-g,eu(this.high<<g|this.low>>>$,this.low<<g|this.high>>>$,this.unsigned))},eA.rotl=eA.rotateLeft,eA.rotateRight=function(g){var $;return(et(g)&&(g=g.toInt()),0==(g&=63))?this:32===g?eu(this.high,this.low,this.unsigned):g<32?($=32-g,eu(this.high<<$|this.low>>>g,this.low<<$|this.high>>>g,this.unsigned)):(g-=32,$=32-g,eu(this.low<<$|this.high>>>g,this.high<<$|this.low>>>g,this.unsigned))},eA.rotr=eA.rotateRight,eA.toSigned=function(){return this.unsigned?eu(this.low,this.high,!1):this},eA.toUnsigned=function(){return this.unsigned?this:eu(this.low,this.high,!0)},eA.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},eA.toBytesLE=function(){var g=this.high,$=this.low;return[255&$,$>>>8&255,$>>>16&255,$>>>24,255&g,g>>>8&255,g>>>16&255,g>>>24]},eA.toBytesBE=function(){var g=this.high,$=this.low;return[g>>>24,g>>>16&255,g>>>8&255,255&g,$>>>24,$>>>16&255,$>>>8&255,255&$]},ee.fromBytes=function(g,$,et){return et?ee.fromBytesLE(g,$):ee.fromBytesBE(g,$)},ee.fromBytesLE=function(g,$){return new ee(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,$)},ee.fromBytesBE=function(g,$){return new ee(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],$)},"function"==typeof BigInt&&(ee.fromBigInt=function(g,$){return eu(Number(BigInt.asIntN(32,g)),Number(BigInt.asIntN(32,g>>BigInt(32))),$)},ee.fromValue=function(g,$){return"bigint"==typeof g?ee.fromBigInt(g,$):ef(g,$)},eA.toBigInt=function(){var g=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|g}),g.default=ee})},38883:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},53242:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],"php_generic_services",[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},88681:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},58702:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},81513:g=>{"use strict";g.exports={i8:"1.7.3"}},56541:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},89987:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},57674:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},73795:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};var __webpack_require__=require("../../../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=g=>__webpack_require__(__webpack_require__.s=g),__webpack_exports__=__webpack_require__.X(0,[138,998,551],()=>__webpack_exec__(73253));module.exports=__webpack_exports__})();