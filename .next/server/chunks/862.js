exports.id=862,exports.ids=[862],exports.modules={76959:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.addAdminServicesToServer=$.registerAdminService=void 0;let ee=[];function et(g,$){ee.push({getServiceDefinition:g,getHandlers:$})}function er(g){for(let{getServiceDefinition:$,getHandlers:et}of ee)g.addService($(),et())}$.registerAdminService=et,$.addAdminServicesToServer=er},33339:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BackoffTimeout=void 0;let ee=1e3,et=1.6,er=12e4,en=.2;function ei(g,$){return Math.random()*($-g)+g}class es{constructor(g,$){this.callback=g,this.initialDelay=ee,this.multiplier=et,this.maxDelay=er,this.jitter=en,this.running=!1,this.hasRef=!0,this.startTime=new Date,$&&($.initialDelay&&(this.initialDelay=$.initialDelay),$.multiplier&&(this.multiplier=$.multiplier),$.jitter&&(this.jitter=$.jitter),$.maxDelay&&(this.maxDelay=$.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(g){var $,ee;clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},g),this.hasRef||null===(ee=($=this.timerId).unref)||void 0===ee||ee.call($)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let g=Math.min(this.nextDelay*this.multiplier,this.maxDelay),$=g*this.jitter;this.nextDelay=g+ei(-$,$)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let g=new Date,$=this.startTime;$.setMilliseconds($.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),g<$?this.runTimer($.getTime()-g.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var g,$;this.hasRef=!0,null===($=(g=this.timerId).ref)||void 0===$||$.call(g)}unref(){var g,$;this.hasRef=!1,null===($=(g=this.timerId).unref)||void 0===$||$.call(g)}}$.BackoffTimeout=es},48682:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CallCredentialsFilterFactory=$.CallCredentialsFilter=void 0;let et=ee(47215),er=ee(88905),en=ee(76228);class ei extends et.BaseFilter{constructor(g,$){var ee,et;super(),this.channel=g,this.stream=$,this.channel=g,this.stream=$;let er=$.getMethod().split("/"),ei="";er.length>=2&&(ei=er[1]);let es=null!==(et=null===(ee=en.splitHostPort($.getHost()))||void 0===ee?void 0:ee.host)&&void 0!==et?et:"localhost";this.serviceUrl=`https://${es}/${ei}`}async sendMetadata(g){let $=this.stream.getCredentials().generateMetadata({service_url:this.serviceUrl}),ee=await g;try{ee.merge(await $)}catch(g){return this.stream.cancelWithStatus(er.Status.UNAUTHENTICATED,`Failed to retrieve auth metadata with error: ${g.message}`),Promise.reject("Failed to retrieve auth metadata")}return ee.get("authorization").length>1?(this.stream.cancelWithStatus(er.Status.INTERNAL,'"authorization" metadata cannot have multiple values'),Promise.reject('"authorization" metadata cannot have multiple values')):ee}}$.CallCredentialsFilter=ei;class es{constructor(g){this.channel=g,this.channel=g}createFilter(g){return new ei(this.channel,g)}}$.CallCredentialsFilterFactory=es},21860:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CallCredentials=void 0;let et=ee(46598);function er(g){return"getRequestHeaders"in g&&"function"==typeof g.getRequestHeaders}class en{static createFromMetadataGenerator(g){return new es(g)}static createFromGoogleCredential(g){return en.createFromMetadataGenerator(($,ee)=>{let en;(en=er(g)?g.getRequestHeaders($.service_url):new Promise((ee,et)=>{g.getRequestMetadata($.service_url,(g,$)=>{if(g){et(g);return}ee($)})})).then(g=>{let $=new et.Metadata;for(let ee of Object.keys(g))$.add(ee,g[ee]);ee(null,$)},g=>{ee(g)})})}static createEmpty(){return new eo}}$.CallCredentials=en;class ei extends en{constructor(g){super(),this.creds=g}async generateMetadata(g){let $=new et.Metadata;for(let ee of(await Promise.all(this.creds.map($=>$.generateMetadata(g)))))$.merge(ee);return $}compose(g){return new ei(this.creds.concat([g]))}_equals(g){return this===g||g instanceof ei&&this.creds.every(($,ee)=>$._equals(g.creds[ee]))}}class es extends en{constructor(g){super(),this.metadataGenerator=g}generateMetadata(g){return new Promise(($,ee)=>{this.metadataGenerator(g,(g,et)=>{void 0!==et?$(et):ee(g)})})}compose(g){return new ei([this,g])}_equals(g){return this===g||g instanceof es&&this.metadataGenerator===g.metadataGenerator}}class eo extends en{generateMetadata(g){return Promise.resolve(new et.Metadata)}compose(g){return g}_equals(g){return g instanceof eo}}},49789:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Http2CallStream=$.InterceptingListenerImpl=$.isInterceptingListener=void 0;let et=ee(85158),er=ee(22037),en=ee(88905),ei=ee(46598),es=ee(69196),eo=ee(14386),eu=ee(88905),eh="call_stream",{HTTP2_HEADER_STATUS:ep,HTTP2_HEADER_CONTENT_TYPE:ef,NGHTTP2_CANCEL:eg}=et.constants;function em(g){for(let[$,ee]of Object.entries(er.constants.errno))if(ee===g)return $;return"Unknown system error "+g}function ey(g){let $=1/0;for(let ee of g){let g=ee instanceof Date?ee.getTime():ee;g<$&&($=g)}return $}function ev(g){return void 0!==g.onReceiveMetadata&&1===g.onReceiveMetadata.length}$.isInterceptingListener=ev;class eS{constructor(g,$){this.listener=g,this.nextListener=$,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(g){this.processingMetadata=!0,this.listener.onReceiveMetadata(g,g=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(g),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(g){this.processingMessage=!0,this.listener.onReceiveMessage(g,g=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=g,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(g),this.processPendingStatus())})}onReceiveStatus(g){this.listener.onReceiveStatus(g,g=>{this.processingMetadata||this.processingMessage?this.pendingStatus=g:this.nextListener.onReceiveStatus(g)})}}$.InterceptingListenerImpl=eS;class eT{constructor(g,$,ee,et,er,eo){this.methodName=g,this.channel=$,this.options=ee,this.channelCallCredentials=er,this.callNumber=eo,this.http2Stream=null,this.pendingRead=!1,this.isWriteFilterPending=!1,this.pendingWrite=null,this.pendingWriteCallback=null,this.writesClosed=!1,this.decoder=new es.StreamDecoder,this.isReadFilterPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.unfilteredReadMessages=[],this.mappedStatusCode=en.Status.UNKNOWN,this.finalStatus=null,this.subchannel=null,this.listener=null,this.internalError=null,this.configDeadline=1/0,this.statusWatchers=[],this.streamEndWatchers=[],this.callStatsTracker=null,this.filterStack=et.createFilter(this),this.credentials=er,this.disconnectListener=()=>{this.endCall({code:en.Status.UNAVAILABLE,details:"Connection dropped",metadata:new ei.Metadata})},this.options.parentCall&&this.options.flags&en.Propagate.CANCELLATION&&this.options.parentCall.on("cancelled",()=>{this.cancelWithStatus(en.Status.CANCELLED,"Cancelled by parent call")})}outputStatus(){var g;if(this.listener&&!this.statusOutput){this.statusOutput=!0;let $=this.filterStack.receiveTrailers(this.finalStatus);this.trace("ended with status: code="+$.code+' details="'+$.details+'"'),this.statusWatchers.forEach(g=>g($)),process.nextTick(()=>{var g;null===(g=this.listener)||void 0===g||g.onReceiveStatus($)}),null===(g=this.http2Stream)||void 0===g||g.resume(),this.subchannel&&(this.subchannel.callUnref(),this.subchannel.removeDisconnectListener(this.disconnectListener))}}trace(g){eo.trace(eu.LogVerbosity.DEBUG,eh,"["+this.callNumber+"] "+g)}endCall(g){(null===this.finalStatus||this.finalStatus.code===en.Status.OK)&&(this.finalStatus=g,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==en.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&0===this.unfilteredReadMessages.length&&!this.isReadFilterPending)&&this.outputStatus()}push(g){this.trace("pushing to reader message of length "+(g instanceof Buffer?g.length:null)),this.canPush=!1,process.nextTick(()=>{var $;this.statusOutput||(null===($=this.listener)||void 0===$||$.onReceiveMessage(g),this.maybeOutputStatus())})}handleFilterError(g){this.cancelWithStatus(en.Status.INTERNAL,g.message)}handleFilteredRead(g){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.maybeOutputStatus();return}if(this.isReadFilterPending=!1,this.canPush?(this.http2Stream.pause(),this.push(g)):(this.trace("unpushedReadMessages.push message of length "+g.length),this.unpushedReadMessages.push(g)),this.unfilteredReadMessages.length>0){let g=this.unfilteredReadMessages.shift();this.filterReceivedMessage(g)}}filterReceivedMessage(g){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.maybeOutputStatus();return}this.trace("filterReceivedMessage of length "+g.length),this.isReadFilterPending=!0,this.filterStack.receiveMessage(Promise.resolve(g)).then(this.handleFilteredRead.bind(this),this.handleFilterError.bind(this))}tryPush(g){this.isReadFilterPending?(this.trace("unfilteredReadMessages.push message of length "+(g&&g.length)),this.unfilteredReadMessages.push(g)):this.filterReceivedMessage(g)}handleTrailers(g){let $;this.streamEndWatchers.forEach(g=>g(!0));let ee="";for(let $ of Object.keys(g))ee+="		"+$+": "+g[$]+"\n";this.trace("Received server trailers:\n"+ee);try{$=ei.Metadata.fromHttp2Headers(g)}catch(g){$=new ei.Metadata}let et=$.getMap(),er=this.mappedStatusCode;if(er===en.Status.UNKNOWN&&"string"==typeof et["grpc-status"]){let g=Number(et["grpc-status"]);g in en.Status&&(er=g,this.trace("received status code "+g+" from server")),$.remove("grpc-status")}let es="";if("string"==typeof et["grpc-message"]){try{es=decodeURI(et["grpc-message"])}catch(g){es=et["grpc-message"]}$.remove("grpc-message"),this.trace('received status details string "'+es+'" from server')}let eo={code:er,details:es,metadata:$};this.endCall(eo)}writeMessageToStream(g,$){var ee;null===(ee=this.callStatsTracker)||void 0===ee||ee.addMessageSent(),this.http2Stream.write(g,$)}attachHttp2Stream(g,$,ee,er){if(this.filterStack.push(ee),null!==this.finalStatus)g.close(eg);else{if(this.trace("attachHttp2Stream from subchannel "+$.getAddress()),this.http2Stream=g,this.subchannel=$,this.callStatsTracker=er,$.addDisconnectListener(this.disconnectListener),$.callRef(),g.on("response",(g,$)=>{var ee;let er="";for(let $ of Object.keys(g))er+="		"+$+": "+g[$]+"\n";switch(this.trace("Received server headers:\n"+er),g[":status"]){case 400:this.mappedStatusCode=en.Status.INTERNAL;break;case 401:this.mappedStatusCode=en.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=en.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=en.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=en.Status.UNAVAILABLE;break;default:this.mappedStatusCode=en.Status.UNKNOWN}if($&et.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(g);else{let $;try{$=ei.Metadata.fromHttp2Headers(g)}catch(g){this.endCall({code:en.Status.UNKNOWN,details:g.message,metadata:new ei.Metadata});return}try{let g=this.filterStack.receiveMetadata($);null===(ee=this.listener)||void 0===ee||ee.onReceiveMetadata(g)}catch(g){this.endCall({code:en.Status.UNKNOWN,details:g.message,metadata:new ei.Metadata})}}}),g.on("trailers",g=>{this.handleTrailers(g)}),g.on("data",g=>{if(!this.statusOutput)for(let $ of(this.trace("receive HTTP/2 data frame of length "+g.length),this.decoder.write(g)))this.trace("parsed message of length "+$.length),this.callStatsTracker.addMessageReceived(),this.tryPush($)}),g.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),g.on("close",()=>{process.nextTick(()=>{var $;let ee;if(this.trace("HTTP/2 stream closed with code "+g.rstCode),(null===($=this.finalStatus)||void 0===$?void 0:$.code)===en.Status.OK)return;let er="";switch(g.rstCode){case et.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;ee=en.Status.INTERNAL,er=`Received RST_STREAM with code ${g.rstCode}`;break;case et.constants.NGHTTP2_REFUSED_STREAM:ee=en.Status.UNAVAILABLE,er="Stream refused by server";break;case et.constants.NGHTTP2_CANCEL:ee=en.Status.CANCELLED,er="Call cancelled";break;case et.constants.NGHTTP2_ENHANCE_YOUR_CALM:ee=en.Status.RESOURCE_EXHAUSTED,er="Bandwidth exhausted or memory limit exceeded";break;case et.constants.NGHTTP2_INADEQUATE_SECURITY:ee=en.Status.PERMISSION_DENIED,er="Protocol not secure enough";break;case et.constants.NGHTTP2_INTERNAL_ERROR:ee=en.Status.INTERNAL,null===this.internalError?er=`Received RST_STREAM with code ${g.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(ee=en.Status.UNAVAILABLE,er=this.internalError.message):er=`Received RST_STREAM with code ${g.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:ee=en.Status.INTERNAL,er=`Received RST_STREAM with code ${g.rstCode}`}this.endCall({code:ee,details:er,metadata:new ei.Metadata})})}),g.on("error",g=>{"ERR_HTTP2_STREAM_ERROR"!==g.code&&(this.trace("Node error event: message="+g.message+" code="+g.code+" errno="+em(g.errno)+" syscall="+g.syscall),this.internalError=g),this.streamEndWatchers.forEach(g=>g(!1))}),this.pendingWrite){if(!this.pendingWriteCallback)throw Error("Invalid state in write handling code");this.trace("sending data chunk of length "+this.pendingWrite.length+" (deferred)");try{this.writeMessageToStream(this.pendingWrite,this.pendingWriteCallback)}catch(g){this.endCall({code:en.Status.UNAVAILABLE,details:`Write failed with error ${g.message}`,metadata:new ei.Metadata})}}this.maybeCloseWrites()}}start(g,$){this.trace("Sending metadata"),this.listener=$,this.channel._startCallStream(this,g),this.maybeOutputStatus()}destroyHttp2Stream(){var g;if(null!==this.http2Stream&&!this.http2Stream.destroyed){let $;$=(null===(g=this.finalStatus)||void 0===g?void 0:g.code)===en.Status.OK?et.constants.NGHTTP2_NO_ERROR:et.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+$),this.http2Stream.close($)}}cancelWithStatus(g,$){this.trace("cancelWithStatus code: "+g+' details: "'+$+'"'),this.endCall({code:g,details:$,metadata:new ei.Metadata})}getDeadline(){let g=[this.options.deadline];return this.options.parentCall&&this.options.flags&en.Propagate.DEADLINE&&g.push(this.options.parentCall.getDeadline()),this.configDeadline&&g.push(this.configDeadline),ey(g)}getCredentials(){return this.credentials}setCredentials(g){this.credentials=this.channelCallCredentials.compose(g)}getStatus(){return this.finalStatus}getPeer(){var g,$;return null!==($=null===(g=this.subchannel)||void 0===g?void 0:g.getAddress())&&void 0!==$?$:this.channel.getTarget()}getMethod(){return this.methodName}getHost(){return this.options.host}setConfigDeadline(g){this.configDeadline=g}addStatusWatcher(g){this.statusWatchers.push(g)}addStreamEndWatcher(g){this.streamEndWatchers.push(g)}addFilters(g){this.filterStack.push(g)}getCallNumber(){return this.callNumber}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==en.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,null===this.http2Stream)this.pendingRead=!0;else{if(this.unpushedReadMessages.length>0){let g=this.unpushedReadMessages.shift();this.push(g);return}this.http2Stream.resume()}}maybeCloseWrites(){this.writesClosed&&!this.isWriteFilterPending&&null!==this.http2Stream&&(this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end())}sendMessageWithContext(g,$){this.trace("write() called with message of length "+$.length);let ee={message:$,flags:g.flags},et=$=>{var ee,et;let er=en.Status.UNAVAILABLE;(null===(ee=$)||void 0===ee?void 0:ee.code)==="ERR_STREAM_WRITE_AFTER_END"&&(er=en.Status.INTERNAL),$&&this.cancelWithStatus(er,`Write error: ${$.message}`),null===(et=g.callback)||void 0===et||et.call(g)};this.isWriteFilterPending=!0,this.filterStack.sendMessage(Promise.resolve(ee)).then(g=>{if(this.isWriteFilterPending=!1,null===this.http2Stream)this.trace("deferring writing data chunk of length "+g.message.length),this.pendingWrite=g.message,this.pendingWriteCallback=et;else{this.trace("sending data chunk of length "+g.message.length);try{this.writeMessageToStream(g.message,et)}catch(g){this.endCall({code:en.Status.UNAVAILABLE,details:`Write failed with error ${g.message}`,metadata:new ei.Metadata})}this.maybeCloseWrites()}},this.handleFilterError.bind(this))}halfClose(){this.trace("end() called"),this.writesClosed=!0,this.maybeCloseWrites()}}$.Http2CallStream=eT},19238:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ClientDuplexStreamImpl=$.ClientWritableStreamImpl=$.ClientReadableStreamImpl=$.ClientUnaryCallImpl=$.callErrorFromStatus=void 0;let et=ee(82361),er=ee(12781),en=ee(88905);function ei(g,$){let ee=`${g.code} ${en.Status[g.code]}: ${g.details}`,et=Error(ee),er=`${et.stack}
for call at
${$}`;return Object.assign(Error(ee),g,{stack:er})}$.callErrorFromStatus=ei;class es extends et.EventEmitter{constructor(){super()}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}}$.ClientUnaryCallImpl=es;class eo extends er.Readable{constructor(g){super({objectMode:!0}),this.deserialize=g}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_read(g){var $;null===($=this.call)||void 0===$||$.startRead()}}$.ClientReadableStreamImpl=eo;class eu extends er.Writable{constructor(g){super({objectMode:!0}),this.serialize=g}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_write(g,$,ee){var et;let er={callback:ee},en=Number($);Number.isNaN(en)||(er.flags=en),null===(et=this.call)||void 0===et||et.sendMessageWithContext(er,g)}_final(g){var $;null===($=this.call)||void 0===$||$.halfClose(),g()}}$.ClientWritableStreamImpl=eu;class eh extends er.Duplex{constructor(g,$){super({objectMode:!0}),this.serialize=g,this.deserialize=$}cancel(){var g;null===(g=this.call)||void 0===g||g.cancelWithStatus(en.Status.CANCELLED,"Cancelled on client")}getPeer(){var g,$;return null!==($=null===(g=this.call)||void 0===g?void 0:g.getPeer())&&void 0!==$?$:"unknown"}_read(g){var $;null===($=this.call)||void 0===$||$.startRead()}_write(g,$,ee){var et;let er={callback:ee},en=Number($);Number.isNaN(en)||(er.flags=en),null===(et=this.call)||void 0===et||et.sendMessageWithContext(er,g)}_final(g){var $;null===($=this.call)||void 0===$||$.halfClose(),g()}}$.ClientDuplexStreamImpl=eh},69473:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChannelCredentials=void 0;let et=ee(24404),er=ee(21860),en=ee(6337);function ei(g,$){if(g&&!(g instanceof Buffer))throw TypeError(`${$}, if provided, must be a Buffer.`)}class es{constructor(g){this.callCredentials=g||er.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(g,$,ee,er){var es;if(ei(g,"Root certificate"),ei($,"Private key"),ei(ee,"Certificate chain"),$&&!ee)throw Error("Private key must be given with accompanying certificate chain");if(!$&&ee)throw Error("Certificate chain must be given with accompanying private key");return new eu(et.createSecureContext({ca:null!==(es=null!=g?g:en.getDefaultRootsData())&&void 0!==es?es:void 0,key:null!=$?$:void 0,cert:null!=ee?ee:void 0,ciphers:en.CIPHER_SUITES}),null!=er?er:{})}static createFromSecureContext(g,$){return new eu(g,null!=$?$:{})}static createInsecure(){return new eo}}$.ChannelCredentials=es;class eo extends es{constructor(g){super(g)}compose(g){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(g){return g instanceof eo}}class eu extends es{constructor(g,$){super(),this.secureContext=g,this.verifyOptions=$,this.connectionOptions={secureContext:g},(null==$?void 0:$.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=$.checkServerIdentity)}compose(g){return new eh(this,this.callCredentials.compose(g))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(g){return this===g||g instanceof eu&&this.secureContext===g.secureContext&&this.verifyOptions.checkServerIdentity===g.verifyOptions.checkServerIdentity}}class eh extends es{constructor(g,$){super($),this.channelCredentials=g}compose(g){let $=this.callCredentials.compose(g);return new eh(this.channelCredentials,$)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(g){return this===g||g instanceof eh&&this.channelCredentials._equals(g.channelCredentials)&&this.callCredentials._equals(g.callCredentials)}}},8007:(g,$)=>{"use strict";function ee(g,$){let ee=Object.keys(g).sort(),et=Object.keys($).sort();if(ee.length!==et.length)return!1;for(let er=0;er<ee.length;er+=1)if(ee[er]!==et[er]||g[ee[er]]!==$[et[er]])return!1;return!0}Object.defineProperty($,"__esModule",{value:!0}),$.channelOptionsEqual=$.recognizedOptions=void 0,$.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc-node.max_session_memory":!0},$.channelOptionsEqual=ee},45835:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChannelImplementation=void 0;let et=ee(49789),er=ee(69473),en=ee(17039),ei=ee(80760),es=ee(73184),eo=ee(88905),eu=ee(26846),eh=ee(48682),ep=ee(16491),ef=ee(34535),eg=ee(25361),em=ee(14386),ey=ee(18879),ev=ee(29347),eS=ee(76228),eT=ee(75199),eE=ee(14174),ew=2147483647,eC=0;function e_(){let g=eC;return(eC+=1)>=Number.MAX_SAFE_INTEGER&&(eC=0),g}let eI=[eo.Status.OK,eo.Status.INVALID_ARGUMENT,eo.Status.NOT_FOUND,eo.Status.ALREADY_EXISTS,eo.Status.FAILED_PRECONDITION,eo.Status.ABORTED,eo.Status.OUT_OF_RANGE,eo.Status.DATA_LOSS];function eO(g,$){return eI.includes(g)?{code:eo.Status.INTERNAL,details:`Invalid status from control plane: ${g} ${eo.Status[g]} ${$}`}:{code:g,details:$}}class eA{constructor(g,$,ee){var et,eC,e_,eI;if(this.credentials=$,this.options=ee,this.connectivityState=eT.ConnectivityState.IDLE,this.currentPicker=new es.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.channelzEnabled=!0,this.callTracker=new eE.ChannelzCallTracker,this.childrenTracker=new eE.ChannelzChildrenTracker,"string"!=typeof g)throw TypeError("Channel target must be a string");if(!($ instanceof er.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(ee&&"object"!=typeof ee)throw TypeError("Channel options must be an object");this.originalTarget=g;let eA=eS.parseUri(g);if(null===eA)throw Error(`Could not parse target name "${g}"`);let eN=eg.mapUriDefaultScheme(eA);if(null===eN)throw Error(`Could not find a default scheme for target name "${g}"`);this.callRefTimer=setInterval(()=>{},ew),null===(eC=(et=this.callRefTimer).unref)||void 0===eC||eC.call(et),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new eE.ChannelzTrace,this.channelzRef=eE.registerChannelzChannel(g,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=eg.getDefaultAuthority(eN);let eR=ev.mapProxyName(eN,ee);this.target=eR.target,this.options=Object.assign({},this.options,eR.extraOptions),this.subchannelPool=ei.getSubchannelPool((null!==(e_=ee["grpc.use_local_subchannel_pool"])&&void 0!==e_?e_:0)===0);let eD={createSubchannel:(g,$)=>{let ee=this.subchannelPool.getOrCreateSubchannel(this.target,g,Object.assign({},this.options,$),this.credentials);return this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",ee.getChannelzRef()),ee},updateState:(g,$)=>{this.currentPicker=$;let ee=this.pickQueue.slice();for(let{callStream:g,callMetadata:$,callConfig:et,dynamicFilters:er}of(this.pickQueue=[],this.callRefTimerUnref(),ee))this.tryPick(g,$,et,er);this.updateState(g)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:g=>{this.channelzEnabled&&this.childrenTracker.refChild(g)},removeChannelzChild:g=>{this.channelzEnabled&&this.childrenTracker.unrefChild(g)}};this.resolvingLoadBalancer=new en.ResolvingLoadBalancer(this.target,eD,ee,g=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=g,this.currentResolutionError=null,process.nextTick(()=>{let g=this.configSelectionQueue;for(let{callStream:$,callMetadata:ee}of(this.configSelectionQueue=[],this.callRefTimerUnref(),g))this.tryGetConfig($,ee);this.configSelectionQueue=[]})},g=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+g.code+' and details "'+g.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},eO(g.code,g.details)),{metadata:g.metadata}));let $=this.configSelectionQueue;for(let{callStream:ee,callMetadata:et}of(this.configSelectionQueue=[],this.callRefTimerUnref(),$))et.getOptions().waitForReady?(this.callRefTimerRef(),this.configSelectionQueue.push({callStream:ee,callMetadata:et})):ee.cancelWithStatus(g.code,g.details)}),this.filterStackFactory=new eu.FilterStackFactory([new eh.CallCredentialsFilterFactory(this),new ep.DeadlineFilterFactory(this),new ey.MaxMessageSizeFilterFactory(this.options),new ef.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(ee,void 0,2));let ek=Error();em.trace(eo.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(eI=ek.stack)||void 0===eI?void 0:eI.substring(ek.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(g,$){em.trace(null!=$?$:eo.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+eS.uriToString(this.target)+" "+g)}callRefTimerRef(){var g,$,ee,et;(null===($=(g=this.callRefTimer).hasRef)||void 0===$?void 0:$.call(g))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(et=(ee=this.callRefTimer).ref)||void 0===et||et.call(ee))}callRefTimerUnref(){var g,$;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===($=(g=this.callRefTimer).unref)||void 0===$||$.call(g))}pushPick(g,$,ee,et){this.pickQueue.push({callStream:g,callMetadata:$,callConfig:ee,dynamicFilters:et}),this.callRefTimerRef()}tryPick(g,$,ee,et){var er,en;let ei=this.currentPicker.pick({metadata:$,extraPickInfo:ee.pickInformation}),eu=ei.subchannel?"("+ei.subchannel.getChannelzRef().id+") "+ei.subchannel.getAddress():""+ei.subchannel;switch(this.trace("Pick result for call ["+g.getCallNumber()+"]: "+es.PickResultType[ei.pickResultType]+" subchannel: "+eu+" status: "+(null===(er=ei.status)||void 0===er?void 0:er.code)+" "+(null===(en=ei.status)||void 0===en?void 0:en.details)),ei.pickResultType){case es.PickResultType.COMPLETE:if(null===ei.subchannel)g.cancelWithStatus(eo.Status.UNAVAILABLE,"Request dropped by load balancing policy");else{if(ei.subchannel.getConnectivityState()!==eT.ConnectivityState.READY){em.log(eo.LogVerbosity.ERROR,"Error: COMPLETE pick result subchannel "+eu+" has state "+eT.ConnectivityState[ei.subchannel.getConnectivityState()]),this.pushPick(g,$,ee,et);break}g.filterStack.sendMetadata(Promise.resolve($.clone())).then(er=>{var en,es,eh;let ep=ei.subchannel.getConnectivityState();if(ep===eT.ConnectivityState.READY)try{let $=ei.extraFilterFactories.map($=>$.createFilter(g));null===(en=ei.subchannel)||void 0===en||en.getRealSubchannel().startCallStream(er,g,[...et,...$]),null===(es=ee.onCommitted)||void 0===es||es.call(ee),null===(eh=ei.onCallStarted)||void 0===eh||eh.call(ei)}catch(en){let er=en.code;"ERR_HTTP2_GOAWAY_SESSION"===er||"ERR_HTTP2_INVALID_SESSION"===er?(this.trace("Failed to start call on picked subchannel "+eu+" with error "+en.message+". Retrying pick",eo.LogVerbosity.INFO),this.tryPick(g,$,ee,et)):(this.trace("Failed to start call on picked subchanel "+eu+" with error "+en.message+". Ending call",eo.LogVerbosity.INFO),g.cancelWithStatus(eo.Status.INTERNAL,`Failed to start HTTP/2 stream with error: ${en.message}`))}else this.trace("Picked subchannel "+eu+" has state "+eT.ConnectivityState[ep]+" after metadata filters. Retrying pick",eo.LogVerbosity.INFO),this.tryPick(g,$,ee,et)},$=>{let{code:ee,details:et}=eO("number"==typeof $.code?$.code:eo.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${$.message}`);g.cancelWithStatus(ee,et)})}break;case es.PickResultType.QUEUE:this.pushPick(g,$,ee,et);break;case es.PickResultType.TRANSIENT_FAILURE:if($.getOptions().waitForReady)this.pushPick(g,$,ee,et);else{let{code:$,details:ee}=eO(ei.status.code,ei.status.details);g.cancelWithStatus($,ee)}break;case es.PickResultType.DROP:let{code:eh,details:ep}=eO(ei.status.code,ei.status.details);g.cancelWithStatus(eh,ep);break;default:throw Error(`Invalid state: unknown pickResultType ${ei.pickResultType}`)}}removeConnectivityStateWatcher(g){let $=this.connectivityStateWatchers.findIndex($=>$===g);$>=0&&this.connectivityStateWatchers.splice($,1)}updateState(g){for(let $ of(em.trace(eo.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+eS.uriToString(this.target)+" "+eT.ConnectivityState[this.connectivityState]+" -> "+eT.ConnectivityState[g]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",eT.ConnectivityState[this.connectivityState]+" -> "+eT.ConnectivityState[g]),this.connectivityState=g,this.connectivityStateWatchers.slice()))g!==$.currentState&&($.timer&&clearTimeout($.timer),this.removeConnectivityStateWatcher($),$.callback());g!==eT.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}tryGetConfig(g,$){if(null===g.getStatus()){if(null===this.configSelector)this.resolvingLoadBalancer.exitIdle(),this.currentResolutionError&&!$.getOptions().waitForReady?g.cancelWithStatus(this.currentResolutionError.code,this.currentResolutionError.details):(this.configSelectionQueue.push({callStream:g,callMetadata:$}),this.callRefTimerRef());else{let ee=this.configSelector(g.getMethod(),$);if(ee.status===eo.Status.OK){if(ee.methodConfig.timeout){let $=new Date;$.setSeconds($.getSeconds()+ee.methodConfig.timeout.seconds),$.setMilliseconds($.getMilliseconds()+ee.methodConfig.timeout.nanos/1e6),g.setConfigDeadline($),g.filterStack.refresh()}if(ee.dynamicFilterFactories.length>0){let et=new eu.FilterStackFactory(ee.dynamicFilterFactories).createFilter(g);et.sendMetadata(Promise.resolve($)).then($=>{this.tryPick(g,$,ee,et.getFilters())})}else this.tryPick(g,$,ee,[])}else{let{code:$,details:et}=eO(ee.status,"Failed to route call to method "+g.getMethod());g.cancelWithStatus($,et)}}}}_startCallStream(g,$){this.tryGetConfig(g,$.clone())}close(){this.resolvingLoadBalancer.destroy(),this.updateState(eT.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.channelzEnabled&&eE.unregisterChannelzRef(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return eS.uriToString(this.target)}getConnectivityState(g){let $=this.connectivityState;return g&&this.resolvingLoadBalancer.exitIdle(),$}watchConnectivityState(g,$,ee){if(this.connectivityState===eT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let et=null;if($!==1/0){let g=$ instanceof Date?$:new Date($),en=new Date;if($===-1/0||g<=en){process.nextTick(ee,Error("Deadline passed without connectivity state change"));return}et=setTimeout(()=>{this.removeConnectivityStateWatcher(er),ee(Error("Deadline passed without connectivity state change"))},g.getTime()-en.getTime())}let er={currentState:g,callback:ee,timer:et};this.connectivityStateWatchers.push(er)}getChannelzRef(){return this.channelzRef}createCall(g,$,ee,er,en){if("string"!=typeof g)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof $||$ instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===eT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let ei=e_();this.trace("createCall ["+ei+'] method="'+g+'", deadline='+$);let es={deadline:$,flags:null!=en?en:eo.Propagate.DEFAULTS,host:null!=ee?ee:this.defaultAuthority,parentCall:er},eu=new et.Http2CallStream(g,this,es,this.filterStackFactory,this.credentials._getCallCredentials(),ei);return this.channelzEnabled&&(this.callTracker.addCallStarted(),eu.addStatusWatcher(g=>{g.code===eo.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()})),eu}}$.ChannelImplementation=eA},14174:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.getChannelzServiceDefinition=$.getChannelzHandlers=$.unregisterChannelzRef=$.registerChannelzSocket=$.registerChannelzServer=$.registerChannelzSubchannel=$.registerChannelzChannel=$.ChannelzCallTracker=$.ChannelzChildrenTracker=$.ChannelzTrace=void 0;let et=ee(41808),er=ee(75199),en=ee(88905),ei=ee(50476),es=ee(76959),eo=ee(42900);function eu(g){return{channel_id:g.id,name:g.name}}function eh(g){return{subchannel_id:g.id,name:g.name}}function ep(g){return{server_id:g.id}}function ef(g){return{socket_id:g.id,name:g.name}}let eg=32;class em{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(g,$,ee){let et=new Date;this.events.push({description:$,severity:g,timestamp:et,childChannel:(null==ee?void 0:ee.kind)==="channel"?ee:void 0,childSubchannel:(null==ee?void 0:ee.kind)==="subchannel"?ee:void 0}),this.events.length>=2*eg&&(this.events=this.events.slice(eg)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:eM(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(g=>({description:g.description,severity:g.severity,timestamp:eM(g.timestamp),channel_ref:g.childChannel?eu(g.childChannel):null,subchannel_ref:g.childSubchannel?eh(g.childSubchannel):null}))}}}$.ChannelzTrace=em;class ey{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(g){var $,ee,et;switch(g.kind){case"channel":{let ee=null!==($=this.channelChildren.get(g.id))&&void 0!==$?$:{ref:g,count:0};ee.count+=1,this.channelChildren.set(g.id,ee);break}case"subchannel":{let $=null!==(ee=this.subchannelChildren.get(g.id))&&void 0!==ee?ee:{ref:g,count:0};$.count+=1,this.subchannelChildren.set(g.id,$);break}case"socket":{let $=null!==(et=this.socketChildren.get(g.id))&&void 0!==et?et:{ref:g,count:0};$.count+=1,this.socketChildren.set(g.id,$)}}}unrefChild(g){switch(g.kind){case"channel":{let $=this.channelChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.channelChildren.delete(g.id):this.channelChildren.set(g.id,$));break}case"subchannel":{let $=this.subchannelChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.subchannelChildren.delete(g.id):this.subchannelChildren.set(g.id,$));break}case"socket":{let $=this.socketChildren.get(g.id);void 0!==$&&($.count-=1,0===$.count?this.socketChildren.delete(g.id):this.socketChildren.set(g.id,$))}}}getChildLists(){let g=[];for(let{ref:$}of this.channelChildren.values())g.push($);let $=[];for(let{ref:g}of this.subchannelChildren.values())$.push(g);let ee=[];for(let{ref:g}of this.socketChildren.values())ee.push(g);return{channels:g,subchannels:$,sockets:ee}}}$.ChannelzChildrenTracker=ey;class ev{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}$.ChannelzCallTracker=ev;let eS=1;function eT(){return eS++}let eE=[],ew=[],eC=[],e_=[];function eI(g,$,ee){let et=eT(),er={id:et,name:g,kind:"channel"};return ee&&(eE[et]={ref:er,getInfo:$}),er}function eO(g,$,ee){let et=eT(),er={id:et,name:g,kind:"subchannel"};return ee&&(ew[et]={ref:er,getInfo:$}),er}function eA(g,$){let ee=eT(),et={id:ee,kind:"server"};return $&&(eC[ee]={ref:et,getInfo:g}),et}function eN(g,$,ee){let et=eT(),er={id:et,name:g,kind:"socket"};return ee&&(e_[et]={ref:er,getInfo:$}),er}function eR(g){switch(g.kind){case"channel":delete eE[g.id];return;case"subchannel":delete ew[g.id];return;case"server":delete eC[g.id];return;case"socket":delete e_[g.id];return}}function eD(g){let $=Number.parseInt(g,16);return[$/256|0,$%256]}function ek(g){return""===g?[]:[].concat(...g.split(":").map(g=>eD(g)))}function ex(g){if(et.isIPv4(g))return Buffer.from(Uint8Array.from(g.split(".").map(g=>Number.parseInt(g))));if(!et.isIPv6(g))return null;{let $,ee;let et=g.indexOf("::");-1===et?($=g,ee=""):($=g.substring(0,et),ee=g.substring(et+2));let er=Buffer.from(ek($)),en=Buffer.from(ek(ee)),ei=Buffer.alloc(16-er.length-en.length,0);return Buffer.concat([er,ei,en])}}function eP(g){switch(g){case er.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case er.ConnectivityState.IDLE:return{state:"IDLE"};case er.ConnectivityState.READY:return{state:"READY"};case er.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case er.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function eM(g){if(!g)return null;let $=g.getTime();return{seconds:$/1e3|0,nanos:$%1e3*1e6}}function eL(g){let $=g.getInfo();return{ref:eu(g.ref),data:{target:$.target,state:eP($.state),calls_started:$.callTracker.callsStarted,calls_succeeded:$.callTracker.callsSucceeded,calls_failed:$.callTracker.callsFailed,last_call_started_timestamp:eM($.callTracker.lastCallStartedTimestamp),trace:$.trace.getTraceMessage()},channel_ref:$.children.channels.map(g=>eu(g)),subchannel_ref:$.children.subchannels.map(g=>eh(g))}}function eF(g,$){let ee=Number.parseInt(g.request.channel_id),et=eE[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No channel data found for id "+ee});return}$(null,{channel:eL(et)})}function eB(g,$){let ee=Number.parseInt(g.request.max_results),et=[],er=Number.parseInt(g.request.start_channel_id);for(;er<eE.length;er++){let g=eE[er];if(void 0!==g&&(et.push(eL(g)),et.length>=ee))break}$(null,{channel:et,end:er>=eC.length})}function ej(g){let $=g.getInfo();return{ref:ep(g.ref),data:{calls_started:$.callTracker.callsStarted,calls_succeeded:$.callTracker.callsSucceeded,calls_failed:$.callTracker.callsFailed,last_call_started_timestamp:eM($.callTracker.lastCallStartedTimestamp),trace:$.trace.getTraceMessage()},listen_socket:$.listenerChildren.sockets.map(g=>ef(g))}}function eU(g,$){let ee=Number.parseInt(g.request.server_id),et=eC[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No server data found for id "+ee});return}$(null,{server:ej(et)})}function eV(g,$){let ee=Number.parseInt(g.request.max_results),et=[],er=Number.parseInt(g.request.start_server_id);for(;er<eC.length;er++){let g=eC[er];if(void 0!==g&&(et.push(ej(g)),et.length>=ee))break}$(null,{server:et,end:er>=eC.length})}function eq(g,$){let ee=Number.parseInt(g.request.subchannel_id),et=ew[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No subchannel data found for id "+ee});return}let er=et.getInfo();$(null,{subchannel:{ref:eh(et.ref),data:{target:er.target,state:eP(er.state),calls_started:er.callTracker.callsStarted,calls_succeeded:er.callTracker.callsSucceeded,calls_failed:er.callTracker.callsFailed,last_call_started_timestamp:eM(er.callTracker.lastCallStartedTimestamp),trace:er.trace.getTraceMessage()},socket_ref:er.children.sockets.map(g=>ef(g))}})}function ez(g){var $;return ei.isTcpSubchannelAddress(g)?{address:"tcpip_address",tcpip_address:{ip_address:null!==($=ex(g.host))&&void 0!==$?$:void 0,port:g.port}}:{address:"uds_address",uds_address:{filename:g.path}}}function eG(g,$){var ee,et,er,ei,es;let eo=Number.parseInt(g.request.socket_id),eu=e_[eo];if(void 0===eu){$({code:en.Status.NOT_FOUND,details:"No socket data found for id "+eo});return}let eh=eu.getInfo(),ep=eh.security?{model:"tls",tls:{cipher_suite:eh.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(ee=eh.security.cipherSuiteStandardName)&&void 0!==ee?ee:void 0,other_name:null!==(et=eh.security.cipherSuiteOtherName)&&void 0!==et?et:void 0,local_certificate:null!==(er=eh.security.localCertificate)&&void 0!==er?er:void 0,remote_certificate:null!==(ei=eh.security.remoteCertificate)&&void 0!==ei?ei:void 0}}:null;$(null,{socket:{ref:ef(eu.ref),local:eh.localAddress?ez(eh.localAddress):null,remote:eh.remoteAddress?ez(eh.remoteAddress):null,remote_name:null!==(es=eh.remoteName)&&void 0!==es?es:void 0,security:ep,data:{keep_alives_sent:eh.keepAlivesSent,streams_started:eh.streamsStarted,streams_succeeded:eh.streamsSucceeded,streams_failed:eh.streamsFailed,last_local_stream_created_timestamp:eM(eh.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:eM(eh.lastRemoteStreamCreatedTimestamp),messages_received:eh.messagesReceived,messages_sent:eh.messagesSent,last_message_received_timestamp:eM(eh.lastMessageReceivedTimestamp),last_message_sent_timestamp:eM(eh.lastMessageSentTimestamp),local_flow_control_window:eh.localFlowControlWindow?{value:eh.localFlowControlWindow}:null,remote_flow_control_window:eh.remoteFlowControlWindow?{value:eh.remoteFlowControlWindow}:null}}})}function e$(g,$){let ee=Number.parseInt(g.request.server_id),et=eC[ee];if(void 0===et){$({code:en.Status.NOT_FOUND,details:"No server data found for id "+ee});return}let er=Number.parseInt(g.request.start_socket_id),ei=Number.parseInt(g.request.max_results),es=et.getInfo().sessionChildren.sockets.sort((g,$)=>g.id-$.id),eo=[],eu=0;for(;eu<es.length&&(!(es[eu].id>=er)||(eo.push(ef(es[eu])),!(eo.length>=ei)));eu++);$(null,{socket_ref:eo,end:eu>=es.length})}function eK(){return{GetChannel:eF,GetTopChannels:eB,GetServer:eU,GetServers:eV,GetSubchannel:eq,GetSocket:eG,GetServerSockets:e$}}$.registerChannelzChannel=eI,$.registerChannelzSubchannel=eO,$.registerChannelzServer=eA,$.registerChannelzSocket=eN,$.unregisterChannelzRef=eR,$.getChannelzHandlers=eK;let eW=null;function eH(){if(eW)return eW;let g=(0,ee(48886).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return eW=eo.loadPackageDefinition(g).grpc.channelz.v1.Channelz.service}function eQ(){es.registerAdminService(eH,eK)}$.getChannelzServiceDefinition=eH,$.setup=eQ},53811:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getInterceptingCall=$.InterceptingCall=$.RequesterBuilder=$.ListenerBuilder=$.InterceptorConfigurationError=void 0;let et=ee(46598),er=ee(49789),en=ee(88905);class ei extends Error{constructor(g){super(g),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,ei)}}$.InterceptorConfigurationError=ei;class es{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(g){return this.metadata=g,this}withOnReceiveMessage(g){return this.message=g,this}withOnReceiveStatus(g){return this.status=g,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}$.ListenerBuilder=es;class eo{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(g){return this.start=g,this}withSendMessage(g){return this.message=g,this}withHalfClose(g){return this.halfClose=g,this}withCancel(g){return this.cancel=g,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}$.RequesterBuilder=eo;let eu={onReceiveMetadata:(g,$)=>{$(g)},onReceiveMessage:(g,$)=>{$(g)},onReceiveStatus:(g,$)=>{$(g)}},eh={start:(g,$,ee)=>{ee(g,$)},sendMessage:(g,$)=>{$(g)},halfClose:g=>{g()},cancel:g=>{g()}};class ep{constructor(g,$){var ee,et,er,en;this.nextCall=g,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,$?this.requester={start:null!==(ee=$.start)&&void 0!==ee?ee:eh.start,sendMessage:null!==(et=$.sendMessage)&&void 0!==et?et:eh.sendMessage,halfClose:null!==(er=$.halfClose)&&void 0!==er?er:eh.halfClose,cancel:null!==(en=$.cancel)&&void 0!==en?en:eh.cancel}:this.requester=eh}cancelWithStatus(g,$){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(g,$)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(g,$){var ee,et,en,ei,es,eo;let eh={onReceiveMetadata:null!==(et=null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g=>{},onReceiveMessage:null!==(ei=null===(en=null==$?void 0:$.onReceiveMessage)||void 0===en?void 0:en.bind($))&&void 0!==ei?ei:g=>{},onReceiveStatus:null!==(eo=null===(es=null==$?void 0:$.onReceiveStatus)||void 0===es?void 0:es.bind($))&&void 0!==eo?eo:g=>{}};this.processingMetadata=!0,this.requester.start(g,eh,(g,$)=>{var ee,et,en;let ei;if(this.processingMetadata=!1,er.isInterceptingListener($))ei=$;else{let g={onReceiveMetadata:null!==(ee=$.onReceiveMetadata)&&void 0!==ee?ee:eu.onReceiveMetadata,onReceiveMessage:null!==(et=$.onReceiveMessage)&&void 0!==et?et:eu.onReceiveMessage,onReceiveStatus:null!==(en=$.onReceiveStatus)&&void 0!==en?en:eu.onReceiveStatus};ei=new er.InterceptingListenerImpl(g,eh)}this.nextCall.start(g,ei),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(g,$){this.processingMessage=!0,this.requester.sendMessage($,ee=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=g,this.pendingMessage=$):(this.nextCall.sendMessageWithContext(g,ee),this.processPendingHalfClose())})}sendMessage(g){this.sendMessageWithContext({},g)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}setCredentials(g){this.nextCall.setCredentials(g)}}function ef(g,$,ee){var et,er;let en=null!==(et=ee.deadline)&&void 0!==et?et:1/0,ei=ee.host,es=null!==(er=ee.parent)&&void 0!==er?er:null,eo=ee.propagate_flags,eu=ee.credentials,eh=g.createCall($,en,ei,es,eo);return eu&&eh.setCredentials(eu),eh}$.InterceptingCall=ep;class eg{constructor(g,$){this.call=g,this.methodDefinition=$}cancelWithStatus(g,$){this.call.cancelWithStatus(g,$)}getPeer(){return this.call.getPeer()}setCredentials(g){this.call.setCredentials(g)}sendMessageWithContext(g,$){let ee;try{ee=this.methodDefinition.requestSerialize($)}catch(g){this.call.cancelWithStatus(en.Status.INTERNAL,`Request message serialization failure: ${g.message}`);return}this.call.sendMessageWithContext(g,ee)}sendMessage(g){this.sendMessageWithContext({},g)}start(g,$){let ee=null;this.call.start(g,{onReceiveMetadata:g=>{var ee;null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee||ee.call($,g)},onReceiveMessage:g=>{var er;let ei;try{ei=this.methodDefinition.responseDeserialize(g)}catch(g){ee={code:en.Status.INTERNAL,details:`Response message parsing error: ${g.message}`,metadata:new et.Metadata},this.call.cancelWithStatus(ee.code,ee.details);return}null===(er=null==$?void 0:$.onReceiveMessage)||void 0===er||er.call($,ei)},onReceiveStatus:g=>{var et,er;ee?null===(et=null==$?void 0:$.onReceiveStatus)||void 0===et||et.call($,ee):null===(er=null==$?void 0:$.onReceiveStatus)||void 0===er||er.call($,g)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class em extends eg{constructor(g,$){super(g,$)}start(g,$){var ee,et;let er=!1,en={onReceiveMetadata:null!==(et=null===(ee=null==$?void 0:$.onReceiveMetadata)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g=>{},onReceiveMessage:g=>{var ee;er=!0,null===(ee=null==$?void 0:$.onReceiveMessage)||void 0===ee||ee.call($,g)},onReceiveStatus:g=>{var ee,et;er||null===(ee=null==$?void 0:$.onReceiveMessage)||void 0===ee||ee.call($,null),null===(et=null==$?void 0:$.onReceiveStatus)||void 0===et||et.call($,g)}};super.start(g,en),this.call.startRead()}}class ey extends eg{}function ev(g,$,ee){let et=ef(g,ee.path,$);return ee.responseStream?new ey(et,ee):new em(et,ee)}function eS(g,$,ee,et){if(g.clientInterceptors.length>0&&g.clientInterceptorProviders.length>0)throw new ei("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(g.callInterceptors.length>0&&g.callInterceptorProviders.length>0)throw new ei("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let er=[];er=g.callInterceptors.length>0||g.callInterceptorProviders.length>0?[].concat(g.callInterceptors,g.callInterceptorProviders.map(g=>g($))).filter(g=>g):[].concat(g.clientInterceptors,g.clientInterceptorProviders.map(g=>g($))).filter(g=>g);let en=Object.assign({},ee,{method_definition:$});return er.reduceRight((g,$)=>ee=>$(ee,g),g=>ev(et,g,$))(en)}$.getInterceptingCall=eS},10526:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Client=void 0;let et=ee(19238),er=ee(45835),en=ee(75199),ei=ee(88905),es=ee(46598),eo=ee(53811),eu=Symbol(),eh=Symbol(),ep=Symbol(),ef=Symbol();function eg(g){return"function"==typeof g}function em(g){return g.stack.split("\n").slice(1).join("\n")}class ey{constructor(g,$,ee={}){var et,en;if(ee=Object.assign({},ee),this[eh]=null!==(et=ee.interceptors)&&void 0!==et?et:[],delete ee.interceptors,this[ep]=null!==(en=ee.interceptor_providers)&&void 0!==en?en:[],delete ee.interceptor_providers,this[eh].length>0&&this[ep].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[ef]=ee.callInvocationTransformer,delete ee.callInvocationTransformer,ee.channelOverride)this[eu]=ee.channelOverride;else if(ee.channelFactoryOverride){let et=ee.channelFactoryOverride;delete ee.channelFactoryOverride,this[eu]=et(g,$,ee)}else this[eu]=new er.ChannelImplementation(g,$,ee)}close(){this[eu].close()}getChannel(){return this[eu]}waitForReady(g,$){let ee=et=>{let er;if(et){$(Error("Failed to connect before the deadline"));return}try{er=this[eu].getConnectivityState(!0)}catch(g){$(Error("The channel has been closed"));return}if(er===en.ConnectivityState.READY)$();else try{this[eu].watchConnectivityState(er,g,ee)}catch(g){$(Error("The channel has been closed"))}};setImmediate(ee)}checkOptionalUnaryResponseArguments(g,$,ee){if(eg(g))return{metadata:new es.Metadata,options:{},callback:g};if(eg($))return g instanceof es.Metadata?{metadata:g,options:{},callback:$}:{metadata:new es.Metadata,options:g,callback:$};if(!(g instanceof es.Metadata&&$ instanceof Object&&eg(ee)))throw Error("Incorrect arguments passed");return{metadata:g,options:$,callback:ee}}makeUnaryRequest(g,$,ee,er,en,es,eg){var ey,ev;let eS=this.checkOptionalUnaryResponseArguments(en,es,eg),eT={path:g,requestStream:!1,responseStream:!1,requestSerialize:$,responseDeserialize:ee},eE={argument:er,metadata:eS.metadata,call:new et.ClientUnaryCallImpl,channel:this[eu],methodDefinition:eT,callOptions:eS.options,callback:eS.callback};this[ef]&&(eE=this[ef](eE));let ew=eE.call,eC={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(ey=eE.callOptions.interceptors)&&void 0!==ey?ey:[],callInterceptorProviders:null!==(ev=eE.callOptions.interceptor_providers)&&void 0!==ev?ev:[]},e_=eo.getInterceptingCall(eC,eE.methodDefinition,eE.callOptions,eE.channel);ew.call=e_,eE.callOptions.credentials&&e_.setCredentials(eE.callOptions.credentials);let eI=null,eO=!1,eA=Error();return e_.start(eE.metadata,{onReceiveMetadata:g=>{ew.emit("metadata",g)},onReceiveMessage(g){null!==eI&&e_.cancelWithStatus(ei.Status.INTERNAL,"Too many responses received"),eI=g},onReceiveStatus(g){if(!eO){if(eO=!0,g.code===ei.Status.OK){if(null===eI){let $=em(eA);eE.callback(et.callErrorFromStatus({code:ei.Status.INTERNAL,details:"No message received",metadata:g.metadata},$))}else eE.callback(null,eI)}else{let $=em(eA);eE.callback(et.callErrorFromStatus(g,$))}ew.emit("status",g)}}}),e_.sendMessage(er),e_.halfClose(),ew}makeClientStreamRequest(g,$,ee,er,en,es){var eg,ey;let ev=this.checkOptionalUnaryResponseArguments(er,en,es),eS={path:g,requestStream:!0,responseStream:!1,requestSerialize:$,responseDeserialize:ee},eT={metadata:ev.metadata,call:new et.ClientWritableStreamImpl($),channel:this[eu],methodDefinition:eS,callOptions:ev.options,callback:ev.callback};this[ef]&&(eT=this[ef](eT));let eE=eT.call,ew={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(eg=eT.callOptions.interceptors)&&void 0!==eg?eg:[],callInterceptorProviders:null!==(ey=eT.callOptions.interceptor_providers)&&void 0!==ey?ey:[]},eC=eo.getInterceptingCall(ew,eT.methodDefinition,eT.callOptions,eT.channel);eE.call=eC,eT.callOptions.credentials&&eC.setCredentials(eT.callOptions.credentials);let e_=null,eI=!1,eO=Error();return eC.start(eT.metadata,{onReceiveMetadata:g=>{eE.emit("metadata",g)},onReceiveMessage(g){null!==e_&&eC.cancelWithStatus(ei.Status.INTERNAL,"Too many responses received"),e_=g},onReceiveStatus(g){if(!eI){if(eI=!0,g.code===ei.Status.OK){if(null===e_){let $=em(eO);eT.callback(et.callErrorFromStatus({code:ei.Status.INTERNAL,details:"No message received",metadata:g.metadata},$))}else eT.callback(null,e_)}else{let $=em(eO);eT.callback(et.callErrorFromStatus(g,$))}eE.emit("status",g)}}}),eE}checkMetadataAndOptions(g,$){let ee,et;return g instanceof es.Metadata?(ee=g,et=$||{}):(et=g||{},ee=new es.Metadata),{metadata:ee,options:et}}makeServerStreamRequest(g,$,ee,er,en,es){var eg,ey;let ev=this.checkMetadataAndOptions(en,es),eS={path:g,requestStream:!1,responseStream:!0,requestSerialize:$,responseDeserialize:ee},eT={argument:er,metadata:ev.metadata,call:new et.ClientReadableStreamImpl(ee),channel:this[eu],methodDefinition:eS,callOptions:ev.options};this[ef]&&(eT=this[ef](eT));let eE=eT.call,ew={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(eg=eT.callOptions.interceptors)&&void 0!==eg?eg:[],callInterceptorProviders:null!==(ey=eT.callOptions.interceptor_providers)&&void 0!==ey?ey:[]},eC=eo.getInterceptingCall(ew,eT.methodDefinition,eT.callOptions,eT.channel);eE.call=eC,eT.callOptions.credentials&&eC.setCredentials(eT.callOptions.credentials);let e_=!1,eI=Error();return eC.start(eT.metadata,{onReceiveMetadata(g){eE.emit("metadata",g)},onReceiveMessage(g){eE.push(g)},onReceiveStatus(g){if(!e_){if(e_=!0,eE.push(null),g.code!==ei.Status.OK){let $=em(eI);eE.emit("error",et.callErrorFromStatus(g,$))}eE.emit("status",g)}}}),eC.sendMessage(er),eC.halfClose(),eE}makeBidiStreamRequest(g,$,ee,er,en){var es,eg;let ey=this.checkMetadataAndOptions(er,en),ev={path:g,requestStream:!0,responseStream:!0,requestSerialize:$,responseDeserialize:ee},eS={metadata:ey.metadata,call:new et.ClientDuplexStreamImpl($,ee),channel:this[eu],methodDefinition:ev,callOptions:ey.options};this[ef]&&(eS=this[ef](eS));let eT=eS.call,eE={clientInterceptors:this[eh],clientInterceptorProviders:this[ep],callInterceptors:null!==(es=eS.callOptions.interceptors)&&void 0!==es?es:[],callInterceptorProviders:null!==(eg=eS.callOptions.interceptor_providers)&&void 0!==eg?eg:[]},ew=eo.getInterceptingCall(eE,eS.methodDefinition,eS.callOptions,eS.channel);eT.call=ew,eS.callOptions.credentials&&ew.setCredentials(eS.callOptions.credentials);let eC=!1,e_=Error();return ew.start(eS.metadata,{onReceiveMetadata(g){eT.emit("metadata",g)},onReceiveMessage(g){eT.push(g)},onReceiveStatus(g){if(!eC){if(eC=!0,eT.push(null),g.code!==ei.Status.OK){let $=em(e_);eT.emit("error",et.callErrorFromStatus(g,$))}eT.emit("status",g)}}}),eT}}$.Client=ey},55202:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.CompressionAlgorithms=void 0,function(g){g[g.identity=0]="identity",g[g.deflate=1]="deflate",g[g.gzip=2]="gzip"}(ee=$.CompressionAlgorithms||($.CompressionAlgorithms={}))},34535:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.CompressionFilterFactory=$.CompressionFilter=void 0;let et=ee(59796),er=ee(55202),en=ee(88905),ei=ee(47215),es=ee(14386),eo=g=>"number"==typeof g&&"string"==typeof er.CompressionAlgorithms[g];class eu{async writeMessage(g,$){let ee=g;$&&(ee=await this.compressMessage(ee));let et=Buffer.allocUnsafe(ee.length+5);return et.writeUInt8($?1:0,0),et.writeUInt32BE(ee.length,1),ee.copy(et,5),et}async readMessage(g){let $=1===g.readUInt8(0),ee=g.slice(5);return $&&(ee=await this.decompressMessage(ee)),ee}}class eh extends eu{async compressMessage(g){return g}async writeMessage(g,$){let ee=Buffer.allocUnsafe(g.length+5);return ee.writeUInt8(0,0),ee.writeUInt32BE(g.length,1),g.copy(ee,5),ee}decompressMessage(g){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class ep extends eu{compressMessage(g){return new Promise(($,ee)=>{et.deflate(g,(g,et)=>{g?ee(g):$(et)})})}decompressMessage(g){return new Promise(($,ee)=>{et.inflate(g,(g,et)=>{g?ee(g):$(et)})})}}class ef extends eu{compressMessage(g){return new Promise(($,ee)=>{et.gzip(g,(g,et)=>{g?ee(g):$(et)})})}decompressMessage(g){return new Promise(($,ee)=>{et.unzip(g,(g,et)=>{g?ee(g):$(et)})})}}class eg extends eu{constructor(g){super(),this.compressionName=g}compressMessage(g){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(g){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function em(g){switch(g){case"identity":return new eh;case"deflate":return new ep;case"gzip":return new ef;default:return new eg(g)}}class ey extends ei.BaseFilter{constructor(g,$){var ee;super(),this.sharedFilterConfig=$,this.sendCompression=new eh,this.receiveCompression=new eh,this.currentCompressionAlgorithm="identity";let et=g["grpc.default_compression_algorithm"];if(void 0!==et){if(eo(et)){let g=er.CompressionAlgorithms[et],en=null===(ee=$.serverSupportedEncodingHeader)||void 0===ee?void 0:ee.split(",");(!en||en.includes(g))&&(this.currentCompressionAlgorithm=g,this.sendCompression=em(this.currentCompressionAlgorithm))}else es.log(en.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${et}`)}}async sendMetadata(g){let $=await g;return $.set("grpc-accept-encoding","identity,deflate,gzip"),$.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?$.remove("grpc-encoding"):$.set("grpc-encoding",this.currentCompressionAlgorithm),$}receiveMetadata(g){let $=g.get("grpc-encoding");if($.length>0){let g=$[0];"string"==typeof g&&(this.receiveCompression=em(g))}g.remove("grpc-encoding");let ee=g.get("grpc-accept-encoding")[0];return ee&&(this.sharedFilterConfig.serverSupportedEncodingHeader=ee,ee.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new eh,this.currentCompressionAlgorithm="identity")),g.remove("grpc-accept-encoding"),g}async sendMessage(g){var $;let ee;let et=await g;return ee=!(this.sendCompression instanceof eh)&&((null!==($=et.flags)&&void 0!==$?$:0)&2)==0,{message:await this.sendCompression.writeMessage(et.message,ee),flags:et.flags}}async receiveMessage(g){return this.receiveCompression.readMessage(await g)}}$.CompressionFilter=ey;class ev{constructor(g,$){this.channel=g,this.options=$,this.sharedFilterConfig={}}createFilter(g){return new ey(this.options,this.sharedFilterConfig)}}$.CompressionFilterFactory=ev},75199:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.ConnectivityState=void 0,function(g){g[g.IDLE=0]="IDLE",g[g.CONNECTING=1]="CONNECTING",g[g.READY=2]="READY",g[g.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",g[g.SHUTDOWN=4]="SHUTDOWN"}(ee=$.ConnectivityState||($.ConnectivityState={}))},88905:(g,$)=>{"use strict";var ee,et,er;Object.defineProperty($,"__esModule",{value:!0}),$.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=$.DEFAULT_MAX_SEND_MESSAGE_LENGTH=$.Propagate=$.LogVerbosity=$.Status=void 0,function(g){g[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(ee=$.Status||($.Status={})),function(g){g[g.DEBUG=0]="DEBUG",g[g.INFO=1]="INFO",g[g.ERROR=2]="ERROR",g[g.NONE=3]="NONE"}(et=$.LogVerbosity||($.LogVerbosity={})),function(g){g[g.DEADLINE=1]="DEADLINE",g[g.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",g[g.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",g[g.CANCELLATION=8]="CANCELLATION",g[g.DEFAULTS=65535]="DEFAULTS"}(er=$.Propagate||($.Propagate={})),$.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,$.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},16491:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.DeadlineFilterFactory=$.DeadlineFilter=void 0;let et=ee(88905),er=ee(47215),en=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function ei(g){let $=Math.max(g-new Date().getTime(),0);for(let[g,ee]of en){let et=$/ee;if(et<1e8)return String(Math.ceil(et))+g}throw Error("Deadline is too far in the future")}class es extends er.BaseFilter{constructor(g,$){super(),this.channel=g,this.callStream=$,this.timer=null,this.deadline=1/0,this.retreiveDeadline(),this.runTimer()}retreiveDeadline(){let g=this.callStream.getDeadline();g instanceof Date?this.deadline=g.getTime():this.deadline=g}runTimer(){var g,$;this.timer&&clearTimeout(this.timer);let ee=new Date().getTime(),er=this.deadline-ee;er<=0?process.nextTick(()=>{this.callStream.cancelWithStatus(et.Status.DEADLINE_EXCEEDED,"Deadline exceeded")}):this.deadline!==1/0&&(this.timer=setTimeout(()=>{this.callStream.cancelWithStatus(et.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},er),null===($=(g=this.timer).unref)||void 0===$||$.call(g))}refresh(){this.retreiveDeadline(),this.runTimer()}async sendMetadata(g){if(this.deadline===1/0)return g;let $=await g,ee=ei(this.deadline);return $.set("grpc-timeout",ee),$}receiveTrailers(g){return this.timer&&clearTimeout(this.timer),g}}$.DeadlineFilter=es;class eo{constructor(g){this.channel=g}createFilter(g){return new es(this.channel,g)}}$.DeadlineFilterFactory=eo},95292:(g,$)=>{"use strict";function ee(g){return{seconds:g/1e3|0,nanos:g%1e3*1e6|0}}function et(g){return 1e3*g.seconds+g.nanos/1e6|0}function er(g){return"number"==typeof g.seconds&&"number"==typeof g.nanos}Object.defineProperty($,"__esModule",{value:!0}),$.isDuration=$.durationToMs=$.msToDuration=void 0,$.msToDuration=ee,$.durationToMs=et,$.isDuration=er},26614:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var et=ee(14386);Object.defineProperty($,"trace",{enumerable:!0,get:function(){return et.trace}}),Object.defineProperty($,"log",{enumerable:!0,get:function(){return et.log}});var er=ee(25361);Object.defineProperty($,"registerResolver",{enumerable:!0,get:function(){return er.registerResolver}});var en=ee(76228);Object.defineProperty($,"uriToString",{enumerable:!0,get:function(){return en.uriToString}});var ei=ee(95292);Object.defineProperty($,"durationToMs",{enumerable:!0,get:function(){return ei.durationToMs}});var es=ee(33339);Object.defineProperty($,"BackoffTimeout",{enumerable:!0,get:function(){return es.BackoffTimeout}});var eo=ee(82728);Object.defineProperty($,"createChildChannelControlHelper",{enumerable:!0,get:function(){return eo.createChildChannelControlHelper}}),Object.defineProperty($,"registerLoadBalancerType",{enumerable:!0,get:function(){return eo.registerLoadBalancerType}}),Object.defineProperty($,"getFirstUsableConfig",{enumerable:!0,get:function(){return eo.getFirstUsableConfig}}),Object.defineProperty($,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return eo.validateLoadBalancingConfig}});var eu=ee(50476);Object.defineProperty($,"subchannelAddressToString",{enumerable:!0,get:function(){return eu.subchannelAddressToString}});var eh=ee(50868);Object.defineProperty($,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return eh.ChildLoadBalancerHandler}});var ep=ee(73184);Object.defineProperty($,"UnavailablePicker",{enumerable:!0,get:function(){return ep.UnavailablePicker}}),Object.defineProperty($,"QueuePicker",{enumerable:!0,get:function(){return ep.QueuePicker}}),Object.defineProperty($,"PickResultType",{enumerable:!0,get:function(){return ep.PickResultType}});var ef=ee(47215);Object.defineProperty($,"BaseFilter",{enumerable:!0,get:function(){return ef.BaseFilter}});var eg=ee(26846);Object.defineProperty($,"FilterStackFactory",{enumerable:!0,get:function(){return eg.FilterStackFactory}});var em=ee(76959);Object.defineProperty($,"registerAdminService",{enumerable:!0,get:function(){return em.registerAdminService}});var ey=ee(55074);Object.defineProperty($,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return ey.BaseSubchannelWrapper}});var ev=ee(98583);Object.defineProperty($,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return ev.OutlierDetectionLoadBalancingConfig}})},26846:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.FilterStackFactory=$.FilterStack=void 0;class ee{constructor(g){this.filters=g}sendMetadata(g){let $=g;for(let g=0;g<this.filters.length;g++)$=this.filters[g].sendMetadata($);return $}receiveMetadata(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveMetadata($);return $}sendMessage(g){let $=g;for(let g=0;g<this.filters.length;g++)$=this.filters[g].sendMessage($);return $}receiveMessage(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveMessage($);return $}receiveTrailers(g){let $=g;for(let g=this.filters.length-1;g>=0;g--)$=this.filters[g].receiveTrailers($);return $}refresh(){for(let g of this.filters)g.refresh()}push(g){this.filters.unshift(...g)}getFilters(){return this.filters}}$.FilterStack=ee;class et{constructor(g){this.factories=g}push(g){this.factories.unshift(...g)}createFilter(g){return new ee(this.factories.map($=>$.createFilter(g)))}}$.FilterStackFactory=et},47215:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BaseFilter=void 0;class ee{async sendMetadata(g){return g}receiveMetadata(g){return g}async sendMessage(g){return g}async receiveMessage(g){return g}receiveTrailers(g){return g}refresh(){}}$.BaseFilter=ee},29347:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getProxiedConnection=$.mapProxyName=void 0;let et=ee(14386),er=ee(88905),en=ee(25361),ei=ee(13685),es=ee(24404),eo=ee(14386),eu=ee(50476),eh=ee(76228),ep=ee(57310),ef="proxy";function eg(g){eo.trace(er.LogVerbosity.DEBUG,ef,g)}function em(){let g,$="",ee="";if(process.env.grpc_proxy)ee="grpc_proxy",$=process.env.grpc_proxy;else if(process.env.https_proxy)ee="https_proxy",$=process.env.https_proxy;else{if(!process.env.http_proxy)return{};ee="http_proxy",$=process.env.http_proxy}try{g=new ep.URL($)}catch(g){return et.log(er.LogVerbosity.ERROR,`cannot parse value of "${ee}" env var`),{}}if("http:"!==g.protocol)return et.log(er.LogVerbosity.ERROR,`"${g.protocol}" scheme not supported in proxy URI`),{};let en=null;g.username&&(g.password?(et.log(er.LogVerbosity.INFO,"userinfo found in proxy URI"),en=`${g.username}:${g.password}`):en=g.username);let ei=g.hostname,es=g.port;""===es&&(es="80");let eo={address:`${ei}:${es}`};return en&&(eo.creds=en),eg("Proxy server "+eo.address+" set by environment variable "+ee),eo}function ey(){let g=process.env.no_grpc_proxy,$="no_grpc_proxy";return(g||(g=process.env.no_proxy,$="no_proxy"),g)?(eg("No proxy server list set by environment variable "+$),g.split(",")):[]}function ev(g,$){var ee;let et={target:g,extraOptions:{}};if((null!==(ee=$["grpc.enable_http_proxy"])&&void 0!==ee?ee:1)===0||"unix"===g.scheme)return et;let er=em();if(!er.address)return et;let en=eh.splitHostPort(g.path);if(!en)return et;let ei=en.host;for(let $ of ey())if($===ei)return eg("Not using proxy for target in no_proxy list: "+eh.uriToString(g)),et;let es={"grpc.http_connect_target":eh.uriToString(g)};return er.creds&&(es["grpc.http_connect_creds"]=er.creds),{target:{scheme:"dns",path:er.address},extraOptions:es}}function eS(g,$,ee){if(!("grpc.http_connect_target"in $))return Promise.resolve({});let eo=$["grpc.http_connect_target"],ep=eh.parseUri(eo);if(null===ep)return Promise.resolve({});let ef={method:"CONNECT",path:ep.path},em={Host:ep.path};eu.isTcpSubchannelAddress(g)?(ef.host=g.host,ef.port=g.port):ef.socketPath=g.path,"grpc.http_connect_creds"in $&&(em["Proxy-Authorization"]="Basic "+Buffer.from($["grpc.http_connect_creds"]).toString("base64")),ef.headers=em;let ey=eu.subchannelAddressToString(g);return eg("Using proxy "+ey+" to connect to "+ef.path),new Promise((g,$)=>{let eo=ei.request(ef);eo.once("connect",(ei,eu,em)=>{var ev;if(eo.removeAllListeners(),eu.removeAllListeners(),200===ei.statusCode){if(eg("Successfully connected to "+ef.path+" through proxy "+ey),"secureContext"in ee){let et=en.getDefaultAuthority(ep),er=eh.splitHostPort(et),ei=null!==(ev=null==er?void 0:er.host)&&void 0!==ev?ev:et,eo=es.connect(Object.assign({host:ei,servername:ei,socket:eu},ee),()=>{eg("Successfully established a TLS connection to "+ef.path+" through proxy "+ey),g({socket:eo,realTarget:ep})});eo.on("error",g=>{eg("Failed to establish a TLS connection to "+ef.path+" through proxy "+ey+" with error "+g.message),$()})}else eg("Successfully established a plaintext connection to "+ef.path+" through proxy "+ey),g({socket:eu,realTarget:ep})}else et.log(er.LogVerbosity.ERROR,"Failed to connect to "+ef.path+" through proxy "+ey+" with status "+ei.statusCode),$()}),eo.once("error",g=>{eo.removeAllListeners(),et.log(er.LogVerbosity.ERROR,"Failed to connect to proxy "+ey+" with error "+g.message),$()}),eo.end()})}$.mapProxyName=ev,$.getProxiedConnection=eS},88388:(g,$,ee)=>{"use strict";ev={value:!0},ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=ev=$.Rz=ev=ev=ev=ev=ev=ev=$.SF=$.K9=void 0;let et=ee(21860);ev={enumerable:!0,get:function(){return et.CallCredentials}};let er=ee(45835);ev={enumerable:!0,get:function(){return er.ChannelImplementation}};let en=ee(55202);ev={enumerable:!0,get:function(){return en.CompressionAlgorithms}};let ei=ee(75199);ev={enumerable:!0,get:function(){return ei.ConnectivityState}};let es=ee(69473);ev={enumerable:!0,get:function(){return es.ChannelCredentials}};let eo=ee(10526);ev={enumerable:!0,get:function(){return eo.Client}};let eu=ee(88905);ev={enumerable:!0,get:function(){return eu.LogVerbosity}},ev={enumerable:!0,get:function(){return eu.Status}},ev={enumerable:!0,get:function(){return eu.Propagate}};let eh=ee(14386),ep=ee(42900);Object.defineProperty($,"Rz",{enumerable:!0,get:function(){return ep.loadPackageDefinition}}),ev={enumerable:!0,get:function(){return ep.makeClientConstructor}},ev={enumerable:!0,get:function(){return ep.makeClientConstructor}};let ef=ee(46598);Object.defineProperty($,"SF",{enumerable:!0,get:function(){return ef.Metadata}});let eg=ee(41798);ev={enumerable:!0,get:function(){return eg.Server}};let em=ee(14288);ev={enumerable:!0,get:function(){return em.ServerCredentials}};let ey=ee(71192);ev={enumerable:!0,get:function(){return ey.StatusBuilder}},$.K9={combineChannelCredentials:(g,...$)=>$.reduce((g,$)=>g.compose($),g),combineCallCredentials:(g,...$)=>$.reduce((g,$)=>g.compose($),g),createInsecure:es.ChannelCredentials.createInsecure,createSsl:es.ChannelCredentials.createSsl,createFromSecureContext:es.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:et.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:et.CallCredentials.createFromGoogleCredential,createEmpty:et.CallCredentials.createEmpty},ev=g=>g.close(),ev=(g,$,ee)=>g.waitForReady($,ee),ev=(g,$)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},ev=(g,$,ee)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},ev=g=>{eh.setLogger(g)},ev=g=>{eh.setLoggerVerbosity(g)},ev=g=>eo.Client.prototype.getChannel.call(g);var ev,eS=ee(53811);ev={enumerable:!0,get:function(){return eS.ListenerBuilder}},ev={enumerable:!0,get:function(){return eS.RequesterBuilder}},ev={enumerable:!0,get:function(){return eS.InterceptingCall}},ev={enumerable:!0,get:function(){return eS.InterceptorConfigurationError}};var eT=ee(14174);ev={enumerable:!0,get:function(){return eT.getChannelzServiceDefinition}},ev={enumerable:!0,get:function(){return eT.getChannelzHandlers}};var eE=ee(76959);ev={enumerable:!0,get:function(){return eE.addAdminServicesToServer}},ev=ee(26614);let ew=ee(89041),eC=ee(74871),e_=ee(38250),eI=ee(38766),eO=ee(83887),eA=ee(98583),eN=ee(14174),eR=ee(37645).i8;(()=>{eh.trace(eu.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+eR),ew.setup(),eC.setup(),e_.setup(),eI.setup(),eO.setup(),eA.setup(),eN.setup()})()},50868:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ChildLoadBalancerHandler=void 0;let et=ee(82728),er=ee(75199),en="child_load_balancer_helper";class ei{constructor(g){this.channelControlHelper=g,this.currentChild=null,this.pendingChild=null,this.ChildPolicyHelper=class{constructor(g){this.parent=g,this.child=null}createSubchannel(g,$){return this.parent.channelControlHelper.createSubchannel(g,$)}updateState(g,$){var ee;if(this.calledByPendingChild()){if(g===er.ConnectivityState.CONNECTING)return;null===(ee=this.parent.currentChild)||void 0===ee||ee.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(g,$)}requestReresolution(){var g;let $=null!==(g=this.parent.pendingChild)&&void 0!==g?g:this.parent.currentChild;this.child===$&&this.parent.channelControlHelper.requestReresolution()}setChild(g){this.child=g}addChannelzChild(g){this.parent.channelControlHelper.addChannelzChild(g)}removeChannelzChild(g){this.parent.channelControlHelper.removeChannelzChild(g)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(g,$,ee){let er;if(null===this.currentChild||this.currentChild.getTypeName()!==$.getLoadBalancerName()){let g=new this.ChildPolicyHelper(this),ee=et.createLoadBalancer($,g);g.setChild(ee),null===this.currentChild?(this.currentChild=ee,er=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=ee,er=this.pendingChild)}else er=null===this.pendingChild?this.currentChild:this.pendingChild;er.updateAddressList(g,$,ee)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return en}}$.ChildLoadBalancerHandler=ei},98583:(g,$,ee)=>{"use strict";var et;Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.OutlierDetectionLoadBalancer=$.OutlierDetectionLoadBalancingConfig=void 0;let er=ee(75199),en=ee(88905),ei=ee(95292),es=ee(26614),eo=ee(47215),eu=ee(82728),eh=ee(50868),ep=ee(73184),ef=ee(50476),eg=ee(55074),em=ee(14386),ey="outlier_detection";function ev(g){em.trace(en.LogVerbosity.DEBUG,ey,g)}let eS="outlier_detection",eT=(null!==(et=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==et?et:"true")==="true",eE={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},ew={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function eC(g,$,ee,et){if($ in g&&typeof g[$]!==ee){let er=et?`${et}.${$}`:$;throw Error(`outlier detection config ${er} parse error: expected ${ee}, got ${typeof g[$]}`)}}function e_(g,$,ee){let et=ee?`${ee}.${$}`:$;if($ in g){if(!ei.isDuration(g[$]))throw Error(`outlier detection config ${et} parse error: expected Duration, got ${typeof g[$]}`);if(!(g[$].seconds>=0&&g[$].seconds<=315576e6&&g[$].nanos>=0&&g[$].nanos<=999999999))throw Error(`outlier detection config ${et} parse error: values out of range for non-negative Duaration`)}}function eI(g,$,ee){let et=ee?`${ee}.${$}`:$;if(eC(g,$,"number",ee),$ in g&&!(g[$]>=0&&g[$]<=100))throw Error(`outlier detection config ${et} parse error: value out of range for percentage (0-100)`)}class eO{constructor(g,$,ee,et,er,en,ei){this.childPolicy=ei,this.intervalMs=null!=g?g:1e4,this.baseEjectionTimeMs=null!=$?$:3e4,this.maxEjectionTimeMs=null!=ee?ee:3e5,this.maxEjectionPercent=null!=et?et:10,this.successRateEjection=er?Object.assign(Object.assign({},eE),er):null,this.failurePercentageEjection=en?Object.assign(Object.assign({},ew),en):null}getLoadBalancerName(){return eS}toJsonObject(){return{interval:ei.msToDuration(this.intervalMs),base_ejection_time:ei.msToDuration(this.baseEjectionTimeMs),max_ejection_time:ei.msToDuration(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(g=>g.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(g){return new eO(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,g)}static createFromJson(g){var $;if(e_(g,"interval"),e_(g,"base_ejection_time"),e_(g,"max_ejection_time"),eI(g,"max_ejection_percent"),"success_rate_ejection"in g){if("object"!=typeof g.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");eC(g.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),eI(g.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),eC(g.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),eC(g.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in g){if("object"!=typeof g.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");eI(g.failure_percentage_ejection,"threshold","failure_percentage_ejection"),eI(g.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),eC(g.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),eC(g.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new eO(g.interval?ei.durationToMs(g.interval):null,g.base_ejection_time?ei.durationToMs(g.base_ejection_time):null,g.max_ejection_time?ei.durationToMs(g.max_ejection_time):null,null!==($=g.max_ejection_percent)&&void 0!==$?$:null,g.success_rate_ejection,g.failure_percentage_ejection,g.child_policy.map(eu.validateLoadBalancingConfig))}}$.OutlierDetectionLoadBalancingConfig=eO;class eA extends eg.BaseSubchannelWrapper{constructor(g,$){super(g),this.mapEntry=$,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=g.getConnectivityState(),g.addConnectivityStateListener((g,$,ee)=>{if(this.childSubchannelState=ee,!this.ejected)for(let g of this.stateListeners)g(this,$,ee)})}getConnectivityState(){return this.ejected?er.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(g){this.stateListeners.push(g)}removeConnectivityStateListener(g){let $=this.stateListeners.indexOf(g);$>-1&&this.stateListeners.splice($,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let g=this.mapEntry.subchannelWrappers.indexOf(this);g>=0&&this.mapEntry.subchannelWrappers.splice(g,1)}}eject(){for(let g of(this.ejected=!0,this.stateListeners))g(this,this.childSubchannelState,er.ConnectivityState.TRANSIENT_FAILURE)}uneject(){for(let g of(this.ejected=!1,this.stateListeners))g(this,er.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function eN(){return{success:0,failure:0}}class eR{constructor(){this.activeBucket=eN(),this.inactiveBucket=eN()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=eN()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class eD extends eo.BaseFilter{constructor(g){super(),this.callCounter=g}receiveTrailers(g){return g.code===en.Status.OK?this.callCounter.addSuccess():this.callCounter.addFailure(),g}}class ek{constructor(g){this.callCounter=g}createFilter(g){return new eD(this.callCounter)}}class ex{constructor(g,$){this.wrappedPicker=g,this.countCalls=$}pick(g){let $=this.wrappedPicker.pick(g);if($.pickResultType!==ep.PickResultType.COMPLETE)return $;{let g=$.subchannel,ee=g.getMapEntry();if(!ee)return Object.assign(Object.assign({},$),{subchannel:g.getWrappedSubchannel()});{let et=[...$.extraFilterFactories];return this.countCalls&&et.push(new ek(ee.counter)),Object.assign(Object.assign({},$),{subchannel:g.getWrappedSubchannel(),extraFilterFactories:et})}}}}class eP{constructor(g){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new eh.ChildLoadBalancerHandler(es.createChildChannelControlHelper(g,{createSubchannel:($,ee)=>{let et=g.createSubchannel($,ee),er=this.addressMap.get(ef.subchannelAddressToString($)),en=new eA(et,er);return(null==er?void 0:er.currentEjectionTimestamp)!==null&&en.eject(),null==er||er.subchannelWrappers.push(en),en},updateState:($,ee)=>{$===er.ConnectivityState.READY?g.updateState($,new ex(ee,this.isCountingEnabled())):g.updateState($,ee)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let g=0;for(let $ of this.addressMap.values())null!==$.currentEjectionTimestamp&&(g+=1);return 100*g/this.addressMap.size}runSuccessRateCheck(g){if(!this.latestConfig)return;let $=this.latestConfig.getSuccessRateEjectionConfig();if(!$)return;ev("Running success rate check");let ee=$.request_volume,et=0,er=[];for(let g of this.addressMap.values()){let $=g.counter.getLastSuccesses(),en=g.counter.getLastFailures();$+en>=ee&&(et+=1,er.push($/($+en)))}if(ev("Found "+et+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+er+"]"),et<$.minimum_hosts)return;let en=er.reduce((g,$)=>g+$)/er.length,ei=0;for(let g of er){let $=g-en;ei+=$*$}let es=Math.sqrt(ei/er.length),eo=en-$.stdev_factor/1e3*es;for(let[et,er]of(ev("stdev="+es+" ejectionThreshold="+eo),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let en=er.counter.getLastSuccesses(),ei=er.counter.getLastFailures();if(en+ei<ee)continue;let es=en/(en+ei);if(ev("Checking candidate "+et+" successRate="+es),es<eo){let ee=100*Math.random();ev("Candidate "+et+" randomNumber="+ee+" enforcement_percentage="+$.enforcement_percentage),ee<$.enforcement_percentage&&(ev("Ejecting candidate "+et),this.eject(er,g))}}}runFailurePercentageCheck(g){if(!this.latestConfig)return;let $=this.latestConfig.getFailurePercentageEjectionConfig();if(!$)return;ev("Running failure percentage check. threshold="+$.threshold+" request volume threshold="+$.request_volume);let ee=0;for(let g of this.addressMap.values())g.counter.getLastSuccesses()+g.counter.getLastFailures()>=$.request_volume&&(ee+=1);if(!(ee<$.minimum_hosts))for(let[ee,et]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let er=et.counter.getLastSuccesses(),en=et.counter.getLastFailures();if(ev("Candidate successes="+er+" failures="+en),!(er+en<$.request_volume)&&100*en/(en+er)>$.threshold){let er=100*Math.random();ev("Candidate "+ee+" randomNumber="+er+" enforcement_percentage="+$.enforcement_percentage),er<$.enforcement_percentage&&(ev("Ejecting candidate "+ee),this.eject(et,g))}}}eject(g,$){for(let $ of(g.currentEjectionTimestamp=new Date,g.ejectionTimeMultiplier+=1,g.subchannelWrappers))$.eject()}uneject(g){for(let $ of(g.currentEjectionTimestamp=null,g.subchannelWrappers))$.uneject()}switchAllBuckets(){for(let g of this.addressMap.values())g.counter.switchBuckets()}startTimer(g){this.ejectionTimer=setTimeout(()=>this.runChecks(),g)}runChecks(){let g=new Date;if(ev("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[$,ee]of(this.timerStartTime=g,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(g),this.runFailurePercentageCheck(g),this.addressMap.entries()))if(null===ee.currentEjectionTimestamp)ee.ejectionTimeMultiplier>0&&(ee.ejectionTimeMultiplier-=1);else{let g=this.latestConfig.getBaseEjectionTimeMs(),et=this.latestConfig.getMaxEjectionTimeMs(),er=new Date(ee.currentEjectionTimestamp.getTime());er.setMilliseconds(er.getMilliseconds()+Math.min(g*ee.ejectionTimeMultiplier,Math.max(g,et))),er<new Date&&(ev("Unejecting "+$),this.uneject(ee))}}updateAddressList(g,$,ee){if(!($ instanceof eO))return;let et=new Set;for(let $ of g)et.add(ef.subchannelAddressToString($));for(let g of et)this.addressMap.has(g)||(ev("Adding map entry for "+g),this.addressMap.set(g,{counter:new eR,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let g of this.addressMap.keys())et.has(g)||(ev("Removing map entry for "+g),this.addressMap.delete(g));let er=eu.getFirstUsableConfig($.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(g,er,ee),$.getSuccessRateEjectionConfig()||$.getFailurePercentageEjectionConfig()){if(this.timerStartTime){ev("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let g=$.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(g)}else ev("Starting new timer"),this.timerStartTime=new Date,this.startTimer($.getIntervalMs()),this.switchAllBuckets()}else for(let g of(ev("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(g),g.ejectionTimeMultiplier=0;this.latestConfig=$}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return eS}}function eM(){eT&&es.registerLoadBalancerType(eS,eP,eO)}$.OutlierDetectionLoadBalancer=eP,$.setup=eM},38766:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.PickFirstLoadBalancer=$.PickFirstLoadBalancingConfig=void 0;let et=ee(82728),er=ee(75199),en=ee(73184),ei=ee(50476),es=ee(14386),eo=ee(88905),eu="pick_first";function eh(g){es.trace(eo.LogVerbosity.DEBUG,eu,g)}let ep="pick_first",ef=250;class eg{getLoadBalancerName(){return ep}constructor(){}toJsonObject(){return{[ep]:{}}}static createFromJson(g){return new eg}}$.PickFirstLoadBalancingConfig=eg;class em{constructor(g){this.subchannel=g}pick(g){return{pickResultType:en.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,extraFilterFactories:[],onCallStarted:null}}}class ey{constructor(g){this.channelControlHelper=g,this.latestAddressList=[],this.subchannels=[],this.currentState=er.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.triedAllSubchannels=!1,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(g,$,ee)=>{if(this.subchannelStateCounts[$]-=1,this.subchannelStateCounts[ee]+=1,g===this.subchannels[this.currentSubchannelIndex]&&ee===er.ConnectivityState.TRANSIENT_FAILURE&&this.startNextSubchannelConnecting(),ee===er.ConnectivityState.READY){this.pickSubchannel(g);return}if(this.triedAllSubchannels&&this.subchannelStateCounts[er.ConnectivityState.IDLE]===this.subchannels.length){this.resetSubchannelList(!1),this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this));return}if(null===this.currentPick){if(this.triedAllSubchannels){let g;(g=this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?er.ConnectivityState.CONNECTING:this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?er.ConnectivityState.TRANSIENT_FAILURE:er.ConnectivityState.IDLE)!==this.currentState&&(g===er.ConnectivityState.TRANSIENT_FAILURE?this.updateState(g,new en.UnavailablePicker):this.updateState(g,new en.QueuePicker(this)))}else this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this))}},this.pickedSubchannelStateListener=(g,$,ee)=>{if(ee!==er.ConnectivityState.READY){if(this.currentPick=null,g.unref(),g.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(g.getChannelzRef()),this.subchannels.length>0){if(this.triedAllSubchannels){let g;(g=this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?er.ConnectivityState.CONNECTING:this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?er.ConnectivityState.TRANSIENT_FAILURE:er.ConnectivityState.IDLE)===er.ConnectivityState.TRANSIENT_FAILURE?this.updateState(g,new en.UnavailablePicker):this.updateState(g,new en.QueuePicker(this))}else this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this))}else this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this))}},this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(!this.triedAllSubchannels){for(let[g,$]of this.subchannels.entries())if(g>this.currentSubchannelIndex){let ee=$.getConnectivityState();if(ee===er.ConnectivityState.IDLE||ee===er.ConnectivityState.CONNECTING){this.startConnecting(g);return}}this.triedAllSubchannels=!0}}startConnecting(g){clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=g,this.subchannels[g].getConnectivityState()===er.ConnectivityState.IDLE&&(eh("Start connecting to subchannel with address "+this.subchannels[g].getAddress()),process.nextTick(()=>{this.subchannels[g].startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting()},ef)}pickSubchannel(g){eh("Pick subchannel with address "+g.getAddress()),null!==this.currentPick&&(this.currentPick.unref(),this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)),this.currentPick=g,this.updateState(er.ConnectivityState.READY,new em(g)),g.addConnectivityStateListener(this.pickedSubchannelStateListener),g.ref(),this.channelControlHelper.addChannelzChild(g.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout)}updateState(g,$){eh(er.ConnectivityState[this.currentState]+" -> "+er.ConnectivityState[g]),this.currentState=g,this.channelControlHelper.updateState(g,$)}resetSubchannelList(g=!0){for(let g of this.subchannels)g.removeConnectivityStateListener(this.subchannelStateListener),g.unref(),this.channelControlHelper.removeChannelzChild(g.getChannelzRef());this.currentSubchannelIndex=0,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[],g&&(this.triedAllSubchannels=!1)}connectToAddressList(){for(let g of(this.resetSubchannelList(),eh("Connect to address list "+this.latestAddressList.map(g=>ei.subchannelAddressToString(g))),this.subchannels=this.latestAddressList.map(g=>this.channelControlHelper.createSubchannel(g,{})),this.subchannels))g.ref(),this.channelControlHelper.addChannelzChild(g.getChannelzRef());for(let g of this.subchannels)if(g.addConnectivityStateListener(this.subchannelStateListener),this.subchannelStateCounts[g.getConnectivityState()]+=1,g.getConnectivityState()===er.ConnectivityState.READY){this.pickSubchannel(g),this.resetSubchannelList();return}for(let[g,$]of this.subchannels.entries()){let ee=$.getConnectivityState();if(ee===er.ConnectivityState.IDLE||ee===er.ConnectivityState.CONNECTING){this.startConnecting(g),null===this.currentPick&&this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this));return}}null===this.currentPick&&this.updateState(er.ConnectivityState.TRANSIENT_FAILURE,new en.UnavailablePicker)}updateAddressList(g,$){0!==this.subchannels.length&&this.latestAddressList.every(($,ee)=>g[ee]===$)||(this.latestAddressList=g,this.connectToAddressList())}exitIdle(){for(let g of((this.currentState===er.ConnectivityState.IDLE||this.triedAllSubchannels)&&this.channelControlHelper.requestReresolution(),this.subchannels))g.startConnecting();this.currentState===er.ConnectivityState.IDLE&&this.latestAddressList.length>0&&this.connectToAddressList()}resetBackoff(){}destroy(){if(this.resetSubchannelList(),null!==this.currentPick){let g=this.currentPick;g.unref(),g.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(g.getChannelzRef())}}getTypeName(){return ep}}function ev(){et.registerLoadBalancerType(ep,ey,eg),et.registerDefaultLoadBalancerType(ep)}$.PickFirstLoadBalancer=ey,$.setup=ev},83887:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=$.RoundRobinLoadBalancer=void 0;let et=ee(82728),er=ee(75199),en=ee(73184),ei=ee(50476),es=ee(14386),eo=ee(88905),eu="round_robin";function eh(g){es.trace(eo.LogVerbosity.DEBUG,eu,g)}let ep="round_robin";class ef{getLoadBalancerName(){return ep}constructor(){}toJsonObject(){return{[ep]:{}}}static createFromJson(g){return new ef}}class eg{constructor(g,$=0){this.subchannelList=g,this.nextIndex=$}pick(g){let $=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:en.PickResultType.COMPLETE,subchannel:$,status:null,extraFilterFactories:[],onCallStarted:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class em{constructor(g){this.channelControlHelper=g,this.subchannels=[],this.currentState=er.ConnectivityState.IDLE,this.currentReadyPicker=null,this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(g,$,ee)=>{this.subchannelStateCounts[$]-=1,this.subchannelStateCounts[ee]+=1,this.calculateAndUpdateState(),(ee===er.ConnectivityState.TRANSIENT_FAILURE||ee===er.ConnectivityState.IDLE)&&(this.channelControlHelper.requestReresolution(),g.startConnecting())}}calculateAndUpdateState(){if(this.subchannelStateCounts[er.ConnectivityState.READY]>0){let g=this.subchannels.filter(g=>g.getConnectivityState()===er.ConnectivityState.READY),$=0;null!==this.currentReadyPicker&&($=g.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&($=0),this.updateState(er.ConnectivityState.READY,new eg(g,$))}else this.subchannelStateCounts[er.ConnectivityState.CONNECTING]>0?this.updateState(er.ConnectivityState.CONNECTING,new en.QueuePicker(this)):this.subchannelStateCounts[er.ConnectivityState.TRANSIENT_FAILURE]>0?this.updateState(er.ConnectivityState.TRANSIENT_FAILURE,new en.UnavailablePicker):this.updateState(er.ConnectivityState.IDLE,new en.QueuePicker(this))}updateState(g,$){eh(er.ConnectivityState[this.currentState]+" -> "+er.ConnectivityState[g]),g===er.ConnectivityState.READY?this.currentReadyPicker=$:this.currentReadyPicker=null,this.currentState=g,this.channelControlHelper.updateState(g,$)}resetSubchannelList(){for(let g of this.subchannels)g.removeConnectivityStateListener(this.subchannelStateListener),g.unref(),this.channelControlHelper.removeChannelzChild(g.getChannelzRef());this.subchannelStateCounts={[er.ConnectivityState.CONNECTING]:0,[er.ConnectivityState.IDLE]:0,[er.ConnectivityState.READY]:0,[er.ConnectivityState.SHUTDOWN]:0,[er.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[]}updateAddressList(g,$){for(let $ of(this.resetSubchannelList(),eh("Connect to address list "+g.map(g=>ei.subchannelAddressToString(g))),this.subchannels=g.map(g=>this.channelControlHelper.createSubchannel(g,{})),this.subchannels)){$.ref(),$.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild($.getChannelzRef());let g=$.getConnectivityState();this.subchannelStateCounts[g]+=1,(g===er.ConnectivityState.IDLE||g===er.ConnectivityState.TRANSIENT_FAILURE)&&$.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let g of this.subchannels)g.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return ep}}function ey(){et.registerLoadBalancerType(ep,em,ef)}$.RoundRobinLoadBalancer=em,$.setup=ey},82728:(g,$)=>{"use strict";function ee(g,$){var ee,et,er,en,ei,es,eo,eu,eh,ep;return{createSubchannel:null!==(et=null===(ee=$.createSubchannel)||void 0===ee?void 0:ee.bind($))&&void 0!==et?et:g.createSubchannel.bind(g),updateState:null!==(en=null===(er=$.updateState)||void 0===er?void 0:er.bind($))&&void 0!==en?en:g.updateState.bind(g),requestReresolution:null!==(es=null===(ei=$.requestReresolution)||void 0===ei?void 0:ei.bind($))&&void 0!==es?es:g.requestReresolution.bind(g),addChannelzChild:null!==(eu=null===(eo=$.addChannelzChild)||void 0===eo?void 0:eo.bind($))&&void 0!==eu?eu:g.addChannelzChild.bind(g),removeChannelzChild:null!==(ep=null===(eh=$.removeChannelzChild)||void 0===eh?void 0:eh.bind($))&&void 0!==ep?ep:g.removeChannelzChild.bind(g)}}Object.defineProperty($,"__esModule",{value:!0}),$.validateLoadBalancingConfig=$.getFirstUsableConfig=$.isLoadBalancerNameRegistered=$.createLoadBalancer=$.registerDefaultLoadBalancerType=$.registerLoadBalancerType=$.createChildChannelControlHelper=void 0,$.createChildChannelControlHelper=ee;let et={},er=null;function en(g,$,ee){et[g]={LoadBalancer:$,LoadBalancingConfig:ee}}function ei(g){er=g}function es(g,$){let ee=g.getLoadBalancerName();return ee in et?new et[ee].LoadBalancer($):null}function eo(g){return g in et}function eu(g,$=!1){for(let $ of g)if($.getLoadBalancerName() in et)return $;return $&&er?new et[er].LoadBalancingConfig:null}function eh(g){if(!(null!==g&&"object"==typeof g))throw Error("Load balancing config must be an object");let $=Object.keys(g);if(1!==$.length)throw Error("Provided load balancing config has multiple conflicting entries");let ee=$[0];if(ee in et)return et[ee].LoadBalancingConfig.createFromJson(g[ee]);throw Error(`Unrecognized load balancing config name ${ee}`)}$.registerLoadBalancerType=en,$.registerDefaultLoadBalancerType=ei,$.createLoadBalancer=es,$.isLoadBalancerNameRegistered=eo,$.getFirstUsableConfig=eu,$.validateLoadBalancingConfig=eh},14386:(g,$,ee)=>{"use strict";var et,er,en,ei;Object.defineProperty($,"__esModule",{value:!0}),$.isTracerEnabled=$.trace=$.log=$.setLoggerVerbosity=$.setLogger=$.getLogger=void 0;let es=ee(88905),eo={error:(g,...$)=>{console.error("E "+g,...$)},info:(g,...$)=>{console.error("I "+g,...$)},debug:(g,...$)=>{console.error("D "+g,...$)}},eu=es.LogVerbosity.ERROR;switch((null!==(er=null!==(et=process.env.GRPC_NODE_VERBOSITY)&&void 0!==et?et:process.env.GRPC_VERBOSITY)&&void 0!==er?er:"").toUpperCase()){case"DEBUG":eu=es.LogVerbosity.DEBUG;break;case"INFO":eu=es.LogVerbosity.INFO;break;case"ERROR":eu=es.LogVerbosity.ERROR;break;case"NONE":eu=es.LogVerbosity.NONE}$.getLogger=()=>eo,$.setLogger=g=>{eo=g},$.setLoggerVerbosity=g=>{eu=g},$.log=(g,...$)=>{let ee;if(g>=eu){switch(g){case es.LogVerbosity.DEBUG:ee=eo.debug;break;case es.LogVerbosity.INFO:ee=eo.info;break;case es.LogVerbosity.ERROR:ee=eo.error}ee||(ee=eo.error),ee&&ee.bind(eo)(...$)}};let eh=null!==(ei=null!==(en=process.env.GRPC_NODE_TRACE)&&void 0!==en?en:process.env.GRPC_TRACE)&&void 0!==ei?ei:"",ep=new Set,ef=new Set;for(let g of eh.split(","))g.startsWith("-")?ef.add(g.substring(1)):ep.add(g);let eg=ep.has("all");function em(g,ee,et){ey(ee)&&$.log(g,new Date().toISOString()+" | "+ee+" | "+et)}function ey(g){return!ef.has(g)&&(eg||ep.has(g))}$.trace=em,$.isTracerEnabled=ey},42900:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.loadPackageDefinition=$.makeClientConstructor=void 0;let et=ee(10526),er={unary:et.Client.prototype.makeUnaryRequest,server_stream:et.Client.prototype.makeServerStreamRequest,client_stream:et.Client.prototype.makeClientStreamRequest,bidi:et.Client.prototype.makeBidiStreamRequest};function en(g){return["__proto__","prototype","constructor"].includes(g)}function ei(g,$,ee){ee||(ee={});class ei extends et.Client{}return Object.keys(g).forEach($=>{let ee;if(en($))return;let et=g[$];if("string"==typeof $&&"$"===$.charAt(0))throw Error("Method names cannot start with $");ee=et.requestStream?et.responseStream?"bidi":"client_stream":et.responseStream?"server_stream":"unary";let eo=et.requestSerialize,eu=et.responseDeserialize,eh=es(er[ee],et.path,eo,eu);ei.prototype[$]=eh,Object.assign(ei.prototype[$],et),et.originalName&&!en(et.originalName)&&(ei.prototype[et.originalName]=ei.prototype[$])}),ei.service=g,ei.serviceName=$,ei}function es(g,$,ee,et){return function(...er){return g.call(this,$,ee,et,...er)}}function eo(g){return"format"in g}function eu(g){let $={};for(let ee in g)if(Object.prototype.hasOwnProperty.call(g,ee)){let et=g[ee],er=ee.split(".");if(er.some(g=>en(g)))continue;let es=er[er.length-1],eu=$;for(let g of er.slice(0,-1))eu[g]||(eu[g]={}),eu=eu[g];eo(et)?eu[es]=et:eu[es]=ei(et,es,{})}return $}$.makeClientConstructor=ei,$.loadPackageDefinition=eu},18879:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.MaxMessageSizeFilterFactory=$.MaxMessageSizeFilter=void 0;let et=ee(47215),er=ee(88905);class en extends et.BaseFilter{constructor(g,$){super(),this.options=g,this.callStream=$,this.maxSendMessageSize=er.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=er.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in g&&(this.maxSendMessageSize=g["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in g&&(this.maxReceiveMessageSize=g["grpc.max_receive_message_length"])}async sendMessage(g){if(-1===this.maxSendMessageSize)return g;{let $=await g;return $.message.length>this.maxSendMessageSize?(this.callStream.cancelWithStatus(er.Status.RESOURCE_EXHAUSTED,`Sent message larger than max (${$.message.length} vs. ${this.maxSendMessageSize})`),Promise.reject("Message too large")):$}}async receiveMessage(g){if(-1===this.maxReceiveMessageSize)return g;{let $=await g;return $.length>this.maxReceiveMessageSize?(this.callStream.cancelWithStatus(er.Status.RESOURCE_EXHAUSTED,`Received message larger than max (${$.length} vs. ${this.maxReceiveMessageSize})`),Promise.reject("Message too large")):$}}}$.MaxMessageSizeFilter=en;class ei{constructor(g){this.options=g}createFilter(g){return new en(this.options,g)}}$.MaxMessageSizeFilterFactory=ei},46598:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Metadata=void 0;let et=ee(14386),er=ee(88905),en=/^[0-9a-z_.-]+$/,ei=/^[ -~]*$/;function es(g){return en.test(g)}function eo(g){return ei.test(g)}function eu(g){return g.endsWith("-bin")}function eh(g){return!g.startsWith("grpc-")}function ep(g){return g.toLowerCase()}function ef(g,$){if(!es(g))throw Error('Metadata key "'+g+'" contains illegal characters');if(null!=$){if(eu(g)){if(!Buffer.isBuffer($))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer($))throw Error("keys that don't end with '-bin' must have String values");if(!eo($))throw Error('Metadata string value "'+$+'" contains illegal characters')}}}class eg{constructor(g={}){this.internalRepr=new Map,this.options=g}set(g,$){ef(g=ep(g),$),this.internalRepr.set(g,[$])}add(g,$){ef(g=ep(g),$);let ee=this.internalRepr.get(g);void 0===ee?this.internalRepr.set(g,[$]):ee.push($)}remove(g){g=ep(g),this.internalRepr.delete(g)}get(g){return g=ep(g),this.internalRepr.get(g)||[]}getMap(){let g={};for(let[$,ee]of this.internalRepr)if(ee.length>0){let et=ee[0];g[$]=Buffer.isBuffer(et)?Buffer.from(et):et}return g}clone(){let g=new eg(this.options),$=g.internalRepr;for(let[g,ee]of this.internalRepr){let et=ee.map(g=>Buffer.isBuffer(g)?Buffer.from(g):g);$.set(g,et)}return g}merge(g){for(let[$,ee]of g.internalRepr){let g=(this.internalRepr.get($)||[]).concat(ee);this.internalRepr.set($,g)}}setOptions(g){this.options=g}getOptions(){return this.options}toHttp2Headers(){let g={};for(let[$,ee]of this.internalRepr)g[$]=ee.map(em);return g}_getCoreRepresentation(){return this.internalRepr}toJSON(){let g={};for(let[$,ee]of this.internalRepr)g[$]=ee;return g}static fromHttp2Headers(g){let $=new eg;for(let ee of Object.keys(g)){if(":"===ee.charAt(0))continue;let en=g[ee];try{eu(ee)?Array.isArray(en)?en.forEach(g=>{$.add(ee,Buffer.from(g,"base64"))}):void 0!==en&&(eh(ee)?en.split(",").forEach(g=>{$.add(ee,Buffer.from(g.trim(),"base64"))}):$.add(ee,Buffer.from(en,"base64"))):Array.isArray(en)?en.forEach(g=>{$.add(ee,g)}):void 0!==en&&$.add(ee,en)}catch($){let g=`Failed to add metadata entry ${ee}: ${en}. ${$.message}. For more information see https://github.com/grpc/grpc-node/issues/1173`;et.log(er.LogVerbosity.ERROR,g)}}return $}}$.Metadata=eg;let em=g=>Buffer.isBuffer(g)?g.toString("base64"):g},73184:(g,$,ee)=>{"use strict";var et;Object.defineProperty($,"__esModule",{value:!0}),$.QueuePicker=$.UnavailablePicker=$.PickResultType=void 0;let er=ee(46598),en=ee(88905);!function(g){g[g.COMPLETE=0]="COMPLETE",g[g.QUEUE=1]="QUEUE",g[g.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",g[g.DROP=3]="DROP"}(et=$.PickResultType||($.PickResultType={}));class ei{constructor(g){void 0!==g?this.status=g:this.status={code:en.Status.UNAVAILABLE,details:"No connection established",metadata:new er.Metadata}}pick(g){return{pickResultType:et.TRANSIENT_FAILURE,subchannel:null,status:this.status,extraFilterFactories:[],onCallStarted:null}}}$.UnavailablePicker=ei;class es{constructor(g){this.loadBalancer=g,this.calledExitIdle=!1}pick(g){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:et.QUEUE,subchannel:null,status:null,extraFilterFactories:[],onCallStarted:null}}}$.QueuePicker=es},89041:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(25361),er=ee(9523),en=ee(73837),ei=ee(58668),es=ee(88905),eo=ee(46598),eu=ee(14386),eh=ee(88905),ep=ee(76228),ef=ee(41808),eg=ee(33339),em="dns_resolver";function ey(g){eu.trace(eh.LogVerbosity.DEBUG,em,g)}let ev=443,eS=3e4,eT=en.promisify(er.resolveTxt),eE=en.promisify(er.lookup);function ew(...g){let $=[];for(let ee=0;ee<Math.max.apply(null,g.map(g=>g.length));ee++)for(let et of g)ee<et.length&&$.push(et[ee]);return $}class eC{constructor(g,$,ee){var et,er,en;this.target=g,this.listener=$,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,ey("Resolver constructed for target "+ep.uriToString(g));let ei=ep.splitHostPort(g.path);null===ei?(this.ipResult=null,this.dnsHostname=null,this.port=null):ef.isIPv4(ei.host)||ef.isIPv6(ei.host)?(this.ipResult=[{host:ei.host,port:null!==(et=ei.port)&&void 0!==et?et:ev}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=ei.host,this.port=null!==(er=ei.port)&&void 0!==er?er:ev),this.percentage=100*Math.random(),this.defaultResolutionError={code:es.Status.UNAVAILABLE,details:`Name resolution failed for target ${ep.uriToString(this.target)}`,metadata:new eo.Metadata};let eu={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoff=new eg.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},eu),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(en=ee["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==en?en:eS,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){ey("Returning IP address for target "+ep.uriToString(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.backoff.stop(),this.backoff.reset();return}if(null===this.dnsHostname)ey("Failed to parse DNS address "+ep.uriToString(this.target)),setImmediate(()=>{this.listener.onError({code:es.Status.UNAVAILABLE,details:`Failed to parse DNS address ${ep.uriToString(this.target)}`,metadata:new eo.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;ey("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let g=this.dnsHostname;this.pendingLookupPromise=eE(g,{all:!0}),this.pendingLookupPromise.then(g=>{this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let $=g.filter(g=>4===g.family),ee=g.filter(g=>6===g.family);this.latestLookupResult=ew(ee,$).map(g=>({host:g.address,port:+this.port}));let et="["+this.latestLookupResult.map(g=>g.host+":"+g.port).join(",")+"]";if(ey("Resolved addresses for target "+ep.uriToString(this.target)+": "+et),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},g=>{ey("Resolution error for target "+ep.uriToString(this.target)+": "+g.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError)}),null===this.pendingTxtPromise&&(this.pendingTxtPromise=eT(g),this.pendingTxtPromise.then(g=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=ei.extractAndSelectServiceConfig(g,this.percentage)}catch(g){this.latestServiceConfigError={code:es.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new eo.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},g=>{}))}}startNextResolutionTimer(){var g,$;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===($=(g=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===$?void 0:$.call(g),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.startResolution(),this.backoff.runOnce(),this.startNextResolutionTimer())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?this.continueResolving=!0:this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.stop(),this.stopNextResolutionTimer()}static getDefaultAuthority(g){return g.path}}function e_(){et.registerResolver("dns",eC),et.registerDefaultScheme("dns")}$.setup=e_},38250:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(41808),er=ee(88905),en=ee(46598),ei=ee(25361),es=ee(76228),eo=ee(14386),eu="ip_resolver";function eh(g){eo.trace(er.LogVerbosity.DEBUG,eu,g)}let ep="ipv4",ef="ipv6",eg=443;class em{constructor(g,$,ee){var ei;this.target=g,this.listener=$,this.addresses=[],this.error=null,eh("Resolver constructed for target "+es.uriToString(g));let eo=[];if(!(g.scheme===ep||g.scheme===ef)){this.error={code:er.Status.UNAVAILABLE,details:`Unrecognized scheme ${g.scheme} in IP resolver`,metadata:new en.Metadata};return}for(let $ of g.path.split(",")){let ee=es.splitHostPort($);if(null===ee||g.scheme===ep&&!et.isIPv4(ee.host)||g.scheme===ef&&!et.isIPv6(ee.host)){this.error={code:er.Status.UNAVAILABLE,details:`Failed to parse ${g.scheme} address ${$}`,metadata:new en.Metadata};return}eo.push({host:ee.host,port:null!==(ei=ee.port)&&void 0!==ei?ei:eg})}this.addresses=eo,eh("Parsed "+g.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})})}destroy(){}static getDefaultAuthority(g){return g.path.split(",")[0]}}function ey(){ei.registerResolver(ep,em),ei.registerResolver(ef,em)}$.setup=ey},74871:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.setup=void 0;let et=ee(25361);class er{constructor(g,$,ee){let et;this.listener=$,this.addresses=[],et=""===g.authority?"/"+g.path:g.path,this.addresses=[{path:et}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(g){return"localhost"}}function en(){et.registerResolver("unix",er)}$.setup=en},25361:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.mapUriDefaultScheme=$.getDefaultAuthority=$.createResolver=$.registerDefaultScheme=$.registerResolver=void 0;let et=ee(76228),er={},en=null;function ei(g,$){er[g]=$}function es(g){en=g}function eo(g,$,ee){if(void 0!==g.scheme&&g.scheme in er)return new er[g.scheme](g,$,ee);throw Error(`No resolver could be created for target ${et.uriToString(g)}`)}function eu(g){if(void 0!==g.scheme&&g.scheme in er)return er[g.scheme].getDefaultAuthority(g);throw Error(`Invalid target ${et.uriToString(g)}`)}function eh(g){return void 0!==g.scheme&&g.scheme in er?g:null!==en?{scheme:en,authority:void 0,path:et.uriToString(g)}:null}$.registerResolver=ei,$.registerDefaultScheme=es,$.createResolver=eo,$.getDefaultAuthority=eu,$.mapUriDefaultScheme=eh},17039:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ResolvingLoadBalancer=void 0;let et=ee(82728),er=ee(58668),en=ee(75199),ei=ee(25361),es=ee(73184),eo=ee(33339),eu=ee(88905),eh=ee(46598),ep=ee(14386),ef=ee(88905),eg=ee(76228),em=ee(50868),ey="resolving_load_balancer";function ev(g){ep.trace(ef.LogVerbosity.DEBUG,ey,g)}function eS(g){return function($,ee){var et,er;let en=$.split("/").filter(g=>g.length>0),ei=null!==(et=en[0])&&void 0!==et?et:"",es=null!==(er=en[1])&&void 0!==er?er:"";if(g&&g.methodConfig){for(let $ of g.methodConfig)for(let g of $.name)if(g.service===ei&&(void 0===g.method||g.method===es))return{methodConfig:$,pickInformation:{},status:eu.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:eu.Status.OK,dynamicFilterFactories:[]}}}class eT{constructor(g,$,ee,ep,ef){this.target=g,this.channelControlHelper=$,this.channelOptions=ee,this.onSuccessfulResolution=ep,this.onFailedResolution=ef,this.latestChildState=en.ConnectivityState.IDLE,this.latestChildPicker=new es.QueuePicker(this),this.currentState=en.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,ee["grpc.service_config"]?this.defaultServiceConfig=er.validateServiceConfig(JSON.parse(ee["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(en.ConnectivityState.IDLE,new es.QueuePicker(this)),this.childLoadBalancer=new em.ChildLoadBalancerHandler({createSubchannel:$.createSubchannel.bind($),requestReresolution:()=>{this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()},updateState:(g,$)=>{this.latestChildState=g,this.latestChildPicker=$,this.updateState(g,$)},addChannelzChild:$.addChannelzChild.bind($),removeChannelzChild:$.removeChannelzChild.bind($)}),this.innerResolver=ei.createResolver(g,{onSuccessfulResolution:(g,$,ee,er,en)=>{var ei;let es=null;null===$?null===ee?(this.previousServiceConfig=null,es=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(ee):es=this.previousServiceConfig:(es=$,this.previousServiceConfig=$);let eo=null!==(ei=null==es?void 0:es.loadBalancingConfig)&&void 0!==ei?ei:[],ep=et.getFirstUsableConfig(eo,!0);if(null===ep){this.handleResolutionFailure({code:eu.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new eh.Metadata});return}this.childLoadBalancer.updateAddressList(g,ep,en);let ef=null!=es?es:this.defaultServiceConfig;this.onSuccessfulResolution(null!=er?er:eS(ef))},onError:g=>{this.handleResolutionFailure(g)}},ee);let eg={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new eo.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},eg),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===en.ConnectivityState.IDLE&&this.updateState(en.ConnectivityState.CONNECTING,new es.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(g,$){ev(eg.uriToString(this.target)+" "+en.ConnectivityState[this.currentState]+" -> "+en.ConnectivityState[g]),g===en.ConnectivityState.IDLE&&($=new es.QueuePicker(this)),this.currentState=g,this.channelControlHelper.updateState(g,$)}handleResolutionFailure(g){this.latestChildState===en.ConnectivityState.IDLE&&(this.updateState(en.ConnectivityState.TRANSIENT_FAILURE,new es.UnavailablePicker(g)),this.onFailedResolution(g))}exitIdle(){(this.currentState===en.ConnectivityState.IDLE||this.currentState===en.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(g,$){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.updateState(en.ConnectivityState.SHUTDOWN,new es.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}$.ResolvingLoadBalancer=eT},24285:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Http2ServerCallStream=$.ServerDuplexStreamImpl=$.ServerWritableStreamImpl=$.ServerReadableStreamImpl=$.ServerUnaryCallImpl=void 0;let et=ee(82361),er=ee(85158),en=ee(12781),ei=ee(59796),es=ee(73837),eo=ee(88905),eu=ee(46598),eh=ee(69196),ep=ee(14386),ef="server_call",eg=es.promisify(ei.unzip),em=es.promisify(ei.inflate);function ey(g){ep.trace(eo.LogVerbosity.DEBUG,ef,g)}let ev="grpc-message",eS="grpc-status",eT="grpc-timeout",eE=/(\d{1,8})\s*([HMSmun])/,ew={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},eC={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity",[er.constants.HTTP2_HEADER_STATUS]:er.constants.HTTP_STATUS_OK,[er.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},e_={waitForTrailers:!0};class eI extends et.EventEmitter{constructor(g,$,ee){super(),this.call=g,this.metadata=$,this.request=ee,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}$.ServerUnaryCallImpl=eI;class eO extends en.Readable{constructor(g,$,ee,et){super({objectMode:!0}),this.call=g,this.metadata=$,this.deserialize=ee,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,et)}_read(g){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}$.ServerReadableStreamImpl=eO;class eA extends en.Writable{constructor(g,$,ee,et){super({objectMode:!0}),this.call=g,this.metadata=$,this.serialize=ee,this.request=et,this.cancelled=!1,this.trailingMetadata=new eu.Metadata,this.call.setupSurfaceCall(this),this.on("error",g=>{this.call.sendError(g),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(g,$,ee){try{let $=this.call.serializeMessage(g);if(!this.call.write($)){this.call.once("drain",ee);return}}catch(g){g.code=eo.Status.INTERNAL,this.emit("error",g)}ee()}_final(g){this.call.sendStatus({code:eo.Status.OK,details:"OK",metadata:this.trailingMetadata}),g(null)}end(g){return g&&(this.trailingMetadata=g),super.end()}}$.ServerWritableStreamImpl=eA;class eN extends en.Duplex{constructor(g,$,ee,et,er){super({objectMode:!0}),this.call=g,this.metadata=$,this.serialize=ee,this.deserialize=et,this.cancelled=!1,this.trailingMetadata=new eu.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,er),this.on("error",g=>{this.call.sendError(g),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(g){this.call.sendMetadata(g)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(g){return g&&(this.trailingMetadata=g),super.end()}}$.ServerDuplexStreamImpl=eN,eN.prototype._read=eO.prototype._read,eN.prototype._write=eA.prototype._write,eN.prototype._final=eA.prototype._final;class eR extends et.EventEmitter{constructor(g,$,ee){super(),this.stream=g,this.handler=$,this.options=ee,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=eo.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=eo.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",g=>{}),this.stream.once("close",()=>{var g;ey("Request to method "+(null===(g=this.handler)||void 0===g?void 0:g.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:eo.Status.CANCELLED,details:"Cancelled by client",metadata:null}))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in ee&&(this.maxSendMessageSize=ee["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in ee&&(this.maxReceiveMessageSize=ee["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(g,$){return"deflate"===$?em(g.subarray(5)):"gzip"===$?eg(g.subarray(5)):"identity"===$?g.subarray(5):Promise.reject({code:eo.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${$}"`})}sendMetadata(g){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let $=g?g.toHttp2Headers():null,ee=Object.assign(Object.assign({},eC),$);this.stream.respond(ee,e_)}receiveMetadata(g){let $=eu.Metadata.fromHttp2Headers(g);ep.isTracerEnabled(ef)&&ey("Request to "+this.handler.path+" received headers "+JSON.stringify($.toJSON()));let ee=$.get(eT);if(ee.length>0){let g=ee[0].toString().match(eE);if(null===g){let g=Error("Invalid deadline");return g.code=eo.Status.OUT_OF_RANGE,this.sendError(g),$}let et=+g[1]*ew[g[2]]|0,er=new Date;this.deadline=er.setMilliseconds(er.getMilliseconds()+et),this.deadlineTimer=setTimeout(eD,et,this),$.remove(eT)}return $.remove(er.constants.HTTP2_HEADER_ACCEPT_ENCODING),$.remove(er.constants.HTTP2_HEADER_TE),$.remove(er.constants.HTTP2_HEADER_CONTENT_TYPE),$.remove("grpc-accept-encoding"),$}receiveUnaryMessage(g,$){let{stream:ee}=this,et=0,er=this,en=[],ei=this.maxReceiveMessageSize;function es(g){if(et+=g.byteLength,-1!==ei&&et>ei){ee.removeListener("data",es),ee.removeListener("end",eu),ee.removeListener("error",eu),$({code:eo.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${et} vs. ${ei})`});return}en.push(g)}function eu(ei){if(ee.removeListener("data",es),ee.removeListener("end",eu),ee.removeListener("error",eu),void 0!==ei){$({code:eo.Status.INTERNAL,details:ei.message});return}if(0===et){$({code:eo.Status.INTERNAL,details:"received empty unary message"});return}er.emit("receiveMessage");let eh=Buffer.concat(en,et),ep=1===eh.readUInt8(0)?g:"identity",ef=er.getDecompressedMessage(eh,ep);if(Buffer.isBuffer(ef)){er.safeDeserializeMessage(ef,$);return}ef.then(g=>er.safeDeserializeMessage(g,$),ee=>$(ee.code?ee:{code:eo.Status.INTERNAL,details:`Received "grpc-encoding" header "${g}" but ${g} decompression failed`}))}ee.on("data",es),ee.on("end",eu),ee.on("error",eu)}safeDeserializeMessage(g,$){try{$(null,this.deserializeMessage(g))}catch(g){g.code=eo.Status.INTERNAL,$(g)}}serializeMessage(g){let $=this.handler.serialize(g),ee=$.byteLength,et=Buffer.allocUnsafe(ee+5);return et.writeUInt8(0,0),et.writeUInt32BE(ee,1),$.copy(et,5),et}deserializeMessage(g){return this.handler.deserialize(g)}async sendUnaryMessage(g,$,ee,et){if(!this.checkCancelled()){if(void 0===ee&&(ee=null),g){!Object.prototype.hasOwnProperty.call(g,"metadata")&&ee&&(g.metadata=ee),this.sendError(g);return}try{let g=this.serializeMessage($);this.write(g),this.sendStatus({code:eo.Status.OK,details:"OK",metadata:ee})}catch(g){g.code=eo.Status.INTERNAL,this.sendError(g)}}}sendStatus(g){var $;this.emit("callEnd",g.code),this.emit("streamEnd",g.code===eo.Status.OK),!this.checkCancelled()&&(ey("Request to method "+(null===($=this.handler)||void 0===$?void 0:$.path)+" ended with status code: "+eo.Status[g.code]+" details: "+g.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var $;let ee=Object.assign({[eS]:g.code,[ev]:encodeURI(g.details)},null===($=g.metadata)||void 0===$?void 0:$.toHttp2Headers());this.stream.sendTrailers(ee),this.statusSent=!0}),this.sendMetadata(),this.stream.end()))}sendError(g){let $={code:eo.Status.UNKNOWN,details:"message"in g?g.message:"Unknown Error",metadata:"metadata"in g&&void 0!==g.metadata?g.metadata:null};"code"in g&&"number"==typeof g.code&&Number.isInteger(g.code)&&($.code=g.code,"details"in g&&"string"==typeof g.details&&($.details=g.details)),this.sendStatus($)}write(g){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&g.length>this.maxSendMessageSize){this.sendError({code:eo.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${g.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(g)}}resume(){this.stream.resume()}setupSurfaceCall(g){this.once("cancelled",$=>{g.cancelled=!0,g.emit("cancelled",$)}),this.once("callEnd",$=>g.emit("callEnd",$))}setupReadable(g,$){let ee=new eh.StreamDecoder,et=!1,er=!1,en=!1,ei=()=>{en||!et||er||(en=!0,this.pushOrBufferMessage(g,null))};this.stream.on("data",async et=>{let en=ee.write(et);for(let ee of(er=!0,this.stream.pause(),en)){if(-1!==this.maxReceiveMessageSize&&ee.length>this.maxReceiveMessageSize){this.sendError({code:eo.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${ee.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let et=1===ee.readUInt8(0)?$:"identity",er=await this.getDecompressedMessage(ee,et);if(!er)return;this.pushOrBufferMessage(g,er)}er=!1,this.stream.resume(),ei()}),this.stream.once("end",()=>{et=!0,ei()})}consumeUnpushedMessages(g){for(this.canPush=!0;this.messagesToPush.length>0;){let $=this.messagesToPush.shift(),ee=g.push($);if(null===$||!1===ee){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(g,$){this.isPushPending?this.bufferedMessages.push($):this.pushMessage(g,$)}async pushMessage(g,$){if(null===$){ey("Received end of stream"),this.canPush?g.push(null):this.messagesToPush.push(null);return}ey("Received message of length "+$.length),this.isPushPending=!0;try{let ee=await this.deserializeMessage($);this.canPush?g.push(ee)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(ee)}catch($){this.bufferedMessages.length=0,"code"in $&&"number"==typeof $.code&&Number.isInteger($.code)&&$.code>=eo.Status.OK&&$.code<=eo.Status.UNAUTHENTICATED||($.code=eo.Status.INTERNAL),g.emit("error",$)}this.isPushPending=!1,this.bufferedMessages.length>0&&this.pushMessage(g,this.bufferedMessages.shift())}getPeer(){let g=this.stream.session.socket;return g.remoteAddress?g.remotePort?`${g.remoteAddress}:${g.remotePort}`:g.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function eD(g){let $=Error("Deadline exceeded");$.code=eo.Status.DEADLINE_EXCEEDED,g.sendError($),g.cancelled=!0,g.emit("cancelled","deadline")}$.Http2ServerCallStream=eR},14288:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.ServerCredentials=void 0;let et=ee(6337);class er{static createInsecure(){return new en}static createSsl(g,$,ee=!1){if(null!==g&&!Buffer.isBuffer(g))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray($))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof ee)throw TypeError("checkClientCertificate must be a boolean");let er=[],en=[];for(let g=0;g<$.length;g++){let ee=$[g];if(null===ee||"object"!=typeof ee)throw TypeError(`keyCertPair[${g}] must be an object`);if(!Buffer.isBuffer(ee.private_key))throw TypeError(`keyCertPair[${g}].private_key must be a Buffer`);if(!Buffer.isBuffer(ee.cert_chain))throw TypeError(`keyCertPair[${g}].cert_chain must be a Buffer`);er.push(ee.cert_chain),en.push(ee.private_key)}return new ei({ca:g||et.getDefaultRootsData()||void 0,cert:er,key:en,requestCert:ee,ciphers:et.CIPHER_SUITES})}}$.ServerCredentials=er;class en extends er{_isSecure(){return!1}_getSettings(){return null}}class ei extends er{constructor(g){super(),this.options=g}_isSecure(){return!0}_getSettings(){return this.options}}},41798:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Server=void 0;let et=ee(85158),er=ee(88905),en=ee(24285),ei=ee(14288),es=ee(25361),eo=ee(14386),eu=ee(50476),eh=ee(76228),ep=ee(14174),{HTTP2_HEADER_PATH:ef}=et.constants,eg="server";function em(){}function ey(g){return{code:er.Status.UNIMPLEMENTED,details:`The server does not implement the method ${g}`}}function ev(g,$){let ee=ey($);switch(g){case"unary":return(g,$)=>{$(ee,null)};case"clientStream":return(g,$)=>{$(ee,null)};case"serverStream":return g=>{g.emit("error",ee)};case"bidi":return g=>{g.emit("error",ee)};default:throw Error(`Invalid handlerType ${g}`)}}class eS{constructor(g){this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new ep.ChannelzTrace,this.callTracker=new ep.ChannelzCallTracker,this.listenerChildrenTracker=new ep.ChannelzChildrenTracker,this.sessionChildrenTracker=new ep.ChannelzChildrenTracker,this.options=null!=g?g:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=ep.registerChannelzServer(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(g){return()=>{var $,ee,et;let er;let en=this.sessions.get(g),ei=g.socket,es=ei.remoteAddress?eu.stringToSubchannelAddress(ei.remoteAddress,ei.remotePort):null,eo=ei.localAddress?eu.stringToSubchannelAddress(ei.localAddress,ei.localPort):null;if(g.encrypted){let g=ei,ee=g.getCipher(),et=g.getCertificate(),en=g.getPeerCertificate();er={cipherSuiteStandardName:null!==($=ee.standardName)&&void 0!==$?$:null,cipherSuiteOtherName:ee.standardName?null:ee.name,localCertificate:et&&"raw"in et?et.raw:null,remoteCertificate:en&&"raw"in en?en.raw:null}}else er=null;return{remoteAddress:es,localAddress:eo,security:er,remoteName:null,streamsStarted:en.streamTracker.callsStarted,streamsSucceeded:en.streamTracker.callsSucceeded,streamsFailed:en.streamTracker.callsFailed,messagesSent:en.messagesSent,messagesReceived:en.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:en.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:en.lastMessageSentTimestamp,lastMessageReceivedTimestamp:en.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(ee=g.state.localWindowSize)&&void 0!==ee?ee:null,remoteFlowControlWindow:null!==(et=g.state.remoteWindowSize)&&void 0!==et?et:null}}}trace(g){eo.trace(er.LogVerbosity.DEBUG,eg,"("+this.channelzRef.id+") "+g)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(g,$){if(null===g||"object"!=typeof g||null===$||"object"!=typeof $)throw Error("addService() requires two objects as arguments");let ee=Object.keys(g);if(0===ee.length)throw Error("Cannot add an empty service to a server");ee.forEach(ee=>{let et,er;let en=g[ee];et=en.requestStream?en.responseStream?"bidi":"clientStream":en.responseStream?"serverStream":"unary";let ei=$[ee];if(void 0===ei&&"string"==typeof en.originalName&&(ei=$[en.originalName]),er=void 0!==ei?ei.bind($):ev(et,ee),!1===this.register(en.path,er,en.responseSerialize,en.requestDeserialize,et))throw Error(`Method handler for ${en.path} already provided.`)})}removeService(g){if(null===g||"object"!=typeof g)throw Error("removeService() requires object as argument");Object.keys(g).forEach($=>{let ee=g[$];this.unregister(ee.path)})}bind(g,$){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(g,$,ee){if(!0===this.started)throw Error("server is already started");if("string"!=typeof g)throw TypeError("port must be a string");if(null===$||!($ instanceof ei.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof ee)throw TypeError("callback must be a function");let en=eh.parseUri(g);if(null===en)throw Error(`Could not parse port "${g}"`);let ef=es.mapUriDefaultScheme(en);if(null===ef)throw Error(`Could not get a default scheme for port "${g}"`);let eg={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?eg.maxSessionMemory=this.options["grpc-node.max_session_memory"]:eg.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(eg.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let ey=(g,$)=>{process.nextTick(()=>ee(g,$))},ev=()=>{let g;if($._isSecure()){let ee=Object.assign(eg,$._getSettings());(g=et.createSecureServer(ee)).on("secureConnection",g=>{g.on("error",g=>{this.trace("An incoming TLS connection closed with error: "+g.message)})})}else g=et.createServer(eg);return g.setTimeout(0,em),this._setupHandlers(g),g},eS=(g,$,ee)=>0===g.length?Promise.resolve({port:$,count:ee}):Promise.all(g.map(g=>{let ee;this.trace("Attempting to bind "+eu.subchannelAddressToString(g)),ee=eu.isTcpSubchannelAddress(g)?{host:g.host,port:$}:g;let et=ev();return new Promise((er,en)=>{let ei=$=>{this.trace("Failed to bind "+eu.subchannelAddressToString(g)+" with error "+$.message),er($)};et.once("error",ei),et.listen(ee,()=>{let g,ee;let en=et.address();g="string"==typeof en?{path:en}:{host:en.address,port:en.port},ee=ep.registerChannelzSocket(eu.subchannelAddressToString(g),()=>({localAddress:g,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(ee),this.http2ServerList.push({server:et,channelzRef:ee}),this.trace("Successfully bound "+eu.subchannelAddressToString(g)),er("port"in g?g.port:$),et.removeListener("error",ei)})})})).then(g=>{let et=0;for(let ee of g)if("number"==typeof ee&&(et+=1,ee!==$))throw Error("Invalid state: multiple port numbers added from single address");return{port:$,count:et+ee}}),eT=g=>{if(0===g.length)return Promise.resolve({port:0,count:0});let $=g[0],ee=ev();return new Promise((et,er)=>{let en=ee=>{this.trace("Failed to bind "+eu.subchannelAddressToString($)+" with error "+ee.message),et(eT(g.slice(1)))};ee.once("error",en),ee.listen($,()=>{let $;let er=ee.address(),ei={host:er.address,port:er.port};$=ep.registerChannelzSocket(eu.subchannelAddressToString(ei),()=>({localAddress:ei,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild($),this.http2ServerList.push({server:ee,channelzRef:$}),this.trace("Successfully bound "+eu.subchannelAddressToString(ei)),et(eS(g.slice(1),er.port,1)),ee.removeListener("error",en)})})},eE={onSuccessfulResolution:($,ee,et)=>{let en;if(eE.onSuccessfulResolution=()=>{},0===$.length){ey(Error(`No addresses resolved for port ${g}`),0);return}(en=eu.isTcpSubchannelAddress($[0])?0===$[0].port?eT($):eS($,$[0].port,0):eS($,1,0)).then(g=>{if(0===g.count){let g=`No address added out of total ${$.length} resolved`;eo.log(er.LogVerbosity.ERROR,g),ey(Error(g),0)}else g.count<$.length&&eo.log(er.LogVerbosity.INFO,`WARNING Only ${g.count} addresses added out of total ${$.length} resolved`),ey(null,g.port)},g=>{let ee=`No address added out of total ${$.length} resolved`;eo.log(er.LogVerbosity.ERROR,ee),ey(Error(ee),0)})},onError:g=>{ey(Error(g.details),0)}};es.createResolver(ef,eE,this.options).updateResolution()}forceShutdown(){for(let{server:g,channelzRef:$}of this.http2ServerList)g.listening&&g.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild($),ep.unregisterChannelzRef($))});this.started=!1,this.sessions.forEach((g,$)=>{$.destroy(et.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&ep.unregisterChannelzRef(this.channelzRef)}register(g,$,ee,et,er){return!this.handlers.has(g)&&(this.handlers.set(g,{func:$,serialize:ee,deserialize:et,type:er,path:g}),!0)}unregister(g){return this.handlers.delete(g)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:g})=>!0!==g.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(g){let $=$=>{this.channelzEnabled&&ep.unregisterChannelzRef(this.channelzRef),g($)},ee=0;function et(){0==--ee&&$()}for(let{server:g,channelzRef:$}of(this.started=!1,this.http2ServerList))g.listening&&(ee++,g.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild($),ep.unregisterChannelzRef($)),et()}));this.sessions.forEach((g,$)=>{$.closed||(ee+=1,$.close(et))}),0===ee&&$()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(g,$){let ee=$[et.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof ee&&ee.startsWith("application/grpc"))||(g.respond({[et.constants.HTTP2_HEADER_STATUS]:et.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(g){let $=g[ef];this.trace("Received call to method "+$+" at address "+this.serverAddressString);let ee=this.handlers.get($);if(void 0===ee)throw this.trace("No handler registered for method "+$+". Sending UNIMPLEMENTED status."),ey($);return ee}_respondWithError(g,$,ee=null){let et=new en.Http2ServerCallStream($,null,this.options);void 0===g.code&&(g.code=er.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==ee||ee.streamTracker.addCallFailed()),et.sendError(g)}_channelzHandler(g,$){let ee;let et=this.sessions.get(g.session);if(this.callTracker.addCallStarted(),null==et||et.streamTracker.addCallStarted(),!this._verifyContentType(g,$)){this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed();return}try{ee=this._retrieveHandler($)}catch($){this._respondWithError($,g,et);return}let ei=new en.Http2ServerCallStream(g,ee,this.options);ei.once("callEnd",g=>{g===er.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),et&&(ei.once("streamEnd",g=>{g?et.streamTracker.addCallSucceeded():et.streamTracker.addCallFailed()}),ei.on("sendMessage",()=>{et.messagesSent+=1,et.lastMessageSentTimestamp=new Date}),ei.on("receiveMessage",()=>{et.messagesReceived+=1,et.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(ei,ee,$)||(this.callTracker.addCallFailed(),null==et||et.streamTracker.addCallFailed(),ei.sendError({code:er.Status.INTERNAL,details:`Unknown handler type: ${ee.type}`}))}_streamHandler(g,$){let ee;if(!0!==this._verifyContentType(g,$))return;try{ee=this._retrieveHandler($)}catch($){this._respondWithError($,g,null);return}let et=new en.Http2ServerCallStream(g,ee,this.options);this._runHandlerForCall(et,ee,$)||et.sendError({code:er.Status.INTERNAL,details:`Unknown handler type: ${ee.type}`})}_runHandlerForCall(g,$,ee){var et;let er=g.receiveMetadata(ee),en=null!==(et=er.get("grpc-encoding")[0])&&void 0!==et?et:"identity";er.remove("grpc-encoding");let{type:ei}=$;if("unary"===ei)eT(g,$,er,en);else if("clientStream"===ei)eE(g,$,er,en);else if("serverStream"===ei)ew(g,$,er,en);else{if("bidi"!==ei)return!1;eC(g,$,er,en)}return!0}_setupHandlers(g){if(null===g)return;let $=g.address(),ee="null";$&&(ee="string"==typeof $?$:$.address+":"+$.port),this.serverAddressString=ee;let et=this.channelzEnabled?this._channelzHandler:this._streamHandler;g.on("stream",et.bind(this)),g.on("session",g=>{var $;let ee;if(!this.started){g.destroy();return}let et={ref:ee=ep.registerChannelzSocket(null!==($=g.socket.remoteAddress)&&void 0!==$?$:"unknown",this.getChannelzSessionInfoGetter(g),this.channelzEnabled),streamTracker:new ep.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(g,et);let er=g.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+er),this.sessionChildrenTracker.refChild(ee)),g.on("close",()=>{this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+er),this.sessionChildrenTracker.unrefChild(ee),ep.unregisterChannelzRef(ee)),this.sessions.delete(g)})})}}function eT(g,$,ee,et){g.receiveUnaryMessage(et,(et,er)=>{if(et){g.sendError(et);return}if(void 0===er||g.cancelled)return;let ei=new en.ServerUnaryCallImpl(g,ee,er);$.func(ei,($,ee,et,er)=>{g.sendUnaryMessage($,ee,et,er)})})}function eE(g,$,ee,et){let er=new en.ServerReadableStreamImpl(g,ee,$.deserialize,et);function ei($,ee,et,en){er.destroy(),g.sendUnaryMessage($,ee,et,en)}g.cancelled||(er.on("error",ei),$.func(er,ei))}function ew(g,$,ee,et){g.receiveUnaryMessage(et,(et,er)=>{if(et){g.sendError(et);return}if(void 0===er||g.cancelled)return;let ei=new en.ServerWritableStreamImpl(g,ee,$.serialize,er);$.func(ei)})}function eC(g,$,ee,et){let er=new en.ServerDuplexStreamImpl(g,ee,$.serialize,$.deserialize,et);g.cancelled||$.func(er)}$.Server=eS},58668:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.extractAndSelectServiceConfig=$.validateServiceConfig=void 0;let et=ee(22037),er=ee(82728),en=/^\d+(\.\d{1,9})?s$/,ei="node";function es(g){if(!("service"in g)||"string"!=typeof g.service)throw Error("Invalid method config name: invalid service");let $={service:g.service};if("method"in g){if("string"==typeof g.method)$.method=g.method;else throw Error("Invalid method config name: invalid method")}return $}function eo(g){var $;let ee={name:[]};if(!("name"in g)||!Array.isArray(g.name))throw Error("Invalid method config: invalid name array");for(let $ of g.name)ee.name.push(es($));if("waitForReady"in g){if("boolean"!=typeof g.waitForReady)throw Error("Invalid method config: invalid waitForReady");ee.waitForReady=g.waitForReady}if("timeout"in g){if("object"==typeof g.timeout){if(!("seconds"in g.timeout)||"number"!=typeof g.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in g.timeout)||"number"!=typeof g.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");ee.timeout=g.timeout}else if("string"==typeof g.timeout&&en.test(g.timeout)){let et=g.timeout.substring(0,g.timeout.length-1).split(".");ee.timeout={seconds:0|et[0],nanos:(null!==($=et[1])&&void 0!==$?$:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in g){if("number"!=typeof g.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");ee.maxRequestBytes=g.maxRequestBytes}if("maxResponseBytes"in g){if("number"!=typeof g.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");ee.maxResponseBytes=g.maxResponseBytes}return ee}function eu(g){let $={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in g){if("string"==typeof g.loadBalancingPolicy)$.loadBalancingPolicy=g.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in g){if(Array.isArray(g.loadBalancingConfig))for(let ee of g.loadBalancingConfig)$.loadBalancingConfig.push(er.validateLoadBalancingConfig(ee));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in g&&Array.isArray(g.methodConfig))for(let ee of g.methodConfig)$.methodConfig.push(eo(ee));let ee=[];for(let g of $.methodConfig)for(let $ of g.name){for(let g of ee)if($.service===g.service&&$.method===g.method)throw Error(`Invalid service config: duplicate name ${$.service}/${$.method}`);ee.push($)}return $}function eh(g){if(!("serviceConfig"in g))throw Error("Invalid service config choice: missing service config");let $={serviceConfig:eu(g.serviceConfig)};if("clientLanguage"in g){if(Array.isArray(g.clientLanguage))for(let ee of($.clientLanguage=[],g.clientLanguage))if("string"==typeof ee)$.clientLanguage.push(ee);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in g){if(Array.isArray(g.clientHostname))for(let ee of($.clientHostname=[],g.clientHostname))if("string"==typeof ee)$.clientHostname.push(ee);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in g){if("number"==typeof g.percentage&&0<=g.percentage&&g.percentage<=100)$.percentage=g.percentage;else throw Error("Invalid service config choice: invalid percentage")}let ee=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let $ in g)if(!ee.includes($))throw Error(`Invalid service config choice: unexpected field ${$}`);return $}function ep(g,$){if(!Array.isArray(g))throw Error("Invalid service config list");for(let ee of g){let g=eh(ee);if("number"!=typeof g.percentage||!($>g.percentage)){if(Array.isArray(g.clientHostname)){let $=!1;for(let ee of g.clientHostname)ee===et.hostname()&&($=!0);if(!$)continue}if(Array.isArray(g.clientLanguage)){let $=!1;for(let ee of g.clientLanguage)ee===ei&&($=!0);if(!$)continue}return g.serviceConfig}}throw Error("No matching service config found")}function ef(g,$){for(let ee of g)if(ee.length>0&&ee[0].startsWith("grpc_config="))return ep(JSON.parse(ee.join("").substring(12)),$);return null}$.validateServiceConfig=eu,$.extractAndSelectServiceConfig=ef},71192:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.StatusBuilder=void 0;class ee{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(g){return this.code=g,this}withDetails(g){return this.details=g,this}withMetadata(g){return this.metadata=g,this}build(){let g={};return null!==this.code&&(g.code=this.code),null!==this.details&&(g.details=this.details),null!==this.metadata&&(g.metadata=this.metadata),g}}$.StatusBuilder=ee},69196:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),$.StreamDecoder=void 0,function(g){g[g.NO_DATA=0]="NO_DATA",g[g.READING_SIZE=1]="READING_SIZE",g[g.READING_MESSAGE=2]="READING_MESSAGE"}(ee||(ee={}));class et{constructor(){this.readState=ee.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(g){let $,et=0,er=[];for(;et<g.length;)switch(this.readState){case ee.NO_DATA:this.readCompressFlag=g.slice(et,et+1),et+=1,this.readState=ee.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case ee.READING_SIZE:if($=Math.min(g.length-et,this.readSizeRemaining),g.copy(this.readPartialSize,4-this.readSizeRemaining,et,et+$),this.readSizeRemaining-=$,et+=$,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=ee.READING_MESSAGE;else{let g=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=ee.NO_DATA,er.push(g)}}break;case ee.READING_MESSAGE:if($=Math.min(g.length-et,this.readMessageRemaining),this.readPartialMessage.push(g.slice(et,et+$)),this.readMessageRemaining-=$,et+=$,0===this.readMessageRemaining){let g=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),$=Buffer.concat(g,this.readMessageSize+5);this.readState=ee.NO_DATA,er.push($)}break;default:throw Error("Unexpected read state")}return er}}$.StreamDecoder=et},50476:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.stringToSubchannelAddress=$.subchannelAddressToString=$.subchannelAddressEqual=$.isTcpSubchannelAddress=void 0;let et=ee(41808);function er(g){return"port"in g}function en(g,$){return er(g)?er($)&&g.host===$.host&&g.port===$.port:!er($)&&g.path===$.path}function ei(g){return er(g)?g.host+":"+g.port:g.path}$.isTcpSubchannelAddress=er,$.subchannelAddressEqual=en,$.subchannelAddressToString=ei;let es=443;function eo(g,$){return et.isIP(g)?{host:g,port:null!=$?$:es}:{path:g}}$.stringToSubchannelAddress=eo},55074:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.BaseSubchannelWrapper=void 0;class ee{constructor(g){this.child=g}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(g){this.child.addConnectivityStateListener(g)}removeConnectivityStateListener(g){this.child.removeConnectivityStateListener(g)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}$.BaseSubchannelWrapper=ee},80760:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getSubchannelPool=$.SubchannelPool=void 0;let et=ee(8007),er=ee(22757),en=ee(50476),ei=ee(76228),es=1e4;class eo{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let g=!0;for(let $ in this.pool){let ee=this.pool[$].filter(g=>!g.subchannel.unrefIfOneRef());ee.length>0&&(g=!1),this.pool[$]=ee}g&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var g,$;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},es),null===($=(g=this.cleanupTimer).unref)||void 0===$||$.call(g))}getOrCreateSubchannel(g,$,ee,es){this.ensureCleanupTask();let eo=ei.uriToString(g);if(eo in this.pool){for(let g of this.pool[eo])if(en.subchannelAddressEqual($,g.subchannelAddress)&&et.channelOptionsEqual(ee,g.channelArguments)&&es._equals(g.channelCredentials))return g.subchannel}let eu=new er.Subchannel(g,$,ee,es);return eo in this.pool||(this.pool[eo]=[]),this.pool[eo].push({subchannelAddress:$,channelArguments:ee,channelCredentials:es,subchannel:eu}),eu.ref(),eu}}$.SubchannelPool=eo;let eu=new eo;function eh(g){return g?eu:new eo}$.getSubchannelPool=eh},22757:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.Subchannel=void 0;let et=ee(85158),er=ee(24404),en=ee(75199),ei=ee(33339),es=ee(25361),eo=ee(14386),eu=ee(88905),eh=ee(29347),ep=ee(41808),ef=ee(76228),eg=ee(50476),em=ee(14174),ey=ee(37645).i8,ev="subchannel",eS="subchannel_flowctrl",eT=2147483647,eE=2e4,{HTTP2_HEADER_AUTHORITY:ew,HTTP2_HEADER_CONTENT_TYPE:eC,HTTP2_HEADER_METHOD:e_,HTTP2_HEADER_PATH:eI,HTTP2_HEADER_TE:eO,HTTP2_HEADER_USER_AGENT:eA}=et.constants,eN=Buffer.from("too_many_pings","ascii");class eR{constructor(g,$,ee,et){this.channelTarget=g,this.subchannelAddress=$,this.options=ee,this.credentials=et,this.connectivityState=en.ConnectivityState.IDLE,this.session=null,this.continueConnecting=!1,this.stateListeners=[],this.disconnectListeners=new Set,this.keepaliveTimeMs=eT,this.keepaliveTimeoutMs=eE,this.keepaliveWithoutCalls=!1,this.callRefcount=0,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new em.ChannelzCallTracker,this.childrenTracker=new em.ChannelzChildrenTracker,this.channelzSocketRef=null,this.remoteName=null,this.streamTracker=new em.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.userAgent=[ee["grpc.primary_user_agent"],`grpc-node-js/${ey}`,ee["grpc.secondary_user_agent"]].filter(g=>g).join(" "),"grpc.keepalive_time_ms"in ee&&(this.keepaliveTimeMs=ee["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in ee&&(this.keepaliveTimeoutMs=ee["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in ee?this.keepaliveWithoutCalls=1===ee["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,this.keepaliveIntervalId=setTimeout(()=>{},0),clearTimeout(this.keepaliveIntervalId),this.keepaliveTimeoutId=setTimeout(()=>{},0),clearTimeout(this.keepaliveTimeoutId);let er={initialDelay:ee["grpc.initial_reconnect_backoff_ms"],maxDelay:ee["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new ei.BackoffTimeout(()=>{this.handleBackoffTimer()},er),this.subchannelAddressString=eg.subchannelAddressToString($),0===ee["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new em.ChannelzTrace,this.channelzRef=em.registerChannelzSubchannel(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(ee,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}getChannelzSocketInfo(){var g,$,ee;let et;if(null===this.session)return null;let er=this.session.socket,en=er.remoteAddress?eg.stringToSubchannelAddress(er.remoteAddress,er.remotePort):null,ei=er.localAddress?eg.stringToSubchannelAddress(er.localAddress,er.localPort):null;if(this.session.encrypted){let $=er,ee=$.getCipher(),en=$.getCertificate(),ei=$.getPeerCertificate();et={cipherSuiteStandardName:null!==(g=ee.standardName)&&void 0!==g?g:null,cipherSuiteOtherName:ee.standardName?null:ee.name,localCertificate:en&&"raw"in en?en.raw:null,remoteCertificate:ei&&"raw"in ei?ei.raw:null}}else et=null;return{remoteAddress:en,localAddress:ei,security:et,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==($=this.session.state.localWindowSize)&&void 0!==$?$:null,remoteFlowControlWindow:null!==(ee=this.session.state.remoteWindowSize)&&void 0!==ee?ee:null}}resetChannelzSocketInfo(){this.channelzEnabled&&(this.channelzSocketRef&&(em.unregisterChannelzRef(this.channelzSocketRef),this.childrenTracker.unrefChild(this.channelzSocketRef),this.channelzSocketRef=null),this.remoteName=null,this.streamTracker=new em.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null)}trace(g){eo.trace(eu.LogVerbosity.DEBUG,ev,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}refTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}flowControlTrace(g){eo.trace(eu.LogVerbosity.DEBUG,eS,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}internalsTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"subchannel_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}keepaliveTrace(g){eo.trace(eu.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+g)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.CONNECTING):this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}sendPing(){var g,$;this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===($=(g=this.keepaliveTimeoutId).unref)||void 0===$||$.call(g);try{this.session.ping((g,$,ee)=>{this.keepaliveTrace("Received ping response"),clearTimeout(this.keepaliveTimeoutId)})}catch(g){this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE)}}startKeepalivePings(){var g,$;this.keepaliveIntervalId=setInterval(()=>{this.sendPing()},this.keepaliveTimeMs),null===($=(g=this.keepaliveIntervalId).unref)||void 0===$||$.call(g)}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId),clearTimeout(this.keepaliveTimeoutId)}createSession(g){var $,ee,ei;g.realTarget?(this.remoteName=ef.uriToString(g.realTarget),this.trace("creating HTTP/2 session through proxy to "+g.realTarget)):(this.remoteName=null,this.trace("creating HTTP/2 session"));let eh=es.getDefaultAuthority(null!==($=g.realTarget)&&void 0!==$?$:this.channelTarget),eg=this.credentials._getConnectionOptions()||{};eg.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in this.options?eg.maxSessionMemory=this.options["grpc-node.max_session_memory"]:eg.maxSessionMemory=Number.MAX_SAFE_INTEGER;let ey="http://";if("secureContext"in eg){if(ey="https://",this.options["grpc.ssl_target_name_override"]){let g=this.options["grpc.ssl_target_name_override"];eg.checkServerIdentity=($,ee)=>er.checkServerIdentity(g,ee),eg.servername=g}else{let g=null!==(ei=null===(ee=ef.splitHostPort(eh))||void 0===ee?void 0:ee.host)&&void 0!==ei?ei:"localhost";eg.servername=g}g.socket&&(eg.createConnection=($,ee)=>g.socket)}else eg.createConnection=($,ee)=>g.socket?g.socket:ep.connect(this.subchannelAddress);eg=Object.assign(Object.assign({},eg),this.subchannelAddress);let eS=et.connect(ey+eh,eg);this.session=eS,this.channelzSocketRef=em.registerChannelzSocket(this.subchannelAddressString,()=>this.getChannelzSocketInfo(),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(this.channelzSocketRef),eS.unref(),eS.once("connect",()=>{this.session===eS&&this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.READY)}),eS.once("close",()=>{this.session===eS&&(this.trace("connection closed"),this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.TRANSIENT_FAILURE),this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.IDLE))}),eS.once("goaway",(g,$,ee)=>{this.session===eS&&(g===et.constants.NGHTTP2_ENHANCE_YOUR_CALM&&ee.equals(eN)&&(this.keepaliveTimeMs=Math.min(2*this.keepaliveTimeMs,eT),eo.log(eu.LogVerbosity.ERROR,`Connection to ${ef.uriToString(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTimeMs} ms`)),this.trace("connection closed by GOAWAY with code "+g),this.transitionToState([en.ConnectivityState.CONNECTING,en.ConnectivityState.READY],en.ConnectivityState.IDLE))}),eS.once("error",g=>{this.trace("connection closed with error "+g.message)}),eo.isTracerEnabled(ev)&&(eS.on("remoteSettings",g=>{this.trace("new settings received"+(this.session!==eS?" on the old connection":"")+": "+JSON.stringify(g))}),eS.on("localSettings",g=>{this.trace("local settings acknowledged by remote"+(this.session!==eS?" on the old connection":"")+": "+JSON.stringify(g))}))}startConnectingInternal(){var g,$;let ee=this.credentials._getConnectionOptions()||{};if("secureContext"in ee){if(ee.ALPNProtocols=["h2"],this.options["grpc.ssl_target_name_override"]){let g=this.options["grpc.ssl_target_name_override"];ee.checkServerIdentity=($,ee)=>er.checkServerIdentity(g,ee),ee.servername=g}else if("grpc.http_connect_target"in this.options){let et=es.getDefaultAuthority(null!==(g=ef.parseUri(this.options["grpc.http_connect_target"]))&&void 0!==g?g:{path:"localhost"}),er=ef.splitHostPort(et);ee.servername=null!==($=null==er?void 0:er.host)&&void 0!==$?$:et}}eh.getProxiedConnection(this.subchannelAddress,this.options,ee).then(g=>{this.createSession(g)},g=>{this.transitionToState([en.ConnectivityState.CONNECTING],en.ConnectivityState.TRANSIENT_FAILURE)})}handleDisconnect(){for(let g of(this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE),this.disconnectListeners.values()))g()}transitionToState(g,$){if(-1===g.indexOf(this.connectivityState))return!1;this.trace(en.ConnectivityState[this.connectivityState]+" -> "+en.ConnectivityState[$]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",en.ConnectivityState[this.connectivityState]+" -> "+en.ConnectivityState[$]);let ee=this.connectivityState;switch(this.connectivityState=$,$){case en.ConnectivityState.READY:this.stopBackoff();let et=this.session;et.socket.once("close",()=>{this.session===et&&this.handleDisconnect()}),this.keepaliveWithoutCalls&&this.startKeepalivePings();break;case en.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case en.ConnectivityState.TRANSIENT_FAILURE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings(),this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case en.ConnectivityState.IDLE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings();break;default:throw Error(`Invalid state: unknown ConnectivityState ${$}`)}for(let g of[...this.stateListeners])g(this,ee,$);return!0}checkBothRefcounts(){0===this.callRefcount&&0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.transitionToState([en.ConnectivityState.CONNECTING,en.ConnectivityState.READY],en.ConnectivityState.IDLE),this.channelzEnabled&&em.unregisterChannelzRef(this.channelzRef))}callRef(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount+1)),0!==this.callRefcount||(this.session&&this.session.ref(),this.backoffTimeout.ref(),this.keepaliveWithoutCalls||this.startKeepalivePings()),this.callRefcount+=1}callUnref(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount-1)),this.callRefcount-=1,0===this.callRefcount&&(this.session&&this.session.unref(),this.backoffTimeout.unref(),this.keepaliveWithoutCalls||clearInterval(this.keepaliveIntervalId),this.checkBothRefcounts())}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.checkBothRefcounts()}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}startCallStream(g,$,ee){let et,er;let ei=g.toHttp2Headers();ei[ew]=$.getHost(),ei[eA]=this.userAgent,ei[eC]="application/grpc",ei[e_]="POST",ei[eI]=$.getMethod(),ei[eO]="trailers";try{et=this.session.request(ei)}catch(g){throw this.transitionToState([en.ConnectivityState.READY],en.ConnectivityState.TRANSIENT_FAILURE),g}let es="";for(let g of Object.keys(ei))es+="		"+g+": "+ei[g]+"\n";eo.trace(eu.LogVerbosity.DEBUG,"call_stream","Starting stream ["+$.getCallNumber()+"] on subchannel ("+this.channelzRef.id+") "+this.subchannelAddressString+" with headers\n"+es),this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize);let eh=this.session;this.internalsTrace("session.closed="+eh.closed+" session.destroyed="+eh.destroyed+" session.socket.destroyed="+eh.socket.destroyed),this.channelzEnabled?(this.callTracker.addCallStarted(),$.addStatusWatcher(g=>{g.code===eu.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),this.streamTracker.addCallStarted(),$.addStreamEndWatcher(g=>{eh===this.session&&(g?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed())}),er={addMessageSent:()=>{this.messagesSent+=1,this.lastMessageSentTimestamp=new Date},addMessageReceived:()=>{this.messagesReceived+=1}}):er={addMessageSent:()=>{},addMessageReceived:()=>{}},$.attachHttp2Stream(et,this,ee,er)}startConnecting(){this.transitionToState([en.ConnectivityState.IDLE],en.ConnectivityState.CONNECTING)||this.connectivityState!==en.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(g){this.stateListeners.push(g)}removeConnectivityStateListener(g){let $=this.stateListeners.indexOf(g);$>-1&&this.stateListeners.splice($,1)}addDisconnectListener(g){this.disconnectListeners.add(g)}removeDisconnectListener(g){this.disconnectListeners.delete(g)}resetBackoff(){this.backoffTimeout.reset(),this.transitionToState([en.ConnectivityState.TRANSIENT_FAILURE],en.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}}$.Subchannel=eR},6337:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.getDefaultRootsData=$.CIPHER_SUITES=void 0;let et=ee(57147);$.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let er=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,en=null;function ei(){return er?(null===en&&(en=et.readFileSync(er)),en):null}$.getDefaultRootsData=ei},76228:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.uriToString=$.splitHostPort=$.parseUri=void 0;let ee=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function et(g){let $=ee.exec(g);return null===$?null:{scheme:$[1],authority:$[2],path:$[3]}}$.parseUri=et;let er=/^\d+$/;function en(g){if(g.startsWith("[")){let $=g.indexOf("]");if(-1===$)return null;let ee=g.substring(1,$);if(-1===ee.indexOf(":"))return null;if(!(g.length>$+1))return{host:ee};if(":"!==g[$+1])return null;{let et=g.substring($+2);return er.test(et)?{host:ee,port:+et}:null}}{let $=g.split(":");return 2!==$.length?{host:g}:er.test($[1])?{host:$[0],port:+$[1]}:null}}function ei(g){let $="";return void 0!==g.scheme&&($+=g.scheme+":"),void 0!==g.authority&&($+="//"+g.authority+"/"),$+=g.path}$.splitHostPort=en,$.uriToString=ei},48886:(g,$,ee)=>{"use strict";var et,er;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */et={value:!0},et=et=et=$.J_=et=$.Cp=et=et=void 0;let en=ee(61232),ei=ee(79151),es=ee(21740),eo=ee(88974);et=ee(51728),et=function(g){return"@type"in g&&"string"==typeof g["@type"]},function(g){g.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",g.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",g.IDEMPOTENT="IDEMPOTENT"}(er=$.Cp||($.Cp={}));let eu={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function eh(g,$){return""===g?$:g+"."+$}function ep(g){return g instanceof ei.Service||g instanceof ei.Type||g instanceof ei.Enum}function ef(g){return g instanceof ei.Namespace||g instanceof ei.Root}function eg(g,$){let ee=eh($,g.name);return ep(g)?[[ee,g]]:ef(g)&&void 0!==g.nested?Object.keys(g.nested).map($=>eg(g.nested[$],ee)).reduce((g,$)=>g.concat($),[]):[]}function em(g,$){return function(ee){return g.toObject(g.decode(ee),$)}}function ey(g){return function($){if(Array.isArray($))throw Error(`Failed to serialize message: expected object with ${g.name} structure, got array instead`);let ee=g.fromObject($);return g.encode(ee).finish()}}function ev(g){return(g||[]).reduce((g,$)=>{for(let[ee,et]of Object.entries($))"uninterpreted_option"===ee?g.uninterpreted_option.push($.uninterpreted_option):g[ee]=et;return g},{deprecated:!1,idempotency_level:er.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function eS(g,$,ee,et){let er=g.resolvedRequestType,ei=g.resolvedResponseType;return{path:"/"+$+"/"+g.name,requestStream:!!g.requestStream,responseStream:!!g.responseStream,requestSerialize:ey(er),requestDeserialize:em(er,ee),responseSerialize:ey(ei),responseDeserialize:em(ei,ee),originalName:en(g.name),requestType:eE(er,et),responseType:eE(ei,et),options:ev(g.parsedOptions)}}function eT(g,$,ee,et){let er={};for(let en of g.methodsArray)er[en.name]=eS(en,$,ee,et);return er}function eE(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:ee.$type.toObject(ee,eu),fileDescriptorProtos:$}}function ew(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:ee.$type.toObject(ee,eu),fileDescriptorProtos:$}}function eC(g,$,ee,et){if(g instanceof ei.Service)return eT(g,$,ee,et);if(g instanceof ei.Type)return eE(g,et);if(g instanceof ei.Enum)return ew(g,et);throw Error("Type mismatch in reflection object handling")}function e_(g,$){let ee={};g.resolveAll();let et=g.toDescriptor("proto3").file.map(g=>Buffer.from(es.FileDescriptorProto.encode(g).finish()));for(let[er,en]of eg(g,""))ee[er]=eC(en,er,$,et);return ee}function eI(g,$){$=$||{};let ee=ei.Root.fromDescriptor(g);return ee.resolveAll(),e_(ee,$)}function eO(g,$){return e_((0,eo.loadProtosWithOptionsSync)(g,$),$)}et=function(g,$){return(0,eo.loadProtosWithOptions)(g,$).then(g=>e_(g,$))},$.J_=eO,et=function(g,$){$=$||{};let ee=ei.Root.fromJSON(g);return ee.resolveAll(),e_(ee,$)},et=function(g,$){return eI(es.FileDescriptorSet.decode(g),$)},et=function(g,$){return eI(es.FileDescriptorSet.fromObject(g),$)},(0,eo.addCommonProtos)()},88974:(g,$,ee)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty($,"__esModule",{value:!0}),$.addCommonProtos=$.loadProtosWithOptionsSync=$.loadProtosWithOptions=void 0;let et=ee(57147),er=ee(71017),en=ee(79151);function ei(g,$){let ee=g.resolvePath;g.resolvePath=(g,en)=>{if(er.isAbsolute(en))return en;for(let g of $){let $=er.join(g,en);try{return et.accessSync($,et.constants.R_OK),$}catch(g){continue}}return process.emitWarning(`${en} not found in any of the include paths ${$}`),ee(g,en)}}async function es(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));ei(ee,$.includeDirs)}let et=await ee.load(g,$);return et.resolveAll(),et}function eo(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))throw Error("The includeDirs option must be an array");ei(ee,$.includeDirs)}let et=ee.loadSync(g,$);return et.resolveAll(),et}function eu(){let g=ee(27578),$=ee(23081),et=ee(47304),er=ee(81228);en.common("api",g.nested.google.nested.protobuf.nested),en.common("descriptor",$.nested.google.nested.protobuf.nested),en.common("source_context",et.nested.google.nested.protobuf.nested),en.common("type",er.nested.google.nested.protobuf.nested)}$.loadProtosWithOptions=es,$.loadProtosWithOptionsSync=eo,$.addCommonProtos=eu},21740:(g,$,ee)=>{"use strict";var et=ee(79151);g.exports=$=et.descriptor=et.Root.fromJSON(ee(23081)).lookup(".google.protobuf");var er=et.Namespace,en=et.Root,ei=et.Enum,es=et.Type,eo=et.Field,eu=et.MapField,eh=et.OneOf,ep=et.Service,ef=et.Method;function eg(g,ee,et){var eu=$.FileDescriptorProto.create({name:g.filename||(g.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});ex(et,eu),g instanceof en||(eu.package=g.fullName.substring(1));for(var eh,ef=0;ef<g.nestedArray.length;++ef)(eh=g._nestedArray[ef])instanceof es?eu.messageType.push(eh.toDescriptor(et)):eh instanceof ei?eu.enumType.push(eh.toDescriptor()):eh instanceof eo?eu.extension.push(eh.toDescriptor(et)):eh instanceof ep?eu.service.push(eh.toDescriptor()):eh instanceof er&&eg(eh,ee,et);eu.options=eN(g.options,$.FileOptions),eu.messageType.length+eu.enumType.length+eu.extension.length+eu.service.length&&ee.push(eu)}en.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.FileDescriptorSet.decode(g));var ee=new en;if(g.file)for(var et,er,eu,eh=0;eh<g.file.length;++eh){er=ee,(et=g.file[eh]).package&&et.package.length&&(er=ee.define(et.package));var ef=ek(et);if(et.name&&et.name.length&&ee.files.push(er.filename=et.name),et.messageType)for(eu=0;eu<et.messageType.length;++eu)er.add(es.fromDescriptor(et.messageType[eu],ef));if(et.enumType)for(eu=0;eu<et.enumType.length;++eu)er.add(ei.fromDescriptor(et.enumType[eu],ef));if(et.extension)for(eu=0;eu<et.extension.length;++eu)er.add(eo.fromDescriptor(et.extension[eu],ef));if(et.service)for(eu=0;eu<et.service.length;++eu)er.add(ep.fromDescriptor(et.service[eu],ef));var eg=eO(et.options,$.FileOptions);if(eg){var em=Object.keys(eg);for(eu=0;eu<em.length;++eu)er.setOption(em[eu],eg[em[eu]])}}return ee.resolveAll()},en.prototype.toDescriptor=function(g){var ee=$.FileDescriptorSet.create();return eg(this,ee.file,g),ee};var em=0;es.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.DescriptorProto.decode(g));var er,en=new es(g.name.length?g.name:"Type"+em++,eO(g.options,$.MessageOptions));if(et||(en._edition=ee),g.oneofDecl)for(er=0;er<g.oneofDecl.length;++er)en.add(eh.fromDescriptor(g.oneofDecl[er]));if(g.field)for(er=0;er<g.field.length;++er){var eu=eo.fromDescriptor(g.field[er],ee,!0);en.add(eu),g.field[er].hasOwnProperty("oneofIndex")&&en.oneofsArray[g.field[er].oneofIndex].add(eu)}if(g.extension)for(er=0;er<g.extension.length;++er)en.add(eo.fromDescriptor(g.extension[er],ee,!0));if(g.nestedType)for(er=0;er<g.nestedType.length;++er)en.add(es.fromDescriptor(g.nestedType[er],ee,!0)),g.nestedType[er].options&&g.nestedType[er].options.mapEntry&&en.setOption("map_entry",!0);if(g.enumType)for(er=0;er<g.enumType.length;++er)en.add(ei.fromDescriptor(g.enumType[er],ee,!0));if(g.extensionRange&&g.extensionRange.length)for(er=0,en.extensions=[];er<g.extensionRange.length;++er)en.extensions.push([g.extensionRange[er].start,g.extensionRange[er].end]);if(g.reservedRange&&g.reservedRange.length||g.reservedName&&g.reservedName.length){if(en.reserved=[],g.reservedRange)for(er=0;er<g.reservedRange.length;++er)en.reserved.push([g.reservedRange[er].start,g.reservedRange[er].end]);if(g.reservedName)for(er=0;er<g.reservedName.length;++er)en.reserved.push(g.reservedName[er])}return en},es.prototype.toDescriptor=function(g){var ee,et,er=$.DescriptorProto.create({name:this.name});for(et=0;et<this.fieldsArray.length;++et)if(er.field.push(ee=this._fieldsArray[et].toDescriptor(g)),this._fieldsArray[et]instanceof eu){var en=e_(this._fieldsArray[et].keyType,this._fieldsArray[et].resolvedKeyType,!1),eh=e_(this._fieldsArray[et].type,this._fieldsArray[et].resolvedType,!1),ep=11===eh||14===eh?this._fieldsArray[et].resolvedType&&eR(this.parent,this._fieldsArray[et].resolvedType)||this._fieldsArray[et].type:void 0;er.nestedType.push($.DescriptorProto.create({name:ee.typeName,field:[$.FieldDescriptorProto.create({name:"key",number:1,label:1,type:en}),$.FieldDescriptorProto.create({name:"value",number:2,label:1,type:eh,typeName:ep})],options:$.MessageOptions.create({mapEntry:!0})}))}for(et=0;et<this.oneofsArray.length;++et)er.oneofDecl.push(this._oneofsArray[et].toDescriptor());for(et=0;et<this.nestedArray.length;++et)this._nestedArray[et]instanceof eo?er.field.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof es?er.nestedType.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof ei&&er.enumType.push(this._nestedArray[et].toDescriptor());if(this.extensions)for(et=0;et<this.extensions.length;++et)er.extensionRange.push($.DescriptorProto.ExtensionRange.create({start:this.extensions[et][0],end:this.extensions[et][1]}));if(this.reserved)for(et=0;et<this.reserved.length;++et)"string"==typeof this.reserved[et]?er.reservedName.push(this.reserved[et]):er.reservedRange.push($.DescriptorProto.ReservedRange.create({start:this.reserved[et][0],end:this.reserved[et][1]}));return er.options=eN(this.options,$.MessageOptions),er};var ey=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;eo.fromDescriptor=function(g,ee,et){if("number"==typeof g.length&&(g=$.DescriptorProto.decode(g)),"number"!=typeof g.number)throw Error("missing field id");switch(er=g.typeName&&g.typeName.length?g.typeName:ew(g.type),g.label){case 1:en=void 0;break;case 2:en="required";break;case 3:en="repeated";break;default:throw Error("illegal label: "+g.label)}var er,en,ei=g.extendee;void 0!==g.extendee&&(ei=ei.length?ei:void 0);var es=new eo(g.name.length?g.name:"field"+g.number,g.number,er,en,ei);if(et||(es._edition=ee),es.options=eO(g.options,$.FieldOptions),g.proto3_optional&&(es.options.proto3_optional=!0),g.defaultValue&&g.defaultValue.length){var eu=g.defaultValue;switch(eu){case"true":case"TRUE":eu=!0;break;case"false":case"FALSE":eu=!1;break;default:ey.exec(eu)&&(eu=parseInt(eu))}es.setOption("default",eu)}return eC(g.type)&&("proto3"===ee?g.options&&!g.options.packed&&es.setOption("packed",!1):(!ee||"proto2"===ee)&&g.options&&g.options.packed&&es.setOption("packed",!0)),es},eo.prototype.toDescriptor=function(g){var ee=$.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)ee.type=11,ee.typeName=et.util.ucFirst(this.name),ee.label=3;else{switch(ee.type=e_(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:ee.typeName=this.resolvedType?eR(this.parent,this.resolvedType):this.type}"repeated"===this.rule?ee.label=3:this.required&&"proto2"===g?ee.label=2:ee.label=1}if(ee.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(ee.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(ee.options=eN(this.options,$.FieldOptions),null!=this.options.default&&(ee.defaultValue=String(this.options.default)),this.options.proto3_optional&&(ee.proto3_optional=!0)),"proto3"===g?this.packed||((ee.options||(ee.options=$.FieldOptions.create())).packed=!1):(!g||"proto2"===g)&&this.packed&&((ee.options||(ee.options=$.FieldOptions.create())).packed=!0),ee};var ev=0;ei.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.EnumDescriptorProto.decode(g));var er={};if(g.value)for(var en=0;en<g.value.length;++en){var es=g.value[en].name,eo=g.value[en].number||0;er[es&&es.length?es:"NAME"+eo]=eo}var eu=new ei(g.name&&g.name.length?g.name:"Enum"+ev++,er,eO(g.options,$.EnumOptions));return et||(eu._edition=ee),eu},ei.prototype.toDescriptor=function(){for(var g=[],ee=0,et=Object.keys(this.values);ee<et.length;++ee)g.push($.EnumValueDescriptorProto.create({name:et[ee],number:this.values[et[ee]]}));return $.EnumDescriptorProto.create({name:this.name,value:g,options:eN(this.options,$.EnumOptions)})};var eS=0;eh.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.OneofDescriptorProto.decode(g)),new eh(g.name&&g.name.length?g.name:"oneof"+eS++)},eh.prototype.toDescriptor=function(){return $.OneofDescriptorProto.create({name:this.name})};var eT=0;ep.fromDescriptor=function(g,ee,et){"number"==typeof g.length&&(g=$.ServiceDescriptorProto.decode(g));var er=new ep(g.name&&g.name.length?g.name:"Service"+eT++,eO(g.options,$.ServiceOptions));if(et||(er._edition=ee),g.method)for(var en=0;en<g.method.length;++en)er.add(ef.fromDescriptor(g.method[en]));return er},ep.prototype.toDescriptor=function(){for(var g=[],ee=0;ee<this.methodsArray.length;++ee)g.push(this._methodsArray[ee].toDescriptor());return $.ServiceDescriptorProto.create({name:this.name,method:g,options:eN(this.options,$.ServiceOptions)})};var eE=0;function ew(g){switch(g){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+g)}function eC(g){switch(g){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function e_(g,$,ee){switch(g){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if($ instanceof ei)return 14;if($ instanceof es)return ee?10:11;throw Error("illegal type: "+g)}function eI(g,$){for(var ee,et,er={},en=0;en<$.fieldsArray.length;++en)if("uninterpretedOption"!==(et=(ee=$._fieldsArray[en]).name)&&Object.prototype.hasOwnProperty.call(g,et)){var eo=eD(et);ee.resolvedType instanceof es?er[eo]=eI(g[et],ee.resolvedType):ee.resolvedType instanceof ei?er[eo]=ee.resolvedType.valuesById[g[et]]:er[eo]=g[et]}return er}function eO(g,$){if(g)return eI($.toObject(g),$)}function eA(g,$){for(var ee={},er=Object.keys(g),en=0;en<er.length;++en){var ei=er[en],eo=et.util.camelCase(ei);if(Object.prototype.hasOwnProperty.call($.fields,eo)){var eu=$.fields[eo];eu.resolvedType instanceof es?ee[eo]=eA(g[ei],eu.resolvedType):ee[eo]=g[ei],eu.repeated&&!Array.isArray(ee[eo])&&(ee[eo]=[ee[eo]])}}return ee}function eN(g,$){if(g)return $.fromObject(eA(g,$))}function eR(g,$){var ee=g.fullName.split("."),et=$.fullName.split("."),ei=0,es=0,eo=et.length-1;if(!(g instanceof en)&&$ instanceof er)for(;ei<ee.length&&es<eo&&ee[ei]===et[es];){var eu=$.lookup(ee[ei++],!0);if(null!==eu&&eu!==$)break;++es}else for(;ei<ee.length&&es<eo&&ee[ei]===et[es];++ei,++es);return et.slice(es).join(".")}function eD(g){return g.substring(0,1)+g.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(g,$){return"_"+$.toLowerCase()})}function ek(g){if("editions"===g.syntax){if(g.edition===$.Edition.EDITION_2023)return"2023";throw Error("Unsupported edition "+g.edition)}return"proto3"===g.syntax?"proto3":"proto2"}function ex(g,ee){if(g){if("proto2"===g||"proto3"===g)ee.syntax=g;else if(ee.syntax="editions","2023"===g)ee.edition=$.Edition.EDITION_2023;else throw Error("Unsupported edition "+g)}}ef.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.MethodDescriptorProto.decode(g)),new ef(g.name&&g.name.length?g.name:"Method"+eE++,"rpc",g.inputType,g.outputType,!!g.clientStreaming,!!g.serverStreaming,eO(g.options,$.MethodOptions))},ef.prototype.toDescriptor=function(){return $.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:eN(this.options,$.MethodOptions)})}},79151:(g,$,ee)=>{"use strict";g.exports=ee(82146)},6410:g=>{"use strict";g.exports=et;var $,ee=/\/|\./;function et(g,$){ee.test(g)||(g="google/protobuf/"+g+".proto",$={nested:{google:{nested:{protobuf:{nested:$}}}}}),et[g]=$}et("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),et("duration",{Duration:$={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),et("timestamp",{Timestamp:$}),et("empty",{Empty:{fields:{}}}),et("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),et("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),et("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),et.get=function(g){return et[g]||null}},30126:(g,$,ee)=>{"use strict";var et=$,er=ee(20459),en=ee(76012);function ei(g,$,ee,et){var en=!1;if($.resolvedType){if($.resolvedType instanceof er){g("switch(d%s){",et);for(var ei=$.resolvedType.values,es=Object.keys(ei),eo=0;eo<es.length;++eo)ei[es[eo]]!==$.typeDefault||en||(g("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',et,et,et),$.repeated||g("break"),en=!0),g("case%j:",es[eo])("case %i:",ei[es[eo]])("m%s=%j",et,ei[es[eo]])("break");g("}")}else g('if(typeof d%s!=="object")',et)("throw TypeError(%j)",$.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",et,ee,et)}else{var eu=!1;switch($.type){case"double":case"float":g("m%s=Number(d%s)",et,et);break;case"uint32":case"fixed32":g("m%s=d%s>>>0",et,et);break;case"int32":case"sint32":case"sfixed32":g("m%s=d%s|0",et,et);break;case"uint64":eu=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",et,et,eu)('else if(typeof d%s==="string")',et)("m%s=parseInt(d%s,10)",et,et)('else if(typeof d%s==="number")',et)("m%s=d%s",et,et)('else if(typeof d%s==="object")',et)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",et,et,et,eu?"true":"");break;case"bytes":g('if(typeof d%s==="string")',et)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",et,et,et)("else if(d%s.length >= 0)",et)("m%s=d%s",et,et);break;case"string":g("m%s=String(d%s)",et,et);break;case"bool":g("m%s=Boolean(d%s)",et,et)}}return g}function es(g,$,ee,et){if($.resolvedType)$.resolvedType instanceof er?g("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",et,ee,et,et,ee,et,et):g("d%s=types[%i].toObject(m%s,o)",et,ee,et);else{var en=!1;switch($.type){case"double":case"float":g("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",et,et,et,et);break;case"uint64":en=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g('if(typeof m%s==="number")',et)("d%s=o.longs===String?String(m%s):m%s",et,et,et)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",et,et,et,et,en?"true":"",et);break;case"bytes":g("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",et,et,et,et,et);break;default:g("d%s=m%s",et,et)}}return g}et.fromObject=function(g){var $=g.fieldsArray,ee=en.codegen(["d"],g.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!$.length)return ee("return new this.ctor");ee("var m=new this.ctor");for(var et=0;et<$.length;++et){var es=$[et].resolve(),eo=en.safeProp(es.name);es.map?(ee("if(d%s){",eo)('if(typeof d%s!=="object")',eo)("throw TypeError(%j)",es.fullName+": object expected")("m%s={}",eo)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",eo),ei(ee,es,et,eo+"[ks[i]]")("}")("}")):es.repeated?(ee("if(d%s){",eo)("if(!Array.isArray(d%s))",eo)("throw TypeError(%j)",es.fullName+": array expected")("m%s=[]",eo)("for(var i=0;i<d%s.length;++i){",eo),ei(ee,es,et,eo+"[i]")("}")("}")):(es.resolvedType instanceof er||ee("if(d%s!=null){",eo),ei(ee,es,et,eo),es.resolvedType instanceof er||ee("}"))}return ee("return m")},et.toObject=function(g){var $=g.fieldsArray.slice().sort(en.compareFieldsById);if(!$.length)return en.codegen()("return {}");for(var ee=en.codegen(["m","o"],g.name+"$toObject")("if(!o)")("o={}")("var d={}"),et=[],ei=[],eo=[],eu=0;eu<$.length;++eu)$[eu].partOf||($[eu].resolve().repeated?et:$[eu].map?ei:eo).push($[eu]);if(et.length){for(ee("if(o.arrays||o.defaults){"),eu=0;eu<et.length;++eu)ee("d%s=[]",en.safeProp(et[eu].name));ee("}")}if(ei.length){for(ee("if(o.objects||o.defaults){"),eu=0;eu<ei.length;++eu)ee("d%s={}",en.safeProp(ei[eu].name));ee("}")}if(eo.length){for(ee("if(o.defaults){"),eu=0;eu<eo.length;++eu){var eh=eo[eu],ep=en.safeProp(eh.name);if(eh.resolvedType instanceof er)ee("d%s=o.enums===String?%j:%j",ep,eh.resolvedType.valuesById[eh.typeDefault],eh.typeDefault);else if(eh.long)ee("if(util.Long){")("var n=new util.Long(%i,%i,%j)",eh.typeDefault.low,eh.typeDefault.high,eh.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ep)("}else")("d%s=o.longs===String?%j:%i",ep,eh.typeDefault.toString(),eh.typeDefault.toNumber());else if(eh.bytes){var ef="["+Array.prototype.slice.call(eh.typeDefault).join(",")+"]";ee("if(o.bytes===String)d%s=%j",ep,String.fromCharCode.apply(String,eh.typeDefault))("else{")("d%s=%s",ep,ef)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ep,ep)("}")}else ee("d%s=%j",ep,eh.typeDefault)}ee("}")}var eg=!1;for(eu=0;eu<$.length;++eu){var eh=$[eu],em=g._fieldsArray.indexOf(eh),ep=en.safeProp(eh.name);eh.map?(eg||(eg=!0,ee("var ks2")),ee("if(m%s&&(ks2=Object.keys(m%s)).length){",ep,ep)("d%s={}",ep)("for(var j=0;j<ks2.length;++j){"),es(ee,eh,em,ep+"[ks2[j]]")("}")):eh.repeated?(ee("if(m%s&&m%s.length){",ep,ep)("d%s=[]",ep)("for(var j=0;j<m%s.length;++j){",ep),es(ee,eh,em,ep+"[j]")("}")):(ee("if(m%s!=null&&m.hasOwnProperty(%j)){",ep,eh.name),es(ee,eh,em,ep),eh.partOf&&ee("if(o.oneofs)")("d%s=%j",en.safeProp(eh.partOf.name),eh.name)),ee("}")}return ee("return d")}},24839:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(20459),er=ee(14550),en=ee(76012);function ei(g){return"missing required '"+g.name+"'"}function es(g){for(var $=en.codegen(["r","l","e"],g.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(g.fieldsArray.filter(function(g){return g.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),ee=0;ee<g.fieldsArray.length;++ee){var es=g._fieldsArray[ee].resolve(),eo=es.resolvedType instanceof et?"int32":es.type,eu="m"+en.safeProp(es.name);$("case %i: {",es.id),es.map?($("if(%s===util.emptyObject)",eu)("%s={}",eu)("var c2 = r.uint32()+r.pos"),void 0!==er.defaults[es.keyType]?$("k=%j",er.defaults[es.keyType]):$("k=null"),void 0!==er.defaults[eo]?$("value=%j",er.defaults[eo]):$("value=null"),$("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",es.keyType)("case 2:"),void 0===er.basic[eo]?$("value=types[%i].decode(r,r.uint32())",ee):$("value=r.%s()",eo),$("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),$(void 0!==er.long[es.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",eu)):es.repeated?($("if(!(%s&&%s.length))",eu,eu)("%s=[]",eu),void 0!==er.packed[eo]&&$("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",eu,eo)("}else"),void 0===er.basic[eo]?$(es.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",eu,ee):$("%s.push(r.%s())",eu,eo)):void 0===er.basic[eo]?$(es.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",eu,ee):$("%s=r.%s()",eu,eo),$("break")("}")}for($("default:")("r.skipType(t&7)")("break")("}")("}"),ee=0;ee<g._fieldsArray.length;++ee){var eh=g._fieldsArray[ee];eh.required&&$("if(!m.hasOwnProperty(%j))",eh.name)("throw util.ProtocolError(%j,{instance:m})",ei(eh))}return $("return m")}},59490:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(20459),er=ee(14550),en=ee(76012);function ei(g,$,ee,et){return $.delimited?g("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",ee,et,($.id<<3|3)>>>0,($.id<<3|4)>>>0):g("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",ee,et,($.id<<3|2)>>>0)}function es(g){for(var $,ee,es=en.codegen(["m","w"],g.name+"$encode")("if(!w)")("w=Writer.create()"),eo=g.fieldsArray.slice().sort(en.compareFieldsById),$=0;$<eo.length;++$){var eu=eo[$].resolve(),eh=g._fieldsArray.indexOf(eu),ep=eu.resolvedType instanceof et?"int32":eu.type,ef=er.basic[ep];ee="m"+en.safeProp(eu.name),eu.map?(es("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ee,eu.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ee)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(eu.id<<3|2)>>>0,8|er.mapKey[eu.keyType],eu.keyType),void 0===ef?es("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",eh,ee):es(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ef,ep,ee),es("}")("}")):eu.repeated?(es("if(%s!=null&&%s.length){",ee,ee),eu.packed&&void 0!==er.packed[ep]?es("w.uint32(%i).fork()",(eu.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ee)("w.%s(%s[i])",ep,ee)("w.ldelim()"):(es("for(var i=0;i<%s.length;++i)",ee),void 0===ef?ei(es,eu,eh,ee+"[i]"):es("w.uint32(%i).%s(%s[i])",(eu.id<<3|ef)>>>0,ep,ee)),es("}")):(eu.optional&&es("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ee,eu.name),void 0===ef?ei(es,eu,eh,ee):es("w.uint32(%i).%s(%s)",(eu.id<<3|ef)>>>0,ep,ee))}return es("return w")}},20459:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(50536);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="Enum";var er=ee(35146),en=ee(76012);function ei(g,$,ee,er,en,ei){if(et.call(this,g,ee),$&&"object"!=typeof $)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=er,this.comments=en||{},this.valuesOptions=ei,this._valuesFeatures={},this.reserved=void 0,$)for(var es=Object.keys($),eo=0;eo<es.length;++eo)"number"==typeof $[es[eo]]&&(this.valuesById[this.values[es[eo]]=$[es[eo]]]=es[eo])}ei.prototype._resolveFeatures=function(g){return g=this._edition||g,et.prototype._resolveFeatures.call(this,g),Object.keys(this.values).forEach(g=>{var $=Object.assign({},this._features);this._valuesFeatures[g]=Object.assign($,this.valuesOptions&&this.valuesOptions[g]&&this.valuesOptions[g].features)}),this},ei.fromJSON=function(g,$){var ee=new ei(g,$.values,$.options,$.comment,$.comments);return ee.reserved=$.reserved,$.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",$?this.comment:void 0,"comments",$?this.comments:void 0])},ei.prototype.add=function(g,$,ee,et){if(!en.isString(g))throw TypeError("name must be a string");if(!en.isInteger($))throw TypeError("id must be an integer");if(void 0!==this.values[g])throw Error("duplicate name '"+g+"' in "+this);if(this.isReservedId($))throw Error("id "+$+" is reserved in "+this);if(this.isReservedName(g))throw Error("name '"+g+"' is reserved in "+this);if(void 0!==this.valuesById[$]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+$+" in "+this);this.values[g]=$}else this.valuesById[this.values[g]=$]=g;return et&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[g]=et||null),this.comments[g]=ee||null,this},ei.prototype.remove=function(g){if(!en.isString(g))throw TypeError("name must be a string");var $=this.values[g];if(null==$)throw Error("name '"+g+"' does not exist in "+this);return delete this.valuesById[$],delete this.values[g],delete this.comments[g],this.valuesOptions&&delete this.valuesOptions[g],this},ei.prototype.isReservedId=function(g){return er.isReservedId(this.reserved,g)},ei.prototype.isReservedName=function(g){return er.isReservedName(this.reserved,g)}},15765:(g,$,ee)=>{"use strict";g.exports=eu;var et,er=ee(50536);((eu.prototype=Object.create(er.prototype)).constructor=eu).className="Field";var en=ee(20459),ei=ee(14550),es=ee(76012),eo=/^required|optional|repeated$/;function eu(g,$,ee,et,en,eu,eh){if(es.isObject(et)?(eh=en,eu=et,et=en=void 0):es.isObject(en)&&(eh=eu,eu=en,en=void 0),er.call(this,g,eu),!es.isInteger($)||$<0)throw TypeError("id must be a non-negative integer");if(!es.isString(ee))throw TypeError("type must be a string");if(void 0!==et&&!eo.test(et=et.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==en&&!es.isString(en))throw TypeError("extend must be a string");"proto3_optional"===et&&(et="optional"),this.rule=et&&"optional"!==et?et:void 0,this.type=ee,this.id=$,this.extend=en||void 0,this.repeated="repeated"===et,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!es.Long&&void 0!==ei.long[ee],this.bytes="bytes"===ee,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=eh}eu.fromJSON=function(g,$){var ee=new eu(g,$.id,$.type,$.rule,$.extend,$.options,$.comment);return $.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},Object.defineProperty(eu.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(eu.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(eu.prototype,"delimited",{get:function(){return this.resolvedType instanceof et&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(eu.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(eu.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),eu.prototype.setOption=function(g,$,ee){return er.prototype.setOption.call(this,g,$,ee)},eu.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return es.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},eu.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=ei.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof et?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof en&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof en||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=es.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var g;es.base64.test(this.typeDefault)?es.base64.decode(this.typeDefault,g=es.newBuffer(es.base64.length(this.typeDefault)),0):es.utf8.write(this.typeDefault,g=es.newBuffer(es.utf8.length(this.typeDefault)),0),this.typeDefault=g}return this.map?this.defaultValue=es.emptyObject:this.repeated?this.defaultValue=es.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof et&&(this.parent.ctor.prototype[this.name]=this.defaultValue),er.prototype.resolve.call(this)},eu.prototype._inferLegacyProtoFeatures=function(g){if("proto2"!==g&&"proto3"!==g)return{};var $={};if("required"===this.rule&&($.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===ei.defaults[this.type]){var ee=this.parent.get(this.type.split(".").pop());ee&&ee instanceof et&&ee.group&&($.message_encoding="DELIMITED")}return!0===this.getOption("packed")?$.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&($.repeated_field_encoding="EXPANDED"),$},eu.prototype._resolveFeatures=function(g){return er.prototype._resolveFeatures.call(this,this._edition||g)},eu.d=function(g,$,ee,et){return"function"==typeof $?$=es.decorateType($).name:$&&"object"==typeof $&&($=es.decorateEnum($).name),function(er,en){es.decorateType(er.constructor).add(new eu(en,g,$,ee,{default:et}))}},eu._configure=function(g){et=g}},85030:(g,$,ee)=>{"use strict";var et=g.exports=ee(31694);function er(g,$,ee){return"function"==typeof $?(ee=$,$=new et.Root):$||($=new et.Root),$.load(g,ee)}function en(g,$){return $||($=new et.Root),$.loadSync(g)}et.build="light",et.load=er,et.loadSync=en,et.encoder=ee(59490),et.decoder=ee(24839),et.verifier=ee(98093),et.converter=ee(30126),et.ReflectionObject=ee(50536),et.Namespace=ee(35146),et.Root=ee(16089),et.Enum=ee(20459),et.Type=ee(81234),et.Field=ee(15765),et.OneOf=ee(49142),et.MapField=ee(11244),et.Service=ee(84399),et.Method=ee(88290),et.Message=ee(96012),et.wrappers=ee(23631),et.types=ee(14550),et.util=ee(76012),et.ReflectionObject._configure(et.Root),et.Namespace._configure(et.Type,et.Service,et.Enum),et.Root._configure(et.Type),et.Field._configure(et.Type)},31694:(g,$,ee)=>{"use strict";var et=$;function er(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}et.build="minimal",et.Writer=ee(2131),et.BufferWriter=ee(7462),et.Reader=ee(55868),et.BufferReader=ee(77001),et.util=ee(67481),et.rpc=ee(45002),et.roots=ee(28154),et.configure=er,er()},82146:(g,$,ee)=>{"use strict";var et=g.exports=ee(85030);et.build="full",et.tokenize=ee(23356),et.parse=ee(67258),et.common=ee(6410),et.Root._configure(et.Type,et.parse,et.common)},11244:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(15765);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="MapField";var er=ee(14550),en=ee(76012);function ei(g,$,ee,er,ei,es){if(et.call(this,g,$,er,void 0,void 0,ei,es),!en.isString(ee))throw TypeError("keyType must be a string");this.keyType=ee,this.resolvedKeyType=null,this.map=!0}ei.fromJSON=function(g,$){return new ei(g,$.id,$.keyType,$.type,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},ei.prototype.resolve=function(){if(this.resolved)return this;if(void 0===er.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return et.prototype.resolve.call(this)},ei.d=function(g,$,ee){return"function"==typeof ee?ee=en.decorateType(ee).name:ee&&"object"==typeof ee&&(ee=en.decorateEnum(ee).name),function(et,er){en.decorateType(et.constructor).add(new ei(er,g,$,ee))}}},96012:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(67481);function er(g){if(g)for(var $=Object.keys(g),ee=0;ee<$.length;++ee)this[$[ee]]=g[$[ee]]}er.create=function(g){return this.$type.create(g)},er.encode=function(g,$){return this.$type.encode(g,$)},er.encodeDelimited=function(g,$){return this.$type.encodeDelimited(g,$)},er.decode=function(g){return this.$type.decode(g)},er.decodeDelimited=function(g){return this.$type.decodeDelimited(g)},er.verify=function(g){return this.$type.verify(g)},er.fromObject=function(g){return this.$type.fromObject(g)},er.toObject=function(g,$){return this.$type.toObject(g,$)},er.prototype.toJSON=function(){return this.$type.toObject(this,et.toJSONOptions)}},88290:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(50536);((en.prototype=Object.create(et.prototype)).constructor=en).className="Method";var er=ee(76012);function en(g,$,ee,en,ei,es,eo,eu,eh){if(er.isObject(ei)?(eo=ei,ei=es=void 0):er.isObject(es)&&(eo=es,es=void 0),!(void 0===$||er.isString($)))throw TypeError("type must be a string");if(!er.isString(ee))throw TypeError("requestType must be a string");if(!er.isString(en))throw TypeError("responseType must be a string");et.call(this,g,eo),this.type=$||"rpc",this.requestType=ee,this.requestStream=!!ei||void 0,this.responseType=en,this.responseStream=!!es||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=eu,this.parsedOptions=eh}en.fromJSON=function(g,$){return new en(g,$.type,$.requestType,$.responseType,$.requestStream,$.responseStream,$.options,$.comment,$.parsedOptions)},en.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return er.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",$?this.comment:void 0,"parsedOptions",this.parsedOptions])},en.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),et.prototype.resolve.call(this))}},35146:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(50536);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Namespace";var es=ee(15765),eo=ee(76012),eu=ee(49142);function eh(g,$){if(g&&g.length){for(var ee={},et=0;et<g.length;++et)ee[g[et].name]=g[et].toJSON($);return ee}}function ep(g,$){ei.call(this,g,$),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function ef(g){g._nestedArray=null,g._lookupCache={};for(var $=g;$=$.parent;)$._lookupCache={};return g}ep.fromJSON=function(g,$){return new ep(g,$.options).addJSON($.nested)},ep.arrayToJSON=eh,ep.isReservedId=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if("string"!=typeof g[ee]&&g[ee][0]<=$&&g[ee][1]>$)return!0}return!1},ep.isReservedName=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if(g[ee]===$)return!0}return!1},Object.defineProperty(ep.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=eo.toArray(this.nested))}}),ep.prototype.toJSON=function(g){return eo.toObject(["options",this.options,"nested",eh(this.nestedArray,g)])},ep.prototype.addJSON=function(g){var $=this;if(g)for(var ee,ei=Object.keys(g),eo=0;eo<ei.length;++eo)ee=g[ei[eo]],$.add((void 0!==ee.fields?et.fromJSON:void 0!==ee.values?en.fromJSON:void 0!==ee.methods?er.fromJSON:void 0!==ee.id?es.fromJSON:ep.fromJSON)(ei[eo],ee));return this},ep.prototype.get=function(g){return this.nested&&this.nested[g]||null},ep.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof en)return this.nested[g].values;throw Error("no such enum: "+g)},ep.prototype.add=function(g){if(!(g instanceof es&&void 0!==g.extend||g instanceof et||g instanceof eu||g instanceof en||g instanceof er||g instanceof ep))throw TypeError("object must be a valid nested object");if(this.nested){var $=this.get(g.name);if($){if($ instanceof ep&&g instanceof ep&&!($ instanceof et||$ instanceof er)){for(var ee=$.nestedArray,ei=0;ei<ee.length;++ei)g.add(ee[ei]);this.remove($),this.nested||(this.nested={}),g.setOptions($.options,!0)}else throw Error("duplicate name '"+g.name+"' in "+this)}}else this.nested={};this.nested[g.name]=g,this instanceof et||this instanceof er||this instanceof en||this instanceof es||g._edition||(g._edition=g._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var eo=this;eo=eo.parent;)eo._needsRecursiveFeatureResolution=!0,eo._needsRecursiveResolve=!0;return g.onAdd(this),ef(this)},ep.prototype.remove=function(g){if(!(g instanceof ei))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=void 0),g.onRemove(this),ef(this)},ep.prototype.define=function(g,$){if(eo.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&""===g[0])throw Error("path must be relative");for(var ee=this;g.length>0;){var et=g.shift();if(ee.nested&&ee.nested[et]){if(!((ee=ee.nested[et])instanceof ep))throw Error("path conflicts with non-namespace objects")}else ee.add(ee=new ep(et))}return $&&ee.addJSON($),ee},ep.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var g=this.nestedArray,$=0;for(this.resolve();$<g.length;)g[$]instanceof ep?g[$++].resolveAll():g[$++].resolve();return this._needsRecursiveResolve=!1,this},ep.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(this._needsRecursiveFeatureResolution=!1,g=this._edition||g,ei.prototype._resolveFeaturesRecursive.call(this,g),this.nestedArray.forEach($=>{$._resolveFeaturesRecursive(g)})),this},ep.prototype.lookup=function(g,$,ee){if("boolean"==typeof $?(ee=$,$=void 0):$&&!Array.isArray($)&&($=[$]),eo.isString(g)&&g.length){if("."===g)return this.root;g=g.split(".")}else if(!g.length)return this;var et=g.join(".");if(""===g[0])return this.root.lookup(g.slice(1),$);var er=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+et];if(er&&(!$||$.indexOf(er.constructor)>-1)||(er=this._lookupImpl(g,et))&&(!$||$.indexOf(er.constructor)>-1))return er;if(ee)return null;for(var en=this;en.parent;){if((er=en.parent._lookupImpl(g,et))&&(!$||$.indexOf(er.constructor)>-1))return er;en=en.parent}return null},ep.prototype._lookupImpl=function(g,$){if(Object.prototype.hasOwnProperty.call(this._lookupCache,$))return this._lookupCache[$];var ee=this.get(g[0]),et=null;if(ee)1===g.length?et=ee:ee instanceof ep&&(g=g.slice(1),et=ee._lookupImpl(g,g.join(".")));else for(var er=0;er<this.nestedArray.length;++er)this._nestedArray[er]instanceof ep&&(ee=this._nestedArray[er]._lookupImpl(g,$))&&(et=ee);return this._lookupCache[$]=et,et},ep.prototype.lookupType=function(g){var $=this.lookup(g,[et]);if(!$)throw Error("no such type: "+g);return $},ep.prototype.lookupEnum=function(g){var $=this.lookup(g,[en]);if(!$)throw Error("no such Enum '"+g+"' in "+this);return $},ep.prototype.lookupTypeOrEnum=function(g){var $=this.lookup(g,[et,en]);if(!$)throw Error("no such Type or Enum '"+g+"' in "+this);return $},ep.prototype.lookupService=function(g){var $=this.lookup(g,[er]);if(!$)throw Error("no such Service '"+g+"' in "+this);return $},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},50536:(g,$,ee)=>{"use strict";g.exports=eu,eu.className="ReflectionObject";let et=ee(49142);var er,en=ee(76012),ei={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},es={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},eo={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function eu(g,$){if(!en.isString(g))throw TypeError("name must be a string");if($&&!en.isObject($))throw TypeError("options must be an object");this.options=$,this.parsedOptions=null,this.name=g,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(eu.prototype,{root:{get:function(){for(var g=this;null!==g.parent;)g=g.parent;return g}},fullName:{get:function(){for(var g=[this.name],$=this.parent;$;)g.unshift($.name),$=$.parent;return g.join(".")}}}),eu.prototype.toJSON=function(){throw Error()},eu.prototype.onAdd=function(g){this.parent&&this.parent!==g&&this.parent.remove(this),this.parent=g,this.resolved=!1;var $=g.root;$ instanceof er&&$._handleAdd(this)},eu.prototype.onRemove=function(g){var $=g.root;$ instanceof er&&$._handleRemove(this),this.parent=null,this.resolved=!1},eu.prototype.resolve=function(){return this.resolved||this.root instanceof er&&(this.resolved=!0),this},eu.prototype._resolveFeaturesRecursive=function(g){return this._resolveFeatures(this._edition||g)},eu.prototype._resolveFeatures=function(g){if(!this._featuresResolved){var $={};if(!g)throw Error("Unknown edition for "+this.fullName);var ee=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(g));if(this._edition){if("proto2"===g)$=Object.assign({},es);else if("proto3"===g)$=Object.assign({},eo);else if("2023"===g)$=Object.assign({},ei);else throw Error("Unknown edition: "+g);this._features=Object.assign($,ee||{}),this._featuresResolved=!0;return}if(this.partOf instanceof et){var er=Object.assign({},this.partOf._features);this._features=Object.assign(er,ee||{})}else if(this.declaringField);else if(this.parent){var en=Object.assign({},this.parent._features);this._features=Object.assign(en,ee||{})}else throw Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},eu.prototype._inferLegacyProtoFeatures=function(){return{}},eu.prototype.getOption=function(g){if(this.options)return this.options[g]},eu.prototype.setOption=function(g,$,ee){return this.options||(this.options={}),/^features\./.test(g)?en.setProperty(this.options,g,$,ee):ee&&void 0!==this.options[g]||(this.getOption(g)!==$&&(this.resolved=!1),this.options[g]=$),this},eu.prototype.setParsedOption=function(g,$,ee){this.parsedOptions||(this.parsedOptions=[]);var et=this.parsedOptions;if(ee){var er=et.find(function($){return Object.prototype.hasOwnProperty.call($,g)});if(er){var ei=er[g];en.setProperty(ei,ee,$)}else(er={})[g]=en.setProperty({},ee,$),et.push(er)}else{var es={};es[g]=$,et.push(es)}return this},eu.prototype.setOptions=function(g,$){if(g)for(var ee=Object.keys(g),et=0;et<ee.length;++et)this.setOption(ee[et],g[ee[et]],$);return this},eu.prototype.toString=function(){var g=this.constructor.className,$=this.fullName;return $.length?g+" "+$:g},eu.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},eu._configure=function(g){er=g}},49142:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(50536);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="OneOf";var er=ee(15765),en=ee(76012);function ei(g,$,ee,er){if(Array.isArray($)||(ee=$,$=void 0),et.call(this,g,ee),!(void 0===$||Array.isArray($)))throw TypeError("fieldNames must be an Array");this.oneof=$||[],this.fieldsArray=[],this.comment=er}function es(g){if(g.parent)for(var $=0;$<g.fieldsArray.length;++$)g.fieldsArray[$].parent||g.parent.add(g.fieldsArray[$])}ei.fromJSON=function(g,$){return new ei(g,$.oneof,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"oneof",this.oneof,"comment",$?this.comment:void 0])},ei.prototype.add=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");return g.parent&&g.parent!==this.parent&&g.parent.remove(g),this.oneof.push(g.name),this.fieldsArray.push(g),g.partOf=this,es(this),this},ei.prototype.remove=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");var $=this.fieldsArray.indexOf(g);if($<0)throw Error(g+" is not a member of "+this);return this.fieldsArray.splice($,1),($=this.oneof.indexOf(g.name))>-1&&this.oneof.splice($,1),g.partOf=null,this},ei.prototype.onAdd=function(g){et.prototype.onAdd.call(this,g);for(var $=this,ee=0;ee<this.oneof.length;++ee){var er=g.get(this.oneof[ee]);er&&!er.partOf&&(er.partOf=$,$.fieldsArray.push(er))}es(this)},ei.prototype.onRemove=function(g){for(var $,ee=0;ee<this.fieldsArray.length;++ee)($=this.fieldsArray[ee]).parent&&$.parent.remove($);et.prototype.onRemove.call(this,g)},Object.defineProperty(ei.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var g=this.fieldsArray[0];return null!=g.options&&!0===g.options.proto3_optional}}),ei.d=function(){for(var g=Array(arguments.length),$=0;$<arguments.length;)g[$]=arguments[$++];return function($,ee){en.decorateType($.constructor).add(new ei(ee,g)),Object.defineProperty($,ee,{get:en.oneOfGetter(g),set:en.oneOfSetter(g)})}}},67258:(g,$,ee)=>{"use strict";g.exports=eO,eO.filename=null,eO.defaults={keepCase:!1};var et=ee(23356),er=ee(16089),en=ee(81234),ei=ee(15765),es=ee(11244),eo=ee(49142),eu=ee(20459),eh=ee(84399),ep=ee(88290),ef=ee(50536),eg=ee(14550),em=ee(76012),ey=/^[1-9][0-9]*$/,ev=/^-?[1-9][0-9]*$/,eS=/^0[x][0-9a-fA-F]+$/,eT=/^-?0[x][0-9a-fA-F]+$/,eE=/^0[0-7]+$/,ew=/^-?0[0-7]+$/,eC=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,e_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,eI=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function eO(g,$,ee){$ instanceof er||(ee=$,$=new er),ee||(ee=eO.defaults);var eA,eN,eR,eD,ek=ee.preferTrailingComment||!1,ex=et(g,ee.alternateCommentMode||!1),eP=ex.next,eM=ex.push,eL=ex.peek,eF=ex.skip,eB=ex.cmnt,ej=!0,eU="proto2",eV=$,eq=[],ez={},eG=ee.keepCase?function(g){return g}:em.camelCase;function e$(){eq.forEach(g=>{g._edition=eU,Object.keys(ez).forEach($=>{void 0===g.getOption($)&&g.setOption($,ez[$],!0)})})}function eK(g,$,ee){var et=eO.filename;return ee||(eO.filename=null),Error("illegal "+($||"token")+" '"+g+"' ("+(et?et+", ":"")+"line "+ex.line+")")}function eW(){var g,$=[];do{if('"'!==(g=eP())&&"'"!==g)throw eK(g);$.push(eP()),eF(g),g=eL()}while('"'===g||"'"===g);return $.join("")}function eH(g){var $=eP();switch($){case"'":case'"':return eM($),eW();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return eY($,!0)}catch(ee){if(g&&eI.test($))return $;throw eK($,"value")}}function eQ(g,$){do if($&&('"'===(ee=eL())||"'"===ee)){var ee,et,er=eW();if(g.push(er),eU>=2023)throw eK(er,"id")}else try{g.push([et=eJ(eP()),eF("to",!0)?eJ(eP()):et])}catch(et){if($&&eI.test(ee)&&eU>=2023)g.push(ee);else throw et}while(eF(",",!0));var en={options:void 0};en.setOption=function(g,$){void 0===this.options&&(this.options={}),this.options[g]=$},e3(en,function(g){if("option"===g)tt(en,g),eF(";");else throw eK(g)},function(){tl(en)})}function eY(g,$){var ee=1;switch("-"===g.charAt(0)&&(ee=-1,g=g.substring(1)),g){case"inf":case"INF":case"Inf":return 1/0*ee;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(ey.test(g))return ee*parseInt(g,10);if(eS.test(g))return ee*parseInt(g,16);if(eE.test(g))return ee*parseInt(g,8);if(eC.test(g))return ee*parseFloat(g);throw eK(g,"number",$)}function eJ(g,$){switch(g){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!$&&"-"===g.charAt(0))throw eK(g,"id");if(ev.test(g))return parseInt(g,10);if(eT.test(g))return parseInt(g,16);if(ew.test(g))return parseInt(g,8);throw eK(g,"id")}function eX(){if(void 0!==eN)throw eK("package");if(eN=eP(),!eI.test(eN))throw eK(eN,"name");eV=eV.define(eN),eF(";")}function eZ(){var g,$=eL();switch($){case"weak":g=eD||(eD=[]),eP();break;case"public":eP();default:g=eR||(eR=[])}$=eW(),eF(";"),g.push($)}function e0(){if(eF("="),(eU=eW())<2023)throw eK(eU,"syntax");eF(";")}function e1(){if(eF("="),!["2023"].includes(eU=eW()))throw eK(eU,"edition");eF(";")}function e2(g,$){switch($){case"option":return tt(g,$),eF(";"),!0;case"message":return e4(g,$),!0;case"enum":return e7(g,$),!0;case"service":return tu(g,$),!0;case"extend":return tp(g,$),!0}return!1}function e3(g,$,ee){var et,er=ex.line;if(g&&("string"!=typeof g.comment&&(g.comment=eB()),g.filename=eO.filename),eF("{",!0)){for(;"}"!==(et=eP());)$(et);eF(";",!0)}else ee&&ee(),eF(";"),g&&("string"!=typeof g.comment||ek)&&(g.comment=eB(er)||g.comment)}function e4(g,$){if(!e_.test($=eP()))throw eK($,"type name");var ee=new en($);e3(ee,function(g){if(!e2(ee,g))switch(g){case"map":e9(ee,g);break;case"required":if("proto2"!==eU)throw eK(g);case"repeated":e6(ee,g);break;case"optional":if("proto3"===eU)e6(ee,"proto3_optional");else if("proto2"!==eU)throw eK(g);else e6(ee,"optional");break;case"oneof":e8(ee,g);break;case"extensions":eQ(ee.extensions||(ee.extensions=[]));break;case"reserved":eQ(ee.reserved||(ee.reserved=[]),!0);break;default:if("proto2"===eU||!eI.test(g))throw eK(g);eM(g),e6(ee,"optional")}}),g.add(ee),g===eV&&eq.push(ee)}function e6(g,$,ee){var et=eP();if("group"===et){e5(g,$);return}for(;et.endsWith(".")||eL().startsWith(".");)et+=eP();if(!eI.test(et))throw eK(et,"type");var er=eP();if(!e_.test(er))throw eK(er,"name");er=eG(er),eF("=");var en=new ei(er,eJ(eP()),et,$,ee);if(e3(en,function(g){if("option"===g)tt(en,g),eF(";");else throw eK(g)},function(){tl(en)}),"proto3_optional"===$){var es=new eo("_"+er);en.setOption("proto3_optional",!0),es.add(en),g.add(es)}else g.add(en);g===eV&&eq.push(en)}function e5(g,$){if(eU>=2023)throw eK("group");var ee=eP();if(!e_.test(ee))throw eK(ee,"name");var et=em.lcFirst(ee);ee===et&&(ee=em.ucFirst(ee)),eF("=");var er=eJ(eP()),es=new en(ee);es.group=!0;var eo=new ei(et,er,ee,$);eo.filename=eO.filename,e3(es,function(g){switch(g){case"option":tt(es,g),eF(";");break;case"required":case"repeated":e6(es,g);break;case"optional":"proto3"===eU?e6(es,"proto3_optional"):e6(es,"optional");break;case"message":e4(es,g);break;case"enum":e7(es,g);break;case"reserved":eQ(es.reserved||(es.reserved=[]),!0);break;default:throw eK(g)}}),g.add(es).add(eo)}function e9(g){eF("<");var $=eP();if(void 0===eg.mapKey[$])throw eK($,"type");eF(",");var ee=eP();if(!eI.test(ee))throw eK(ee,"type");eF(">");var et=eP();if(!e_.test(et))throw eK(et,"name");eF("=");var er=new es(eG(et),eJ(eP()),$,ee);e3(er,function(g){if("option"===g)tt(er,g),eF(";");else throw eK(g)},function(){tl(er)}),g.add(er)}function e8(g,$){if(!e_.test($=eP()))throw eK($,"name");var ee=new eo(eG($));e3(ee,function(g){"option"===g?(tt(ee,g),eF(";")):(eM(g),e6(ee,"optional"))}),g.add(ee)}function e7(g,$){if(!e_.test($=eP()))throw eK($,"name");var ee=new eu($);e3(ee,function(g){switch(g){case"option":tt(ee,g),eF(";");break;case"reserved":eQ(ee.reserved||(ee.reserved=[]),!0),void 0===ee.reserved&&(ee.reserved=[]);break;default:te(ee,g)}}),g.add(ee),g===eV&&eq.push(ee)}function te(g,$){if(!e_.test($))throw eK($,"name");eF("=");var ee=eJ(eP(),!0),et={options:void 0};et.getOption=function(g){return this.options[g]},et.setOption=function(g,$){ef.prototype.setOption.call(et,g,$)},et.setParsedOption=function(){},e3(et,function(g){if("option"===g)tt(et,g),eF(";");else throw eK(g)},function(){tl(et)}),g.add($,ee,et.comment,et.parsedOptions||et.options)}function tt(g,$){var ee,et,er=!0;for("option"===$&&($=eP());"="!==$;){if("("===$){var en=eP();eF(")"),$="("+en+")"}if(er){if(er=!1,$.includes(".")&&!$.includes("(")){var ei=$.split(".");ee=ei[0]+".",$=ei[1];continue}ee=$}else et=et?et+=$:$;$=eP()}var es=tr(g,et?ee.concat(et):ee);et=et&&"."===et[0]?et.slice(1):et,ts(g,ee=ee&&"."===ee[ee.length-1]?ee.slice(0,-1):ee,es,et)}function tr(g,$){if(eF("{",!0)){for(var ee={};!eF("}",!0);){if(!e_.test(eA=eP()))throw eK(eA,"name");if(null===eA)throw eK(eA,"end of input");var et,er,en=eA;if(eF(":",!0),"{"===eL())et=tr(g,$+"."+eA);else if("["===eL()){if(et=[],eF("[",!0)){do er=eH(!0),et.push(er);while(eF(",",!0));eF("]"),void 0!==er&&ti(g,$+"."+eA,er)}}else et=eH(!0),ti(g,$+"."+eA,et);var ei=ee[en];ei&&(et=[].concat(ei).concat(et)),ee[en]=et,eF(",",!0),eF(";",!0)}return ee}var es=eH(!0);return ti(g,$,es),es}function ti(g,$,ee){if(eV===g&&/^features\./.test($)){ez[$]=ee;return}g.setOption&&g.setOption($,ee)}function ts(g,$,ee,et){g.setParsedOption&&g.setParsedOption($,ee,et)}function tl(g){if(eF("[",!0)){do tt(g,"option");while(eF(",",!0));eF("]")}return g}function tu(g,$){if(!e_.test($=eP()))throw eK($,"service name");var ee=new eh($);e3(ee,function(g){if(!e2(ee,g)){if("rpc"===g)th(ee,g);else throw eK(g)}}),g.add(ee),g===eV&&eq.push(ee)}function th(g,$){var ee=eB(),et=$;if(!e_.test($=eP()))throw eK($,"name");var er,en,ei,es,eo=$;if(eF("("),eF("stream",!0)&&(en=!0),!eI.test($=eP())||(er=$,eF(")"),eF("returns"),eF("("),eF("stream",!0)&&(es=!0),!eI.test($=eP())))throw eK($);ei=$,eF(")");var eu=new ep(eo,et,er,ei,en,es);eu.comment=ee,e3(eu,function(g){if("option"===g)tt(eu,g),eF(";");else throw eK(g)}),g.add(eu)}function tp(g,$){if(!eI.test($=eP()))throw eK($,"reference");var ee=$;e3(null,function($){switch($){case"required":case"repeated":e6(g,$,ee);break;case"optional":"proto3"===eU?e6(g,"proto3_optional",ee):e6(g,"optional",ee);break;default:if("proto2"===eU||!eI.test($))throw eK($);eM($),e6(g,"optional",ee)}})}for(;null!==(eA=eP());)switch(eA){case"package":if(!ej)throw eK(eA);eX();break;case"import":if(!ej)throw eK(eA);eZ();break;case"syntax":if(!ej)throw eK(eA);e0();break;case"edition":if(!ej)throw eK(eA);e1();break;case"option":tt(eV,eA),eF(";",!0);break;default:if(e2(eV,eA)){ej=!1;continue}throw eK(eA)}return e$(),eO.filename=null,{package:eN,imports:eR,weakImports:eD,root:$}}},55868:(g,$,ee)=>{"use strict";g.exports=eo;var et,er=ee(67481),en=er.LongBits,ei=er.utf8;function es(g,$){return RangeError("index out of range: "+g.pos+" + "+($||1)+" > "+g.len)}function eo(g){this.buf=g,this.pos=0,this.len=g.length}var eu="undefined"!=typeof Uint8Array?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new eo(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new eo(g);throw Error("illegal buffer")},eh=function(){return er.Buffer?function(g){return(eo.create=function(g){return er.Buffer.isBuffer(g)?new et(g):eu(g)})(g)}:eu};function ep(){var g=new en(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw es(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*$)>>>0,g}if(this.len-this.pos>4){for(;$<5;++$)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}else for(;$<5;++$){if(this.pos>=this.len)throw es(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function ef(g,$){return(g[$-4]|g[$-3]<<8|g[$-2]<<16|g[$-1]<<24)>>>0}function eg(){if(this.pos+8>this.len)throw es(this,8);return new en(ef(this.buf,this.pos+=4),ef(this.buf,this.pos+=4))}eo.create=eh(),eo.prototype._slice=er.Array.prototype.subarray||er.Array.prototype.slice,eo.prototype.uint32=function(){var g=4294967295;return function(){if(g=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(g=(g|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,es(this,10);return g}}(),eo.prototype.int32=function(){return 0|this.uint32()},eo.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)|0},eo.prototype.bool=function(){return 0!==this.uint32()},eo.prototype.fixed32=function(){if(this.pos+4>this.len)throw es(this,4);return ef(this.buf,this.pos+=4)},eo.prototype.sfixed32=function(){if(this.pos+4>this.len)throw es(this,4);return 0|ef(this.buf,this.pos+=4)},eo.prototype.float=function(){if(this.pos+4>this.len)throw es(this,4);var g=er.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},eo.prototype.double=function(){if(this.pos+8>this.len)throw es(this,4);var g=er.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},eo.prototype.bytes=function(){var g=this.uint32(),$=this.pos,ee=this.pos+g;if(ee>this.len)throw es(this,g);if(this.pos+=g,Array.isArray(this.buf))return this.buf.slice($,ee);if($===ee){var et=er.Buffer;return et?et.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,$,ee)},eo.prototype.string=function(){var g=this.bytes();return ei.read(g,0,g.length)},eo.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw es(this,g);this.pos+=g}else do if(this.pos>=this.len)throw es(this);while(128&this.buf[this.pos++]);return this},eo.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},eo._configure=function(g){et=g,eo.create=eh(),et._configure();var $=er.Long?"toLong":"toNumber";er.merge(eo.prototype,{int64:function(){return ep.call(this)[$](!1)},uint64:function(){return ep.call(this)[$](!0)},sint64:function(){return ep.call(this).zzDecode()[$](!1)},fixed64:function(){return eg.call(this)[$](!0)},sfixed64:function(){return eg.call(this)[$](!1)}})}},77001:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(55868);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(67481);function en(g){et.call(this,g)}en._configure=function(){er.Buffer&&(en.prototype._slice=er.Buffer.prototype.slice)},en.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},en._configure()},16089:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(35146);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Root";var es=ee(15765),eo=ee(20459),eu=ee(49142),eh=ee(76012);function ep(g){ei.call(this,"",g),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function ef(){}ep.fromJSON=function(g,$){return $||($=new ep),g.options&&$.setOptions(g.options),$.addJSON(g.nested).resolveAll()},ep.prototype.resolvePath=eh.path.resolve,ep.prototype.fetch=eh.fetch,ep.prototype.load=function g($,ee,et){"function"==typeof ee&&(et=ee,ee=void 0);var ei=this;if(!et)return eh.asPromise(g,ei,$,ee);var es=et===ef;function eo(g,$){if(et){if(es)throw g;$&&$.resolveAll();var ee=et;et=null,ee(g,$)}}function eu(g){var $=g.lastIndexOf("google/protobuf/");if($>-1){var ee=g.substring($);if(ee in en)return ee}return null}function ep(g,$){try{if(eh.isString($)&&"{"===$.charAt(0)&&($=JSON.parse($)),eh.isString($)){er.filename=g;var et,en=er($,ei,ee),ep=0;if(en.imports)for(;ep<en.imports.length;++ep)(et=eu(en.imports[ep])||ei.resolvePath(g,en.imports[ep]))&&eg(et);if(en.weakImports)for(ep=0;ep<en.weakImports.length;++ep)(et=eu(en.weakImports[ep])||ei.resolvePath(g,en.weakImports[ep]))&&eg(et,!0)}else ei.setOptions($.options).addJSON($.nested)}catch(g){eo(g)}es||em||eo(null,ei)}function eg(g,$){if(g=eu(g)||g,!(ei.files.indexOf(g)>-1)){if(ei.files.push(g),g in en){es?ep(g,en[g]):(++em,setTimeout(function(){--em,ep(g,en[g])}));return}if(es){var ee;try{ee=eh.fs.readFileSync(g).toString("utf8")}catch(g){$||eo(g);return}ep(g,ee)}else++em,ei.fetch(g,function(ee,er){if(--em,et){if(ee){$?em||eo(null,ei):eo(ee);return}ep(g,er)}})}}var em=0;eh.isString($)&&($=[$]);for(var ey,ev=0;ev<$.length;++ev)(ey=ei.resolvePath("",$[ev]))&&eg(ey);return es?ei.resolveAll():em||eo(null,ei),ei},ep.prototype.loadSync=function(g,$){if(!eh.isNode)throw Error("not supported");return this.load(g,$,ef)},ep.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(g){return"'extend "+g.extend+"' in "+g.parent.fullName}).join(", "));return ei.prototype.resolveAll.call(this)};var eg=/^[A-Z]/;function em(g,$){var ee=$.parent.lookup($.extend);if(ee){var et=new es($.fullName,$.id,$.type,$.rule,void 0,$.options);return!!ee.get(et.name)||(et.declaringField=$,$.extensionField=et,ee.add(et),!0)}return!1}ep.prototype._handleAdd=function(g){if(g instanceof es)void 0===g.extend||g.extensionField||em(this,g)||this.deferred.push(g);else if(g instanceof eo)eg.test(g.name)&&(g.parent[g.name]=g.values);else if(!(g instanceof eu)){if(g instanceof et)for(var $=0;$<this.deferred.length;)em(this,this.deferred[$])?this.deferred.splice($,1):++$;for(var ee=0;ee<g.nestedArray.length;++ee)this._handleAdd(g._nestedArray[ee]);eg.test(g.name)&&(g.parent[g.name]=g)}(g instanceof et||g instanceof eo||g instanceof es)&&(this._fullyQualifiedObjects[g.fullName]=g)},ep.prototype._handleRemove=function(g){if(g instanceof es){if(void 0!==g.extend){if(g.extensionField)g.extensionField.parent.remove(g.extensionField),g.extensionField=null;else{var $=this.deferred.indexOf(g);$>-1&&this.deferred.splice($,1)}}}else if(g instanceof eo)eg.test(g.name)&&delete g.parent[g.name];else if(g instanceof ei){for(var ee=0;ee<g.nestedArray.length;++ee)this._handleRemove(g._nestedArray[ee]);eg.test(g.name)&&delete g.parent[g.name]}delete this._fullyQualifiedObjects[g.fullName]},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},28154:g=>{"use strict";g.exports={}},45002:(g,$,ee)=>{"use strict";$.Service=ee(48373)},48373:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(67481);function er(g,$,ee){if("function"!=typeof g)throw TypeError("rpcImpl must be a function");et.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!$,this.responseDelimited=!!ee}(er.prototype=Object.create(et.EventEmitter.prototype)).constructor=er,er.prototype.rpcCall=function g($,ee,er,en,ei){if(!en)throw TypeError("request must be specified");var es=this;if(!ei)return et.asPromise(g,es,$,ee,er,en);if(!es.rpcImpl){setTimeout(function(){ei(Error("already ended"))},0);return}try{return es.rpcImpl($,ee[es.requestDelimited?"encodeDelimited":"encode"](en).finish(),function(g,ee){if(g)return es.emit("error",g,$),ei(g);if(null===ee){es.end(!0);return}if(!(ee instanceof er))try{ee=er[es.responseDelimited?"decodeDelimited":"decode"](ee)}catch(g){return es.emit("error",g,$),ei(g)}return es.emit("data",ee,$),ei(null,ee)})}catch(g){es.emit("error",g,$),setTimeout(function(){ei(g)},0);return}},er.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},84399:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(35146);((es.prototype=Object.create(et.prototype)).constructor=es).className="Service";var er=ee(88290),en=ee(76012),ei=ee(45002);function es(g,$){et.call(this,g,$),this.methods={},this._methodsArray=null}function eo(g){return g._methodsArray=null,g}es.fromJSON=function(g,$){var ee=new es(g,$.options);if($.methods)for(var et=Object.keys($.methods),en=0;en<et.length;++en)ee.add(er.fromJSON(et[en],$.methods[et[en]]));return $.nested&&ee.addJSON($.nested),$.edition&&(ee._edition=$.edition),ee.comment=$.comment,ee._defaultEdition="proto3",ee},es.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return en.toObject(["edition",this._editionToJSON(),"options",$&&$.options||void 0,"methods",et.arrayToJSON(this.methodsArray,g)||{},"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},Object.defineProperty(es.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=en.toArray(this.methods))}}),es.prototype.get=function(g){return this.methods[g]||et.prototype.get.call(this,g)},es.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;et.prototype.resolve.call(this);for(var g=this.methodsArray,$=0;$<g.length;++$)g[$].resolve();return this},es.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(g=this._edition||g,et.prototype._resolveFeaturesRecursive.call(this,g),this.methodsArray.forEach($=>{$._resolveFeaturesRecursive(g)})),this},es.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);return g instanceof er?(this.methods[g.name]=g,g.parent=this,eo(this)):et.prototype.add.call(this,g)},es.prototype.remove=function(g){if(g instanceof er){if(this.methods[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.methods[g.name],g.parent=null,eo(this)}return et.prototype.remove.call(this,g)},es.prototype.create=function(g,$,ee){for(var et,er=new ei.Service(g,$,ee),es=0;es<this.methodsArray.length;++es){var eo=en.lcFirst((et=this._methodsArray[es]).resolve().name).replace(/[^$\w_]/g,"");er[eo]=en.codegen(["r","c"],en.isReserved(eo)?eo+"_":eo)("return this.rpcCall(m,q,s,r,c)")({m:et,q:et.resolvedRequestType.ctor,s:et.resolvedResponseType.ctor})}return er}},23356:g=>{"use strict";g.exports=ep;var $=/[\s{}=;:[\],'"()<>]/g,ee=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,et=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,er=/^ *[*/]+ */,en=/^\s*\*?\/*/,ei=/\n/g,es=/\s/,eo=/\\(.?)/g,eu={0:"\x00",r:"\r",n:"\n",t:"	"};function eh(g){return g.replace(eo,function(g,$){switch($){case"\\":case"":return $;default:return eu[$]||""}})}function ep(g,eo){g=g.toString();var eu=0,ep=g.length,ef=1,eg=0,em={},ey=[],ev=null;function eS(g){return Error("illegal "+g+" (line "+ef+")")}function eT(){var $="'"===ev?et:ee;$.lastIndex=eu-1;var er=$.exec(g);if(!er)throw eS("string");return eu=$.lastIndex,eO(ev),ev=null,eh(er[1])}function eE($){return g.charAt($)}function ew($,ee,et){var es,eu,eh={type:g.charAt($++),lineEmpty:!1,leading:et},ep=$-(es=eo?2:3);do if(--ep<0||"\n"===(eu=g.charAt(ep))){eh.lineEmpty=!0;break}while(" "===eu||"	"===eu);for(var ey=g.substring($,ee).split(ei),ev=0;ev<ey.length;++ev)ey[ev]=ey[ev].replace(eo?en:er,"").trim();eh.text=ey.join("\n").trim(),em[ef]=eh,eg=ef}function eC($){var ee=e_($),et=g.substring($,ee);return/^\s*\/\//.test(et)}function e_(g){for(var $=g;$<ep&&"\n"!==eE($);)$++;return $}function eI(){if(ey.length>0)return ey.shift();if(ev)return eT();var ee,et,er,en,ei,eh=0===eu;do{if(eu===ep)return null;for(ee=!1;es.test(er=eE(eu));)if("\n"===er&&(eh=!0,++ef),++eu===ep)return null;if("/"===eE(eu)){if(++eu===ep)throw eS("comment");if("/"===eE(eu)){if(eo){if(en=eu,ei=!1,eC(eu-1)){ei=!0;do if((eu=e_(eu))===ep||(eu++,!eh))break;while(eC(eu))}else eu=Math.min(ep,e_(eu)+1);ei&&(ew(en,eu,eh),eh=!0),ef++,ee=!0}else{for(ei="/"===eE(en=eu+1);"\n"!==eE(++eu);)if(eu===ep)return null;++eu,ei&&(ew(en,eu-1,eh),eh=!0),++ef,ee=!0}}else{if("*"!==(er=eE(eu)))return"/";en=eu+1,ei=eo||"*"===eE(en);do{if("\n"===er&&++ef,++eu===ep)throw eS("comment");et=er,er=eE(eu)}while("*"!==et||"/"!==er);++eu,ei&&(ew(en,eu-2,eh),eh=!0),ee=!0}}}while(ee);var eg=eu;if($.lastIndex=0,!$.test(eE(eg++)))for(;eg<ep&&!$.test(eE(eg));)++eg;var em=g.substring(eu,eu=eg);return('"'===em||"'"===em)&&(ev=em),em}function eO(g){ey.push(g)}function eA(){if(!ey.length){var g=eI();if(null===g)return null;eO(g)}return ey[0]}function eN(g,$){var ee=eA();if(ee===g)return eI(),!0;if(!$)throw eS("token '"+ee+"', '"+g+"' expected");return!1}function eR(g){var $,ee=null;return void 0===g?($=em[ef-1],delete em[ef-1],$&&(eo||"*"===$.type||$.lineEmpty)&&(ee=$.leading?$.text:null)):(eg<g&&eA(),$=em[g],delete em[g],$&&!$.lineEmpty&&(eo||"/"===$.type)&&(ee=$.leading?null:$.text)),ee}return Object.defineProperty({next:eI,peek:eA,push:eO,skip:eN,cmnt:eR},"line",{get:function(){return ef}})}ep.unescape=eh},81234:(g,$,ee)=>{"use strict";g.exports=eT;var et=ee(35146);((eT.prototype=Object.create(et.prototype)).constructor=eT).className="Type";var er=ee(20459),en=ee(49142),ei=ee(15765),es=ee(11244),eo=ee(84399),eu=ee(96012),eh=ee(55868),ep=ee(2131),ef=ee(76012),eg=ee(59490),em=ee(24839),ey=ee(98093),ev=ee(30126),eS=ee(23631);function eT(g,$){et.call(this,g,$),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function eE(g){return g._fieldsById=g._fieldsArray=g._oneofsArray=null,delete g.encode,delete g.decode,delete g.verify,g}Object.defineProperties(eT.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var g=Object.keys(this.fields),$=0;$<g.length;++$){var ee=this.fields[g[$]],et=ee.id;if(this._fieldsById[et])throw Error("duplicate id "+et+" in "+this);this._fieldsById[et]=ee}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ef.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ef.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=eT.generateConstructor(this)())},set:function(g){var $=g.prototype;$ instanceof eu||((g.prototype=new eu).constructor=g,ef.merge(g.prototype,$)),g.$type=g.prototype.$type=this,ef.merge(g,eu,!0),this._ctor=g;for(var ee=0;ee<this.fieldsArray.length;++ee)this._fieldsArray[ee].resolve();var et={};for(ee=0;ee<this.oneofsArray.length;++ee)et[this._oneofsArray[ee].resolve().name]={get:ef.oneOfGetter(this._oneofsArray[ee].oneof),set:ef.oneOfSetter(this._oneofsArray[ee].oneof)};ee&&Object.defineProperties(g.prototype,et)}}}),eT.generateConstructor=function(g){for(var $,ee=ef.codegen(["p"],g.name),et=0;et<g.fieldsArray.length;++et)($=g._fieldsArray[et]).map?ee("this%s={}",ef.safeProp($.name)):$.repeated&&ee("this%s=[]",ef.safeProp($.name));return ee("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},eT.fromJSON=function(g,$){var ee=new eT(g,$.options);ee.extensions=$.extensions,ee.reserved=$.reserved;for(var eu=Object.keys($.fields),eh=0;eh<eu.length;++eh)ee.add((void 0!==$.fields[eu[eh]].keyType?es.fromJSON:ei.fromJSON)(eu[eh],$.fields[eu[eh]]));if($.oneofs)for(eu=Object.keys($.oneofs),eh=0;eh<eu.length;++eh)ee.add(en.fromJSON(eu[eh],$.oneofs[eu[eh]]));if($.nested)for(eu=Object.keys($.nested),eh=0;eh<eu.length;++eh){var ep=$.nested[eu[eh]];ee.add((void 0!==ep.id?ei.fromJSON:void 0!==ep.fields?eT.fromJSON:void 0!==ep.values?er.fromJSON:void 0!==ep.methods?eo.fromJSON:et.fromJSON)(eu[eh],ep))}return $.extensions&&$.extensions.length&&(ee.extensions=$.extensions),$.reserved&&$.reserved.length&&(ee.reserved=$.reserved),$.group&&(ee.group=!0),$.comment&&(ee.comment=$.comment),$.edition&&(ee._edition=$.edition),ee._defaultEdition="proto3",ee},eT.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return ef.toObject(["edition",this._editionToJSON(),"options",$&&$.options||void 0,"oneofs",et.arrayToJSON(this.oneofsArray,g),"fields",et.arrayToJSON(this.fieldsArray.filter(function(g){return!g.declaringField}),g)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},eT.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;et.prototype.resolveAll.call(this);var g=this.oneofsArray;for(ee=0;ee<g.length;)g[ee++].resolve();for(var $=this.fieldsArray,ee=0;ee<$.length;)$[ee++].resolve();return this},eT.prototype._resolveFeaturesRecursive=function(g){return this._needsRecursiveFeatureResolution&&(g=this._edition||g,et.prototype._resolveFeaturesRecursive.call(this,g),this.oneofsArray.forEach($=>{$._resolveFeatures(g)}),this.fieldsArray.forEach($=>{$._resolveFeatures(g)})),this},eT.prototype.get=function(g){return this.fields[g]||this.oneofs&&this.oneofs[g]||this.nested&&this.nested[g]||null},eT.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);if(g instanceof ei&&void 0===g.extend){if(this._fieldsById?this._fieldsById[g.id]:this.fieldsById[g.id])throw Error("duplicate id "+g.id+" in "+this);if(this.isReservedId(g.id))throw Error("id "+g.id+" is reserved in "+this);if(this.isReservedName(g.name))throw Error("name '"+g.name+"' is reserved in "+this);return g.parent&&g.parent.remove(g),this.fields[g.name]=g,g.message=this,g.onAdd(this),eE(this)}return g instanceof en?(this.oneofs||(this.oneofs={}),this.oneofs[g.name]=g,g.onAdd(this),eE(this)):et.prototype.add.call(this,g)},eT.prototype.remove=function(g){if(g instanceof ei&&void 0===g.extend){if(!this.fields||this.fields[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.fields[g.name],g.parent=null,g.onRemove(this),eE(this)}if(g instanceof en){if(!this.oneofs||this.oneofs[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.oneofs[g.name],g.parent=null,g.onRemove(this),eE(this)}return et.prototype.remove.call(this,g)},eT.prototype.isReservedId=function(g){return et.isReservedId(this.reserved,g)},eT.prototype.isReservedName=function(g){return et.isReservedName(this.reserved,g)},eT.prototype.create=function(g){return new this.ctor(g)},eT.prototype.setup=function(){for(var g=this.fullName,$=[],ee=0;ee<this.fieldsArray.length;++ee)$.push(this._fieldsArray[ee].resolve().resolvedType);this.encode=eg(this)({Writer:ep,types:$,util:ef}),this.decode=em(this)({Reader:eh,types:$,util:ef}),this.verify=ey(this)({types:$,util:ef}),this.fromObject=ev.fromObject(this)({types:$,util:ef}),this.toObject=ev.toObject(this)({types:$,util:ef});var et=eS[g];if(et){var er=Object.create(this);er.fromObject=this.fromObject,this.fromObject=et.fromObject.bind(er),er.toObject=this.toObject,this.toObject=et.toObject.bind(er)}return this},eT.prototype.encode=function(g,$){return this.setup().encode(g,$)},eT.prototype.encodeDelimited=function(g,$){return this.encode(g,$&&$.len?$.fork():$).ldelim()},eT.prototype.decode=function(g,$){return this.setup().decode(g,$)},eT.prototype.decodeDelimited=function(g){return g instanceof eh||(g=eh.create(g)),this.decode(g,g.uint32())},eT.prototype.verify=function(g){return this.setup().verify(g)},eT.prototype.fromObject=function(g){return this.setup().fromObject(g)},eT.prototype.toObject=function(g,$){return this.setup().toObject(g,$)},eT.d=function(g){return function($){ef.decorateType($,g)}}},14550:(g,$,ee)=>{"use strict";var et=$,er=ee(76012),en=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ei(g,$){var ee=0,et={};for($|=0;ee<g.length;)et[en[ee+$]]=g[ee++];return et}et.basic=ei([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),et.defaults=ei([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",er.emptyArray,null]),et.long=ei([0,0,0,1,1],7),et.mapKey=ei([0,0,0,5,5,0,0,0,1,1,0,2],2),et.packed=ei([1,5,0,0,0,5,5,0,0,0,1,1,0])},76012:(g,$,ee)=>{"use strict";var et,er,en=g.exports=ee(67481),ei=ee(28154);en.codegen=ee(74983),en.fetch=ee(3824),en.path=ee(59419),en.fs=en.inquire("fs"),en.toArray=function(g){if(g){for(var $=Object.keys(g),ee=Array($.length),et=0;et<$.length;)ee[et]=g[$[et++]];return ee}return[]},en.toObject=function(g){for(var $={},ee=0;ee<g.length;){var et=g[ee++],er=g[ee++];void 0!==er&&($[et]=er)}return $};var es=/\\/g,eo=/"/g;en.isReserved=function(g){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(g)},en.safeProp=function(g){return!/^[$\w_]+$/.test(g)||en.isReserved(g)?'["'+g.replace(es,"\\\\").replace(eo,'\\"')+'"]':"."+g},en.ucFirst=function(g){return g.charAt(0).toUpperCase()+g.substring(1)};var eu=/_([a-z])/g;en.camelCase=function(g){return g.substring(0,1)+g.substring(1).replace(eu,function(g,$){return $.toUpperCase()})},en.compareFieldsById=function(g,$){return g.id-$.id},en.decorateType=function(g,$){if(g.$type)return $&&g.$type.name!==$&&(en.decorateRoot.remove(g.$type),g.$type.name=$,en.decorateRoot.add(g.$type)),g.$type;et||(et=ee(81234));var er=new et($||g.name);return en.decorateRoot.add(er),er.ctor=g,Object.defineProperty(g,"$type",{value:er,enumerable:!1}),Object.defineProperty(g.prototype,"$type",{value:er,enumerable:!1}),er};var eh=0;en.decorateEnum=function(g){if(g.$type)return g.$type;er||(er=ee(20459));var $=new er("Enum"+eh++,g);return en.decorateRoot.add($),Object.defineProperty(g,"$type",{value:$,enumerable:!1}),$},en.setProperty=function(g,$,ee,et){function er(g,$,ee){var en=$.shift();if("__proto__"===en||"prototype"===en)return g;if($.length>0)g[en]=er(g[en]||{},$,ee);else{var ei=g[en];if(ei&&et)return g;ei&&(ee=[].concat(ei).concat(ee)),g[en]=ee}return g}if("object"!=typeof g)throw TypeError("dst must be an object");if(!$)throw TypeError("path must be specified");return er(g,$=$.split("."),ee)},Object.defineProperty(en,"decorateRoot",{get:function(){return ei.decorated||(ei.decorated=new(ee(16089)))}})},89544:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(67481);function er(g,$){this.lo=g>>>0,this.hi=$>>>0}var en=er.zero=new er(0,0);en.toNumber=function(){return 0},en.zzEncode=en.zzDecode=function(){return this},en.length=function(){return 1};var ei=er.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";er.fromNumber=function(g){if(0===g)return en;var $=g<0;$&&(g=-g);var ee=g>>>0,et=(g-ee)/4294967296>>>0;return $&&(et=~et>>>0,ee=~ee>>>0,++ee>4294967295&&(ee=0,++et>4294967295&&(et=0))),new er(ee,et)},er.from=function(g){if("number"==typeof g)return er.fromNumber(g);if(et.isString(g)){if(!et.Long)return er.fromNumber(parseInt(g,10));g=et.Long.fromString(g)}return g.low||g.high?new er(g.low>>>0,g.high>>>0):en},er.prototype.toNumber=function(g){if(!g&&this.hi>>>31){var $=~this.lo+1>>>0,ee=~this.hi>>>0;return $||(ee=ee+1>>>0),-($+4294967296*ee)}return this.lo+4294967296*this.hi},er.prototype.toLong=function(g){return et.Long?new et.Long(0|this.lo,0|this.hi,!!g):{low:0|this.lo,high:0|this.hi,unsigned:!!g}};var es=String.prototype.charCodeAt;er.fromHash=function(g){return g===ei?en:new er((es.call(g,0)|es.call(g,1)<<8|es.call(g,2)<<16|es.call(g,3)<<24)>>>0,(es.call(g,4)|es.call(g,5)<<8|es.call(g,6)<<16|es.call(g,7)<<24)>>>0)},er.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},er.prototype.zzEncode=function(){var g=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^g)>>>0,this.lo=(this.lo<<1^g)>>>0,this},er.prototype.zzDecode=function(){var g=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^g)>>>0,this.hi=(this.hi>>>1^g)>>>0,this},er.prototype.length=function(){var g=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,ee=this.hi>>>24;return 0===ee?0===$?g<16384?g<128?1:2:g<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:ee<128?9:10}},67481:function(g,$,ee){"use strict";var et=$;function er(g,$,ee){for(var et=Object.keys($),er=0;er<et.length;++er)void 0!==g[et[er]]&&ee||(g[et[er]]=$[et[er]]);return g}function en(g){function $(g,ee){if(!(this instanceof $))return new $(g,ee);Object.defineProperty(this,"message",{get:function(){return g}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:Error().stack||""}),ee&&er(this,ee)}return $.prototype=Object.create(Error.prototype,{constructor:{value:$,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return g},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),$}et.asPromise=ee(25409),et.base64=ee(17738),et.EventEmitter=ee(13595),et.float=ee(1708),et.inquire=ee(23421),et.utf8=ee(9774),et.pool=ee(7474),et.LongBits=ee(89544),et.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),et.global=et.isNode&&global||"undefined"!=typeof self&&self||this,et.emptyArray=Object.freeze?Object.freeze([]):[],et.emptyObject=Object.freeze?Object.freeze({}):{},et.isInteger=Number.isInteger||function(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g},et.isString=function(g){return"string"==typeof g||g instanceof String},et.isObject=function(g){return g&&"object"==typeof g},et.isset=et.isSet=function(g,$){var ee=g[$];return!!(null!=ee&&g.hasOwnProperty($))&&("object"!=typeof ee||(Array.isArray(ee)?ee.length:Object.keys(ee).length)>0)},et.Buffer=function(){try{var g=et.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch(g){return null}}(),et._Buffer_from=null,et._Buffer_allocUnsafe=null,et.newBuffer=function(g){return"number"==typeof g?et.Buffer?et._Buffer_allocUnsafe(g):new et.Array(g):et.Buffer?et._Buffer_from(g):"undefined"==typeof Uint8Array?g:new Uint8Array(g)},et.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,et.Long=et.global.dcodeIO&&et.global.dcodeIO.Long||et.global.Long||et.inquire("long"),et.key2Re=/^true|false|0|1$/,et.key32Re=/^-?(?:0|[1-9][0-9]*)$/,et.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,et.longToHash=function(g){return g?et.LongBits.from(g).toHash():et.LongBits.zeroHash},et.longFromHash=function(g,$){var ee=et.LongBits.fromHash(g);return et.Long?et.Long.fromBits(ee.lo,ee.hi,$):ee.toNumber(!!$)},et.merge=er,et.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},et.newError=en,et.ProtocolError=en("ProtocolError"),et.oneOfGetter=function(g){for(var $={},ee=0;ee<g.length;++ee)$[g[ee]]=1;return function(){for(var g=Object.keys(this),ee=g.length-1;ee>-1;--ee)if(1===$[g[ee]]&&void 0!==this[g[ee]]&&null!==this[g[ee]])return g[ee]}},et.oneOfSetter=function(g){return function($){for(var ee=0;ee<g.length;++ee)g[ee]!==$&&delete this[g[ee]]}},et.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},et._configure=function(){var g=et.Buffer;if(!g){et._Buffer_from=et._Buffer_allocUnsafe=null;return}et._Buffer_from=g.from!==Uint8Array.from&&g.from||function($,ee){return new g($,ee)},et._Buffer_allocUnsafe=g.allocUnsafe||function($){return new g($)}}},98093:(g,$,ee)=>{"use strict";g.exports=eo;var et=ee(20459),er=ee(76012);function en(g,$){return g.name+": "+$+(g.repeated&&"array"!==$?"[]":g.map&&"object"!==$?"{k:"+g.keyType+"}":"")+" expected"}function ei(g,$,ee,er){if($.resolvedType){if($.resolvedType instanceof et){g("switch(%s){",er)("default:")("return%j",en($,"enum value"));for(var ei=Object.keys($.resolvedType.values),es=0;es<ei.length;++es)g("case %i:",$.resolvedType.values[ei[es]]);g("break")("}")}else g("{")("var e=types[%i].verify(%s);",ee,er)("if(e)")("return%j+e",$.name+".")("}")}else switch($.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.isInteger(%s))",er)("return%j",en($,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",er,er,er,er)("return%j",en($,"integer|Long"));break;case"float":case"double":g('if(typeof %s!=="number")',er)("return%j",en($,"number"));break;case"bool":g('if(typeof %s!=="boolean")',er)("return%j",en($,"boolean"));break;case"string":g("if(!util.isString(%s))",er)("return%j",en($,"string"));break;case"bytes":g('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',er,er,er)("return%j",en($,"buffer"))}return g}function es(g,$,ee){switch($.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.key32Re.test(%s))",ee)("return%j",en($,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.key64Re.test(%s))",ee)("return%j",en($,"integer|Long key"));break;case"bool":g("if(!util.key2Re.test(%s))",ee)("return%j",en($,"boolean key"))}return g}function eo(g){var $=er.codegen(["m"],g.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ee=g.oneofsArray,et={};ee.length&&$("var p={}");for(var eo=0;eo<g.fieldsArray.length;++eo){var eu=g._fieldsArray[eo].resolve(),eh="m"+er.safeProp(eu.name);if(eu.optional&&$("if(%s!=null&&m.hasOwnProperty(%j)){",eh,eu.name),eu.map)$("if(!util.isObject(%s))",eh)("return%j",en(eu,"object"))("var k=Object.keys(%s)",eh)("for(var i=0;i<k.length;++i){"),es($,eu,"k[i]"),ei($,eu,eo,eh+"[k[i]]")("}");else if(eu.repeated)$("if(!Array.isArray(%s))",eh)("return%j",en(eu,"array"))("for(var i=0;i<%s.length;++i){",eh),ei($,eu,eo,eh+"[i]")("}");else{if(eu.partOf){var ep=er.safeProp(eu.partOf.name);1===et[eu.partOf.name]&&$("if(p%s===1)",ep)("return%j",eu.partOf.name+": multiple values"),et[eu.partOf.name]=1,$("p%s=1",ep)}ei($,eu,eo,eh)}eu.optional&&$("}")}return $("return null")}},23631:(g,$,ee)=>{"use strict";var et=$,er=ee(96012);et[".google.protobuf.Any"]={fromObject:function(g){if(g&&g["@type"]){var $=g["@type"].substring(g["@type"].lastIndexOf("/")+1),ee=this.lookup($);if(ee){var et="."===g["@type"].charAt(0)?g["@type"].slice(1):g["@type"];return -1===et.indexOf("/")&&(et="/"+et),this.create({type_url:et,value:ee.encode(ee.fromObject(g)).finish()})}}return this.fromObject(g)},toObject:function(g,$){var ee="type.googleapis.com/",et="",en="";if($&&$.json&&g.type_url&&g.value){en=g.type_url.substring(g.type_url.lastIndexOf("/")+1),et=g.type_url.substring(0,g.type_url.lastIndexOf("/")+1);var ei=this.lookup(en);ei&&(g=ei.decode(g.value))}if(!(g instanceof this.ctor)&&g instanceof er){var es=g.$type.toObject(g,$),eo="."===g.$type.fullName[0]?g.$type.fullName.slice(1):g.$type.fullName;return""===et&&(et=ee),en=et+eo,es["@type"]=en,es}return this.toObject(g,$)}}},2131:(g,$,ee)=>{"use strict";g.exports=ep;var et,er=ee(67481),en=er.LongBits,ei=er.base64,es=er.utf8;function eo(g,$,ee){this.fn=g,this.len=$,this.next=void 0,this.val=ee}function eu(){}function eh(g){this.head=g.head,this.tail=g.tail,this.len=g.len,this.next=g.states}function ep(){this.len=0,this.head=new eo(eu,0,0),this.tail=this.head,this.states=null}var ef=function(){return er.Buffer?function(){return(ep.create=function(){return new et})()}:function(){return new ep}};function eg(g,$,ee){$[ee]=255&g}function em(g,$,ee){for(;g>127;)$[ee++]=127&g|128,g>>>=7;$[ee]=g}function ey(g,$){this.len=g,this.next=void 0,this.val=$}function ev(g,$,ee){for(;g.hi;)$[ee++]=127&g.lo|128,g.lo=(g.lo>>>7|g.hi<<25)>>>0,g.hi>>>=7;for(;g.lo>127;)$[ee++]=127&g.lo|128,g.lo=g.lo>>>7;$[ee++]=g.lo}function eS(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}ep.create=ef(),ep.alloc=function(g){return new er.Array(g)},er.Array!==Array&&(ep.alloc=er.pool(ep.alloc,er.Array.prototype.subarray)),ep.prototype._push=function(g,$,ee){return this.tail=this.tail.next=new eo(g,$,ee),this.len+=$,this},ey.prototype=Object.create(eo.prototype),ey.prototype.fn=em,ep.prototype.uint32=function(g){return this.len+=(this.tail=this.tail.next=new ey((g>>>=0)<128?1:g<16384?2:g<2097152?3:g<268435456?4:5,g)).len,this},ep.prototype.int32=function(g){return g<0?this._push(ev,10,en.fromNumber(g)):this.uint32(g)},ep.prototype.sint32=function(g){return this.uint32((g<<1^g>>31)>>>0)},ep.prototype.uint64=function(g){var $=en.from(g);return this._push(ev,$.length(),$)},ep.prototype.int64=ep.prototype.uint64,ep.prototype.sint64=function(g){var $=en.from(g).zzEncode();return this._push(ev,$.length(),$)},ep.prototype.bool=function(g){return this._push(eg,1,g?1:0)},ep.prototype.fixed32=function(g){return this._push(eS,4,g>>>0)},ep.prototype.sfixed32=ep.prototype.fixed32,ep.prototype.fixed64=function(g){var $=en.from(g);return this._push(eS,4,$.lo)._push(eS,4,$.hi)},ep.prototype.sfixed64=ep.prototype.fixed64,ep.prototype.float=function(g){return this._push(er.float.writeFloatLE,4,g)},ep.prototype.double=function(g){return this._push(er.float.writeDoubleLE,8,g)};var eT=er.Array.prototype.set?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){for(var et=0;et<g.length;++et)$[ee+et]=g[et]};ep.prototype.bytes=function(g){var $=g.length>>>0;if(!$)return this._push(eg,1,0);if(er.isString(g)){var ee=ep.alloc($=ei.length(g));ei.decode(g,ee,0),g=ee}return this.uint32($)._push(eT,$,g)},ep.prototype.string=function(g){var $=es.length(g);return $?this.uint32($)._push(es.write,$,g):this._push(eg,1,0)},ep.prototype.fork=function(){return this.states=new eh(this),this.head=this.tail=new eo(eu,0,0),this.len=0,this},ep.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eo(eu,0,0),this.len=0),this},ep.prototype.ldelim=function(){var g=this.head,$=this.tail,ee=this.len;return this.reset().uint32(ee),ee&&(this.tail.next=g.next,this.tail=$,this.len+=ee),this},ep.prototype.finish=function(){for(var g=this.head.next,$=this.constructor.alloc(this.len),ee=0;g;)g.fn(g.val,$,ee),ee+=g.len,g=g.next;return $},ep._configure=function(g){et=g,ep.create=ef(),et._configure()}},7462:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(2131);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(67481);function en(){et.call(this)}function ei(g,$,ee){g.length<40?er.utf8.write(g,$,ee):$.utf8Write?$.utf8Write(g,ee):$.write(g,ee)}en._configure=function(){en.alloc=er._Buffer_allocUnsafe,en.writeBytesBuffer=er.Buffer&&er.Buffer.prototype instanceof Uint8Array&&"set"===er.Buffer.prototype.set.name?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){if(g.copy)g.copy($,ee,0,g.length);else for(var et=0;et<g.length;)$[ee++]=g[et++]}},en.prototype.bytes=function(g){er.isString(g)&&(g=er._Buffer_from(g,"base64"));var $=g.length>>>0;return this.uint32($),$&&this._push(en.writeBytesBuffer,$,g),this},en.prototype.string=function(g){var $=er.Buffer.byteLength(g);return this.uint32($),$&&this._push(ei,$,g),this},en._configure()},64663:(g,$,ee)=>{"use strict";var et;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */et={value:!0};let er=ee(61232),en=ee(57628),ei=ee(29530),es=ee(5670);et=ee(7957),et=function(g){return"@type"in g&&"string"==typeof g["@type"]};let eo={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function eu(g,$){return""===g?$:g+"."+$}function eh(g){return g instanceof en.Service||g instanceof en.Type||g instanceof en.Enum}function ep(g){return g instanceof en.Namespace||g instanceof en.Root}function ef(g,$){let ee=eu($,g.name);return eh(g)?[[ee,g]]:ep(g)&&void 0!==g.nested?Object.keys(g.nested).map($=>ef(g.nested[$],ee)).reduce((g,$)=>g.concat($),[]):[]}function eg(g,$){return function(ee){return g.toObject(g.decode(ee),$)}}function em(g){return function($){if(Array.isArray($))throw Error(`Failed to serialize message: expected object with ${g.name} structure, got array instead`);let ee=g.fromObject($);return g.encode(ee).finish()}}function ey(g,$,ee,et){let en=g.resolvedRequestType,ei=g.resolvedResponseType;return{path:"/"+$+"/"+g.name,requestStream:!!g.requestStream,responseStream:!!g.responseStream,requestSerialize:em(en),requestDeserialize:eg(en,ee),responseSerialize:em(ei),responseDeserialize:eg(ei,ee),originalName:er(g.name),requestType:eS(en,et),responseType:eS(ei,et)}}function ev(g,$,ee,et){let er={};for(let en of g.methodsArray)er[en.name]=ey(en,$,ee,et);return er}function eS(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:ee.$type.toObject(ee,eo),fileDescriptorProtos:$}}function eT(g,$){let ee=g.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:ee.$type.toObject(ee,eo),fileDescriptorProtos:$}}function eE(g,$,ee,et){if(g instanceof en.Service)return ev(g,$,ee,et);if(g instanceof en.Type)return eS(g,et);if(g instanceof en.Enum)return eT(g,et);throw Error("Type mismatch in reflection object handling")}function ew(g,$){let ee={};g.resolveAll();let et=g.toDescriptor("proto3").file.map(g=>Buffer.from(ei.FileDescriptorProto.encode(g).finish()));for(let[er,en]of ef(g,""))ee[er]=eE(en,er,$,et);return ee}function eC(g,$){$=$||{};let ee=en.Root.fromDescriptor(g);return ee.resolveAll(),ew(ee,$)}function e_(g,$){$=$||{};let ee=en.Root.fromJSON(g);return ee.resolveAll(),ew(ee,$)}et=function(g,$){return es.loadProtosWithOptions(g,$).then(g=>ew(g,$))},et=function(g,$){return ew(es.loadProtosWithOptionsSync(g,$),$)},$.im=e_,et=function(g,$){return eC(ei.FileDescriptorSet.decode(g),$)},et=function(g,$){return eC(ei.FileDescriptorSet.fromObject(g),$)},es.addCommonProtos()},5670:(g,$,ee)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty($,"__esModule",{value:!0});let et=ee(57147),er=ee(71017),en=ee(57628);function ei(g,$){let ee=g.resolvePath;g.resolvePath=(g,en)=>{if(er.isAbsolute(en))return en;for(let g of $){let $=er.join(g,en);try{return et.accessSync($,et.constants.R_OK),$}catch(g){continue}}return process.emitWarning(`${en} not found in any of the include paths ${$}`),ee(g,en)}}async function es(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));ei(ee,$.includeDirs)}let et=await ee.load(g,$);return et.resolveAll(),et}function eo(g,$){let ee=new en.Root;if(($=$||{}).includeDirs){if(!Array.isArray($.includeDirs))throw Error("The includeDirs option must be an array");ei(ee,$.includeDirs)}let et=ee.loadSync(g,$);return et.resolveAll(),et}function eu(){let g=ee(522),$=ee(24552),et=ee(97105),er=ee(8730);en.common("api",g.nested.google.nested.protobuf.nested),en.common("descriptor",$.nested.google.nested.protobuf.nested),en.common("source_context",et.nested.google.nested.protobuf.nested),en.common("type",er.nested.google.nested.protobuf.nested)}$.loadProtosWithOptions=es,$.loadProtosWithOptionsSync=eo,$.addCommonProtos=eu},25409:g=>{"use strict";function $(g,$){for(var ee=Array(arguments.length-1),et=0,er=2,en=!0;er<arguments.length;)ee[et++]=arguments[er++];return new Promise(function(er,ei){ee[et]=function(g){if(en){if(en=!1,g)ei(g);else{for(var $=Array(arguments.length-1),ee=0;ee<$.length;)$[ee++]=arguments[ee];er.apply(null,$)}}};try{g.apply($||null,ee)}catch(g){en&&(en=!1,ei(g))}})}g.exports=$},17738:(g,$)=>{"use strict";var ee=$;ee.length=function(g){var $=g.length;if(!$)return 0;for(var ee=0;--$%4>1&&"="===g.charAt($);)++ee;return Math.ceil(3*g.length)/4-ee};for(var et=Array(64),er=Array(123),en=0;en<64;)er[et[en]=en<26?en+65:en<52?en+71:en<62?en-4:en-59|43]=en++;ee.encode=function(g,$,ee){for(var er,en=null,ei=[],es=0,eo=0;$<ee;){var eu=g[$++];switch(eo){case 0:ei[es++]=et[eu>>2],er=(3&eu)<<4,eo=1;break;case 1:ei[es++]=et[er|eu>>4],er=(15&eu)<<2,eo=2;break;case 2:ei[es++]=et[er|eu>>6],ei[es++]=et[63&eu],eo=0}es>8191&&((en||(en=[])).push(String.fromCharCode.apply(String,ei)),es=0)}return(eo&&(ei[es++]=et[er],ei[es++]=61,1===eo&&(ei[es++]=61)),en)?(es&&en.push(String.fromCharCode.apply(String,ei.slice(0,es))),en.join("")):String.fromCharCode.apply(String,ei.slice(0,es))};var ei="invalid encoding";ee.decode=function(g,$,ee){for(var et,en=ee,es=0,eo=0;eo<g.length;){var eu=g.charCodeAt(eo++);if(61===eu&&es>1)break;if(void 0===(eu=er[eu]))throw Error(ei);switch(es){case 0:et=eu,es=1;break;case 1:$[ee++]=et<<2|(48&eu)>>4,et=eu,es=2;break;case 2:$[ee++]=(15&et)<<4|(60&eu)>>2,et=eu,es=3;break;case 3:$[ee++]=(3&et)<<6|eu,es=0}}if(1===es)throw Error(ei);return ee-en},ee.test=function(g){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(g)}},74983:g=>{"use strict";function $(g,ee){"string"==typeof g&&(ee=g,g=void 0);var et=[];function er(g){if("string"!=typeof g){var ee=en();if($.verbose&&console.log("codegen: "+ee),ee="return "+ee,g){for(var ei=Object.keys(g),es=Array(ei.length+1),eo=Array(ei.length),eu=0;eu<ei.length;)es[eu]=ei[eu],eo[eu]=g[ei[eu++]];return es[eu]=ee,Function.apply(null,es).apply(null,eo)}return Function(ee)()}for(var eh=Array(arguments.length-1),ep=0;ep<eh.length;)eh[ep]=arguments[++ep];if(ep=0,g=g.replace(/%([%dfijs])/g,function(g,$){var ee=eh[ep++];switch($){case"d":case"f":return String(Number(ee));case"i":return String(Math.floor(ee));case"j":return JSON.stringify(ee);case"s":return String(ee)}return"%"}),ep!==eh.length)throw Error("parameter count mismatch");return et.push(g),er}function en($){return"function "+($||ee||"")+"("+(g&&g.join(",")||"")+"){\n  "+et.join("\n  ")+"\n}"}return er.toString=en,er}g.exports=$,$.verbose=!1},13595:g=>{"use strict";function $(){this._listeners={}}g.exports=$,$.prototype.on=function(g,$,ee){return(this._listeners[g]||(this._listeners[g]=[])).push({fn:$,ctx:ee||this}),this},$.prototype.off=function(g,$){if(void 0===g)this._listeners={};else if(void 0===$)this._listeners[g]=[];else for(var ee=this._listeners[g],et=0;et<ee.length;)ee[et].fn===$?ee.splice(et,1):++et;return this},$.prototype.emit=function(g){var $=this._listeners[g];if($){for(var ee=[],et=1;et<arguments.length;)ee.push(arguments[et++]);for(et=0;et<$.length;)$[et].fn.apply($[et++].ctx,ee)}return this}},3824:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(25409),er=ee(23421)("fs");function en(g,$,ee){return("function"==typeof $?(ee=$,$={}):$||($={}),ee)?!$.xhr&&er&&er.readFile?er.readFile(g,function(et,er){return et&&"undefined"!=typeof XMLHttpRequest?en.xhr(g,$,ee):et?ee(et):ee(null,$.binary?er:er.toString("utf8"))}):en.xhr(g,$,ee):et(en,this,g,$)}en.xhr=function(g,$,ee){var et=new XMLHttpRequest;et.onreadystatechange=function(){if(4===et.readyState){if(0!==et.status&&200!==et.status)return ee(Error("status "+et.status));if($.binary){var g=et.response;if(!g){g=[];for(var er=0;er<et.responseText.length;++er)g.push(255&et.responseText.charCodeAt(er))}return ee(null,"undefined"!=typeof Uint8Array?new Uint8Array(g):g)}return ee(null,et.responseText)}},$.binary&&("overrideMimeType"in et&&et.overrideMimeType("text/plain; charset=x-user-defined"),et.responseType="arraybuffer"),et.open("GET",g),et.send()}},1708:g=>{"use strict";function $(g){return"undefined"!=typeof Float32Array?function(){var $=new Float32Array([-0]),ee=new Uint8Array($.buffer),et=128===ee[3];function er(g,et,er){$[0]=g,et[er]=ee[0],et[er+1]=ee[1],et[er+2]=ee[2],et[er+3]=ee[3]}function en(g,et,er){$[0]=g,et[er]=ee[3],et[er+1]=ee[2],et[er+2]=ee[1],et[er+3]=ee[0]}function ei(g,et){return ee[0]=g[et],ee[1]=g[et+1],ee[2]=g[et+2],ee[3]=g[et+3],$[0]}function es(g,et){return ee[3]=g[et],ee[2]=g[et+1],ee[1]=g[et+2],ee[0]=g[et+3],$[0]}g.writeFloatLE=et?er:en,g.writeFloatBE=et?en:er,g.readFloatLE=et?ei:es,g.readFloatBE=et?es:ei}():function(){function $(g,$,ee,et){var er=$<0?1:0;if(er&&($=-$),0===$)g(1/$>0?0:2147483648,ee,et);else if(isNaN($))g(2143289344,ee,et);else if($>34028234663852886e22)g((er<<31|2139095040)>>>0,ee,et);else if($<11754943508222875e-54)g((er<<31|Math.round($/1401298464324817e-60))>>>0,ee,et);else{var en=Math.floor(Math.log($)/Math.LN2),ei=8388607&Math.round($*Math.pow(2,-en)*8388608);g((er<<31|en+127<<23|ei)>>>0,ee,et)}}function ei(g,$,ee){var et=g($,ee),er=(et>>31)*2+1,en=et>>>23&255,ei=8388607&et;return 255===en?ei?NaN:1/0*er:0===en?1401298464324817e-60*er*ei:er*Math.pow(2,en-150)*(ei+8388608)}g.writeFloatLE=$.bind(null,ee),g.writeFloatBE=$.bind(null,et),g.readFloatLE=ei.bind(null,er),g.readFloatBE=ei.bind(null,en)}(),"undefined"!=typeof Float64Array?function(){var $=new Float64Array([-0]),ee=new Uint8Array($.buffer),et=128===ee[7];function er(g,et,er){$[0]=g,et[er]=ee[0],et[er+1]=ee[1],et[er+2]=ee[2],et[er+3]=ee[3],et[er+4]=ee[4],et[er+5]=ee[5],et[er+6]=ee[6],et[er+7]=ee[7]}function en(g,et,er){$[0]=g,et[er]=ee[7],et[er+1]=ee[6],et[er+2]=ee[5],et[er+3]=ee[4],et[er+4]=ee[3],et[er+5]=ee[2],et[er+6]=ee[1],et[er+7]=ee[0]}function ei(g,et){return ee[0]=g[et],ee[1]=g[et+1],ee[2]=g[et+2],ee[3]=g[et+3],ee[4]=g[et+4],ee[5]=g[et+5],ee[6]=g[et+6],ee[7]=g[et+7],$[0]}function es(g,et){return ee[7]=g[et],ee[6]=g[et+1],ee[5]=g[et+2],ee[4]=g[et+3],ee[3]=g[et+4],ee[2]=g[et+5],ee[1]=g[et+6],ee[0]=g[et+7],$[0]}g.writeDoubleLE=et?er:en,g.writeDoubleBE=et?en:er,g.readDoubleLE=et?ei:es,g.readDoubleBE=et?es:ei}():function(){function $(g,$,ee,et,er,en){var ei,es=et<0?1:0;if(es&&(et=-et),0===et)g(0,er,en+$),g(1/et>0?0:2147483648,er,en+ee);else if(isNaN(et))g(0,er,en+$),g(2146959360,er,en+ee);else if(et>17976931348623157e292)g(0,er,en+$),g((es<<31|2146435072)>>>0,er,en+ee);else if(et<22250738585072014e-324)g((ei=et/5e-324)>>>0,er,en+$),g((es<<31|ei/4294967296)>>>0,er,en+ee);else{var eo=Math.floor(Math.log(et)/Math.LN2);1024===eo&&(eo=1023),g(4503599627370496*(ei=et*Math.pow(2,-eo))>>>0,er,en+$),g((es<<31|eo+1023<<20|1048576*ei&1048575)>>>0,er,en+ee)}}function ei(g,$,ee,et,er){var en=g(et,er+$),ei=g(et,er+ee),es=(ei>>31)*2+1,eo=ei>>>20&2047,eu=4294967296*(1048575&ei)+en;return 2047===eo?eu?NaN:1/0*es:0===eo?5e-324*es*eu:es*Math.pow(2,eo-1075)*(eu+4503599627370496)}g.writeDoubleLE=$.bind(null,ee,0,4),g.writeDoubleBE=$.bind(null,et,4,0),g.readDoubleLE=ei.bind(null,er,0,4),g.readDoubleBE=ei.bind(null,en,4,0)}(),g}function ee(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}function et(g,$,ee){$[ee]=g>>>24,$[ee+1]=g>>>16&255,$[ee+2]=g>>>8&255,$[ee+3]=255&g}function er(g,$){return(g[$]|g[$+1]<<8|g[$+2]<<16|g[$+3]<<24)>>>0}function en(g,$){return(g[$]<<24|g[$+1]<<16|g[$+2]<<8|g[$+3])>>>0}g.exports=$($)},23421:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},59419:(g,$)=>{"use strict";var ee=$,et=ee.isAbsolute=function(g){return/^(?:\/|\w+:)/.test(g)},er=ee.normalize=function(g){var $=(g=g.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),ee=et(g),er="";ee&&(er=$.shift()+"/");for(var en=0;en<$.length;)".."===$[en]?en>0&&".."!==$[en-1]?$.splice(--en,2):ee?$.splice(en,1):++en:"."===$[en]?$.splice(en,1):++en;return er+$.join("/")};ee.resolve=function(g,$,ee){return(ee||($=er($)),et($))?$:(ee||(g=er(g)),(g=g.replace(/(?:\/|^)[^/]+$/,"")).length?er(g+"/"+$):$)}},7474:g=>{"use strict";function $(g,$,ee){var et=ee||8192,er=et>>>1,en=null,ei=et;return function(ee){if(ee<1||ee>er)return g(ee);ei+ee>et&&(en=g(et),ei=0);var es=$.call(en,ei,ei+=ee);return 7&ei&&(ei=(7|ei)+1),es}}g.exports=$},9774:(g,$)=>{"use strict";var ee=$;ee.length=function(g){for(var $=0,ee=0,et=0;et<g.length;++et)(ee=g.charCodeAt(et))<128?$+=1:ee<2048?$+=2:(64512&ee)==55296&&(64512&g.charCodeAt(et+1))==56320?(++et,$+=4):$+=3;return $},ee.read=function(g,$,ee){if(ee-$<1)return"";for(var et,er=null,en=[],ei=0;$<ee;)(et=g[$++])<128?en[ei++]=et:et>191&&et<224?en[ei++]=(31&et)<<6|63&g[$++]:et>239&&et<365?(et=((7&et)<<18|(63&g[$++])<<12|(63&g[$++])<<6|63&g[$++])-65536,en[ei++]=55296+(et>>10),en[ei++]=56320+(1023&et)):en[ei++]=(15&et)<<12|(63&g[$++])<<6|63&g[$++],ei>8191&&((er||(er=[])).push(String.fromCharCode.apply(String,en)),ei=0);return er?(ei&&er.push(String.fromCharCode.apply(String,en.slice(0,ei))),er.join("")):String.fromCharCode.apply(String,en.slice(0,ei))},ee.write=function(g,$,ee){for(var et,er,en=ee,ei=0;ei<g.length;++ei)(et=g.charCodeAt(ei))<128?$[ee++]=et:(et<2048?$[ee++]=et>>6|192:((64512&et)==55296&&(64512&(er=g.charCodeAt(ei+1)))==56320?(et=65536+((1023&et)<<10)+(1023&er),++ei,$[ee++]=et>>18|240,$[ee++]=et>>12&63|128):$[ee++]=et>>12|224,$[ee++]=et>>6&63|128),$[ee++]=63&et|128);return ee-en}},61232:g=>{var $=1/0,ee="[object Symbol]",et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,en="\ud800-\udfff",ei="\\u0300-\\u036f\\ufe20-\\ufe23",es="\\u20d0-\\u20f0",eo="\\u2700-\\u27bf",eu="a-z\\xdf-\\xf6\\xf8-\\xff",eh="A-Z\\xc0-\\xd6\\xd8-\\xde",ep="\\ufe0e\\ufe0f",ef="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eg="[']",em="["+en+"]",ey="["+ef+"]",ev="["+ei+es+"]",eS="\\d+",eT="["+eo+"]",eE="["+eu+"]",ew="[^"+en+ef+eS+eo+eu+eh+"]",eC="\ud83c[\udffb-\udfff]",e_="[^"+en+"]",eI="(?:\ud83c[\udde6-\uddff]){2}",eO="[\ud800-\udbff][\udc00-\udfff]",eA="["+eh+"]",eN="\\u200d",eR="(?:"+eE+"|"+ew+")",eD="(?:"+eA+"|"+ew+")",ek="(?:"+eg+"(?:d|ll|m|re|s|t|ve))?",ex="(?:"+eg+"(?:D|LL|M|RE|S|T|VE))?",eP="(?:"+ev+"|"+eC+")?",eM="["+ep+"]?",eL="(?:"+eN+"(?:"+[e_,eI,eO].join("|")+")"+eM+eP+")*",eF=eM+eP+eL,eB="(?:"+[eT,eI,eO].join("|")+")"+eF,ej="(?:"+[e_+ev+"?",ev,eI,eO,em].join("|")+")",eU=RegExp(eg,"g"),eV=RegExp(ev,"g"),eq=RegExp(eC+"(?="+eC+")|"+ej+eF,"g"),ez=RegExp([eA+"?"+eE+"+"+ek+"(?="+[ey,eA,"$"].join("|")+")",eD+"+"+ex+"(?="+[ey,eA+eR,"$"].join("|")+")",eA+"?"+eR+"+"+ek,eA+"+"+ex,eS,eB].join("|"),"g"),eG=RegExp("["+eN+en+ei+es+ep+"]"),e$=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eK={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},eW="object"==typeof global&&global&&global.Object===Object&&global,eH="object"==typeof self&&self&&self.Object===Object&&self,eQ=eW||eH||Function("return this")();function eY(g,$,ee,et){var er=-1,en=g?g.length:0;for(et&&en&&(ee=g[++er]);++er<en;)ee=$(ee,g[er],er,g);return ee}function eJ(g){return g.split("")}function eX(g){return g.match(et)||[]}var eZ=function(g){return function($){return null==g?void 0:g[$]}}(eK);function e0(g){return eG.test(g)}function e1(g){return e$.test(g)}function e2(g){return e0(g)?e3(g):eJ(g)}function e3(g){return g.match(eq)||[]}function e4(g){return g.match(ez)||[]}var e6=Object.prototype.toString,e5=eQ.Symbol,e9=e5?e5.prototype:void 0,e8=e9?e9.toString:void 0;function e7(g,$,ee){var et=-1,er=g.length;$<0&&($=-$>er?0:er+$),(ee=ee>er?er:ee)<0&&(ee+=er),er=$>ee?0:ee-$>>>0,$>>>=0;for(var en=Array(er);++et<er;)en[et]=g[et+$];return en}function te(g){if("string"==typeof g)return g;if(ts(g))return e8?e8.call(g):"";var ee=g+"";return"0"==ee&&1/g==-$?"-0":ee}function tt(g,$,ee){var et=g.length;return ee=void 0===ee?et:ee,!$&&ee>=et?g:e7(g,$,ee)}function tr(g){return function($){var ee=e0($=tl($))?e2($):void 0,et=ee?ee[0]:$.charAt(0),er=ee?tt(ee,1).join(""):$.slice(1);return et[g]()+er}}function ti(g){return!!g&&"object"==typeof g}function ts(g){return"symbol"==typeof g||ti(g)&&e6.call(g)==ee}function tl(g){return null==g?"":te(g)}var tu=function(g){return function($){return eY(tg(tp($).replace(eU,"")),g,"")}}(function(g,$,ee){return $=$.toLowerCase(),g+(ee?th($):$)});function th(g){return tf(tl(g).toLowerCase())}function tp(g){return(g=tl(g))&&g.replace(er,eZ).replace(eV,"")}var tf=tr("toUpperCase");function tg(g,$,ee){return(g=tl(g),void 0===($=ee?void 0:$))?e1(g)?e4(g):eX(g):g.match($)||[]}g.exports=tu},7957:g=>{g.exports=ee;var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(g){}function ee(g,$,ee){this.low=0|g,this.high=0|$,this.unsigned=!!ee}function et(g){return!0===(g&&g.__isLong__)}ee.prototype.__isLong__,Object.defineProperty(ee.prototype,"__isLong__",{value:!0}),ee.isLong=et;var er={},en={};function ei(g,$){var ee,et,ei;return $?(g>>>=0,(ei=0<=g&&g<256)&&(et=en[g]))?et:(ee=eo(g,(0|g)<0?-1:0,!0),ei&&(en[g]=ee),ee):(g|=0,(ei=-128<=g&&g<128)&&(et=er[g]))?et:(ee=eo(g,g<0?-1:0,!1),ei&&(er[g]=ee),ee)}function es(g,$){if(isNaN(g))return $?eS:ev;if($){if(g<0)return eS;if(g>=eg)return e_}else{if(g<=-em)return eI;if(g+1>=em)return eC}return g<0?es(-g,$).neg():eo(g%ef|0,g/ef|0,$)}function eo(g,$,et){return new ee(g,$,et)}ee.fromInt=ei,ee.fromNumber=es,ee.fromBits=eo;var eu=Math.pow;function eh(g,$,ee){if(0===g.length)throw Error("empty string");if("NaN"===g||"Infinity"===g||"+Infinity"===g||"-Infinity"===g)return ev;if("number"==typeof $?(ee=$,$=!1):$=!!$,(ee=ee||10)<2||36<ee)throw RangeError("radix");if((et=g.indexOf("-"))>0)throw Error("interior hyphen");if(0===et)return eh(g.substring(1),$,ee).neg();for(var et,er=es(eu(ee,8)),en=ev,ei=0;ei<g.length;ei+=8){var eo=Math.min(8,g.length-ei),ep=parseInt(g.substring(ei,ei+eo),ee);if(eo<8){var ef=es(eu(ee,eo));en=en.mul(ef).add(es(ep))}else en=(en=en.mul(er)).add(es(ep))}return en.unsigned=$,en}function ep(g,$){return"number"==typeof g?es(g,$):"string"==typeof g?eh(g,$):eo(g.low,g.high,"boolean"==typeof $?$:g.unsigned)}ee.fromString=eh,ee.fromValue=ep;var ef=4294967296,eg=18446744073709552e3,em=0x7fffffffffffffff,ey=ei(16777216),ev=ei(0);ee.ZERO=ev;var eS=ei(0,!0);ee.UZERO=eS;var eT=ei(1);ee.ONE=eT;var eE=ei(1,!0);ee.UONE=eE;var ew=ei(-1);ee.NEG_ONE=ew;var eC=eo(-1,2147483647,!1);ee.MAX_VALUE=eC;var e_=eo(-1,-1,!0);ee.MAX_UNSIGNED_VALUE=e_;var eI=eo(0,-2147483648,!1);ee.MIN_VALUE=eI;var eO=ee.prototype;eO.toInt=function(){return this.unsigned?this.low>>>0:this.low},eO.toNumber=function(){return this.unsigned?(this.high>>>0)*ef+(this.low>>>0):this.high*ef+(this.low>>>0)},eO.toString=function(g){if((g=g||10)<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eI))return"-"+this.neg().toString(g);var $=es(g),ee=this.div($),et=ee.mul($).sub(this);return ee.toString(g)+et.toInt().toString(g)}for(var er=es(eu(g,6),this.unsigned),en=this,ei="";;){var eo=en.div(er),eh=(en.sub(eo.mul(er)).toInt()>>>0).toString(g);if((en=eo).isZero())return eh+ei;for(;eh.length<6;)eh="0"+eh;ei=""+eh+ei}},eO.getHighBits=function(){return this.high},eO.getHighBitsUnsigned=function(){return this.high>>>0},eO.getLowBits=function(){return this.low},eO.getLowBitsUnsigned=function(){return this.low>>>0},eO.getNumBitsAbs=function(){if(this.isNegative())return this.eq(eI)?64:this.neg().getNumBitsAbs();for(var g=0!=this.high?this.high:this.low,$=31;$>0&&(g&1<<$)==0;$--);return 0!=this.high?$+33:$+1},eO.isZero=function(){return 0===this.high&&0===this.low},eO.eqz=eO.isZero,eO.isNegative=function(){return!this.unsigned&&this.high<0},eO.isPositive=function(){return this.unsigned||this.high>=0},eO.isOdd=function(){return(1&this.low)==1},eO.isEven=function(){return(1&this.low)==0},eO.equals=function(g){return et(g)||(g=ep(g)),(this.unsigned===g.unsigned||this.high>>>31!=1||g.high>>>31!=1)&&this.high===g.high&&this.low===g.low},eO.eq=eO.equals,eO.notEquals=function(g){return!this.eq(g)},eO.neq=eO.notEquals,eO.ne=eO.notEquals,eO.lessThan=function(g){return 0>this.comp(g)},eO.lt=eO.lessThan,eO.lessThanOrEqual=function(g){return 0>=this.comp(g)},eO.lte=eO.lessThanOrEqual,eO.le=eO.lessThanOrEqual,eO.greaterThan=function(g){return this.comp(g)>0},eO.gt=eO.greaterThan,eO.greaterThanOrEqual=function(g){return this.comp(g)>=0},eO.gte=eO.greaterThanOrEqual,eO.ge=eO.greaterThanOrEqual,eO.compare=function(g){if(et(g)||(g=ep(g)),this.eq(g))return 0;var $=this.isNegative(),ee=g.isNegative();return $&&!ee?-1:!$&&ee?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},eO.comp=eO.compare,eO.negate=function(){return!this.unsigned&&this.eq(eI)?eI:this.not().add(eT)},eO.neg=eO.negate,eO.add=function(g){et(g)||(g=ep(g));var $,ee,er=this.high>>>16,en=65535&this.high,ei=this.low>>>16,es=65535&this.low,eu=g.high>>>16,eh=65535&g.high,ef=g.low>>>16,eg=65535&g.low,em=0,ey=0;return $=0+((ee=0+(es+eg))>>>16),ee&=65535,$+=ei+ef,ey+=$>>>16,$&=65535,ey+=en+eh,em+=ey>>>16,ey&=65535,em+=er+eu,eo($<<16|ee,(em&=65535)<<16|ey,this.unsigned)},eO.subtract=function(g){return et(g)||(g=ep(g)),this.add(g.neg())},eO.sub=eO.subtract,eO.multiply=function(g){if(this.isZero())return ev;if(et(g)||(g=ep(g)),$)return eo($.mul(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned);if(g.isZero())return ev;if(this.eq(eI))return g.isOdd()?eI:ev;if(g.eq(eI))return this.isOdd()?eI:ev;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(ey)&&g.lt(ey))return es(this.toNumber()*g.toNumber(),this.unsigned);var ee,er,en=this.high>>>16,ei=65535&this.high,eu=this.low>>>16,eh=65535&this.low,ef=g.high>>>16,eg=65535&g.high,em=g.low>>>16,eS=65535&g.low,eT=0,eE=0;return ee=0+((er=0+eh*eS)>>>16),er&=65535,ee+=eu*eS,eE+=ee>>>16,ee&=65535,ee+=eh*em,eE+=ee>>>16,ee&=65535,eE+=ei*eS,eT+=eE>>>16,eE&=65535,eE+=eu*em,eT+=eE>>>16,eE&=65535,eE+=eh*eg,eT+=eE>>>16,eE&=65535,eT+=en*eS+ei*em+eu*eg+eh*ef,eo(ee<<16|er,(eT&=65535)<<16|eE,this.unsigned)},eO.mul=eO.multiply,eO.divide=function(g){if(et(g)||(g=ep(g)),g.isZero())throw Error("division by zero");if($){var ee,er,en;return this.unsigned||-2147483648!==this.high||-1!==g.low||-1!==g.high?eo((this.unsigned?$.div_u:$.div_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?eS:ev;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return eS;if(g.gt(this.shru(1)))return eE;en=eS}else{if(this.eq(eI))return g.eq(eT)||g.eq(ew)?eI:g.eq(eI)?eT:(ee=this.shr(1).div(g).shl(1)).eq(ev)?g.isNegative()?eT:ew:(er=this.sub(g.mul(ee)),en=ee.add(er.div(g)));if(g.eq(eI))return this.unsigned?eS:ev;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();en=ev}for(er=this;er.gte(g);){for(var ei=Math.ceil(Math.log(ee=Math.max(1,Math.floor(er.toNumber()/g.toNumber())))/Math.LN2),eh=ei<=48?1:eu(2,ei-48),ef=es(ee),eg=ef.mul(g);eg.isNegative()||eg.gt(er);)ee-=eh,eg=(ef=es(ee,this.unsigned)).mul(g);ef.isZero()&&(ef=eT),en=en.add(ef),er=er.sub(eg)}return en},eO.div=eO.divide,eO.modulo=function(g){return(et(g)||(g=ep(g)),$)?eo((this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this.sub(this.div(g).mul(g))},eO.mod=eO.modulo,eO.rem=eO.modulo,eO.not=function(){return eo(~this.low,~this.high,this.unsigned)},eO.and=function(g){return et(g)||(g=ep(g)),eo(this.low&g.low,this.high&g.high,this.unsigned)},eO.or=function(g){return et(g)||(g=ep(g)),eo(this.low|g.low,this.high|g.high,this.unsigned)},eO.xor=function(g){return et(g)||(g=ep(g)),eo(this.low^g.low,this.high^g.high,this.unsigned)},eO.shiftLeft=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eo(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):eo(0,this.low<<g-32,this.unsigned)},eO.shl=eO.shiftLeft,eO.shiftRight=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eo(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):eo(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},eO.shr=eO.shiftRight,eO.shiftRightUnsigned=function(g){if(et(g)&&(g=g.toInt()),0==(g&=63))return this;var $=this.high;return g<32?eo(this.low>>>g|$<<32-g,$>>>g,this.unsigned):32===g?eo($,0,this.unsigned):eo($>>>g-32,0,this.unsigned)},eO.shru=eO.shiftRightUnsigned,eO.shr_u=eO.shiftRightUnsigned,eO.toSigned=function(){return this.unsigned?eo(this.low,this.high,!1):this},eO.toUnsigned=function(){return this.unsigned?this:eo(this.low,this.high,!0)},eO.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},eO.toBytesLE=function(){var g=this.high,$=this.low;return[255&$,$>>>8&255,$>>>16&255,$>>>24,255&g,g>>>8&255,g>>>16&255,g>>>24]},eO.toBytesBE=function(){var g=this.high,$=this.low;return[g>>>24,g>>>16&255,g>>>8&255,255&g,$>>>24,$>>>16&255,$>>>8&255,255&$]},ee.fromBytes=function(g,$,et){return et?ee.fromBytesLE(g,$):ee.fromBytesBE(g,$)},ee.fromBytesLE=function(g,$){return new ee(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,$)},ee.fromBytesBE=function(g,$){return new ee(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],$)}},34778:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"bailoutToClientRendering",{enumerable:!0,get:function(){return en}});let et=ee(4910),er=ee(25319);function en(){let g=er.staticGenerationAsyncStorage.getStore();(null==g||!g.forceStatic)&&(null==g?void 0:g.isStaticGeneration)&&(0,et.throwWithNoSSR)()}("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},84552:(g,$,ee)=>{"use strict";function et(g){}Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"clientHookInServerComponentError",{enumerable:!0,get:function(){return et}}),ee(46783),ee(40002),("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},19738:(g,$,ee)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),function(g,$){for(var ee in $)Object.defineProperty(g,ee,{enumerable:!0,get:$[ee]})}($,{ReadonlyURLSearchParams:function(){return eg},useSearchParams:function(){return em},usePathname:function(){return ey},ServerInsertedHTMLContext:function(){return eo.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return eo.useServerInsertedHTML},useRouter:function(){return ev},useParams:function(){return eT},useSelectedLayoutSegments:function(){return ew},useSelectedLayoutSegment:function(){return eC},redirect:function(){return eu.redirect},permanentRedirect:function(){return eu.permanentRedirect},RedirectType:function(){return eu.RedirectType},notFound:function(){return eh.notFound}});let et=ee(40002),er=ee(78726),en=ee(57210),ei=ee(84552),es=ee(83092),eo=ee(80545),eu=ee(8010),eh=ee(1988),ep=Symbol("internal for urlsearchparams readonly");function ef(){return Error("ReadonlyURLSearchParams cannot be modified")}class eg{[Symbol.iterator](){return this[ep][Symbol.iterator]()}append(){throw ef()}delete(){throw ef()}set(){throw ef()}sort(){throw ef()}constructor(g){this[ep]=g,this.entries=g.entries.bind(g),this.forEach=g.forEach.bind(g),this.get=g.get.bind(g),this.getAll=g.getAll.bind(g),this.has=g.has.bind(g),this.keys=g.keys.bind(g),this.values=g.values.bind(g),this.toString=g.toString.bind(g),this.size=g.size}}function em(){(0,ei.clientHookInServerComponentError)("useSearchParams");let g=(0,et.useContext)(en.SearchParamsContext),$=(0,et.useMemo)(()=>g?new eg(g):null,[g]);{let{bailoutToClientRendering:g}=ee(34778);g()}return $}function ey(){return(0,ei.clientHookInServerComponentError)("usePathname"),(0,et.useContext)(en.PathnameContext)}function ev(){(0,ei.clientHookInServerComponentError)("useRouter");let g=(0,et.useContext)(er.AppRouterContext);if(null===g)throw Error("invariant expected app router to be mounted");return g}function eS(g,$){for(let ee of(void 0===$&&($={}),Object.values(g[1]))){let g=ee[0],et=Array.isArray(g),er=et?g[1]:g;!er||er.startsWith("__PAGE__")||(et&&("c"===g[2]||"oc"===g[2])?$[g[0]]=g[1].split("/"):et&&($[g[0]]=g[1]),$=eS(ee,$))}return $}function eT(){(0,ei.clientHookInServerComponentError)("useParams");let g=(0,et.useContext)(er.GlobalLayoutRouterContext),$=(0,et.useContext)(en.PathParamsContext);return(0,et.useMemo)(()=>(null==g?void 0:g.tree)?eS(g.tree):$,[null==g?void 0:g.tree,$])}function eE(g,$,ee,et){let er;if(void 0===ee&&(ee=!0),void 0===et&&(et=[]),ee)er=g[1][$];else{var en;let $=g[1];er=null!=(en=$.children)?en:Object.values($)[0]}if(!er)return et;let ei=er[0],eo=(0,es.getSegmentValue)(ei);return!eo||eo.startsWith("__PAGE__")?et:(et.push(eo),eE(er,$,!1,et))}function ew(g){void 0===g&&(g="children"),(0,ei.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:$}=(0,et.useContext)(er.LayoutRouterContext);return eE($,g)}function eC(g){void 0===g&&(g="children"),(0,ei.clientHookInServerComponentError)("useSelectedLayoutSegment");let $=ew(g);return 0===$.length?null:$[0]}("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},1988:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),function(g,$){for(var ee in $)Object.defineProperty(g,ee,{enumerable:!0,get:$[ee]})}($,{notFound:function(){return et},isNotFoundError:function(){return er}});let ee="NEXT_NOT_FOUND";function et(){let g=Error(ee);throw g.digest=ee,g}function er(g){return(null==g?void 0:g.digest)===ee}("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},45858:(g,$)=>{"use strict";var ee;Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"RedirectStatusCode",{enumerable:!0,get:function(){return ee}}),function(g){g[g.SeeOther=303]="SeeOther",g[g.TemporaryRedirect=307]="TemporaryRedirect",g[g.PermanentRedirect=308]="PermanentRedirect"}(ee||(ee={})),("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},8010:(g,$,ee)=>{"use strict";var et;Object.defineProperty($,"__esModule",{value:!0}),function(g,$){for(var ee in $)Object.defineProperty(g,ee,{enumerable:!0,get:$[ee]})}($,{RedirectType:function(){return et},getRedirectError:function(){return eo},redirect:function(){return eu},permanentRedirect:function(){return eh},isRedirectError:function(){return ep},getURLFromRedirectError:function(){return ef},getRedirectTypeFromError:function(){return eg},getRedirectStatusCodeFromError:function(){return em}});let er=ee(91877),en=ee(25528),ei=ee(45858),es="NEXT_REDIRECT";function eo(g,$,ee){void 0===ee&&(ee=ei.RedirectStatusCode.TemporaryRedirect);let et=Error(es);et.digest=es+";"+$+";"+g+";"+ee+";";let en=er.requestAsyncStorage.getStore();return en&&(et.mutableCookies=en.mutableCookies),et}function eu(g,$){void 0===$&&($="replace");let ee=en.actionAsyncStorage.getStore();throw eo(g,$,(null==ee?void 0:ee.isAction)?ei.RedirectStatusCode.SeeOther:ei.RedirectStatusCode.TemporaryRedirect)}function eh(g,$){void 0===$&&($="replace");let ee=en.actionAsyncStorage.getStore();throw eo(g,$,(null==ee?void 0:ee.isAction)?ei.RedirectStatusCode.SeeOther:ei.RedirectStatusCode.PermanentRedirect)}function ep(g){if("string"!=typeof(null==g?void 0:g.digest))return!1;let[$,ee,et,er]=g.digest.split(";",4),en=Number(er);return $===es&&("replace"===ee||"push"===ee)&&"string"==typeof et&&!isNaN(en)&&en in ei.RedirectStatusCode}function ef(g){return ep(g)?g.digest.split(";",3)[2]:null}function eg(g){if(!ep(g))throw Error("Not a redirect error");return g.digest.split(";",2)[1]}function em(g){if(!ep(g))throw Error("Not a redirect error");return Number(g.digest.split(";",4)[3])}(function(g){g.push="push",g.replace="replace"})(et||(et={})),("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},83092:(g,$)=>{"use strict";function ee(g){return Array.isArray(g)?g[1]:g}Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"getSegmentValue",{enumerable:!0,get:function(){return ee}}),("function"==typeof $.default||"object"==typeof $.default&&null!==$.default)&&void 0===$.default.__esModule&&(Object.defineProperty($.default,"__esModule",{value:!0}),Object.assign($.default,$),g.exports=$.default)},78726:(g,$,ee)=>{"use strict";g.exports=ee(50482).vendored.contexts.AppRouterContext},57210:(g,$,ee)=>{"use strict";g.exports=ee(50482).vendored.contexts.HooksClientContext},80545:(g,$,ee)=>{"use strict";g.exports=ee(50482).vendored.contexts.ServerInsertedHtml},4910:(g,$)=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),function(g,$){for(var ee in $)Object.defineProperty(g,ee,{enumerable:!0,get:$[ee]})}($,{NEXT_DYNAMIC_NO_SSR_CODE:function(){return ee},throwWithNoSSR:function(){return et}});let ee="NEXT_DYNAMIC_NO_SSR_CODE";function et(){let g=Error(ee);throw g.digest=ee,g}},44551:(g,$,ee)=>{g.exports=ee(19738)},29530:(g,$,ee)=>{"use strict";var et=ee(57628);g.exports=$=et.descriptor=et.Root.fromJSON(ee(24552)).lookup(".google.protobuf");var er=et.Namespace,en=et.Root,ei=et.Enum,es=et.Type,eo=et.Field,eu=et.MapField,eh=et.OneOf,ep=et.Service,ef=et.Method;function eg(g,ee,et){var eu=$.FileDescriptorProto.create({name:g.filename||(g.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});et&&(eu.syntax=et),g instanceof en||(eu.package=g.fullName.substring(1));for(var eh,ef=0;ef<g.nestedArray.length;++ef)(eh=g._nestedArray[ef])instanceof es?eu.messageType.push(eh.toDescriptor(et)):eh instanceof ei?eu.enumType.push(eh.toDescriptor()):eh instanceof eo?eu.extension.push(eh.toDescriptor(et)):eh instanceof ep?eu.service.push(eh.toDescriptor()):eh instanceof er&&eg(eh,ee,et);eu.options=eO(g.options,$.FileOptions),eu.messageType.length+eu.enumType.length+eu.extension.length+eu.service.length&&ee.push(eu)}en.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.FileDescriptorSet.decode(g));var ee=new en;if(g.file)for(var et,er,eu,eh=0;eh<g.file.length;++eh){if(er=ee,(et=g.file[eh]).package&&et.package.length&&(er=ee.define(et.package)),et.name&&et.name.length&&ee.files.push(er.filename=et.name),et.messageType)for(eu=0;eu<et.messageType.length;++eu)er.add(es.fromDescriptor(et.messageType[eu],et.syntax));if(et.enumType)for(eu=0;eu<et.enumType.length;++eu)er.add(ei.fromDescriptor(et.enumType[eu]));if(et.extension)for(eu=0;eu<et.extension.length;++eu)er.add(eo.fromDescriptor(et.extension[eu]));if(et.service)for(eu=0;eu<et.service.length;++eu)er.add(ep.fromDescriptor(et.service[eu]));var ef=eI(et.options,$.FileOptions);if(ef){var eg=Object.keys(ef);for(eu=0;eu<eg.length;++eu)er.setOption(eg[eu],ef[eg[eu]])}}return ee},en.prototype.toDescriptor=function(g){var ee=$.FileDescriptorSet.create();return eg(this,ee.file,g),ee};var em=0;es.fromDescriptor=function(g,ee){"number"==typeof g.length&&(g=$.DescriptorProto.decode(g));var et,er=new es(g.name.length?g.name:"Type"+em++,eI(g.options,$.MessageOptions));if(g.oneofDecl)for(et=0;et<g.oneofDecl.length;++et)er.add(eh.fromDescriptor(g.oneofDecl[et]));if(g.field)for(et=0;et<g.field.length;++et){var en=eo.fromDescriptor(g.field[et],ee);er.add(en),g.field[et].hasOwnProperty("oneofIndex")&&er.oneofsArray[g.field[et].oneofIndex].add(en)}if(g.extension)for(et=0;et<g.extension.length;++et)er.add(eo.fromDescriptor(g.extension[et],ee));if(g.nestedType)for(et=0;et<g.nestedType.length;++et)er.add(es.fromDescriptor(g.nestedType[et],ee)),g.nestedType[et].options&&g.nestedType[et].options.mapEntry&&er.setOption("map_entry",!0);if(g.enumType)for(et=0;et<g.enumType.length;++et)er.add(ei.fromDescriptor(g.enumType[et]));if(g.extensionRange&&g.extensionRange.length)for(et=0,er.extensions=[];et<g.extensionRange.length;++et)er.extensions.push([g.extensionRange[et].start,g.extensionRange[et].end]);if(g.reservedRange&&g.reservedRange.length||g.reservedName&&g.reservedName.length){if(er.reserved=[],g.reservedRange)for(et=0;et<g.reservedRange.length;++et)er.reserved.push([g.reservedRange[et].start,g.reservedRange[et].end]);if(g.reservedName)for(et=0;et<g.reservedName.length;++et)er.reserved.push(g.reservedName[et])}return er},es.prototype.toDescriptor=function(g){var ee,et,er=$.DescriptorProto.create({name:this.name});for(et=0;et<this.fieldsArray.length;++et)if(er.field.push(ee=this._fieldsArray[et].toDescriptor(g)),this._fieldsArray[et]instanceof eu){var en=e_(this._fieldsArray[et].keyType,this._fieldsArray[et].resolvedKeyType),eh=e_(this._fieldsArray[et].type,this._fieldsArray[et].resolvedType),ep=11===eh||14===eh?this._fieldsArray[et].resolvedType&&eA(this.parent,this._fieldsArray[et].resolvedType)||this._fieldsArray[et].type:void 0;er.nestedType.push($.DescriptorProto.create({name:ee.typeName,field:[$.FieldDescriptorProto.create({name:"key",number:1,label:1,type:en}),$.FieldDescriptorProto.create({name:"value",number:2,label:1,type:eh,typeName:ep})],options:$.MessageOptions.create({mapEntry:!0})}))}for(et=0;et<this.oneofsArray.length;++et)er.oneofDecl.push(this._oneofsArray[et].toDescriptor());for(et=0;et<this.nestedArray.length;++et)this._nestedArray[et]instanceof eo?er.field.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof es?er.nestedType.push(this._nestedArray[et].toDescriptor(g)):this._nestedArray[et]instanceof ei&&er.enumType.push(this._nestedArray[et].toDescriptor());if(this.extensions)for(et=0;et<this.extensions.length;++et)er.extensionRange.push($.DescriptorProto.ExtensionRange.create({start:this.extensions[et][0],end:this.extensions[et][1]}));if(this.reserved)for(et=0;et<this.reserved.length;++et)"string"==typeof this.reserved[et]?er.reservedName.push(this.reserved[et]):er.reservedRange.push($.DescriptorProto.ReservedRange.create({start:this.reserved[et][0],end:this.reserved[et][1]}));return er.options=eO(this.options,$.MessageOptions),er};var ey=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;eo.fromDescriptor=function(g,ee){if("number"==typeof g.length&&(g=$.DescriptorProto.decode(g)),"number"!=typeof g.number)throw Error("missing field id");switch(et=g.typeName&&g.typeName.length?g.typeName:ew(g.type),g.label){case 1:er=void 0;break;case 2:er="required";break;case 3:er="repeated";break;default:throw Error("illegal label: "+g.label)}var et,er,en=g.extendee;void 0!==g.extendee&&(en=en.length?en:void 0);var ei=new eo(g.name.length?g.name:"field"+g.number,g.number,et,er,en);if(ei.options=eI(g.options,$.FieldOptions),g.defaultValue&&g.defaultValue.length){var es=g.defaultValue;switch(es){case"true":case"TRUE":es=!0;break;case"false":case"FALSE":es=!1;break;default:ey.exec(es)&&(es=parseInt(es))}ei.setOption("default",es)}return eC(g.type)&&("proto3"===ee?g.options&&!g.options.packed&&ei.setOption("packed",!1):g.options&&g.options.packed||ei.setOption("packed",!1)),ei},eo.prototype.toDescriptor=function(g){var ee=$.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)ee.type=11,ee.typeName=et.util.ucFirst(this.name),ee.label=3;else{switch(ee.type=e_(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:ee.typeName=this.resolvedType?eA(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":ee.label=3;break;case"required":ee.label=2;break;default:ee.label=1}}if(ee.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(ee.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(ee.options=eO(this.options,$.FieldOptions),null!=this.options.default&&(ee.defaultValue=String(this.options.default))),"proto3"===g?this.packed||((ee.options||(ee.options=$.FieldOptions.create())).packed=!1):this.packed&&((ee.options||(ee.options=$.FieldOptions.create())).packed=!0),ee};var ev=0;ei.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.EnumDescriptorProto.decode(g));var ee={};if(g.value)for(var et=0;et<g.value.length;++et){var er=g.value[et].name,en=g.value[et].number||0;ee[er&&er.length?er:"NAME"+en]=en}return new ei(g.name&&g.name.length?g.name:"Enum"+ev++,ee,eI(g.options,$.EnumOptions))},ei.prototype.toDescriptor=function(){for(var g=[],ee=0,et=Object.keys(this.values);ee<et.length;++ee)g.push($.EnumValueDescriptorProto.create({name:et[ee],number:this.values[et[ee]]}));return $.EnumDescriptorProto.create({name:this.name,value:g,options:eO(this.options,$.EnumOptions)})};var eS=0;eh.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.OneofDescriptorProto.decode(g)),new eh(g.name&&g.name.length?g.name:"oneof"+eS++)},eh.prototype.toDescriptor=function(){return $.OneofDescriptorProto.create({name:this.name})};var eT=0;ep.fromDescriptor=function(g){"number"==typeof g.length&&(g=$.ServiceDescriptorProto.decode(g));var ee=new ep(g.name&&g.name.length?g.name:"Service"+eT++,eI(g.options,$.ServiceOptions));if(g.method)for(var et=0;et<g.method.length;++et)ee.add(ef.fromDescriptor(g.method[et]));return ee},ep.prototype.toDescriptor=function(){for(var g=[],ee=0;ee<this.methodsArray.length;++ee)g.push(this._methodsArray[ee].toDescriptor());return $.ServiceDescriptorProto.create({name:this.name,method:g,options:eO(this.options,$.ServiceOptions)})};var eE=0;function ew(g){switch(g){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+g)}function eC(g){switch(g){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function e_(g,$){switch(g){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if($ instanceof ei)return 14;if($ instanceof es)return $.group?10:11;throw Error("illegal type: "+g)}function eI(g,$){if(g){for(var ee,er,en,es=[],eo=0;eo<$.fieldsArray.length;++eo)"uninterpretedOption"!==(er=(ee=$._fieldsArray[eo]).name)&&g.hasOwnProperty(er)&&(en=g[er],ee.resolvedType instanceof ei&&"number"==typeof en&&void 0!==ee.resolvedType.valuesById[en]&&(en=ee.resolvedType.valuesById[en]),es.push(eN(er),en));return es.length?et.util.toObject(es):void 0}}function eO(g,$){if(g){for(var ee,er,en=[],ei=0,es=Object.keys(g);ei<es.length;++ei)if(er=g[ee=es[ei]],"default"!==ee){var eo=$.fields[ee];(eo||(eo=$.fields[ee=et.util.camelCase(ee)]))&&en.push(ee,er)}return en.length?$.fromObject(et.util.toObject(en)):void 0}}function eA(g,$){var ee=g.fullName.split("."),et=$.fullName.split("."),ei=0,es=0,eo=et.length-1;if(!(g instanceof en)&&$ instanceof er)for(;ei<ee.length&&es<eo&&ee[ei]===et[es];){var eu=$.lookup(ee[ei++],!0);if(null!==eu&&eu!==$)break;++es}else for(;ei<ee.length&&es<eo&&ee[ei]===et[es];++ei,++es);return et.slice(es).join(".")}function eN(g){return g.substring(0,1)+g.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(g,$){return"_"+$.toLowerCase()})}ef.fromDescriptor=function(g){return"number"==typeof g.length&&(g=$.MethodDescriptorProto.decode(g)),new ef(g.name&&g.name.length?g.name:"Method"+eE++,"rpc",g.inputType,g.outputType,!!g.clientStreaming,!!g.serverStreaming,eI(g.options,$.MethodOptions))},ef.prototype.toDescriptor=function(){return $.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:eO(this.options,$.MethodOptions)})}},57628:(g,$,ee)=>{"use strict";g.exports=ee(22378)},6353:g=>{"use strict";g.exports=et;var $,ee=/\/|\./;function et(g,$){ee.test(g)||(g="google/protobuf/"+g+".proto",$={nested:{google:{nested:{protobuf:{nested:$}}}}}),et[g]=$}et("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),et("duration",{Duration:$={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),et("timestamp",{Timestamp:$}),et("empty",{Empty:{fields:{}}}),et("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),et("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),et("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),et.get=function(g){return et[g]||null}},89981:(g,$,ee)=>{"use strict";var et=$,er=ee(56734),en=ee(87454);function ei(g,$,ee,et){if($.resolvedType){if($.resolvedType instanceof er){g("switch(d%s){",et);for(var en=$.resolvedType.values,ei=Object.keys(en),es=0;es<ei.length;++es)$.repeated&&en[ei[es]]===$.typeDefault&&g("default:"),g("case%j:",ei[es])("case %i:",en[ei[es]])("m%s=%j",et,en[ei[es]])("break");g("}")}else g('if(typeof d%s!=="object")',et)("throw TypeError(%j)",$.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",et,ee,et)}else{var eo=!1;switch($.type){case"double":case"float":g("m%s=Number(d%s)",et,et);break;case"uint32":case"fixed32":g("m%s=d%s>>>0",et,et);break;case"int32":case"sint32":case"sfixed32":g("m%s=d%s|0",et,et);break;case"uint64":eo=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",et,et,eo)('else if(typeof d%s==="string")',et)("m%s=parseInt(d%s,10)",et,et)('else if(typeof d%s==="number")',et)("m%s=d%s",et,et)('else if(typeof d%s==="object")',et)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",et,et,et,eo?"true":"");break;case"bytes":g('if(typeof d%s==="string")',et)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",et,et,et)("else if(d%s.length)",et)("m%s=d%s",et,et);break;case"string":g("m%s=String(d%s)",et,et);break;case"bool":g("m%s=Boolean(d%s)",et,et)}}return g}function es(g,$,ee,et){if($.resolvedType)$.resolvedType instanceof er?g("d%s=o.enums===String?types[%i].values[m%s]:m%s",et,ee,et,et):g("d%s=types[%i].toObject(m%s,o)",et,ee,et);else{var en=!1;switch($.type){case"double":case"float":g("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",et,et,et,et);break;case"uint64":en=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":g('if(typeof m%s==="number")',et)("d%s=o.longs===String?String(m%s):m%s",et,et,et)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",et,et,et,et,en?"true":"",et);break;case"bytes":g("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",et,et,et,et,et);break;default:g("d%s=m%s",et,et)}}return g}et.fromObject=function(g){var $=g.fieldsArray,ee=en.codegen(["d"],g.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!$.length)return ee("return new this.ctor");ee("var m=new this.ctor");for(var et=0;et<$.length;++et){var es=$[et].resolve(),eo=en.safeProp(es.name);es.map?(ee("if(d%s){",eo)('if(typeof d%s!=="object")',eo)("throw TypeError(%j)",es.fullName+": object expected")("m%s={}",eo)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",eo),ei(ee,es,et,eo+"[ks[i]]")("}")("}")):es.repeated?(ee("if(d%s){",eo)("if(!Array.isArray(d%s))",eo)("throw TypeError(%j)",es.fullName+": array expected")("m%s=[]",eo)("for(var i=0;i<d%s.length;++i){",eo),ei(ee,es,et,eo+"[i]")("}")("}")):(es.resolvedType instanceof er||ee("if(d%s!=null){",eo),ei(ee,es,et,eo),es.resolvedType instanceof er||ee("}"))}return ee("return m")},et.toObject=function(g){var $=g.fieldsArray.slice().sort(en.compareFieldsById);if(!$.length)return en.codegen()("return {}");for(var ee=en.codegen(["m","o"],g.name+"$toObject")("if(!o)")("o={}")("var d={}"),et=[],ei=[],eo=[],eu=0;eu<$.length;++eu)$[eu].partOf||($[eu].resolve().repeated?et:$[eu].map?ei:eo).push($[eu]);if(et.length){for(ee("if(o.arrays||o.defaults){"),eu=0;eu<et.length;++eu)ee("d%s=[]",en.safeProp(et[eu].name));ee("}")}if(ei.length){for(ee("if(o.objects||o.defaults){"),eu=0;eu<ei.length;++eu)ee("d%s={}",en.safeProp(ei[eu].name));ee("}")}if(eo.length){for(ee("if(o.defaults){"),eu=0;eu<eo.length;++eu){var eh=eo[eu],ep=en.safeProp(eh.name);if(eh.resolvedType instanceof er)ee("d%s=o.enums===String?%j:%j",ep,eh.resolvedType.valuesById[eh.typeDefault],eh.typeDefault);else if(eh.long)ee("if(util.Long){")("var n=new util.Long(%i,%i,%j)",eh.typeDefault.low,eh.typeDefault.high,eh.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ep)("}else")("d%s=o.longs===String?%j:%i",ep,eh.typeDefault.toString(),eh.typeDefault.toNumber());else if(eh.bytes){var ef="["+Array.prototype.slice.call(eh.typeDefault).join(",")+"]";ee("if(o.bytes===String)d%s=%j",ep,String.fromCharCode.apply(String,eh.typeDefault))("else{")("d%s=%s",ep,ef)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ep,ep)("}")}else ee("d%s=%j",ep,eh.typeDefault)}ee("}")}var eg=!1;for(eu=0;eu<$.length;++eu){var eh=$[eu],em=g._fieldsArray.indexOf(eh),ep=en.safeProp(eh.name);eh.map?(eg||(eg=!0,ee("var ks2")),ee("if(m%s&&(ks2=Object.keys(m%s)).length){",ep,ep)("d%s={}",ep)("for(var j=0;j<ks2.length;++j){"),es(ee,eh,em,ep+"[ks2[j]]")("}")):eh.repeated?(ee("if(m%s&&m%s.length){",ep,ep)("d%s=[]",ep)("for(var j=0;j<m%s.length;++j){",ep),es(ee,eh,em,ep+"[j]")("}")):(ee("if(m%s!=null&&m.hasOwnProperty(%j)){",ep,eh.name),es(ee,eh,em,ep),eh.partOf&&ee("if(o.oneofs)")("d%s=%j",en.safeProp(eh.partOf.name),eh.name)),ee("}")}return ee("return d")}},33951:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(56734),er=ee(50816),en=ee(87454);function ei(g){return"missing required '"+g.name+"'"}function es(g){var $=en.codegen(["r","l"],g.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(g.fieldsArray.filter(function(g){return g.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");g.group&&$("if((t&7)===4)")("break"),$("switch(t>>>3){");for(var ee=0;ee<g.fieldsArray.length;++ee){var es=g._fieldsArray[ee].resolve(),eo=es.resolvedType instanceof et?"int32":es.type,eu="m"+en.safeProp(es.name);$("case %i:",es.id),es.map?($("if(%s===util.emptyObject)",eu)("%s={}",eu)("var c2 = r.uint32()+r.pos"),void 0!==er.defaults[es.keyType]?$("k=%j",er.defaults[es.keyType]):$("k=null"),void 0!==er.defaults[eo]?$("value=%j",er.defaults[eo]):$("value=null"),$("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",es.keyType)("case 2:"),void 0===er.basic[eo]?$("value=types[%i].decode(r,r.uint32())",ee):$("value=r.%s()",eo),$("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),$(void 0!==er.long[es.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",eu)):es.repeated?($("if(!(%s&&%s.length))",eu,eu)("%s=[]",eu),void 0!==er.packed[eo]&&$("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",eu,eo)("}else"),void 0===er.basic[eo]?$(es.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",eu,ee):$("%s.push(r.%s())",eu,eo)):void 0===er.basic[eo]?$(es.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",eu,ee):$("%s=r.%s()",eu,eo),$("break")}for($("default:")("r.skipType(t&7)")("break")("}")("}"),ee=0;ee<g._fieldsArray.length;++ee){var eh=g._fieldsArray[ee];eh.required&&$("if(!m.hasOwnProperty(%j))",eh.name)("throw util.ProtocolError(%j,{instance:m})",ei(eh))}return $("return m")}},95:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(56734),er=ee(50816),en=ee(87454);function ei(g,$,ee,et){return $.resolvedType.group?g("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",ee,et,($.id<<3|3)>>>0,($.id<<3|4)>>>0):g("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",ee,et,($.id<<3|2)>>>0)}function es(g){for(var $,ee,es=en.codegen(["m","w"],g.name+"$encode")("if(!w)")("w=Writer.create()"),eo=g.fieldsArray.slice().sort(en.compareFieldsById),$=0;$<eo.length;++$){var eu=eo[$].resolve(),eh=g._fieldsArray.indexOf(eu),ep=eu.resolvedType instanceof et?"int32":eu.type,ef=er.basic[ep];ee="m"+en.safeProp(eu.name),eu.map?(es("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ee,eu.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ee)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(eu.id<<3|2)>>>0,8|er.mapKey[eu.keyType],eu.keyType),void 0===ef?es("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",eh,ee):es(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ef,ep,ee),es("}")("}")):eu.repeated?(es("if(%s!=null&&%s.length){",ee,ee),eu.packed&&void 0!==er.packed[ep]?es("w.uint32(%i).fork()",(eu.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ee)("w.%s(%s[i])",ep,ee)("w.ldelim()"):(es("for(var i=0;i<%s.length;++i)",ee),void 0===ef?ei(es,eu,eh,ee+"[i]"):es("w.uint32(%i).%s(%s[i])",(eu.id<<3|ef)>>>0,ep,ee)),es("}")):(eu.optional&&es("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ee,eu.name),void 0===ef?ei(es,eu,eh,ee):es("w.uint32(%i).%s(%s)",(eu.id<<3|ef)>>>0,ep,ee))}return es("return w")}},56734:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(44184);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="Enum";var er=ee(98727),en=ee(87454);function ei(g,$,ee,er,en){if(et.call(this,g,ee),$&&"object"!=typeof $)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=er,this.comments=en||{},this.reserved=void 0,$)for(var ei=Object.keys($),es=0;es<ei.length;++es)"number"==typeof $[ei[es]]&&(this.valuesById[this.values[ei[es]]=$[ei[es]]]=ei[es])}ei.fromJSON=function(g,$){var ee=new ei(g,$.values,$.options,$.comment,$.comments);return ee.reserved=$.reserved,ee},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",$?this.comment:void 0,"comments",$?this.comments:void 0])},ei.prototype.add=function(g,$,ee){if(!en.isString(g))throw TypeError("name must be a string");if(!en.isInteger($))throw TypeError("id must be an integer");if(void 0!==this.values[g])throw Error("duplicate name '"+g+"' in "+this);if(this.isReservedId($))throw Error("id "+$+" is reserved in "+this);if(this.isReservedName(g))throw Error("name '"+g+"' is reserved in "+this);if(void 0!==this.valuesById[$]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+$+" in "+this);this.values[g]=$}else this.valuesById[this.values[g]=$]=g;return this.comments[g]=ee||null,this},ei.prototype.remove=function(g){if(!en.isString(g))throw TypeError("name must be a string");var $=this.values[g];if(null==$)throw Error("name '"+g+"' does not exist in "+this);return delete this.valuesById[$],delete this.values[g],delete this.comments[g],this},ei.prototype.isReservedId=function(g){return er.isReservedId(this.reserved,g)},ei.prototype.isReservedName=function(g){return er.isReservedName(this.reserved,g)}},98138:(g,$,ee)=>{"use strict";g.exports=eu;var et,er=ee(44184);((eu.prototype=Object.create(er.prototype)).constructor=eu).className="Field";var en=ee(56734),ei=ee(50816),es=ee(87454),eo=/^required|optional|repeated$/;function eu(g,$,ee,et,en,eu,eh){if(es.isObject(et)?(eh=en,eu=et,et=en=void 0):es.isObject(en)&&(eh=eu,eu=en,en=void 0),er.call(this,g,eu),!es.isInteger($)||$<0)throw TypeError("id must be a non-negative integer");if(!es.isString(ee))throw TypeError("type must be a string");if(void 0!==et&&!eo.test(et=et.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==en&&!es.isString(en))throw TypeError("extend must be a string");"proto3_optional"===et&&(et="optional"),this.rule=et&&"optional"!==et?et:void 0,this.type=ee,this.id=$,this.extend=en||void 0,this.required="required"===et,this.optional=!this.required,this.repeated="repeated"===et,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!es.Long&&void 0!==ei.long[ee],this.bytes="bytes"===ee,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=eh}eu.fromJSON=function(g,$){return new eu(g,$.id,$.type,$.rule,$.extend,$.options,$.comment)},Object.defineProperty(eu.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),eu.prototype.setOption=function(g,$,ee){return"packed"===g&&(this._packed=null),er.prototype.setOption.call(this,g,$,ee)},eu.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return es.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},eu.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=ei.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof et?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof en&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof en)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=es.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var g;es.base64.test(this.typeDefault)?es.base64.decode(this.typeDefault,g=es.newBuffer(es.base64.length(this.typeDefault)),0):es.utf8.write(this.typeDefault,g=es.newBuffer(es.utf8.length(this.typeDefault)),0),this.typeDefault=g}return this.map?this.defaultValue=es.emptyObject:this.repeated?this.defaultValue=es.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof et&&(this.parent.ctor.prototype[this.name]=this.defaultValue),er.prototype.resolve.call(this)},eu.d=function(g,$,ee,et){return"function"==typeof $?$=es.decorateType($).name:$&&"object"==typeof $&&($=es.decorateEnum($).name),function(er,en){es.decorateType(er.constructor).add(new eu(en,g,$,ee,{default:et}))}},eu._configure=function(g){et=g}},22585:(g,$,ee)=>{"use strict";var et=g.exports=ee(21353);function er(g,$,ee){return"function"==typeof $?(ee=$,$=new et.Root):$||($=new et.Root),$.load(g,ee)}function en(g,$){return $||($=new et.Root),$.loadSync(g)}et.build="light",et.load=er,et.loadSync=en,et.encoder=ee(95),et.decoder=ee(33951),et.verifier=ee(77624),et.converter=ee(89981),et.ReflectionObject=ee(44184),et.Namespace=ee(98727),et.Root=ee(43852),et.Enum=ee(56734),et.Type=ee(15006),et.Field=ee(98138),et.OneOf=ee(47702),et.MapField=ee(8751),et.Service=ee(58719),et.Method=ee(80898),et.Message=ee(92038),et.wrappers=ee(51904),et.types=ee(50816),et.util=ee(87454),et.ReflectionObject._configure(et.Root),et.Namespace._configure(et.Type,et.Service,et.Enum),et.Root._configure(et.Type),et.Field._configure(et.Type)},21353:(g,$,ee)=>{"use strict";var et=$;function er(){et.util._configure(),et.Writer._configure(et.BufferWriter),et.Reader._configure(et.BufferReader)}et.build="minimal",et.Writer=ee(79822),et.BufferWriter=ee(57039),et.Reader=ee(1761),et.BufferReader=ee(8282),et.util=ee(58345),et.rpc=ee(78346),et.roots=ee(48091),et.configure=er,er()},22378:(g,$,ee)=>{"use strict";var et=g.exports=ee(22585);et.build="full",et.tokenize=ee(71652),et.parse=ee(46796),et.common=ee(6353),et.Root._configure(et.Type,et.parse,et.common)},8751:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(98138);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="MapField";var er=ee(50816),en=ee(87454);function ei(g,$,ee,er,ei,es){if(et.call(this,g,$,er,void 0,void 0,ei,es),!en.isString(ee))throw TypeError("keyType must be a string");this.keyType=ee,this.resolvedKeyType=null,this.map=!0}ei.fromJSON=function(g,$){return new ei(g,$.id,$.keyType,$.type,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",$?this.comment:void 0])},ei.prototype.resolve=function(){if(this.resolved)return this;if(void 0===er.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return et.prototype.resolve.call(this)},ei.d=function(g,$,ee){return"function"==typeof ee?ee=en.decorateType(ee).name:ee&&"object"==typeof ee&&(ee=en.decorateEnum(ee).name),function(et,er){en.decorateType(et.constructor).add(new ei(er,g,$,ee))}}},92038:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(58345);function er(g){if(g)for(var $=Object.keys(g),ee=0;ee<$.length;++ee)this[$[ee]]=g[$[ee]]}er.create=function(g){return this.$type.create(g)},er.encode=function(g,$){return this.$type.encode(g,$)},er.encodeDelimited=function(g,$){return this.$type.encodeDelimited(g,$)},er.decode=function(g){return this.$type.decode(g)},er.decodeDelimited=function(g){return this.$type.decodeDelimited(g)},er.verify=function(g){return this.$type.verify(g)},er.fromObject=function(g){return this.$type.fromObject(g)},er.toObject=function(g,$){return this.$type.toObject(g,$)},er.prototype.toJSON=function(){return this.$type.toObject(this,et.toJSONOptions)}},80898:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(44184);((en.prototype=Object.create(et.prototype)).constructor=en).className="Method";var er=ee(87454);function en(g,$,ee,en,ei,es,eo,eu,eh){if(er.isObject(ei)?(eo=ei,ei=es=void 0):er.isObject(es)&&(eo=es,es=void 0),!(void 0===$||er.isString($)))throw TypeError("type must be a string");if(!er.isString(ee))throw TypeError("requestType must be a string");if(!er.isString(en))throw TypeError("responseType must be a string");et.call(this,g,eo),this.type=$||"rpc",this.requestType=ee,this.requestStream=!!ei||void 0,this.responseType=en,this.responseStream=!!es||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=eu,this.parsedOptions=eh}en.fromJSON=function(g,$){return new en(g,$.type,$.requestType,$.responseType,$.requestStream,$.responseStream,$.options,$.comment,$.parsedOptions)},en.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return er.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",$?this.comment:void 0,"parsedOptions",this.parsedOptions])},en.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),et.prototype.resolve.call(this))}},98727:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(44184);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Namespace";var es=ee(98138),eo=ee(47702),eu=ee(87454);function eh(g,$){if(g&&g.length){for(var ee={},et=0;et<g.length;++et)ee[g[et].name]=g[et].toJSON($);return ee}}function ep(g,$){ei.call(this,g,$),this.nested=void 0,this._nestedArray=null}function ef(g){return g._nestedArray=null,g}ep.fromJSON=function(g,$){return new ep(g,$.options).addJSON($.nested)},ep.arrayToJSON=eh,ep.isReservedId=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if("string"!=typeof g[ee]&&g[ee][0]<=$&&g[ee][1]>$)return!0}return!1},ep.isReservedName=function(g,$){if(g){for(var ee=0;ee<g.length;++ee)if(g[ee]===$)return!0}return!1},Object.defineProperty(ep.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=eu.toArray(this.nested))}}),ep.prototype.toJSON=function(g){return eu.toObject(["options",this.options,"nested",eh(this.nestedArray,g)])},ep.prototype.addJSON=function(g){var $=this;if(g)for(var ee,ei=Object.keys(g),eo=0;eo<ei.length;++eo)ee=g[ei[eo]],$.add((void 0!==ee.fields?et.fromJSON:void 0!==ee.values?en.fromJSON:void 0!==ee.methods?er.fromJSON:void 0!==ee.id?es.fromJSON:ep.fromJSON)(ei[eo],ee));return this},ep.prototype.get=function(g){return this.nested&&this.nested[g]||null},ep.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof en)return this.nested[g].values;throw Error("no such enum: "+g)},ep.prototype.add=function(g){if(!(g instanceof es&&void 0!==g.extend||g instanceof et||g instanceof en||g instanceof er||g instanceof ep||g instanceof eo))throw TypeError("object must be a valid nested object");if(this.nested){var $=this.get(g.name);if($){if($ instanceof ep&&g instanceof ep&&!($ instanceof et||$ instanceof er)){for(var ee=$.nestedArray,ei=0;ei<ee.length;++ei)g.add(ee[ei]);this.remove($),this.nested||(this.nested={}),g.setOptions($.options,!0)}else throw Error("duplicate name '"+g.name+"' in "+this)}}else this.nested={};return this.nested[g.name]=g,g.onAdd(this),ef(this)},ep.prototype.remove=function(g){if(!(g instanceof ei))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=void 0),g.onRemove(this),ef(this)},ep.prototype.define=function(g,$){if(eu.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&""===g[0])throw Error("path must be relative");for(var ee=this;g.length>0;){var et=g.shift();if(ee.nested&&ee.nested[et]){if(!((ee=ee.nested[et])instanceof ep))throw Error("path conflicts with non-namespace objects")}else ee.add(ee=new ep(et))}return $&&ee.addJSON($),ee},ep.prototype.resolveAll=function(){for(var g=this.nestedArray,$=0;$<g.length;)g[$]instanceof ep?g[$++].resolveAll():g[$++].resolve();return this.resolve()},ep.prototype.lookup=function(g,$,ee){if("boolean"==typeof $?(ee=$,$=void 0):$&&!Array.isArray($)&&($=[$]),eu.isString(g)&&g.length){if("."===g)return this.root;g=g.split(".")}else if(!g.length)return this;if(""===g[0])return this.root.lookup(g.slice(1),$);var et=this.get(g[0]);if(et){if(1===g.length){if(!$||$.indexOf(et.constructor)>-1)return et}else if(et instanceof ep&&(et=et.lookup(g.slice(1),$,!0)))return et}else for(var er=0;er<this.nestedArray.length;++er)if(this._nestedArray[er]instanceof ep&&(et=this._nestedArray[er].lookup(g,$,!0)))return et;return null===this.parent||ee?null:this.parent.lookup(g,$)},ep.prototype.lookupType=function(g){var $=this.lookup(g,[et]);if(!$)throw Error("no such type: "+g);return $},ep.prototype.lookupEnum=function(g){var $=this.lookup(g,[en]);if(!$)throw Error("no such Enum '"+g+"' in "+this);return $},ep.prototype.lookupTypeOrEnum=function(g){var $=this.lookup(g,[et,en]);if(!$)throw Error("no such Type or Enum '"+g+"' in "+this);return $},ep.prototype.lookupService=function(g){var $=this.lookup(g,[er]);if(!$)throw Error("no such Service '"+g+"' in "+this);return $},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},44184:(g,$,ee)=>{"use strict";g.exports=en,en.className="ReflectionObject";var et,er=ee(87454);function en(g,$){if(!er.isString(g))throw TypeError("name must be a string");if($&&!er.isObject($))throw TypeError("options must be an object");this.options=$,this.parsedOptions=null,this.name=g,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(en.prototype,{root:{get:function(){for(var g=this;null!==g.parent;)g=g.parent;return g}},fullName:{get:function(){for(var g=[this.name],$=this.parent;$;)g.unshift($.name),$=$.parent;return g.join(".")}}}),en.prototype.toJSON=function(){throw Error()},en.prototype.onAdd=function(g){this.parent&&this.parent!==g&&this.parent.remove(this),this.parent=g,this.resolved=!1;var $=g.root;$ instanceof et&&$._handleAdd(this)},en.prototype.onRemove=function(g){var $=g.root;$ instanceof et&&$._handleRemove(this),this.parent=null,this.resolved=!1},en.prototype.resolve=function(){return this.resolved||this.root instanceof et&&(this.resolved=!0),this},en.prototype.getOption=function(g){if(this.options)return this.options[g]},en.prototype.setOption=function(g,$,ee){return ee&&this.options&&void 0!==this.options[g]||((this.options||(this.options={}))[g]=$),this},en.prototype.setParsedOption=function(g,$,ee){this.parsedOptions||(this.parsedOptions=[]);var et=this.parsedOptions;if(ee){var en=et.find(function($){return Object.prototype.hasOwnProperty.call($,g)});if(en){var ei=en[g];er.setProperty(ei,ee,$)}else(en={})[g]=er.setProperty({},ee,$),et.push(en)}else{var es={};es[g]=$,et.push(es)}return this},en.prototype.setOptions=function(g,$){if(g)for(var ee=Object.keys(g),et=0;et<ee.length;++et)this.setOption(ee[et],g[ee[et]],$);return this},en.prototype.toString=function(){var g=this.constructor.className,$=this.fullName;return $.length?g+" "+$:g},en._configure=function(g){et=g}},47702:(g,$,ee)=>{"use strict";g.exports=ei;var et=ee(44184);((ei.prototype=Object.create(et.prototype)).constructor=ei).className="OneOf";var er=ee(98138),en=ee(87454);function ei(g,$,ee,er){if(Array.isArray($)||(ee=$,$=void 0),et.call(this,g,ee),!(void 0===$||Array.isArray($)))throw TypeError("fieldNames must be an Array");this.oneof=$||[],this.fieldsArray=[],this.comment=er}function es(g){if(g.parent)for(var $=0;$<g.fieldsArray.length;++$)g.fieldsArray[$].parent||g.parent.add(g.fieldsArray[$])}ei.fromJSON=function(g,$){return new ei(g,$.oneof,$.options,$.comment)},ei.prototype.toJSON=function(g){var $=!!g&&!!g.keepComments;return en.toObject(["options",this.options,"oneof",this.oneof,"comment",$?this.comment:void 0])},ei.prototype.add=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");return g.parent&&g.parent!==this.parent&&g.parent.remove(g),this.oneof.push(g.name),this.fieldsArray.push(g),g.partOf=this,es(this),this},ei.prototype.remove=function(g){if(!(g instanceof er))throw TypeError("field must be a Field");var $=this.fieldsArray.indexOf(g);if($<0)throw Error(g+" is not a member of "+this);return this.fieldsArray.splice($,1),($=this.oneof.indexOf(g.name))>-1&&this.oneof.splice($,1),g.partOf=null,this},ei.prototype.onAdd=function(g){et.prototype.onAdd.call(this,g);for(var $=this,ee=0;ee<this.oneof.length;++ee){var er=g.get(this.oneof[ee]);er&&!er.partOf&&(er.partOf=$,$.fieldsArray.push(er))}es(this)},ei.prototype.onRemove=function(g){for(var $,ee=0;ee<this.fieldsArray.length;++ee)($=this.fieldsArray[ee]).parent&&$.parent.remove($);et.prototype.onRemove.call(this,g)},ei.d=function(){for(var g=Array(arguments.length),$=0;$<arguments.length;)g[$]=arguments[$++];return function($,ee){en.decorateType($.constructor).add(new ei(ee,g)),Object.defineProperty($,ee,{get:en.oneOfGetter(g),set:en.oneOfSetter(g)})}}},46796:(g,$,ee)=>{"use strict";g.exports=eO,eO.filename=null,eO.defaults={keepCase:!1};var et=ee(71652),er=ee(43852),en=ee(15006),ei=ee(98138),es=ee(8751),eo=ee(47702),eu=ee(56734),eh=ee(58719),ep=ee(80898),ef=ee(50816),eg=ee(87454),em=/^[1-9][0-9]*$/,ey=/^-?[1-9][0-9]*$/,ev=/^0[x][0-9a-fA-F]+$/,eS=/^-?0[x][0-9a-fA-F]+$/,eT=/^0[0-7]+$/,eE=/^-?0[0-7]+$/,ew=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,eC=/^[a-zA-Z_][a-zA-Z_0-9]*$/,e_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,eI=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function eO(g,$,ee){$ instanceof er||(ee=$,$=new er),ee||(ee=eO.defaults);var eA,eN,eR,eD,ek,ex=ee.preferTrailingComment||!1,eP=et(g,ee.alternateCommentMode||!1),eM=eP.next,eL=eP.push,eF=eP.peek,eB=eP.skip,ej=eP.cmnt,eU=!0,eV=!1,eq=$,ez=ee.keepCase?function(g){return g}:eg.camelCase;function eG(g,$,ee){var et=eO.filename;return ee||(eO.filename=null),Error("illegal "+($||"token")+" '"+g+"' ("+(et?et+", ":"")+"line "+eP.line+")")}function e$(){var g,$=[];do{if('"'!==(g=eM())&&"'"!==g)throw eG(g);$.push(eM()),eB(g),g=eF()}while('"'===g||"'"===g);return $.join("")}function eK(g){var $=eM();switch($){case"'":case'"':return eL($),e$();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return eH($,!0)}catch(ee){if(g&&e_.test($))return $;throw eG($,"value")}}function eW(g,$){var ee,et;do $&&('"'===(ee=eF())||"'"===ee)?g.push(e$()):g.push([et=eQ(eM()),eB("to",!0)?eQ(eM()):et]);while(eB(",",!0));eB(";")}function eH(g,$){var ee=1;switch("-"===g.charAt(0)&&(ee=-1,g=g.substring(1)),g){case"inf":case"INF":case"Inf":return 1/0*ee;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(em.test(g))return ee*parseInt(g,10);if(ev.test(g))return ee*parseInt(g,16);if(eT.test(g))return ee*parseInt(g,8);if(ew.test(g))return ee*parseFloat(g);throw eG(g,"number",$)}function eQ(g,$){switch(g){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!$&&"-"===g.charAt(0))throw eG(g,"id");if(ey.test(g))return parseInt(g,10);if(eS.test(g))return parseInt(g,16);if(eE.test(g))return parseInt(g,8);throw eG(g,"id")}function eY(){if(void 0!==eN)throw eG("package");if(eN=eM(),!e_.test(eN))throw eG(eN,"name");eq=eq.define(eN),eB(";")}function eJ(){var g,$=eF();switch($){case"weak":g=eD||(eD=[]),eM();break;case"public":eM();default:g=eR||(eR=[])}$=e$(),eB(";"),g.push($)}function eX(){if(eB("="),!(eV="proto3"===(ek=e$()))&&"proto2"!==ek)throw eG(ek,"syntax");eB(";")}function eZ(g,$){switch($){case"option":return e8(g,$),eB(";"),!0;case"message":return e1(g,$),!0;case"enum":return e5(g,$),!0;case"service":return ti(g,$),!0;case"extend":return tl(g,$),!0}return!1}function e0(g,$,ee){var et,er=eP.line;if(g&&("string"!=typeof g.comment&&(g.comment=ej()),g.filename=eO.filename),eB("{",!0)){for(;"}"!==(et=eM());)$(et);eB(";",!0)}else ee&&ee(),eB(";"),g&&("string"!=typeof g.comment||ex)&&(g.comment=ej(er)||g.comment)}function e1(g,$){if(!eC.test($=eM()))throw eG($,"type name");var ee=new en($);e0(ee,function(g){if(!eZ(ee,g))switch(g){case"map":e4(ee,g);break;case"required":case"repeated":e2(ee,g);break;case"optional":eV?e2(ee,"proto3_optional"):e2(ee,"optional");break;case"oneof":e6(ee,g);break;case"extensions":eW(ee.extensions||(ee.extensions=[]));break;case"reserved":eW(ee.reserved||(ee.reserved=[]),!0);break;default:if(!eV||!e_.test(g))throw eG(g);eL(g),e2(ee,"optional")}}),g.add(ee)}function e2(g,$,ee){var et=eM();if("group"===et){e3(g,$);return}if(!e_.test(et))throw eG(et,"type");var er=eM();if(!eC.test(er))throw eG(er,"name");er=ez(er),eB("=");var en=new ei(er,eQ(eM()),et,$,ee);if(e0(en,function(g){if("option"===g)e8(en,g),eB(";");else throw eG(g)},function(){tr(en)}),"proto3_optional"===$){var es=new eo("_"+er);en.setOption("proto3_optional",!0),es.add(en),g.add(es)}else g.add(en);!eV&&en.repeated&&(void 0!==ef.packed[et]||void 0===ef.basic[et])&&en.setOption("packed",!1,!0)}function e3(g,$){var ee=eM();if(!eC.test(ee))throw eG(ee,"name");var et=eg.lcFirst(ee);ee===et&&(ee=eg.ucFirst(ee)),eB("=");var er=eQ(eM()),es=new en(ee);es.group=!0;var eo=new ei(et,er,ee,$);eo.filename=eO.filename,e0(es,function(g){switch(g){case"option":e8(es,g),eB(";");break;case"required":case"repeated":e2(es,g);break;case"optional":eV?e2(es,"proto3_optional"):e2(es,"optional");break;default:throw eG(g)}}),g.add(es).add(eo)}function e4(g){eB("<");var $=eM();if(void 0===ef.mapKey[$])throw eG($,"type");eB(",");var ee=eM();if(!e_.test(ee))throw eG(ee,"type");eB(">");var et=eM();if(!eC.test(et))throw eG(et,"name");eB("=");var er=new es(ez(et),eQ(eM()),$,ee);e0(er,function(g){if("option"===g)e8(er,g),eB(";");else throw eG(g)},function(){tr(er)}),g.add(er)}function e6(g,$){if(!eC.test($=eM()))throw eG($,"name");var ee=new eo(ez($));e0(ee,function(g){"option"===g?(e8(ee,g),eB(";")):(eL(g),e2(ee,"optional"))}),g.add(ee)}function e5(g,$){if(!eC.test($=eM()))throw eG($,"name");var ee=new eu($);e0(ee,function(g){switch(g){case"option":e8(ee,g),eB(";");break;case"reserved":eW(ee.reserved||(ee.reserved=[]),!0);break;default:e9(ee,g)}}),g.add(ee)}function e9(g,$){if(!eC.test($))throw eG($,"name");eB("=");var ee=eQ(eM(),!0),et={};e0(et,function(g){if("option"===g)e8(et,g),eB(";");else throw eG(g)},function(){tr(et)}),g.add($,ee,et.comment)}function e8(g,$){var ee,et=eB("(",!0);if(!e_.test($=eM()))throw eG($,"name");var er=$,en=er;et&&(eB(")"),en=er="("+er+")",$=eF(),eI.test($)&&(ee=$.substr(1),er+=$,eM())),eB("=");var ei=e7(g,er);tt(g,en,ei,ee)}function e7(g,$){if(eB("{",!0)){for(var ee={};!eB("}",!0);){if(!eC.test(eA=eM()))throw eG(eA,"name");var et,er=eA;"{"===eF()?et=e7(g,$+"."+eA):(eB(":"),"{"===eF()?et=e7(g,$+"."+eA):(et=eK(!0),te(g,$+"."+eA,et)));var en=ee[er];en&&(et=[].concat(en).concat(et)),ee[er]=et,eB(",",!0)}return ee}var ei=eK(!0);return te(g,$,ei),ei}function te(g,$,ee){g.setOption&&g.setOption($,ee)}function tt(g,$,ee,et){g.setParsedOption&&g.setParsedOption($,ee,et)}function tr(g){if(eB("[",!0)){do e8(g,"option");while(eB(",",!0));eB("]")}return g}function ti(g,$){if(!eC.test($=eM()))throw eG($,"service name");var ee=new eh($);e0(ee,function(g){if(!eZ(ee,g)){if("rpc"===g)ts(ee,g);else throw eG(g)}}),g.add(ee)}function ts(g,$){var ee=ej(),et=$;if(!eC.test($=eM()))throw eG($,"name");var er,en,ei,es,eo=$;if(eB("("),eB("stream",!0)&&(en=!0),!e_.test($=eM())||(er=$,eB(")"),eB("returns"),eB("("),eB("stream",!0)&&(es=!0),!e_.test($=eM())))throw eG($);ei=$,eB(")");var eu=new ep(eo,et,er,ei,en,es);eu.comment=ee,e0(eu,function(g){if("option"===g)e8(eu,g),eB(";");else throw eG(g)}),g.add(eu)}function tl(g,$){if(!e_.test($=eM()))throw eG($,"reference");var ee=$;e0(null,function($){switch($){case"required":case"repeated":e2(g,$,ee);break;case"optional":eV?e2(g,"proto3_optional",ee):e2(g,"optional",ee);break;default:if(!eV||!e_.test($))throw eG($);eL($),e2(g,"optional",ee)}})}for(;null!==(eA=eM());)switch(eA){case"package":if(!eU)throw eG(eA);eY();break;case"import":if(!eU)throw eG(eA);eJ();break;case"syntax":if(!eU)throw eG(eA);eX();break;case"option":e8(eq,eA),eB(";");break;default:if(eZ(eq,eA)){eU=!1;continue}throw eG(eA)}return eO.filename=null,{package:eN,imports:eR,weakImports:eD,syntax:ek,root:$}}},1761:(g,$,ee)=>{"use strict";g.exports=eo;var et,er=ee(58345),en=er.LongBits,ei=er.utf8;function es(g,$){return RangeError("index out of range: "+g.pos+" + "+($||1)+" > "+g.len)}function eo(g){this.buf=g,this.pos=0,this.len=g.length}var eu="undefined"!=typeof Uint8Array?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new eo(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new eo(g);throw Error("illegal buffer")},eh=function(){return er.Buffer?function(g){return(eo.create=function(g){return er.Buffer.isBuffer(g)?new et(g):eu(g)})(g)}:eu};function ep(){var g=new en(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw es(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*$)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*$)>>>0,g}if(this.len-this.pos>4){for(;$<5;++$)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}else for(;$<5;++$){if(this.pos>=this.len)throw es(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*$+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function ef(g,$){return(g[$-4]|g[$-3]<<8|g[$-2]<<16|g[$-1]<<24)>>>0}function eg(){if(this.pos+8>this.len)throw es(this,8);return new en(ef(this.buf,this.pos+=4),ef(this.buf,this.pos+=4))}eo.create=eh(),eo.prototype._slice=er.Array.prototype.subarray||er.Array.prototype.slice,eo.prototype.uint32=function(){var g=4294967295;return function(){if(g=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(g=(g|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,es(this,10);return g}}(),eo.prototype.int32=function(){return 0|this.uint32()},eo.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)|0},eo.prototype.bool=function(){return 0!==this.uint32()},eo.prototype.fixed32=function(){if(this.pos+4>this.len)throw es(this,4);return ef(this.buf,this.pos+=4)},eo.prototype.sfixed32=function(){if(this.pos+4>this.len)throw es(this,4);return 0|ef(this.buf,this.pos+=4)},eo.prototype.float=function(){if(this.pos+4>this.len)throw es(this,4);var g=er.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},eo.prototype.double=function(){if(this.pos+8>this.len)throw es(this,4);var g=er.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},eo.prototype.bytes=function(){var g=this.uint32(),$=this.pos,ee=this.pos+g;if(ee>this.len)throw es(this,g);return(this.pos+=g,Array.isArray(this.buf))?this.buf.slice($,ee):$===ee?new this.buf.constructor(0):this._slice.call(this.buf,$,ee)},eo.prototype.string=function(){var g=this.bytes();return ei.read(g,0,g.length)},eo.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw es(this,g);this.pos+=g}else do if(this.pos>=this.len)throw es(this);while(128&this.buf[this.pos++]);return this},eo.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},eo._configure=function(g){et=g,eo.create=eh(),et._configure();var $=er.Long?"toLong":"toNumber";er.merge(eo.prototype,{int64:function(){return ep.call(this)[$](!1)},uint64:function(){return ep.call(this)[$](!0)},sint64:function(){return ep.call(this).zzDecode()[$](!1)},fixed64:function(){return eg.call(this)[$](!0)},sfixed64:function(){return eg.call(this)[$](!1)}})}},8282:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(1761);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(58345);function en(g){et.call(this,g)}en._configure=function(){er.Buffer&&(en.prototype._slice=er.Buffer.prototype.slice)},en.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},en._configure()},43852:(g,$,ee)=>{"use strict";g.exports=ep;var et,er,en,ei=ee(98727);((ep.prototype=Object.create(ei.prototype)).constructor=ep).className="Root";var es=ee(98138),eo=ee(56734),eu=ee(47702),eh=ee(87454);function ep(g){ei.call(this,"",g),this.deferred=[],this.files=[]}function ef(){}ep.fromJSON=function(g,$){return $||($=new ep),g.options&&$.setOptions(g.options),$.addJSON(g.nested)},ep.prototype.resolvePath=eh.path.resolve,ep.prototype.fetch=eh.fetch,ep.prototype.load=function g($,ee,et){"function"==typeof ee&&(et=ee,ee=void 0);var ei=this;if(!et)return eh.asPromise(g,ei,$,ee);var es=et===ef;function eo(g,$){if(et){var ee=et;if(et=null,es)throw g;ee(g,$)}}function eu(g){var $=g.lastIndexOf("google/protobuf/");if($>-1){var ee=g.substring($);if(ee in en)return ee}return null}function ep(g,$){try{if(eh.isString($)&&"{"===$.charAt(0)&&($=JSON.parse($)),eh.isString($)){er.filename=g;var et,en=er($,ei,ee),ep=0;if(en.imports)for(;ep<en.imports.length;++ep)(et=eu(en.imports[ep])||ei.resolvePath(g,en.imports[ep]))&&eg(et);if(en.weakImports)for(ep=0;ep<en.weakImports.length;++ep)(et=eu(en.weakImports[ep])||ei.resolvePath(g,en.weakImports[ep]))&&eg(et,!0)}else ei.setOptions($.options).addJSON($.nested)}catch(g){eo(g)}es||em||eo(null,ei)}function eg(g,$){if(!(ei.files.indexOf(g)>-1)){if(ei.files.push(g),g in en){es?ep(g,en[g]):(++em,setTimeout(function(){--em,ep(g,en[g])}));return}if(es){var ee;try{ee=eh.fs.readFileSync(g).toString("utf8")}catch(g){$||eo(g);return}ep(g,ee)}else++em,ei.fetch(g,function(ee,er){if(--em,et){if(ee){$?em||eo(null,ei):eo(ee);return}ep(g,er)}})}}var em=0;eh.isString($)&&($=[$]);for(var ey,ev=0;ev<$.length;++ev)(ey=ei.resolvePath("",$[ev]))&&eg(ey);if(es)return ei;em||eo(null,ei)},ep.prototype.loadSync=function(g,$){if(!eh.isNode)throw Error("not supported");return this.load(g,$,ef)},ep.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(g){return"'extend "+g.extend+"' in "+g.parent.fullName}).join(", "));return ei.prototype.resolveAll.call(this)};var eg=/^[A-Z]/;function em(g,$){var ee=$.parent.lookup($.extend);if(ee){var et=new es($.fullName,$.id,$.type,$.rule,void 0,$.options);return et.declaringField=$,$.extensionField=et,ee.add(et),!0}return!1}ep.prototype._handleAdd=function(g){if(g instanceof es)void 0===g.extend||g.extensionField||em(this,g)||this.deferred.push(g);else if(g instanceof eo)eg.test(g.name)&&(g.parent[g.name]=g.values);else if(!(g instanceof eu)){if(g instanceof et)for(var $=0;$<this.deferred.length;)em(this,this.deferred[$])?this.deferred.splice($,1):++$;for(var ee=0;ee<g.nestedArray.length;++ee)this._handleAdd(g._nestedArray[ee]);eg.test(g.name)&&(g.parent[g.name]=g)}},ep.prototype._handleRemove=function(g){if(g instanceof es){if(void 0!==g.extend){if(g.extensionField)g.extensionField.parent.remove(g.extensionField),g.extensionField=null;else{var $=this.deferred.indexOf(g);$>-1&&this.deferred.splice($,1)}}}else if(g instanceof eo)eg.test(g.name)&&delete g.parent[g.name];else if(g instanceof ei){for(var ee=0;ee<g.nestedArray.length;++ee)this._handleRemove(g._nestedArray[ee]);eg.test(g.name)&&delete g.parent[g.name]}},ep._configure=function(g,$,ee){et=g,er=$,en=ee}},48091:g=>{"use strict";g.exports={}},78346:(g,$,ee)=>{"use strict";$.Service=ee(20296)},20296:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(58345);function er(g,$,ee){if("function"!=typeof g)throw TypeError("rpcImpl must be a function");et.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!$,this.responseDelimited=!!ee}(er.prototype=Object.create(et.EventEmitter.prototype)).constructor=er,er.prototype.rpcCall=function g($,ee,er,en,ei){if(!en)throw TypeError("request must be specified");var es=this;if(!ei)return et.asPromise(g,es,$,ee,er,en);if(!es.rpcImpl){setTimeout(function(){ei(Error("already ended"))},0);return}try{return es.rpcImpl($,ee[es.requestDelimited?"encodeDelimited":"encode"](en).finish(),function(g,ee){if(g)return es.emit("error",g,$),ei(g);if(null===ee){es.end(!0);return}if(!(ee instanceof er))try{ee=er[es.responseDelimited?"decodeDelimited":"decode"](ee)}catch(g){return es.emit("error",g,$),ei(g)}return es.emit("data",ee,$),ei(null,ee)})}catch(g){es.emit("error",g,$),setTimeout(function(){ei(g)},0);return}},er.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},58719:(g,$,ee)=>{"use strict";g.exports=es;var et=ee(98727);((es.prototype=Object.create(et.prototype)).constructor=es).className="Service";var er=ee(80898),en=ee(87454),ei=ee(78346);function es(g,$){et.call(this,g,$),this.methods={},this._methodsArray=null}function eo(g){return g._methodsArray=null,g}es.fromJSON=function(g,$){var ee=new es(g,$.options);if($.methods)for(var et=Object.keys($.methods),en=0;en<et.length;++en)ee.add(er.fromJSON(et[en],$.methods[et[en]]));return $.nested&&ee.addJSON($.nested),ee.comment=$.comment,ee},es.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return en.toObject(["options",$&&$.options||void 0,"methods",et.arrayToJSON(this.methodsArray,g)||{},"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},Object.defineProperty(es.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=en.toArray(this.methods))}}),es.prototype.get=function(g){return this.methods[g]||et.prototype.get.call(this,g)},es.prototype.resolveAll=function(){for(var g=this.methodsArray,$=0;$<g.length;++$)g[$].resolve();return et.prototype.resolve.call(this)},es.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);return g instanceof er?(this.methods[g.name]=g,g.parent=this,eo(this)):et.prototype.add.call(this,g)},es.prototype.remove=function(g){if(g instanceof er){if(this.methods[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.methods[g.name],g.parent=null,eo(this)}return et.prototype.remove.call(this,g)},es.prototype.create=function(g,$,ee){for(var et,er=new ei.Service(g,$,ee),es=0;es<this.methodsArray.length;++es){var eo=en.lcFirst((et=this._methodsArray[es]).resolve().name).replace(/[^$\w_]/g,"");er[eo]=en.codegen(["r","c"],en.isReserved(eo)?eo+"_":eo)("return this.rpcCall(m,q,s,r,c)")({m:et,q:et.resolvedRequestType.ctor,s:et.resolvedResponseType.ctor})}return er}},71652:g=>{"use strict";g.exports=ep;var $=/[\s{}=;:[\],'"()<>]/g,ee=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,et=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,er=/^ *[*/]+ */,en=/^\s*\*?\/*/,ei=/\n/g,es=/\s/,eo=/\\(.?)/g,eu={0:"\x00",r:"\r",n:"\n",t:"	"};function eh(g){return g.replace(eo,function(g,$){switch($){case"\\":case"":return $;default:return eu[$]||""}})}function ep(g,eo){g=g.toString();var eu=0,ep=g.length,ef=1,eg=null,em=null,ey=0,ev=!1,eS=!1,eT=[],eE=null;function ew(g){return Error("illegal "+g+" (line "+ef+")")}function eC(){var $="'"===eE?et:ee;$.lastIndex=eu-1;var er=$.exec(g);if(!er)throw ew("string");return eu=$.lastIndex,eR(eE),eE=null,eh(er[1])}function e_($){return g.charAt($)}function eI($,ee,et){eg=g.charAt($++),ey=ef,ev=!1,eS=et;var es,eu,eh=$-(es=eo?2:3);do if(--eh<0||"\n"===(eu=g.charAt(eh))){ev=!0;break}while(" "===eu||"	"===eu);for(var ep=g.substring($,ee).split(ei),eT=0;eT<ep.length;++eT)ep[eT]=ep[eT].replace(eo?en:er,"").trim();em=ep.join("\n").trim()}function eO($){var ee=eA($),et=g.substring($,ee);return/^\s*\/{1,2}/.test(et)}function eA(g){for(var $=g;$<ep&&"\n"!==e_($);)$++;return $}function eN(){if(eT.length>0)return eT.shift();if(eE)return eC();var ee,et,er,en,ei,eh=0===eu;do{if(eu===ep)return null;for(ee=!1;es.test(er=e_(eu));)if("\n"===er&&(eh=!0,++ef),++eu===ep)return null;if("/"===e_(eu)){if(++eu===ep)throw ew("comment");if("/"===e_(eu)){if(eo){if(en=eu,ei=!1,eO(eu)){ei=!0;do{if((eu=eA(eu))===ep)break;eu++}while(eO(eu))}else eu=Math.min(ep,eA(eu)+1);ei&&eI(en,eu,eh),ef++,ee=!0}else{for(ei="/"===e_(en=eu+1);"\n"!==e_(++eu);)if(eu===ep)return null;++eu,ei&&eI(en,eu-1,eh),++ef,ee=!0}}else{if("*"!==(er=e_(eu)))return"/";en=eu+1,ei=eo||"*"===e_(en);do{if("\n"===er&&++ef,++eu===ep)throw ew("comment");et=er,er=e_(eu)}while("*"!==et||"/"!==er);++eu,ei&&eI(en,eu-2,eh),ee=!0}}}while(ee);var eg=eu;if($.lastIndex=0,!$.test(e_(eg++)))for(;eg<ep&&!$.test(e_(eg));)++eg;var em=g.substring(eu,eu=eg);return('"'===em||"'"===em)&&(eE=em),em}function eR(g){eT.push(g)}function eD(){if(!eT.length){var g=eN();if(null===g)return null;eR(g)}return eT[0]}function ek(g,$){var ee=eD();if(ee===g)return eN(),!0;if(!$)throw ew("token '"+ee+"', '"+g+"' expected");return!1}function ex(g){var $=null;return void 0===g?ey===ef-1&&(eo||"*"===eg||ev)&&($=eS?em:null):(ey<g&&eD(),ey===g&&!ev&&(eo||"/"===eg)&&($=eS?null:em)),$}return Object.defineProperty({next:eN,peek:eD,push:eR,skip:ek,cmnt:ex},"line",{get:function(){return ef}})}ep.unescape=eh},15006:(g,$,ee)=>{"use strict";g.exports=eT;var et=ee(98727);((eT.prototype=Object.create(et.prototype)).constructor=eT).className="Type";var er=ee(56734),en=ee(47702),ei=ee(98138),es=ee(8751),eo=ee(58719),eu=ee(92038),eh=ee(1761),ep=ee(79822),ef=ee(87454),eg=ee(95),em=ee(33951),ey=ee(77624),ev=ee(89981),eS=ee(51904);function eT(g,$){et.call(this,g,$),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function eE(g){return g._fieldsById=g._fieldsArray=g._oneofsArray=null,delete g.encode,delete g.decode,delete g.verify,g}Object.defineProperties(eT.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var g=Object.keys(this.fields),$=0;$<g.length;++$){var ee=this.fields[g[$]],et=ee.id;if(this._fieldsById[et])throw Error("duplicate id "+et+" in "+this);this._fieldsById[et]=ee}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ef.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ef.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=eT.generateConstructor(this)())},set:function(g){var $=g.prototype;$ instanceof eu||((g.prototype=new eu).constructor=g,ef.merge(g.prototype,$)),g.$type=g.prototype.$type=this,ef.merge(g,eu,!0),this._ctor=g;for(var ee=0;ee<this.fieldsArray.length;++ee)this._fieldsArray[ee].resolve();var et={};for(ee=0;ee<this.oneofsArray.length;++ee)et[this._oneofsArray[ee].resolve().name]={get:ef.oneOfGetter(this._oneofsArray[ee].oneof),set:ef.oneOfSetter(this._oneofsArray[ee].oneof)};ee&&Object.defineProperties(g.prototype,et)}}}),eT.generateConstructor=function(g){for(var $,ee=ef.codegen(["p"],g.name),et=0;et<g.fieldsArray.length;++et)($=g._fieldsArray[et]).map?ee("this%s={}",ef.safeProp($.name)):$.repeated&&ee("this%s=[]",ef.safeProp($.name));return ee("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},eT.fromJSON=function(g,$){var ee=new eT(g,$.options);ee.extensions=$.extensions,ee.reserved=$.reserved;for(var eu=Object.keys($.fields),eh=0;eh<eu.length;++eh)ee.add((void 0!==$.fields[eu[eh]].keyType?es.fromJSON:ei.fromJSON)(eu[eh],$.fields[eu[eh]]));if($.oneofs)for(eu=Object.keys($.oneofs),eh=0;eh<eu.length;++eh)ee.add(en.fromJSON(eu[eh],$.oneofs[eu[eh]]));if($.nested)for(eu=Object.keys($.nested),eh=0;eh<eu.length;++eh){var ep=$.nested[eu[eh]];ee.add((void 0!==ep.id?ei.fromJSON:void 0!==ep.fields?eT.fromJSON:void 0!==ep.values?er.fromJSON:void 0!==ep.methods?eo.fromJSON:et.fromJSON)(eu[eh],ep))}return $.extensions&&$.extensions.length&&(ee.extensions=$.extensions),$.reserved&&$.reserved.length&&(ee.reserved=$.reserved),$.group&&(ee.group=!0),$.comment&&(ee.comment=$.comment),ee},eT.prototype.toJSON=function(g){var $=et.prototype.toJSON.call(this,g),ee=!!g&&!!g.keepComments;return ef.toObject(["options",$&&$.options||void 0,"oneofs",et.arrayToJSON(this.oneofsArray,g),"fields",et.arrayToJSON(this.fieldsArray.filter(function(g){return!g.declaringField}),g)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",$&&$.nested||void 0,"comment",ee?this.comment:void 0])},eT.prototype.resolveAll=function(){for(var g=this.fieldsArray,$=0;$<g.length;)g[$++].resolve();var ee=this.oneofsArray;for($=0;$<ee.length;)ee[$++].resolve();return et.prototype.resolveAll.call(this)},eT.prototype.get=function(g){return this.fields[g]||this.oneofs&&this.oneofs[g]||this.nested&&this.nested[g]||null},eT.prototype.add=function(g){if(this.get(g.name))throw Error("duplicate name '"+g.name+"' in "+this);if(g instanceof ei&&void 0===g.extend){if(this._fieldsById?this._fieldsById[g.id]:this.fieldsById[g.id])throw Error("duplicate id "+g.id+" in "+this);if(this.isReservedId(g.id))throw Error("id "+g.id+" is reserved in "+this);if(this.isReservedName(g.name))throw Error("name '"+g.name+"' is reserved in "+this);return g.parent&&g.parent.remove(g),this.fields[g.name]=g,g.message=this,g.onAdd(this),eE(this)}return g instanceof en?(this.oneofs||(this.oneofs={}),this.oneofs[g.name]=g,g.onAdd(this),eE(this)):et.prototype.add.call(this,g)},eT.prototype.remove=function(g){if(g instanceof ei&&void 0===g.extend){if(!this.fields||this.fields[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.fields[g.name],g.parent=null,g.onRemove(this),eE(this)}if(g instanceof en){if(!this.oneofs||this.oneofs[g.name]!==g)throw Error(g+" is not a member of "+this);return delete this.oneofs[g.name],g.parent=null,g.onRemove(this),eE(this)}return et.prototype.remove.call(this,g)},eT.prototype.isReservedId=function(g){return et.isReservedId(this.reserved,g)},eT.prototype.isReservedName=function(g){return et.isReservedName(this.reserved,g)},eT.prototype.create=function(g){return new this.ctor(g)},eT.prototype.setup=function(){for(var g=this.fullName,$=[],ee=0;ee<this.fieldsArray.length;++ee)$.push(this._fieldsArray[ee].resolve().resolvedType);this.encode=eg(this)({Writer:ep,types:$,util:ef}),this.decode=em(this)({Reader:eh,types:$,util:ef}),this.verify=ey(this)({types:$,util:ef}),this.fromObject=ev.fromObject(this)({types:$,util:ef}),this.toObject=ev.toObject(this)({types:$,util:ef});var et=eS[g];if(et){var er=Object.create(this);er.fromObject=this.fromObject,this.fromObject=et.fromObject.bind(er),er.toObject=this.toObject,this.toObject=et.toObject.bind(er)}return this},eT.prototype.encode=function(g,$){return this.setup().encode(g,$)},eT.prototype.encodeDelimited=function(g,$){return this.encode(g,$&&$.len?$.fork():$).ldelim()},eT.prototype.decode=function(g,$){return this.setup().decode(g,$)},eT.prototype.decodeDelimited=function(g){return g instanceof eh||(g=eh.create(g)),this.decode(g,g.uint32())},eT.prototype.verify=function(g){return this.setup().verify(g)},eT.prototype.fromObject=function(g){return this.setup().fromObject(g)},eT.prototype.toObject=function(g,$){return this.setup().toObject(g,$)},eT.d=function(g){return function($){ef.decorateType($,g)}}},50816:(g,$,ee)=>{"use strict";var et=$,er=ee(87454),en=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ei(g,$){var ee=0,et={};for($|=0;ee<g.length;)et[en[ee+$]]=g[ee++];return et}et.basic=ei([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),et.defaults=ei([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",er.emptyArray,null]),et.long=ei([0,0,0,1,1],7),et.mapKey=ei([0,0,0,5,5,0,0,0,1,1,0,2],2),et.packed=ei([1,5,0,0,0,5,5,0,0,0,1,1,0])},87454:(g,$,ee)=>{"use strict";var et,er,en=g.exports=ee(58345),ei=ee(48091);en.codegen=ee(74983),en.fetch=ee(3824),en.path=ee(59419),en.fs=en.inquire("fs"),en.toArray=function(g){if(g){for(var $=Object.keys(g),ee=Array($.length),et=0;et<$.length;)ee[et]=g[$[et++]];return ee}return[]},en.toObject=function(g){for(var $={},ee=0;ee<g.length;){var et=g[ee++],er=g[ee++];void 0!==er&&($[et]=er)}return $};var es=/\\/g,eo=/"/g;en.isReserved=function(g){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(g)},en.safeProp=function(g){return!/^[$\w_]+$/.test(g)||en.isReserved(g)?'["'+g.replace(es,"\\\\").replace(eo,'\\"')+'"]':"."+g},en.ucFirst=function(g){return g.charAt(0).toUpperCase()+g.substring(1)};var eu=/_([a-z])/g;en.camelCase=function(g){return g.substring(0,1)+g.substring(1).replace(eu,function(g,$){return $.toUpperCase()})},en.compareFieldsById=function(g,$){return g.id-$.id},en.decorateType=function(g,$){if(g.$type)return $&&g.$type.name!==$&&(en.decorateRoot.remove(g.$type),g.$type.name=$,en.decorateRoot.add(g.$type)),g.$type;et||(et=ee(15006));var er=new et($||g.name);return en.decorateRoot.add(er),er.ctor=g,Object.defineProperty(g,"$type",{value:er,enumerable:!1}),Object.defineProperty(g.prototype,"$type",{value:er,enumerable:!1}),er};var eh=0;en.decorateEnum=function(g){if(g.$type)return g.$type;er||(er=ee(56734));var $=new er("Enum"+eh++,g);return en.decorateRoot.add($),Object.defineProperty(g,"$type",{value:$,enumerable:!1}),$},en.setProperty=function(g,$,ee){function et(g,$,ee){var er=$.shift();if("__proto__"===er||"prototype"===er)return g;if($.length>0)g[er]=et(g[er]||{},$,ee);else{var en=g[er];en&&(ee=[].concat(en).concat(ee)),g[er]=ee}return g}if("object"!=typeof g)throw TypeError("dst must be an object");if(!$)throw TypeError("path must be specified");return et(g,$=$.split("."),ee)},Object.defineProperty(en,"decorateRoot",{get:function(){return ei.decorated||(ei.decorated=new(ee(43852)))}})},22321:(g,$,ee)=>{"use strict";g.exports=er;var et=ee(58345);function er(g,$){this.lo=g>>>0,this.hi=$>>>0}var en=er.zero=new er(0,0);en.toNumber=function(){return 0},en.zzEncode=en.zzDecode=function(){return this},en.length=function(){return 1};var ei=er.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";er.fromNumber=function(g){if(0===g)return en;var $=g<0;$&&(g=-g);var ee=g>>>0,et=(g-ee)/4294967296>>>0;return $&&(et=~et>>>0,ee=~ee>>>0,++ee>4294967295&&(ee=0,++et>4294967295&&(et=0))),new er(ee,et)},er.from=function(g){if("number"==typeof g)return er.fromNumber(g);if(et.isString(g)){if(!et.Long)return er.fromNumber(parseInt(g,10));g=et.Long.fromString(g)}return g.low||g.high?new er(g.low>>>0,g.high>>>0):en},er.prototype.toNumber=function(g){if(!g&&this.hi>>>31){var $=~this.lo+1>>>0,ee=~this.hi>>>0;return $||(ee=ee+1>>>0),-($+4294967296*ee)}return this.lo+4294967296*this.hi},er.prototype.toLong=function(g){return et.Long?new et.Long(0|this.lo,0|this.hi,!!g):{low:0|this.lo,high:0|this.hi,unsigned:!!g}};var es=String.prototype.charCodeAt;er.fromHash=function(g){return g===ei?en:new er((es.call(g,0)|es.call(g,1)<<8|es.call(g,2)<<16|es.call(g,3)<<24)>>>0,(es.call(g,4)|es.call(g,5)<<8|es.call(g,6)<<16|es.call(g,7)<<24)>>>0)},er.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},er.prototype.zzEncode=function(){var g=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^g)>>>0,this.lo=(this.lo<<1^g)>>>0,this},er.prototype.zzDecode=function(){var g=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^g)>>>0,this.hi=(this.hi>>>1^g)>>>0,this},er.prototype.length=function(){var g=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,ee=this.hi>>>24;return 0===ee?0===$?g<16384?g<128?1:2:g<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:ee<128?9:10}},58345:function(g,$,ee){"use strict";var et=$;function er(g,$,ee){for(var et=Object.keys($),er=0;er<et.length;++er)void 0!==g[et[er]]&&ee||(g[et[er]]=$[et[er]]);return g}function en(g){function $(g,ee){if(!(this instanceof $))return new $(g,ee);Object.defineProperty(this,"message",{get:function(){return g}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:Error().stack||""}),ee&&er(this,ee)}return($.prototype=Object.create(Error.prototype)).constructor=$,Object.defineProperty($.prototype,"name",{get:function(){return g}}),$.prototype.toString=function(){return this.name+": "+this.message},$}et.asPromise=ee(25409),et.base64=ee(17738),et.EventEmitter=ee(13595),et.float=ee(1708),et.inquire=ee(23421),et.utf8=ee(9774),et.pool=ee(7474),et.LongBits=ee(22321),et.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),et.global=et.isNode&&global||"undefined"!=typeof self&&self||this,et.emptyArray=Object.freeze?Object.freeze([]):[],et.emptyObject=Object.freeze?Object.freeze({}):{},et.isInteger=Number.isInteger||function(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g},et.isString=function(g){return"string"==typeof g||g instanceof String},et.isObject=function(g){return g&&"object"==typeof g},et.isset=et.isSet=function(g,$){var ee=g[$];return!!(null!=ee&&g.hasOwnProperty($))&&("object"!=typeof ee||(Array.isArray(ee)?ee.length:Object.keys(ee).length)>0)},et.Buffer=function(){try{var g=et.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch(g){return null}}(),et._Buffer_from=null,et._Buffer_allocUnsafe=null,et.newBuffer=function(g){return"number"==typeof g?et.Buffer?et._Buffer_allocUnsafe(g):new et.Array(g):et.Buffer?et._Buffer_from(g):"undefined"==typeof Uint8Array?g:new Uint8Array(g)},et.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,et.Long=et.global.dcodeIO&&et.global.dcodeIO.Long||et.global.Long||et.inquire("long"),et.key2Re=/^true|false|0|1$/,et.key32Re=/^-?(?:0|[1-9][0-9]*)$/,et.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,et.longToHash=function(g){return g?et.LongBits.from(g).toHash():et.LongBits.zeroHash},et.longFromHash=function(g,$){var ee=et.LongBits.fromHash(g);return et.Long?et.Long.fromBits(ee.lo,ee.hi,$):ee.toNumber(!!$)},et.merge=er,et.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},et.newError=en,et.ProtocolError=en("ProtocolError"),et.oneOfGetter=function(g){for(var $={},ee=0;ee<g.length;++ee)$[g[ee]]=1;return function(){for(var g=Object.keys(this),ee=g.length-1;ee>-1;--ee)if(1===$[g[ee]]&&void 0!==this[g[ee]]&&null!==this[g[ee]])return g[ee]}},et.oneOfSetter=function(g){return function($){for(var ee=0;ee<g.length;++ee)g[ee]!==$&&delete this[g[ee]]}},et.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},et._configure=function(){var g=et.Buffer;if(!g){et._Buffer_from=et._Buffer_allocUnsafe=null;return}et._Buffer_from=g.from!==Uint8Array.from&&g.from||function($,ee){return new g($,ee)},et._Buffer_allocUnsafe=g.allocUnsafe||function($){return new g($)}}},77624:(g,$,ee)=>{"use strict";g.exports=eo;var et=ee(56734),er=ee(87454);function en(g,$){return g.name+": "+$+(g.repeated&&"array"!==$?"[]":g.map&&"object"!==$?"{k:"+g.keyType+"}":"")+" expected"}function ei(g,$,ee,er){if($.resolvedType){if($.resolvedType instanceof et){g("switch(%s){",er)("default:")("return%j",en($,"enum value"));for(var ei=Object.keys($.resolvedType.values),es=0;es<ei.length;++es)g("case %i:",$.resolvedType.values[ei[es]]);g("break")("}")}else g("{")("var e=types[%i].verify(%s);",ee,er)("if(e)")("return%j+e",$.name+".")("}")}else switch($.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.isInteger(%s))",er)("return%j",en($,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",er,er,er,er)("return%j",en($,"integer|Long"));break;case"float":case"double":g('if(typeof %s!=="number")',er)("return%j",en($,"number"));break;case"bool":g('if(typeof %s!=="boolean")',er)("return%j",en($,"boolean"));break;case"string":g("if(!util.isString(%s))",er)("return%j",en($,"string"));break;case"bytes":g('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',er,er,er)("return%j",en($,"buffer"))}return g}function es(g,$,ee){switch($.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":g("if(!util.key32Re.test(%s))",ee)("return%j",en($,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":g("if(!util.key64Re.test(%s))",ee)("return%j",en($,"integer|Long key"));break;case"bool":g("if(!util.key2Re.test(%s))",ee)("return%j",en($,"boolean key"))}return g}function eo(g){var $=er.codegen(["m"],g.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ee=g.oneofsArray,et={};ee.length&&$("var p={}");for(var eo=0;eo<g.fieldsArray.length;++eo){var eu=g._fieldsArray[eo].resolve(),eh="m"+er.safeProp(eu.name);if(eu.optional&&$("if(%s!=null&&m.hasOwnProperty(%j)){",eh,eu.name),eu.map)$("if(!util.isObject(%s))",eh)("return%j",en(eu,"object"))("var k=Object.keys(%s)",eh)("for(var i=0;i<k.length;++i){"),es($,eu,"k[i]"),ei($,eu,eo,eh+"[k[i]]")("}");else if(eu.repeated)$("if(!Array.isArray(%s))",eh)("return%j",en(eu,"array"))("for(var i=0;i<%s.length;++i){",eh),ei($,eu,eo,eh+"[i]")("}");else{if(eu.partOf){var ep=er.safeProp(eu.partOf.name);1===et[eu.partOf.name]&&$("if(p%s===1)",ep)("return%j",eu.partOf.name+": multiple values"),et[eu.partOf.name]=1,$("p%s=1",ep)}ei($,eu,eo,eh)}eu.optional&&$("}")}return $("return null")}},51904:(g,$,ee)=>{"use strict";var et=$,er=ee(92038);et[".google.protobuf.Any"]={fromObject:function(g){if(g&&g["@type"]){var $=g["@type"].substring(g["@type"].lastIndexOf("/")+1),ee=this.lookup($);if(ee){var et="."===g["@type"].charAt(0)?g["@type"].substr(1):g["@type"];return -1===et.indexOf("/")&&(et="/"+et),this.create({type_url:et,value:ee.encode(ee.fromObject(g)).finish()})}}return this.fromObject(g)},toObject:function(g,$){var ee="type.googleapis.com/",et="",en="";if($&&$.json&&g.type_url&&g.value){en=g.type_url.substring(g.type_url.lastIndexOf("/")+1),et=g.type_url.substring(0,g.type_url.lastIndexOf("/")+1);var ei=this.lookup(en);ei&&(g=ei.decode(g.value))}if(!(g instanceof this.ctor)&&g instanceof er){var es=g.$type.toObject(g,$),eo="."===g.$type.fullName[0]?g.$type.fullName.substr(1):g.$type.fullName;return""===et&&(et=ee),en=et+eo,es["@type"]=en,es}return this.toObject(g,$)}}},79822:(g,$,ee)=>{"use strict";g.exports=ep;var et,er=ee(58345),en=er.LongBits,ei=er.base64,es=er.utf8;function eo(g,$,ee){this.fn=g,this.len=$,this.next=void 0,this.val=ee}function eu(){}function eh(g){this.head=g.head,this.tail=g.tail,this.len=g.len,this.next=g.states}function ep(){this.len=0,this.head=new eo(eu,0,0),this.tail=this.head,this.states=null}var ef=function(){return er.Buffer?function(){return(ep.create=function(){return new et})()}:function(){return new ep}};function eg(g,$,ee){$[ee]=255&g}function em(g,$,ee){for(;g>127;)$[ee++]=127&g|128,g>>>=7;$[ee]=g}function ey(g,$){this.len=g,this.next=void 0,this.val=$}function ev(g,$,ee){for(;g.hi;)$[ee++]=127&g.lo|128,g.lo=(g.lo>>>7|g.hi<<25)>>>0,g.hi>>>=7;for(;g.lo>127;)$[ee++]=127&g.lo|128,g.lo=g.lo>>>7;$[ee++]=g.lo}function eS(g,$,ee){$[ee]=255&g,$[ee+1]=g>>>8&255,$[ee+2]=g>>>16&255,$[ee+3]=g>>>24}ep.create=ef(),ep.alloc=function(g){return new er.Array(g)},er.Array!==Array&&(ep.alloc=er.pool(ep.alloc,er.Array.prototype.subarray)),ep.prototype._push=function(g,$,ee){return this.tail=this.tail.next=new eo(g,$,ee),this.len+=$,this},ey.prototype=Object.create(eo.prototype),ey.prototype.fn=em,ep.prototype.uint32=function(g){return this.len+=(this.tail=this.tail.next=new ey((g>>>=0)<128?1:g<16384?2:g<2097152?3:g<268435456?4:5,g)).len,this},ep.prototype.int32=function(g){return g<0?this._push(ev,10,en.fromNumber(g)):this.uint32(g)},ep.prototype.sint32=function(g){return this.uint32((g<<1^g>>31)>>>0)},ep.prototype.uint64=function(g){var $=en.from(g);return this._push(ev,$.length(),$)},ep.prototype.int64=ep.prototype.uint64,ep.prototype.sint64=function(g){var $=en.from(g).zzEncode();return this._push(ev,$.length(),$)},ep.prototype.bool=function(g){return this._push(eg,1,g?1:0)},ep.prototype.fixed32=function(g){return this._push(eS,4,g>>>0)},ep.prototype.sfixed32=ep.prototype.fixed32,ep.prototype.fixed64=function(g){var $=en.from(g);return this._push(eS,4,$.lo)._push(eS,4,$.hi)},ep.prototype.sfixed64=ep.prototype.fixed64,ep.prototype.float=function(g){return this._push(er.float.writeFloatLE,4,g)},ep.prototype.double=function(g){return this._push(er.float.writeDoubleLE,8,g)};var eT=er.Array.prototype.set?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){for(var et=0;et<g.length;++et)$[ee+et]=g[et]};ep.prototype.bytes=function(g){var $=g.length>>>0;if(!$)return this._push(eg,1,0);if(er.isString(g)){var ee=ep.alloc($=ei.length(g));ei.decode(g,ee,0),g=ee}return this.uint32($)._push(eT,$,g)},ep.prototype.string=function(g){var $=es.length(g);return $?this.uint32($)._push(es.write,$,g):this._push(eg,1,0)},ep.prototype.fork=function(){return this.states=new eh(this),this.head=this.tail=new eo(eu,0,0),this.len=0,this},ep.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eo(eu,0,0),this.len=0),this},ep.prototype.ldelim=function(){var g=this.head,$=this.tail,ee=this.len;return this.reset().uint32(ee),ee&&(this.tail.next=g.next,this.tail=$,this.len+=ee),this},ep.prototype.finish=function(){for(var g=this.head.next,$=this.constructor.alloc(this.len),ee=0;g;)g.fn(g.val,$,ee),ee+=g.len,g=g.next;return $},ep._configure=function(g){et=g,ep.create=ef(),et._configure()}},57039:(g,$,ee)=>{"use strict";g.exports=en;var et=ee(79822);(en.prototype=Object.create(et.prototype)).constructor=en;var er=ee(58345);function en(){et.call(this)}function ei(g,$,ee){g.length<40?er.utf8.write(g,$,ee):$.utf8Write?$.utf8Write(g,ee):$.write(g,ee)}en._configure=function(){en.alloc=er._Buffer_allocUnsafe,en.writeBytesBuffer=er.Buffer&&er.Buffer.prototype instanceof Uint8Array&&"set"===er.Buffer.prototype.set.name?function(g,$,ee){$.set(g,ee)}:function(g,$,ee){if(g.copy)g.copy($,ee,0,g.length);else for(var et=0;et<g.length;)$[ee++]=g[et++]}},en.prototype.bytes=function(g){er.isString(g)&&(g=er._Buffer_from(g,"base64"));var $=g.length>>>0;return this.uint32($),$&&this._push(en.writeBytesBuffer,$,g),this},en.prototype.string=function(g){var $=er.Buffer.byteLength(g);return this.uint32($),$&&this._push(ei,$,g),this},en._configure()},51728:function(g,$){var ee;!function(et,er){function en(g){return g.default||g}void 0!==(ee=(function(){var g={};return er(g),en(g)}).apply($,[]))&&(g.exports=ee)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;/**
     * @license
     * Copyright 2009 The Closure Library Authors
     * Copyright 2020 Daniel Wirtz / The long.js Authors.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * SPDX-License-Identifier: Apache-2.0
     */var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ee(g,$,ee){this.low=0|g,this.high=0|$,this.unsigned=!!ee}function et(g){return!0===(g&&g.__isLong__)}function er(g){var $=Math.clz32(g&-g);return g?31-$:$}ee.prototype.__isLong__,Object.defineProperty(ee.prototype,"__isLong__",{value:!0}),ee.isLong=et;var en={},ei={};function es(g,$){var ee,et,er;return $?(g>>>=0,(er=0<=g&&g<256)&&(et=ei[g]))?et:(ee=eu(g,0,!0),er&&(ei[g]=ee),ee):(g|=0,(er=-128<=g&&g<128)&&(et=en[g]))?et:(ee=eu(g,g<0?-1:0,!1),er&&(en[g]=ee),ee)}function eo(g,$){if(isNaN(g))return $?eT:eS;if($){if(g<0)return eT;if(g>=em)return eI}else{if(g<=-ey)return eO;if(g+1>=ey)return e_}return g<0?eo(-g,$).neg():eu(g%eg|0,g/eg|0,$)}function eu(g,$,et){return new ee(g,$,et)}ee.fromInt=es,ee.fromNumber=eo,ee.fromBits=eu;var eh=Math.pow;function ep(g,$,ee){if(0===g.length)throw Error("empty string");if("number"==typeof $?(ee=$,$=!1):$=!!$,"NaN"===g||"Infinity"===g||"+Infinity"===g||"-Infinity"===g)return $?eT:eS;if((ee=ee||10)<2||36<ee)throw RangeError("radix");if((et=g.indexOf("-"))>0)throw Error("interior hyphen");if(0===et)return ep(g.substring(1),$,ee).neg();for(var et,er=eo(eh(ee,8)),en=eS,ei=0;ei<g.length;ei+=8){var es=Math.min(8,g.length-ei),eu=parseInt(g.substring(ei,ei+es),ee);if(es<8){var ef=eo(eh(ee,es));en=en.mul(ef).add(eo(eu))}else en=(en=en.mul(er)).add(eo(eu))}return en.unsigned=$,en}function ef(g,$){return"number"==typeof g?eo(g,$):"string"==typeof g?ep(g,$):eu(g.low,g.high,"boolean"==typeof $?$:g.unsigned)}ee.fromString=ep,ee.fromValue=ef;var eg=4294967296,em=18446744073709552e3,ey=0x7fffffffffffffff,ev=es(16777216),eS=es(0);ee.ZERO=eS;var eT=es(0,!0);ee.UZERO=eT;var eE=es(1);ee.ONE=eE;var ew=es(1,!0);ee.UONE=ew;var eC=es(-1);ee.NEG_ONE=eC;var e_=eu(-1,2147483647,!1);ee.MAX_VALUE=e_;var eI=eu(-1,-1,!0);ee.MAX_UNSIGNED_VALUE=eI;var eO=eu(0,-2147483648,!1);ee.MIN_VALUE=eO;var eA=ee.prototype;eA.toInt=function(){return this.unsigned?this.low>>>0:this.low},eA.toNumber=function(){return this.unsigned?(this.high>>>0)*eg+(this.low>>>0):this.high*eg+(this.low>>>0)},eA.toString=function(g){if((g=g||10)<2||36<g)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eO))return"-"+this.neg().toString(g);var $=eo(g),ee=this.div($),et=ee.mul($).sub(this);return ee.toString(g)+et.toInt().toString(g)}for(var er=eo(eh(g,6),this.unsigned),en=this,ei="";;){var es=en.div(er),eu=(en.sub(es.mul(er)).toInt()>>>0).toString(g);if((en=es).isZero())return eu+ei;for(;eu.length<6;)eu="0"+eu;ei=""+eu+ei}},eA.getHighBits=function(){return this.high},eA.getHighBitsUnsigned=function(){return this.high>>>0},eA.getLowBits=function(){return this.low},eA.getLowBitsUnsigned=function(){return this.low>>>0},eA.getNumBitsAbs=function(){if(this.isNegative())return this.eq(eO)?64:this.neg().getNumBitsAbs();for(var g=0!=this.high?this.high:this.low,$=31;$>0&&(g&1<<$)==0;$--);return 0!=this.high?$+33:$+1},eA.isSafeInteger=function(){var g=this.high>>21;return!g||!this.unsigned&&-1===g&&!(0===this.low&&-2097152===this.high)},eA.isZero=function(){return 0===this.high&&0===this.low},eA.eqz=eA.isZero,eA.isNegative=function(){return!this.unsigned&&this.high<0},eA.isPositive=function(){return this.unsigned||this.high>=0},eA.isOdd=function(){return(1&this.low)==1},eA.isEven=function(){return(1&this.low)==0},eA.equals=function(g){return et(g)||(g=ef(g)),(this.unsigned===g.unsigned||this.high>>>31!=1||g.high>>>31!=1)&&this.high===g.high&&this.low===g.low},eA.eq=eA.equals,eA.notEquals=function(g){return!this.eq(g)},eA.neq=eA.notEquals,eA.ne=eA.notEquals,eA.lessThan=function(g){return 0>this.comp(g)},eA.lt=eA.lessThan,eA.lessThanOrEqual=function(g){return 0>=this.comp(g)},eA.lte=eA.lessThanOrEqual,eA.le=eA.lessThanOrEqual,eA.greaterThan=function(g){return this.comp(g)>0},eA.gt=eA.greaterThan,eA.greaterThanOrEqual=function(g){return this.comp(g)>=0},eA.gte=eA.greaterThanOrEqual,eA.ge=eA.greaterThanOrEqual,eA.compare=function(g){if(et(g)||(g=ef(g)),this.eq(g))return 0;var $=this.isNegative(),ee=g.isNegative();return $&&!ee?-1:!$&&ee?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1},eA.comp=eA.compare,eA.negate=function(){return!this.unsigned&&this.eq(eO)?eO:this.not().add(eE)},eA.neg=eA.negate,eA.add=function(g){et(g)||(g=ef(g));var $,ee,er=this.high>>>16,en=65535&this.high,ei=this.low>>>16,es=65535&this.low,eo=g.high>>>16,eh=65535&g.high,ep=g.low>>>16,eg=65535&g.low,em=0,ey=0;return $=0+((ee=0+(es+eg))>>>16),ee&=65535,$+=ei+ep,ey+=$>>>16,$&=65535,ey+=en+eh,em+=ey>>>16,ey&=65535,em+=er+eo,eu($<<16|ee,(em&=65535)<<16|ey,this.unsigned)},eA.subtract=function(g){return et(g)||(g=ef(g)),this.add(g.neg())},eA.sub=eA.subtract,eA.multiply=function(g){if(this.isZero())return this;if(et(g)||(g=ef(g)),$)return eu($.mul(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned);if(g.isZero())return this.unsigned?eT:eS;if(this.eq(eO))return g.isOdd()?eO:eS;if(g.eq(eO))return this.isOdd()?eO:eS;if(this.isNegative())return g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg();if(g.isNegative())return this.mul(g.neg()).neg();if(this.lt(ev)&&g.lt(ev))return eo(this.toNumber()*g.toNumber(),this.unsigned);var ee,er,en=this.high>>>16,ei=65535&this.high,es=this.low>>>16,eh=65535&this.low,ep=g.high>>>16,eg=65535&g.high,em=g.low>>>16,ey=65535&g.low,eE=0,ew=0;return ee=0+((er=0+eh*ey)>>>16),er&=65535,ee+=es*ey,ew+=ee>>>16,ee&=65535,ee+=eh*em,ew+=ee>>>16,ee&=65535,ew+=ei*ey,eE+=ew>>>16,ew&=65535,ew+=es*em,eE+=ew>>>16,ew&=65535,ew+=eh*eg,eE+=ew>>>16,ew&=65535,eE+=en*ey+ei*em+es*eg+eh*ep,eu(ee<<16|er,(eE&=65535)<<16|ew,this.unsigned)},eA.mul=eA.multiply,eA.divide=function(g){if(et(g)||(g=ef(g)),g.isZero())throw Error("division by zero");if($){var ee,er,en;return this.unsigned||-2147483648!==this.high||-1!==g.low||-1!==g.high?eu((this.unsigned?$.div_u:$.div_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?eT:eS;if(this.unsigned){if(g.unsigned||(g=g.toUnsigned()),g.gt(this))return eT;if(g.gt(this.shru(1)))return ew;en=eT}else{if(this.eq(eO))return g.eq(eE)||g.eq(eC)?eO:g.eq(eO)?eE:(ee=this.shr(1).div(g).shl(1)).eq(eS)?g.isNegative()?eE:eC:(er=this.sub(g.mul(ee)),en=ee.add(er.div(g)));if(g.eq(eO))return this.unsigned?eT:eS;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();en=eS}for(er=this;er.gte(g);){for(var ei=Math.ceil(Math.log(ee=Math.max(1,Math.floor(er.toNumber()/g.toNumber())))/Math.LN2),es=ei<=48?1:eh(2,ei-48),ep=eo(ee),eg=ep.mul(g);eg.isNegative()||eg.gt(er);)ee-=es,eg=(ep=eo(ee,this.unsigned)).mul(g);ep.isZero()&&(ep=eE),en=en.add(ep),er=er.sub(eg)}return en},eA.div=eA.divide,eA.modulo=function(g){return(et(g)||(g=ef(g)),$)?eu((this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,g.low,g.high),$.get_high(),this.unsigned):this.sub(this.div(g).mul(g))},eA.mod=eA.modulo,eA.rem=eA.modulo,eA.not=function(){return eu(~this.low,~this.high,this.unsigned)},eA.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},eA.clz=eA.countLeadingZeros,eA.countTrailingZeros=function(){return this.low?er(this.low):er(this.high)+32},eA.ctz=eA.countTrailingZeros,eA.and=function(g){return et(g)||(g=ef(g)),eu(this.low&g.low,this.high&g.high,this.unsigned)},eA.or=function(g){return et(g)||(g=ef(g)),eu(this.low|g.low,this.high|g.high,this.unsigned)},eA.xor=function(g){return et(g)||(g=ef(g)),eu(this.low^g.low,this.high^g.high,this.unsigned)},eA.shiftLeft=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):eu(0,this.low<<g-32,this.unsigned)},eA.shl=eA.shiftLeft,eA.shiftRight=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):eu(this.high>>g-32,this.high>=0?0:-1,this.unsigned)},eA.shr=eA.shiftRight,eA.shiftRightUnsigned=function(g){return(et(g)&&(g=g.toInt()),0==(g&=63))?this:g<32?eu(this.low>>>g|this.high<<32-g,this.high>>>g,this.unsigned):32===g?eu(this.high,0,this.unsigned):eu(this.high>>>g-32,0,this.unsigned)},eA.shru=eA.shiftRightUnsigned,eA.shr_u=eA.shiftRightUnsigned,eA.rotateLeft=function(g){var $;return(et(g)&&(g=g.toInt()),0==(g&=63))?this:32===g?eu(this.high,this.low,this.unsigned):g<32?($=32-g,eu(this.low<<g|this.high>>>$,this.high<<g|this.low>>>$,this.unsigned)):(g-=32,$=32-g,eu(this.high<<g|this.low>>>$,this.low<<g|this.high>>>$,this.unsigned))},eA.rotl=eA.rotateLeft,eA.rotateRight=function(g){var $;return(et(g)&&(g=g.toInt()),0==(g&=63))?this:32===g?eu(this.high,this.low,this.unsigned):g<32?($=32-g,eu(this.high<<$|this.low>>>g,this.low<<$|this.high>>>g,this.unsigned)):(g-=32,$=32-g,eu(this.low<<$|this.high>>>g,this.high<<$|this.low>>>g,this.unsigned))},eA.rotr=eA.rotateRight,eA.toSigned=function(){return this.unsigned?eu(this.low,this.high,!1):this},eA.toUnsigned=function(){return this.unsigned?this:eu(this.low,this.high,!0)},eA.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},eA.toBytesLE=function(){var g=this.high,$=this.low;return[255&$,$>>>8&255,$>>>16&255,$>>>24,255&g,g>>>8&255,g>>>16&255,g>>>24]},eA.toBytesBE=function(){var g=this.high,$=this.low;return[g>>>24,g>>>16&255,g>>>8&255,255&g,$>>>24,$>>>16&255,$>>>8&255,255&$]},ee.fromBytes=function(g,$,et){return et?ee.fromBytesLE(g,$):ee.fromBytesBE(g,$)},ee.fromBytesLE=function(g,$){return new ee(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,$)},ee.fromBytesBE=function(g,$){return new ee(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],$)},"function"==typeof BigInt&&(ee.fromBigInt=function(g,$){return eu(Number(BigInt.asIntN(32,g)),Number(BigInt.asIntN(32,g>>BigInt(32))),$)},ee.fromValue=function(g,$){return"bigint"==typeof g?ee.fromBigInt(g,$):ef(g,$)},eA.toBigInt=function(){var g=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|g}),g.default=ee})},65490:(g,$,ee)=>{"use strict";let et,er;ee.d($,{Jn:()=>eH,qX:()=>eG,Xd:()=>ez,Mq:()=>eY,C6:()=>eJ,ZF:()=>eQ,KN:()=>eX});var en=ee(30818),ei=ee(66208),es=ee(73817);let eo=(g,$)=>$.some($=>g instanceof $);function eu(){return et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eh(){return er||(er=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let ep=new WeakMap,ef=new WeakMap,eg=new WeakMap,em=new WeakMap,ey=new WeakMap;function ev(g){let $=new Promise(($,ee)=>{let et=()=>{g.removeEventListener("success",er),g.removeEventListener("error",en)},er=()=>{$(e_(g.result)),et()},en=()=>{ee(g.error),et()};g.addEventListener("success",er),g.addEventListener("error",en)});return $.then($=>{$ instanceof IDBCursor&&ep.set($,g)}).catch(()=>{}),ey.set($,g),$}function eS(g){if(ef.has(g))return;let $=new Promise(($,ee)=>{let et=()=>{g.removeEventListener("complete",er),g.removeEventListener("error",en),g.removeEventListener("abort",en)},er=()=>{$(),et()},en=()=>{ee(g.error||new DOMException("AbortError","AbortError")),et()};g.addEventListener("complete",er),g.addEventListener("error",en),g.addEventListener("abort",en)});ef.set(g,$)}let eT={get(g,$,ee){if(g instanceof IDBTransaction){if("done"===$)return ef.get(g);if("objectStoreNames"===$)return g.objectStoreNames||eg.get(g);if("store"===$)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return e_(g[$])},set:(g,$,ee)=>(g[$]=ee,!0),has:(g,$)=>g instanceof IDBTransaction&&("done"===$||"store"===$)||$ in g};function eE(g){eT=g(eT)}function ew(g){return g!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?eh().includes(g)?function(...$){return g.apply(eI(this),$),e_(ep.get(this))}:function(...$){return e_(g.apply(eI(this),$))}:function($,...ee){let et=g.call(eI(this),$,...ee);return eg.set(et,$.sort?$.sort():[$]),e_(et)}}function eC(g){return"function"==typeof g?ew(g):(g instanceof IDBTransaction&&eS(g),eo(g,eu()))?new Proxy(g,eT):g}function e_(g){if(g instanceof IDBRequest)return ev(g);if(em.has(g))return em.get(g);let $=eC(g);return $!==g&&(em.set(g,$),ey.set($,g)),$}let eI=g=>ey.get(g);function eO(g,$,{blocked:ee,upgrade:et,blocking:er,terminated:en}={}){let ei=indexedDB.open(g,$),es=e_(ei);return et&&ei.addEventListener("upgradeneeded",g=>{et(e_(ei.result),g.oldVersion,g.newVersion,e_(ei.transaction),g)}),ee&&ei.addEventListener("blocked",g=>ee(g.oldVersion,g.newVersion,g)),es.then(g=>{en&&g.addEventListener("close",()=>en()),er&&g.addEventListener("versionchange",g=>er(g.oldVersion,g.newVersion,g))}).catch(()=>{}),es}let eA=["get","getKey","getAll","getAllKeys","count"],eN=["put","add","delete","clear"],eR=new Map;function eD(g,$){if(!(g instanceof IDBDatabase&&!($ in g)&&"string"==typeof $))return;if(eR.get($))return eR.get($);let ee=$.replace(/FromIndex$/,""),et=$!==ee,er=eN.includes(ee);if(!(ee in(et?IDBIndex:IDBObjectStore).prototype)||!(er||eA.includes(ee)))return;let en=async function(g,...$){let en=this.transaction(g,er?"readwrite":"readonly"),ei=en.store;return et&&(ei=ei.index($.shift())),(await Promise.all([ei[ee](...$),er&&en.done]))[0]};return eR.set($,en),en}eE(g=>({...g,get:($,ee,et)=>eD($,ee)||g.get($,ee,et),has:($,ee)=>!!eD($,ee)||g.has($,ee)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(g){this.container=g}getPlatformInfoString(){return this.container.getProviders().map(g=>{if(!ex(g))return null;{let $=g.getImmediate();return`${$.library}/${$.version}`}}).filter(g=>g).join(" ")}}function ex(g){let $=g.getComponent();return(null==$?void 0:$.type)==="VERSION"}let eP="@firebase/app",eM="0.9.13",eL=new ei.Yd("@firebase/app"),eF="9.23.0",eB="[DEFAULT]",ej={[eP]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},eU=new Map,eV=new Map;function eq(g,$){try{g.container.addComponent($)}catch(ee){eL.debug(`Component ${$.name} failed to register with FirebaseApp ${g.name}`,ee)}}function ez(g){let $=g.name;if(eV.has($))return eL.debug(`There were multiple attempts to register component ${$}.`),!1;for(let ee of(eV.set($,g),eU.values()))eq(ee,g);return!0}function eG(g,$){let ee=g.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),g.container.getProvider($)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},eK=new es.LL("app","Firebase",e$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(g,$,ee){this._isDeleted=!1,this._options=Object.assign({},g),this._config=Object.assign({},$),this._name=$.name,this._automaticDataCollectionEnabled=$.automaticDataCollectionEnabled,this._container=ee,this.container.addComponent(new en.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(g){this.checkDestroyed(),this._automaticDataCollectionEnabled=g}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(g){this._isDeleted=g}checkDestroyed(){if(this.isDeleted)throw eK.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eH=eF;function eQ(g,$={}){let ee=g;"object"!=typeof $&&($={name:$});let et=Object.assign({name:eB,automaticDataCollectionEnabled:!1},$),er=et.name;if("string"!=typeof er||!er)throw eK.create("bad-app-name",{appName:String(er)});if(ee||(ee=(0,es.aH)()),!ee)throw eK.create("no-options");let ei=eU.get(er);if(ei){if((0,es.vZ)(ee,ei.options)&&(0,es.vZ)(et,ei.config))return ei;throw eK.create("duplicate-app",{appName:er})}let eo=new en.H0(er);for(let g of eV.values())eo.addComponent(g);let eu=new eW(ee,et,eo);return eU.set(er,eu),eu}function eY(g=eB){let $=eU.get(g);if(!$&&g===eB&&(0,es.aH)())return eQ();if(!$)throw eK.create("no-app",{appName:g});return $}function eJ(){return Array.from(eU.values())}function eX(g,$,ee){var et;let er=null!==(et=ej[g])&&void 0!==et?et:g;ee&&(er+=`-${ee}`);let ei=er.match(/\s|\//),es=$.match(/\s|\//);if(ei||es){let g=[`Unable to register library "${er}" with version "${$}":`];ei&&g.push(`library name "${er}" contains illegal characters (whitespace or "/")`),ei&&es&&g.push("and"),es&&g.push(`version name "${$}" contains illegal characters (whitespace or "/")`),eL.warn(g.join(" "));return}ez(new en.wA(`${er}-version`,()=>({library:er,version:$}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eZ="firebase-heartbeat-database",e0=1,e1="firebase-heartbeat-store",e2=null;function e3(){return e2||(e2=eO(eZ,e0,{upgrade:(g,$)=>{0===$&&g.createObjectStore(e1)}}).catch(g=>{throw eK.create("idb-open",{originalErrorMessage:g.message})})),e2}async function e4(g){try{let $=await e3();return await $.transaction(e1).objectStore(e1).get(e5(g))}catch(g){if(g instanceof es.ZR)eL.warn(g.message);else{let $=eK.create("idb-get",{originalErrorMessage:null==g?void 0:g.message});eL.warn($.message)}}}async function e6(g,$){try{let ee=(await e3()).transaction(e1,"readwrite"),et=ee.objectStore(e1);await et.put($,e5(g)),await ee.done}catch(g){if(g instanceof es.ZR)eL.warn(g.message);else{let $=eK.create("idb-set",{originalErrorMessage:null==g?void 0:g.message});eL.warn($.message)}}}function e5(g){return`${g.name}!${g.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e9=1024,e8=2592e6;class e7{constructor(g){this.container=g,this._heartbeatsCache=null;let $=this.container.getProvider("app").getImmediate();this._storage=new tr($),this._heartbeatsCachePromise=this._storage.read().then(g=>(this._heartbeatsCache=g,g))}async triggerHeartbeat(){let g=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$=te();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===$||this._heartbeatsCache.heartbeats.some(g=>g.date===$))?void 0:(this._heartbeatsCache.heartbeats.push({date:$,agent:g}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(g=>{let $=new Date(g.date).valueOf();return Date.now()-$<=e8}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let g=te(),{heartbeatsToSend:$,unsentEntries:ee}=tt(this._heartbeatsCache.heartbeats),et=(0,es.L)(JSON.stringify({version:2,heartbeats:$}));return this._heartbeatsCache.lastSentHeartbeatDate=g,ee.length>0?(this._heartbeatsCache.heartbeats=ee,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),et}}function te(){return new Date().toISOString().substring(0,10)}function tt(g,$=e9){let ee=[],et=g.slice();for(let er of g){let g=ee.find(g=>g.agent===er.agent);if(g){if(g.dates.push(er.date),ti(ee)>$){g.dates.pop();break}}else if(ee.push({agent:er.agent,dates:[er.date]}),ti(ee)>$){ee.pop();break}et=et.slice(1)}return{heartbeatsToSend:ee,unsentEntries:et}}class tr{constructor(g){this.app=g,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,es.hl)()&&(0,es.eu)().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await e4(this.app)||{heartbeats:[]}}async overwrite(g){var $;if(await this._canUseIndexedDBPromise){let ee=await this.read();return e6(this.app,{lastSentHeartbeatDate:null!==($=g.lastSentHeartbeatDate)&&void 0!==$?$:ee.lastSentHeartbeatDate,heartbeats:g.heartbeats})}}async add(g){var $;if(await this._canUseIndexedDBPromise){let ee=await this.read();return e6(this.app,{lastSentHeartbeatDate:null!==($=g.lastSentHeartbeatDate)&&void 0!==$?$:ee.lastSentHeartbeatDate,heartbeats:[...ee.heartbeats,...g.heartbeats]})}}}function ti(g){return(0,es.L)(JSON.stringify({version:2,heartbeats:g})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(g){ez(new en.wA("platform-logger",g=>new ek(g),"PRIVATE")),ez(new en.wA("heartbeat",g=>new e7(g),"PRIVATE")),eX(eP,eM,""),eX(eP,eM,"esm2017"),eX("fire-js","")})(0)},30818:(g,$,ee)=>{"use strict";ee.d($,{H0:()=>eu,wA:()=>er});var et=ee(73817);class er{constructor(g,$,ee){this.name=g,this.instanceFactory=$,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(g){return this.instantiationMode=g,this}setMultipleInstances(g){return this.multipleInstances=g,this}setServiceProps(g){return this.serviceProps=g,this}setInstanceCreatedCallback(g){return this.onInstanceCreated=g,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(g,$){this.name=g,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(g){let $=this.normalizeInstanceIdentifier(g);if(!this.instancesDeferred.has($)){let g=new et.BH;if(this.instancesDeferred.set($,g),this.isInitialized($)||this.shouldAutoInitialize())try{let ee=this.getOrInitializeService({instanceIdentifier:$});ee&&g.resolve(ee)}catch(g){}}return this.instancesDeferred.get($).promise}getImmediate(g){var $;let ee=this.normalizeInstanceIdentifier(null==g?void 0:g.identifier),et=null!==($=null==g?void 0:g.optional)&&void 0!==$&&$;if(this.isInitialized(ee)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(g){if(et)return null;throw g}else{if(et)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(g){if(g.name!==this.name)throw Error(`Mismatching Component ${g.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=g,this.shouldAutoInitialize()){if(eo(g))try{this.getOrInitializeService({instanceIdentifier:en})}catch(g){}for(let[g,$]of this.instancesDeferred.entries()){let ee=this.normalizeInstanceIdentifier(g);try{let g=this.getOrInitializeService({instanceIdentifier:ee});$.resolve(g)}catch(g){}}}}clearInstance(g=en){this.instancesDeferred.delete(g),this.instancesOptions.delete(g),this.instances.delete(g)}async delete(){let g=Array.from(this.instances.values());await Promise.all([...g.filter(g=>"INTERNAL"in g).map(g=>g.INTERNAL.delete()),...g.filter(g=>"_delete"in g).map(g=>g._delete())])}isComponentSet(){return null!=this.component}isInitialized(g=en){return this.instances.has(g)}getOptions(g=en){return this.instancesOptions.get(g)||{}}initialize(g={}){let{options:$={}}=g,ee=this.normalizeInstanceIdentifier(g.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let et=this.getOrInitializeService({instanceIdentifier:ee,options:$});for(let[g,$]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(g)&&$.resolve(et);return et}onInit(g,$){var ee;let et=this.normalizeInstanceIdentifier($),er=null!==(ee=this.onInitCallbacks.get(et))&&void 0!==ee?ee:new Set;er.add(g),this.onInitCallbacks.set(et,er);let en=this.instances.get(et);return en&&g(en,et),()=>{er.delete(g)}}invokeOnInitCallbacks(g,$){let ee=this.onInitCallbacks.get($);if(ee)for(let et of ee)try{et(g,$)}catch(g){}}getOrInitializeService({instanceIdentifier:g,options:$={}}){let ee=this.instances.get(g);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:es(g),options:$}),this.instances.set(g,ee),this.instancesOptions.set(g,$),this.invokeOnInitCallbacks(ee,g),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,g,ee)}catch(g){}return ee||null}normalizeInstanceIdentifier(g=en){return this.component?this.component.multipleInstances?g:en:g}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function es(g){return g===en?void 0:g}function eo(g){return"EAGER"===g.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(g){this.name=g,this.providers=new Map}addComponent(g){let $=this.getProvider(g.name);if($.isComponentSet())throw Error(`Component ${g.name} has already been registered with ${this.name}`);$.setComponent(g)}addOrOverwriteComponent(g){this.getProvider(g.name).isComponentSet()&&this.providers.delete(g.name),this.addComponent(g)}getProvider(g){if(this.providers.has(g))return this.providers.get(g);let $=new ei(g,this);return this.providers.set(g,$),$}getProviders(){return Array.from(this.providers.values())}}},66208:(g,$,ee)=>{"use strict";var et;ee.d($,{Yd:()=>eu,in:()=>et});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er=[];!function(g){g[g.DEBUG=0]="DEBUG",g[g.VERBOSE=1]="VERBOSE",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.SILENT=5]="SILENT"}(et||(et={}));let en={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},ei=et.INFO,es={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},eo=(g,$,...ee)=>{if($<g.logLevel)return;let et=new Date().toISOString(),er=es[$];if(er)console[er](`[${et}]  ${g.name}:`,...ee);else throw Error(`Attempted to log a message with an invalid logType (value: ${$})`)};class eu{constructor(g){this.name=g,this._logLevel=ei,this._logHandler=eo,this._userLogHandler=null,er.push(this)}get logLevel(){return this._logLevel}set logLevel(g){if(!(g in et))throw TypeError(`Invalid value "${g}" assigned to \`logLevel\``);this._logLevel=g}setLogLevel(g){this._logLevel="string"==typeof g?en[g]:g}get logHandler(){return this._logHandler}set logHandler(g){if("function"!=typeof g)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=g}get userLogHandler(){return this._userLogHandler}set userLogHandler(g){this._userLogHandler=g}debug(...g){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...g),this._logHandler(this,et.DEBUG,...g)}log(...g){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...g),this._logHandler(this,et.VERBOSE,...g)}info(...g){this._userLogHandler&&this._userLogHandler(this,et.INFO,...g),this._logHandler(this,et.INFO,...g)}warn(...g){this._userLogHandler&&this._userLogHandler(this,et.WARN,...g),this._logHandler(this,et.WARN,...g)}error(...g){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...g),this._logHandler(this,et.ERROR,...g)}}},73817:(g,$,ee)=>{"use strict";ee.d($,{BH:()=>eE,L:()=>eu,LL:()=>eA,P0:()=>eS,Sg:()=>ew,ZR:()=>eO,aH:()=>eT,eu:()=>e_,hl:()=>eC,m9:()=>ex,vZ:()=>eD});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let et={NODE_CLIENT:!1},er=function(g){let $=[],ee=0;for(let et=0;et<g.length;et++){let er=g.charCodeAt(et);er<128?$[ee++]=er:(er<2048?$[ee++]=er>>6|192:((64512&er)==55296&&et+1<g.length&&(64512&g.charCodeAt(et+1))==56320?(er=65536+((1023&er)<<10)+(1023&g.charCodeAt(++et)),$[ee++]=er>>18|240,$[ee++]=er>>12&63|128):$[ee++]=er>>12|224,$[ee++]=er>>6&63|128),$[ee++]=63&er|128)}return $},en=function(g){let $=[],ee=0,et=0;for(;ee<g.length;){let er=g[ee++];if(er<128)$[et++]=String.fromCharCode(er);else if(er>191&&er<224){let en=g[ee++];$[et++]=String.fromCharCode((31&er)<<6|63&en)}else if(er>239&&er<365){let en=((7&er)<<18|(63&g[ee++])<<12|(63&g[ee++])<<6|63&g[ee++])-65536;$[et++]=String.fromCharCode(55296+(en>>10)),$[et++]=String.fromCharCode(56320+(1023&en))}else{let en=g[ee++],ei=g[ee++];$[et++]=String.fromCharCode((15&er)<<12|(63&en)<<6|63&ei)}}return $.join("")},ei={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(g,$){if(!Array.isArray(g))throw Error("encodeByteArray takes an array as a parameter");this.init_();let ee=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let $=0;$<g.length;$+=3){let er=g[$],en=$+1<g.length,ei=en?g[$+1]:0,es=$+2<g.length,eo=es?g[$+2]:0,eu=er>>2,eh=(3&er)<<4|ei>>4,ep=(15&ei)<<2|eo>>6,ef=63&eo;es||(ef=64,en||(ep=64)),et.push(ee[eu],ee[eh],ee[ep],ee[ef])}return et.join("")},encodeString(g,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(g):this.encodeByteArray(er(g),$)},decodeString(g,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(g):en(this.decodeStringToByteArray(g,$))},decodeStringToByteArray(g,$){this.init_();let ee=$?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let $=0;$<g.length;){let er=ee[g.charAt($++)],en=$<g.length?ee[g.charAt($)]:0,ei=++$<g.length?ee[g.charAt($)]:64,eo=++$<g.length?ee[g.charAt($)]:64;if(++$,null==er||null==en||null==ei||null==eo)throw new es;let eu=er<<2|en>>4;if(et.push(eu),64!==ei){let g=en<<4&240|ei>>2;if(et.push(g),64!==eo){let g=ei<<6&192|eo;et.push(g)}}}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let g=0;g<this.ENCODED_VALS.length;g++)this.byteToCharMap_[g]=this.ENCODED_VALS.charAt(g),this.charToByteMap_[this.byteToCharMap_[g]]=g,this.byteToCharMapWebSafe_[g]=this.ENCODED_VALS_WEBSAFE.charAt(g),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[g]]=g,g>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(g)]=g,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(g)]=g)}}};class es extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let eo=function(g){let $=er(g);return ei.encodeByteArray($,!0)},eu=function(g){return eo(g).replace(/\./g,"")},eh=function(g){try{return ei.decodeString(g,!0)}catch(g){console.error("base64Decode failed: ",g)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){if("undefined"!=typeof self)return self;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=()=>ep().__FIREBASE_DEFAULTS__,eg=()=>{if("undefined"==typeof process||void 0===process.env)return;let g=process.env.__FIREBASE_DEFAULTS__;if(g)return JSON.parse(g)},em=()=>{let g;if("undefined"==typeof document)return;try{g=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(g){return}let $=g&&eh(g[1]);return $&&JSON.parse($)},ey=()=>{try{return ef()||eg()||em()}catch(g){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${g}`);return}},ev=g=>{var $,ee;return null===(ee=null===($=ey())||void 0===$?void 0:$.emulatorHosts)||void 0===ee?void 0:ee[g]},eS=g=>{let $=ev(g);if(!$)return;let ee=$.lastIndexOf(":");if(ee<=0||ee+1===$.length)throw Error(`Invalid host ${$} with no separate hostname and port!`);let et=parseInt($.substring(ee+1),10);return"["===$[0]?[$.substring(1,ee-1),et]:[$.substring(0,ee),et]},eT=()=>{var g;return null===(g=ey())||void 0===g?void 0:g.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((g,$)=>{this.resolve=g,this.reject=$})}wrapCallback(g){return($,ee)=>{$?this.reject($):this.resolve(ee),"function"==typeof g&&(this.promise.catch(()=>{}),1===g.length?g($):g($,ee))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(g,$){if(g.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let ee={alg:"none",type:"JWT"},et=$||"demo-project",er=g.iat||0,en=g.sub||g.user_id;if(!en)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let ei=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:er,exp:er+3600,auth_time:er,sub:en,user_id:en,firebase:{sign_in_provider:"custom",identities:{}}},g),es="";return[eu(JSON.stringify(ee)),eu(JSON.stringify(ei)),es].join(".")}function eC(){try{return"object"==typeof indexedDB}catch(g){return!1}}function e_(){return new Promise((g,$)=>{try{let ee=!0,et="validate-browser-context-for-indexeddb-analytics-module",er=self.indexedDB.open(et);er.onsuccess=()=>{er.result.close(),ee||self.indexedDB.deleteDatabase(et),g(!0)},er.onupgradeneeded=()=>{ee=!1},er.onerror=()=>{var g;$((null===(g=er.error)||void 0===g?void 0:g.message)||"")}}catch(g){$(g)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eI="FirebaseError";class eO extends Error{constructor(g,$,ee){super($),this.code=g,this.customData=ee,this.name=eI,Object.setPrototypeOf(this,eO.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eA.prototype.create)}}class eA{constructor(g,$,ee){this.service=g,this.serviceName=$,this.errors=ee}create(g,...$){let ee=$[0]||{},et=`${this.service}/${g}`,er=this.errors[g],en=er?eN(er,ee):"Error",ei=`${this.serviceName}: ${en} (${et}).`;return new eO(et,ei,ee)}}function eN(g,$){return g.replace(eR,(g,ee)=>{let et=$[ee];return null!=et?String(et):`<${ee}?>`})}let eR=/\{\$([^}]+)}/g;function eD(g,$){if(g===$)return!0;let ee=Object.keys(g),et=Object.keys($);for(let er of ee){if(!et.includes(er))return!1;let ee=g[er],en=$[er];if(ek(ee)&&ek(en)){if(!eD(ee,en))return!1}else if(ee!==en)return!1}for(let g of et)if(!ee.includes(g))return!1;return!0}function ek(g){return null!==g&&"object"==typeof g}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(g){return g&&g._delegate?g._delegate:g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */et.NODE_CLIENT=!0},77010:(g,$,ee)=>{"use strict";ee.d($,{C6:()=>et.C6,ZF:()=>et.ZF});var et=ee(65490),er="firebase",en="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,et.KN)(er,en,"app")},12272:(g,$,ee)=>{"use strict";ee.d($,{hJ:()=>Se,JU:()=>St,QT:()=>Tu,PL:()=>Tp,ad:()=>Sl});var et,er,en,ei,es,eo=ee(65490),eu=ee(30818),eh=ee(66208),ep=ee(73837),ef=ee(73817),eg=ee(6113),em="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ey={},ev=ev||{},eS=em||self;function eT(g){var $=typeof g;return"array"==($="object"!=$?$:g?Array.isArray(g)?"array":$:"null")||"object"==$&&"number"==typeof g.length}function eE(g){var $=typeof g;return"object"==$&&null!=g||"function"==$}function ew(g){return Object.prototype.hasOwnProperty.call(g,eC)&&g[eC]||(g[eC]=++e_)}var eC="closure_uid_"+(1e9*Math.random()>>>0),e_=0;function eI(g,$,ee){return g.call.apply(g.bind,arguments)}function eO(g,$,ee){if(!g)throw Error();if(2<arguments.length){var et=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,et),g.apply($,ee)}}return function(){return g.apply($,arguments)}}function eA(g,$,ee){return(eA=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eI:eO).apply(null,arguments)}function eN(g,$){var ee=Array.prototype.slice.call(arguments,1);return function(){var $=ee.slice();return $.push.apply($,arguments),g.apply(this,$)}}function eR(g,$){function ee(){}ee.prototype=$.prototype,g.$=$.prototype,g.prototype=new ee,g.prototype.constructor=g,g.ac=function(g,ee,et){for(var er=Array(arguments.length-2),en=2;en<arguments.length;en++)er[en-2]=arguments[en];return $.prototype[ee].apply(g,er)}}function eD(){this.s=this.s,this.o=this.o}var ek=0;eD.prototype.s=!1,eD.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==ek)||ew(this)},eD.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let ex=Array.prototype.indexOf?function(g,$){return Array.prototype.indexOf.call(g,$,void 0)}:function(g,$){if("string"==typeof g)return"string"!=typeof $||1!=$.length?-1:g.indexOf($,0);for(let ee=0;ee<g.length;ee++)if(ee in g&&g[ee]===$)return ee;return -1};function eP(g){let $=g.length;if(0<$){let ee=Array($);for(let et=0;et<$;et++)ee[et]=g[et];return ee}return[]}function eM(g,$){for(let $=1;$<arguments.length;$++){let ee=arguments[$];if(eT(ee)){let $=g.length||0,et=ee.length||0;g.length=$+et;for(let er=0;er<et;er++)g[$+er]=ee[er]}else g.push(ee)}}function eL(g,$){this.type=g,this.g=this.target=$,this.defaultPrevented=!1}eL.prototype.h=function(){this.defaultPrevented=!0};var eF=function(){if(!eS.addEventListener||!Object.defineProperty)return!1;var g=!1,$=Object.defineProperty({},"passive",{get:function(){g=!0}});try{eS.addEventListener("test",()=>{},$),eS.removeEventListener("test",()=>{},$)}catch(g){}return g}();function eB(g){return/^[\s\xa0]*$/.test(g)}function ej(){var g=eS.navigator;return g&&(g=g.userAgent)?g:""}function eU(g){return -1!=ej().indexOf(g)}function eV(g){return eV[" "](g),g}function eq(g,$){var ee=io;return Object.prototype.hasOwnProperty.call(ee,g)?ee[g]:ee[g]=$(g)}eV[" "]=function(){};var ez=eU("Opera"),eG=eU("Trident")||eU("MSIE"),e$=eU("Edge"),eK=e$||eG,eW=eU("Gecko")&&!(-1!=ej().toLowerCase().indexOf("webkit")&&!eU("Edge"))&&!(eU("Trident")||eU("MSIE"))&&!eU("Edge"),eH=-1!=ej().toLowerCase().indexOf("webkit")&&!eU("Edge");function eQ(){var g=eS.document;return g?g.documentMode:void 0}e:{var eY="",eJ=function(){var g=ej();return eW?/rv:([^\);]+)(\)|;)/.exec(g):e$?/Edge\/([\d\.]+)/.exec(g):eG?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(g):eH?/WebKit\/(\S+)/.exec(g):ez?/(?:Version)[ \/]?(\S+)/.exec(g):void 0}();if(eJ&&(eY=eJ?eJ[1]:""),eG){var eX=eQ();if(null!=eX&&eX>parseFloat(eY)){et=String(eX);break e}}et=eY}var eZ=er=eS.document&&eG&&(eQ()||parseInt(et,10))||void 0;function e0(g,$){if(eL.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var ee=this.type=g.type,et=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=$,$=g.relatedTarget){if(eW){e:{try{eV($.nodeName);var er=!0;break e}catch(g){}er=!1}er||($=null)}}else"mouseover"==ee?$=g.fromElement:"mouseout"==ee&&($=g.toElement);this.relatedTarget=$,et?(this.clientX=void 0!==et.clientX?et.clientX:et.pageX,this.clientY=void 0!==et.clientY?et.clientY:et.pageY,this.screenX=et.screenX||0,this.screenY=et.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:e1[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&e0.$.h.call(this)}}eR(e0,eL);var e1={2:"touch",3:"pen",4:"mouse"};e0.prototype.h=function(){e0.$.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var e2="closure_listenable_"+(1e6*Math.random()|0),e3=0;function e4(g,$,ee,et,er){this.listener=g,this.proxy=null,this.src=$,this.type=ee,this.capture=!!et,this.la=er,this.key=++e3,this.fa=this.ia=!1}function e6(g){g.fa=!0,g.listener=null,g.proxy=null,g.src=null,g.la=null}function e5(g,$,ee){for(let et in g)$.call(ee,g[et],et,g)}function e9(g,$){for(let ee in g)$.call(void 0,g[ee],ee,g)}function e8(g){let $={};for(let ee in g)$[ee]=g[ee];return $}let e7="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(g,$){let ee,et;for(let $=1;$<arguments.length;$++){for(ee in et=arguments[$])g[ee]=et[ee];for(let $=0;$<e7.length;$++)ee=e7[$],Object.prototype.hasOwnProperty.call(et,ee)&&(g[ee]=et[ee])}}function tt(g){this.src=g,this.g={},this.h=0}function tr(g,$){var ee=$.type;if(ee in g.g){var et,er=g.g[ee],en=ex(er,$);(et=0<=en)&&Array.prototype.splice.call(er,en,1),et&&(e6($),0==g.g[ee].length&&(delete g.g[ee],g.h--))}}function ti(g,$,ee,et){for(var er=0;er<g.length;++er){var en=g[er];if(!en.fa&&en.listener==$&&!!ee==en.capture&&en.la==et)return er}return -1}tt.prototype.add=function(g,$,ee,et,er){var en=g.toString();(g=this.g[en])||(g=this.g[en]=[],this.h++);var ei=ti(g,$,et,er);return -1<ei?($=g[ei],ee||($.ia=!1)):(($=new e4($,this.src,en,!!et,er)).ia=ee,g.push($)),$};var ts="closure_lm_"+(1e6*Math.random()|0),tl={};function tu(g,$,ee,et,er){if(et&&et.once)return tf(g,$,ee,et,er);if(Array.isArray($)){for(var en=0;en<$.length;en++)tu(g,$[en],ee,et,er);return null}return ee=tE(ee),g&&g[e2]?g.O($,ee,eE(et)?!!et.capture:!!et,er):th(g,$,ee,!1,et,er)}function th(g,$,ee,et,er,en){if(!$)throw Error("Invalid event type");var ei=eE(er)?!!er.capture:!!er,es=tS(g);if(es||(g[ts]=es=new tt(g)),(ee=es.add($,ee,et,ei,en)).proxy)return ee;if(et=tp(),ee.proxy=et,et.src=g,et.listener=ee,g.addEventListener)eF||(er=ei),void 0===er&&(er=!1),g.addEventListener($.toString(),et,er);else if(g.attachEvent)g.attachEvent(ty($.toString()),et);else if(g.addListener&&g.removeListener)g.addListener(et);else throw Error("addEventListener and attachEvent are unavailable.");return ee}function tp(){function g(ee){return $.call(g.src,g.listener,ee)}let $=tv;return g}function tf(g,$,ee,et,er){if(Array.isArray($)){for(var en=0;en<$.length;en++)tf(g,$[en],ee,et,er);return null}return ee=tE(ee),g&&g[e2]?g.P($,ee,eE(et)?!!et.capture:!!et,er):th(g,$,ee,!0,et,er)}function tg(g,$,ee,et,er){if(Array.isArray($))for(var en=0;en<$.length;en++)tg(g,$[en],ee,et,er);else(et=eE(et)?!!et.capture:!!et,ee=tE(ee),g&&g[e2])?(g=g.i,($=String($).toString())in g.g&&-1<(ee=ti(en=g.g[$],ee,et,er))&&(e6(en[ee]),Array.prototype.splice.call(en,ee,1),0==en.length&&(delete g.g[$],g.h--))):g&&(g=tS(g))&&($=g.g[$.toString()],g=-1,$&&(g=ti($,ee,et,er)),(ee=-1<g?$[g]:null)&&tm(ee))}function tm(g){if("number"!=typeof g&&g&&!g.fa){var $=g.src;if($&&$[e2])tr($.i,g);else{var ee=g.type,et=g.proxy;$.removeEventListener?$.removeEventListener(ee,et,g.capture):$.detachEvent?$.detachEvent(ty(ee),et):$.addListener&&$.removeListener&&$.removeListener(et),(ee=tS($))?(tr(ee,g),0==ee.h&&(ee.src=null,$[ts]=null)):e6(g)}}}function ty(g){return g in tl?tl[g]:tl[g]="on"+g}function tv(g,$){if(g.fa)g=!0;else{$=new e0($,this);var ee=g.listener,et=g.la||g.src;g.ia&&tm(g),g=ee.call(et,$)}return g}function tS(g){return(g=g[ts])instanceof tt?g:null}var tT="__closure_events_fn_"+(1e9*Math.random()>>>0);function tE(g){return"function"==typeof g?g:(g[tT]||(g[tT]=function($){return g.handleEvent($)}),g[tT])}function tw(){eD.call(this),this.i=new tt(this),this.S=this,this.J=null}function tC(g,$){var ee,et=g.J;if(et)for(ee=[];et;et=et.J)ee.push(et);if(g=g.S,et=$.type||$,"string"==typeof $)$=new eL($,g);else if($ instanceof eL)$.target=$.target||g;else{var er=$;te($=new eL(et,g),er)}if(er=!0,ee)for(var en=ee.length-1;0<=en;en--){var ei=$.g=ee[en];er=t_(ei,et,!0,$)&&er}if(er=t_(ei=$.g=g,et,!0,$)&&er,er=t_(ei,et,!1,$)&&er,ee)for(en=0;en<ee.length;en++)er=t_(ei=$.g=ee[en],et,!1,$)&&er}function t_(g,$,ee,et){if(!($=g.i.g[String($)]))return!0;$=$.concat();for(var er=!0,en=0;en<$.length;++en){var ei=$[en];if(ei&&!ei.fa&&ei.capture==ee){var es=ei.listener,eo=ei.la||ei.src;ei.ia&&tr(g.i,ei),er=!1!==es.call(eo,et)&&er}}return er&&!et.defaultPrevented}eR(tw,eD),tw.prototype[e2]=!0,tw.prototype.removeEventListener=function(g,$,ee,et){tg(this,g,$,ee,et)},tw.prototype.N=function(){if(tw.$.N.call(this),this.i){var g,$=this.i;for(g in $.g){for(var ee=$.g[g],et=0;et<ee.length;et++)e6(ee[et]);delete $.g[g],$.h--}}this.J=null},tw.prototype.O=function(g,$,ee,et){return this.i.add(String(g),$,!1,ee,et)},tw.prototype.P=function(g,$,ee,et){return this.i.add(String(g),$,!0,ee,et)};var tI=eS.JSON.stringify;class tO{constructor(g,$){this.i=g,this.j=$,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function tA(){var g=tF;let $=null;return g.g&&($=g.g,g.g=g.g.next,g.g||(g.h=null),$.next=null),$}class tN{constructor(){this.h=this.g=null}add(g,$){let ee=tR.get();ee.set(g,$),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var tR=new tO(()=>new tD,g=>g.reset());class tD{constructor(){this.next=this.g=this.h=null}set(g,$){this.h=g,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}function tk(g){var $=1;g=g.split(":");let ee=[];for(;0<$&&g.length;)ee.push(g.shift()),$--;return g.length&&ee.push(g.join(":")),ee}function tP(g){eS.setTimeout(()=>{throw g},0)}let tM,tL=!1,tF=new tN,tB=()=>{let g=eS.Promise.resolve(void 0);tM=()=>{g.then(tj)}};var tj=()=>{for(var g;g=tA();){try{g.h.call(g.g)}catch(g){tP(g)}var $=tR;$.j(g),100>$.h&&($.h++,g.next=$.g,$.g=g)}tL=!1};function tU(g,$){tw.call(this),this.h=g||1,this.g=$||eS,this.j=eA(this.qb,this),this.l=Date.now()}function tV(g){g.ga=!1,g.T&&(g.g.clearTimeout(g.T),g.T=null)}function tq(g,$,ee){if("function"==typeof g)ee&&(g=eA(g,ee));else if(g&&"function"==typeof g.handleEvent)g=eA(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:eS.setTimeout(g,$||0)}function tz(g){g.g=tq(()=>{g.g=null,g.i&&(g.i=!1,tz(g))},g.j);let $=g.h;g.h=null,g.m.apply(null,$)}eR(tU,tw),(es=tU.prototype).ga=!1,es.T=null,es.qb=function(){if(this.ga){var g=Date.now()-this.l;0<g&&g<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-g):(this.T&&(this.g.clearTimeout(this.T),this.T=null),tC(this,"tick"),this.ga&&(tV(this),this.start()))}},es.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},es.N=function(){tU.$.N.call(this),tV(this),delete this.g};class tG extends eD{constructor(g,$){super(),this.m=g,this.j=$,this.h=null,this.i=!1,this.g=null}l(g){this.h=arguments,this.g?this.i=!0:tz(this)}N(){super.N(),this.g&&(eS.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function t$(g){eD.call(this),this.h=g,this.g={}}eR(t$,eD);var tK=[];function tW(g,$,ee,et){Array.isArray(ee)||(ee&&(tK[0]=ee.toString()),ee=tK);for(var er=0;er<ee.length;er++){var en=tu($,ee[er],et||g.handleEvent,!1,g.h||g);if(!en)break;g.g[en.key]=en}}function tH(g){e5(g.g,function(g,$){this.g.hasOwnProperty($)&&tm(g)},g),g.g={}}function tQ(){this.g=!0}function tY(g,$,ee,et,er,en){g.info(function(){if(g.g){if(en)for(var ei="",es=en.split("&"),eo=0;eo<es.length;eo++){var eu=es[eo].split("=");if(1<eu.length){var eh=eu[0];eu=eu[1];var ep=eh.split("_");ei=2<=ep.length&&"type"==ep[1]?ei+(eh+"=")+eu+"&":ei+(eh+"=redacted&")}}else ei=null}else ei=en;return"XMLHTTP REQ ("+et+") [attempt "+er+"]: "+$+"\n"+ee+"\n"+ei})}function tJ(g,$,ee,et,er,en,ei){g.info(function(){return"XMLHTTP RESP ("+et+") [ attempt "+er+"]: "+$+"\n"+ee+"\n"+en+" "+ei})}function tX(g,$,ee,et){g.info(function(){return"XMLHTTP TEXT ("+$+"): "+t0(g,ee)+(et?" "+et:"")})}function tZ(g,$){g.info(function(){return"TIMEOUT: "+$})}function t0(g,$){if(!g.g)return $;if(!$)return null;try{var ee=JSON.parse($);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var et=ee[g];if(!(2>et.length)){var er=et[1];if(Array.isArray(er)&&!(1>er.length)){var en=er[0];if("noop"!=en&&"stop"!=en&&"close"!=en)for(var ei=1;ei<er.length;ei++)er[ei]=""}}}}return tI(ee)}catch(g){return $}}t$.prototype.N=function(){t$.$.N.call(this),tH(this)},t$.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tQ.prototype.Ea=function(){this.g=!1},tQ.prototype.info=function(){};var t1={},t2=null;function t3(){return t2=t2||new tw}function t4(g){eL.call(this,t1.Ta,g)}function t6(g){let $=t3();tC($,new t4($))}function t5(g,$){eL.call(this,t1.STAT_EVENT,g),this.stat=$}function t9(g){let $=t3();tC($,new t5($,g))}function t8(g,$){eL.call(this,t1.Ua,g),this.size=$}function t7(g,$){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return eS.setTimeout(function(){g()},$)}t1.Ta="serverreachability",eR(t4,eL),t1.STAT_EVENT="statevent",eR(t5,eL),t1.Ua="timingevent",eR(t8,eL);var rt={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rn(){}function ri(g){return g.h||(g.h=g.i())}function rs(){}rn.prototype.h=null;var ro={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rl(){eL.call(this,"d")}function ru(){eL.call(this,"c")}function rh(){}function rp(g,$,ee,et){this.l=g,this.j=$,this.m=ee,this.W=et||1,this.U=new t$(this),this.P=rg,g=eK?125:void 0,this.V=new tU(g),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}eR(rl,eL),eR(ru,eL),eR(rh,rn),rh.prototype.g=function(){return new XMLHttpRequest},rh.prototype.i=function(){return{}},en=new rh;var rg=45e3,rm={},ry={};function rv(g,$,ee){g.L=1,g.v=rV(rL($)),g.s=ee,g.S=!0,rS(g,null)}function rS(g,$){g.G=Date.now(),rC(g),g.A=rL(g.v);var ee=g.A,et=g.W;Array.isArray(et)||(et=[String(et)]),r0(ee.i,"t",et),g.C=0,ee=g.l.J,g.h=new rf,g.g=n4(g.l,ee?$:null,!g.s),0<g.O&&(g.M=new tG(eA(g.Pa,g,g.g),g.O)),tW(g.U,g.g,"readystatechange",g.nb),$=g.I?e8(g.I):{},g.s?(g.u||(g.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",g.g.ha(g.A,g.u,g.s,$)):(g.u="GET",g.g.ha(g.A,g.u,null,$)),t6(),tY(g.j,g.u,g.A,g.m,g.W,g.s)}function rT(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.l.Ha}function rE(g,$,ee){let et=!0,er;for(;!g.J&&g.C<ee.length;)if((er=rw(g,ee))==ry){4==$&&(g.o=4,t9(14),et=!1),tX(g.j,g.m,null,"[Incomplete Response]");break}else if(er==rm){g.o=4,t9(15),tX(g.j,g.m,ee,"[Invalid Chunk]"),et=!1;break}else tX(g.j,g.m,er,null),rN(g,er);rT(g)&&er!=ry&&er!=rm&&(g.h.g="",g.C=0),4!=$||0!=ee.length||g.h.h||(g.o=1,t9(16),et=!1),g.i=g.i&&et,et?0<ee.length&&!g.ba&&(g.ba=!0,($=g.l).g==g&&$.ca&&!$.M&&($.l.info("Great, no buffering proxy detected. Bytes received: "+ee.length),nH($),$.M=!0,t9(11))):(tX(g.j,g.m,ee,"[Invalid Chunked Response]"),rA(g),rO(g))}function rw(g,$){var ee=g.C,et=$.indexOf("\n",ee);return -1==et?ry:isNaN(ee=Number($.substring(ee,et)))?rm:(et+=1)+ee>$.length?ry:($=$.slice(et,et+ee),g.C=et+ee,$)}function rC(g){g.Y=Date.now()+g.P,r_(g,g.P)}function r_(g,$){if(null!=g.B)throw Error("WatchDog timer not null");g.B=t7(eA(g.lb,g),$)}function rI(g){g.B&&(eS.clearTimeout(g.B),g.B=null)}function rO(g){0==g.l.H||g.J||nJ(g.l,g)}function rA(g){rI(g);var $=g.M;$&&"function"==typeof $.sa&&$.sa(),g.M=null,tV(g.V),tH(g.U),g.g&&($=g.g,g.g=null,$.abort(),$.sa())}function rN(g,$){try{var ee=g.l;if(0!=ee.H&&(ee.g==g||r8(ee.i,g))){if(!g.K&&r8(ee.i,g)&&3==ee.H){try{var et=ee.Ja.g.parse($)}catch(g){et=null}if(Array.isArray(et)&&3==et.length){var er=et;if(0==er[0]){e:if(!ee.u){if(ee.g){if(ee.g.G+3e3<g.G)nY(ee),nj(ee);else break e}nW(ee),t9(18)}}else ee.Fa=er[1],0<ee.Fa-ee.V&&37500>er[2]&&ee.G&&0==ee.A&&!ee.v&&(ee.v=t7(eA(ee.ib,ee),6e3));if(1>=r9(ee.i)&&ee.oa){try{ee.oa()}catch(g){}ee.oa=void 0}}else nZ(ee,11)}else if((g.K||ee.g==g)&&nY(ee),!eB($))for(er=ee.Ja.g.parse($),$=0;$<er.length;$++){let eu=er[$];if(ee.V=eu[0],eu=eu[1],2==ee.H){if("c"==eu[0]){ee.K=eu[1],ee.pa=eu[2];let $=eu[3];null!=$&&(ee.ra=$,ee.l.info("VER="+ee.ra));let er=eu[4];null!=er&&(ee.Ga=er,ee.l.info("SVER="+ee.Ga));let eh=eu[5];null!=eh&&"number"==typeof eh&&0<eh&&(et=1.5*eh,ee.L=et,ee.l.info("backChannelRequestTimeoutMs_="+et)),et=ee;let ep=g.g;if(ep){let g=ep.g?ep.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var en=et.i;en.g||-1==g.indexOf("spdy")&&-1==g.indexOf("quic")&&-1==g.indexOf("h2")||(en.j=en.l,en.g=new Set,en.h&&(r7(en,en.h),en.h=null))}if(et.F){let g=ep.g?ep.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(et.Da=g,rU(et.I,et.F,g))}}ee.H=3,ee.h&&ee.h.Ba(),ee.ca&&(ee.S=Date.now()-g.G,ee.l.info("Handshake RTT: "+ee.S+"ms")),et=ee;var ei=g;if(et.wa=n3(et,et.J?et.pa:null,et.Y),ei.K){ne(et.i,ei);var es=ei,eo=et.L;eo&&es.setTimeout(eo),es.B&&(rI(es),rC(es)),et.g=ei}else nK(et);0<ee.j.length&&nV(ee)}else"stop"!=eu[0]&&"close"!=eu[0]||nZ(ee,7)}else 3==ee.H&&("stop"==eu[0]||"close"==eu[0]?"stop"==eu[0]?nZ(ee,7):nB(ee):"noop"!=eu[0]&&ee.h&&ee.h.Aa(eu),ee.A=0)}}t6(4)}catch(g){}}function rR(g){if(g.Z&&"function"==typeof g.Z)return g.Z();if("undefined"!=typeof Map&&g instanceof Map||"undefined"!=typeof Set&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(eT(g)){for(var $=[],ee=g.length,et=0;et<ee;et++)$.push(g[et]);return $}for(et in $=[],ee=0,g)$[ee++]=g[et];return $}function rD(g){if(g.ta&&"function"==typeof g.ta)return g.ta();if(!g.Z||"function"!=typeof g.Z){if("undefined"!=typeof Map&&g instanceof Map)return Array.from(g.keys());if(!("undefined"!=typeof Set&&g instanceof Set)){if(eT(g)||"string"==typeof g){var $=[];g=g.length;for(var ee=0;ee<g;ee++)$.push(ee);return $}for(let et in $=[],ee=0,g)$[ee++]=et;return $}}}function rk(g,$){if(g.forEach&&"function"==typeof g.forEach)g.forEach($,void 0);else if(eT(g)||"string"==typeof g)Array.prototype.forEach.call(g,$,void 0);else for(var ee=rD(g),et=rR(g),er=et.length,en=0;en<er;en++)$.call(void 0,et[en],ee&&ee[en],g)}(es=rp.prototype).setTimeout=function(g){this.P=g},es.nb=function(g){g=g.target;let $=this.M;$&&3==nD(g)?$.l():this.Pa(g)},es.Pa=function(g){try{if(g==this.g)e:{let eh=nD(this.g);var $=this.g.Ia();let ep=this.g.da();if(!(3>eh)&&(3!=eh||eK||this.g&&(this.h.h||this.g.ja()||nk(this.g)))){this.J||4!=eh||7==$||(8==$||0>=ep?t6(3):t6(2)),rI(this);var ee=this.g.da();this.ca=ee;t:if(rT(this)){var et=nk(this.g);g="";var er=et.length,en=4==nD(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){rA(this),rO(this);var ei="";break t}this.h.i=new eS.TextDecoder}for($=0;$<er;$++)this.h.h=!0,g+=this.h.i.decode(et[$],{stream:en&&$==er-1});et.splice(0,er),this.h.g+=g,this.C=0,ei=this.h.g}else ei=this.g.ja();if(this.i=200==ee,tJ(this.j,this.u,this.A,this.m,this.W,eh,ee),this.i){if(this.aa&&!this.K){t:{if(this.g){var es,eo=this.g;if((es=eo.g?eo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eB(es)){var eu=es;break t}}eu=null}if(ee=eu)tX(this.j,this.m,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rN(this,ee);else{this.i=!1,this.o=3,t9(12),rA(this),rO(this);break e}}this.S?(rE(this,eh,ei),eK&&this.i&&3==eh&&(tW(this.U,this.V,"tick",this.mb),this.V.start())):(tX(this.j,this.m,ei,null),rN(this,ei)),4==eh&&rA(this),this.i&&!this.J&&(4==eh?nJ(this.l,this):(this.i=!1,rC(this)))}else nx(this.g),400==ee&&0<ei.indexOf("Unknown SID")?(this.o=3,t9(12)):(this.o=0,t9(13)),rA(this),rO(this)}}}catch(g){}finally{}},es.mb=function(){if(this.g){var g=nD(this.g),$=this.g.ja();this.C<$.length&&(rI(this),rE(this,g,$),this.i&&4!=g&&rC(this))}},es.cancel=function(){this.J=!0,rA(this)},es.lb=function(){this.B=null;let g=Date.now();0<=g-this.Y?(tZ(this.j,this.A),2!=this.L&&(t6(),t9(17)),rA(this),this.o=2,rO(this)):r_(this,this.Y-g)};var rx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rP(g,$){if(g){g=g.split("&");for(var ee=0;ee<g.length;ee++){var et=g[ee].indexOf("="),er=null;if(0<=et){var en=g[ee].substring(0,et);er=g[ee].substring(et+1)}else en=g[ee];$(en,er?decodeURIComponent(er.replace(/\+/g," ")):"")}}}function rM(g){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,g instanceof rM){this.h=g.h,rF(this,g.j),this.s=g.s,this.g=g.g,rB(this,g.m),this.l=g.l;var $=g.i,ee=new rY;ee.i=$.i,$.g&&(ee.g=new Map($.g),ee.h=$.h),rj(this,ee),this.o=g.o}else g&&($=String(g).match(rx))?(this.h=!1,rF(this,$[1]||"",!0),this.s=rq($[2]||""),this.g=rq($[3]||"",!0),rB(this,$[4]),this.l=rq($[5]||"",!0),rj(this,$[6]||"",!0),this.o=rq($[7]||"")):(this.h=!1,this.i=new rY(null,this.h))}function rL(g){return new rM(g)}function rF(g,$,ee){g.j=ee?rq($,!0):$,g.j&&(g.j=g.j.replace(/:$/,""))}function rB(g,$){if($){if(isNaN($=Number($))||0>$)throw Error("Bad port number "+$);g.m=$}else g.m=null}function rj(g,$,ee){$ instanceof rY?(g.i=$,r2(g.i,g.h)):(ee||($=rz($,rH)),g.i=new rY($,g.h))}function rU(g,$,ee){g.i.set($,ee)}function rV(g){return rU(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function rq(g,$){return g?$?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function rz(g,$,ee){return"string"==typeof g?(g=encodeURI(g).replace($,rG),ee&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function rG(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}rM.prototype.toString=function(){var g=[],$=this.j;$&&g.push(rz($,r$,!0),":");var ee=this.g;return(ee||"file"==$)&&(g.push("//"),($=this.s)&&g.push(rz($,r$,!0),"@"),g.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.m)&&g.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&g.push("/"),g.push(rz(ee,"/"==ee.charAt(0)?rW:rK,!0))),(ee=this.i.toString())&&g.push("?",ee),(ee=this.o)&&g.push("#",rz(ee,rQ)),g.join("")};var r$=/[#\/\?@]/g,rK=/[#\?:]/g,rW=/[#\?]/g,rH=/[#\?@]/g,rQ=/#/g;function rY(g,$){this.h=this.g=null,this.i=g||null,this.j=!!$}function rJ(g){g.g||(g.g=new Map,g.h=0,g.i&&rP(g.i,function($,ee){g.add(decodeURIComponent($.replace(/\+/g," ")),ee)}))}function rX(g,$){rJ(g),$=r1(g,$),g.g.has($)&&(g.i=null,g.h-=g.g.get($).length,g.g.delete($))}function rZ(g,$){return rJ(g),$=r1(g,$),g.g.has($)}function r0(g,$,ee){rX(g,$),0<ee.length&&(g.i=null,g.g.set(r1(g,$),eP(ee)),g.h+=ee.length)}function r1(g,$){return $=String($),g.j&&($=$.toLowerCase()),$}function r2(g,$){$&&!g.j&&(rJ(g),g.i=null,g.g.forEach(function(g,$){var ee=$.toLowerCase();$!=ee&&(rX(this,$),r0(this,ee,g))},g)),g.j=$}(es=rY.prototype).add=function(g,$){rJ(this),this.i=null,g=r1(this,g);var ee=this.g.get(g);return ee||this.g.set(g,ee=[]),ee.push($),this.h+=1,this},es.forEach=function(g,$){rJ(this),this.g.forEach(function(ee,et){ee.forEach(function(ee){g.call($,ee,et,this)},this)},this)},es.ta=function(){rJ(this);let g=Array.from(this.g.values()),$=Array.from(this.g.keys()),ee=[];for(let et=0;et<$.length;et++){let er=g[et];for(let g=0;g<er.length;g++)ee.push($[et])}return ee},es.Z=function(g){rJ(this);let $=[];if("string"==typeof g)rZ(this,g)&&($=$.concat(this.g.get(r1(this,g))));else{g=Array.from(this.g.values());for(let ee=0;ee<g.length;ee++)$=$.concat(g[ee])}return $},es.set=function(g,$){return rJ(this),this.i=null,rZ(this,g=r1(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[$]),this.h+=1,this},es.get=function(g,$){return g&&0<(g=this.Z(g)).length?String(g[0]):$},es.toString=function(){if(this.i)return this.i;if(!this.g)return"";let g=[],$=Array.from(this.g.keys());for(var ee=0;ee<$.length;ee++){var et=$[ee];let en=encodeURIComponent(String(et)),ei=this.Z(et);for(et=0;et<ei.length;et++){var er=en;""!==ei[et]&&(er+="="+encodeURIComponent(String(ei[et]))),g.push(er)}}return this.i=g.join("&")};var r3=class{constructor(g,$){this.g=g,this.map=$}};function r4(g){this.l=g||r6,g=eS.PerformanceNavigationTiming?0<(g=eS.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(eS.g&&eS.g.Ka&&eS.g.Ka()&&eS.g.Ka().ec),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var r6=10;function r5(g){return!!g.h||!!g.g&&g.g.size>=g.j}function r9(g){return g.h?1:g.g?g.g.size:0}function r8(g,$){return g.h?g.h==$:!!g.g&&g.g.has($)}function r7(g,$){g.g?g.g.add($):g.h=$}function ne(g,$){g.h&&g.h==$?g.h=null:g.g&&g.g.has($)&&g.g.delete($)}function nt(g){if(null!=g.h)return g.i.concat(g.h.F);if(null!=g.g&&0!==g.g.size){let $=g.i;for(let ee of g.g.values())$=$.concat(ee.F);return $}return eP(g.i)}r4.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let g of this.g.values())g.cancel();this.g.clear()}};var nn=class{stringify(g){return eS.JSON.stringify(g,void 0)}parse(g){return eS.JSON.parse(g,void 0)}};function ni(){this.g=new nn}function no(g,$,ee){let et=ee||"";try{rk(g,function(g,ee){let er=g;eE(g)&&(er=tI(g)),$.push(et+ee+"="+encodeURIComponent(er))})}catch(g){throw $.push(et+"type="+encodeURIComponent("_badmap")),g}}function nu(g,$){let ee=new tQ;if(eS.Image){let et=new Image;et.onload=eN(nh,ee,et,"TestLoadImage: loaded",!0,$),et.onerror=eN(nh,ee,et,"TestLoadImage: error",!1,$),et.onabort=eN(nh,ee,et,"TestLoadImage: abort",!1,$),et.ontimeout=eN(nh,ee,et,"TestLoadImage: timeout",!1,$),eS.setTimeout(function(){et.ontimeout&&et.ontimeout()},1e4),et.src=g}else $(!1)}function nh(g,$,ee,et,er){try{$.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null,er(et)}catch(g){}}function np(g){this.l=g.fc||null,this.j=g.ob||!1}function nf(g,$){tw.call(this),this.F=g,this.u=$,this.m=void 0,this.readyState=ng,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}eR(np,rn),np.prototype.g=function(){return new nf(this.l,this.j)},np.prototype.i=function(g){return function(){return g}}({}),eR(nf,tw);var ng=0;function nm(g){g.j.read().then(g.Xa.bind(g)).catch(g.ka.bind(g))}function ny(g){g.readyState=4,g.l=null,g.j=null,g.A=null,nv(g)}function nv(g){g.onreadystatechange&&g.onreadystatechange.call(g)}(es=nf.prototype).open=function(g,$){if(this.readyState!=ng)throw this.abort(),Error("Error reopening a connection");this.C=g,this.B=$,this.readyState=1,nv(this)},es.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let $={headers:this.v,method:this.C,credentials:this.m,cache:void 0};g&&($.body=g),(this.F||eS).fetch(new Request(this.B,$)).then(this.$a.bind(this),this.ka.bind(this))},es.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ny(this)),this.readyState=ng},es.$a=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,nv(this)),this.g&&(this.readyState=3,nv(this),this.g))){if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==eS.ReadableStream&&"body"in g){if(this.j=g.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nm(this)}else g.text().then(this.Za.bind(this),this.ka.bind(this))}},es.Xa=function(g){if(this.g){if(this.u&&g.value)this.response.push(g.value);else if(!this.u){var $=g.value?g.value:new Uint8Array(0);($=this.A.decode($,{stream:!g.done}))&&(this.response=this.responseText+=$)}g.done?ny(this):nv(this),3==this.readyState&&nm(this)}},es.Za=function(g){this.g&&(this.response=this.responseText=g,ny(this))},es.Ya=function(g){this.g&&(this.response=g,ny(this))},es.ka=function(){this.g&&ny(this)},es.setRequestHeader=function(g,$){this.v.append(g,$)},es.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},es.getAllResponseHeaders=function(){if(!this.h)return"";let g=[],$=this.h.entries();for(var ee=$.next();!ee.done;)g.push((ee=ee.value)[0]+": "+ee[1]),ee=$.next();return g.join("\r\n")},Object.defineProperty(nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}});var nS=eS.JSON.parse;function nT(g){tw.call(this),this.headers=new Map,this.u=g||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nE,this.L=this.M=!1}eR(nT,tw);var nE="",nw=/^https?$/i,nC=["POST","PUT"];function n_(g){return eG&&"number"==typeof g.timeout&&void 0!==g.ontimeout}function nI(g,$){g.h=!1,g.g&&(g.l=!0,g.g.abort(),g.l=!1),g.j=$,g.m=5,nO(g),nN(g)}function nO(g){g.F||(g.F=!0,tC(g,"complete"),tC(g,"error"))}function nA(g){if(g.h&&void 0!==ev&&(!g.C[1]||4!=nD(g)||2!=g.da())){if(g.v&&4==nD(g))tq(g.La,0,g);else if(tC(g,"readystatechange"),4==nD(g)){g.h=!1;try{let ei=g.da();switch(ei){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $,ee,et=!0;break;default:et=!1}if(!($=et)){if(ee=0===ei){var er=String(g.I).match(rx)[1]||null;!er&&eS.self&&eS.self.location&&(er=eS.self.location.protocol.slice(0,-1)),ee=!nw.test(er?er.toLowerCase():"")}$=ee}if($)tC(g,"complete"),tC(g,"success");else{g.m=6;try{var en=2<nD(g)?g.g.statusText:""}catch(g){en=""}g.j=en+" ["+g.da()+"]",nO(g)}}finally{nN(g)}}}}function nN(g,$){if(g.g){nR(g);let ee=g.g,et=g.C[0]?()=>{}:null;g.g=null,g.C=null,$||tC(g,"ready");try{ee.onreadystatechange=et}catch(g){}}}function nR(g){g.g&&g.L&&(g.g.ontimeout=null),g.A&&(eS.clearTimeout(g.A),g.A=null)}function nD(g){return g.g?g.g.readyState:0}function nk(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.K){case nE:case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch(g){return null}}function nx(g){let $={};g=(g.g&&2<=nD(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let et=0;et<g.length;et++){if(eB(g[et]))continue;var ee=tk(g[et]);let er=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();let en=$[er]||[];$[er]=en,en.push(ee)}e9($,function(g){return g.join(", ")})}function nP(g){let $="";return e5(g,function(g,ee){$+=ee+":"+g+"\r\n"}),$}function nM(g,$,ee){e:{for(et in ee){var et=!1;break e}et=!0}et||(ee=nP(ee),"string"==typeof g?null!=ee&&encodeURIComponent(String(ee)):rU(g,$,ee))}function nL(g,$,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[g]||$}function nF(g){this.Ga=0,this.j=[],this.l=new tQ,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=nL("failFast",!1,g),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=nL("baseRetryDelayMs",5e3,g),this.hb=nL("retryDelaySeedMs",1e4,g),this.eb=nL("forwardChannelMaxRetries",2,g),this.xa=nL("forwardChannelRequestTimeoutMs",2e4,g),this.va=g&&g.xmlHttpFactory||void 0,this.Ha=g&&g.dc||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.i=new r4(g&&g.concurrentRequestLimit),this.Ja=new ni,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=g&&g.bc||!1,g&&g.Ea&&this.l.Ea(),g&&g.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&g&&g.detectBufferingProxy||!1,this.qa=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.qa=g.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function nB(g){if(nU(g),3==g.H){var $=g.W++,ee=rL(g.I);if(rU(ee,"SID",g.K),rU(ee,"RID",$),rU(ee,"TYPE","terminate"),nG(g,ee),($=new rp(g,g.l,$)).L=2,$.v=rV(rL(ee)),ee=!1,eS.navigator&&eS.navigator.sendBeacon)try{ee=eS.navigator.sendBeacon($.v.toString(),"")}catch(g){}!ee&&eS.Image&&((new Image).src=$.v,ee=!0),ee||($.g=n4($.l,null),$.g.ha($.v)),$.G=Date.now(),rC($)}n0(g)}function nj(g){g.g&&(nH(g),g.g.cancel(),g.g=null)}function nU(g){nj(g),g.u&&(eS.clearTimeout(g.u),g.u=null),nY(g),g.i.cancel(),g.m&&("number"==typeof g.m&&eS.clearTimeout(g.m),g.m=null)}function nV(g){if(!r5(g.i)&&!g.m){g.m=!0;var $=g.Na;tM||tB(),tL||(tM(),tL=!0),tF.add($,g),g.C=0}}function nq(g,$){return!(r9(g.i)>=g.i.j-(g.m?1:0))&&(g.m?(g.j=$.F.concat(g.j),!0):1!=g.H&&2!=g.H&&!(g.C>=(g.cb?0:g.eb))&&(g.m=t7(eA(g.Na,g,$),nX(g,g.C)),g.C++,!0))}function nz(g,$){var ee;ee=$?$.m:g.W++;let et=rL(g.I);rU(et,"SID",g.K),rU(et,"RID",ee),rU(et,"AID",g.V),nG(g,et),g.o&&g.s&&nM(et,g.o,g.s),ee=new rp(g,g.l,ee,g.C+1),null===g.o&&(ee.I=g.s),$&&(g.j=$.F.concat(g.j)),$=n$(g,ee,1e3),ee.setTimeout(Math.round(.5*g.xa)+Math.round(.5*g.xa*Math.random())),r7(g.i,ee),rv(ee,et,$)}function nG(g,$){g.na&&e5(g.na,function(g,ee){rU($,ee,g)}),g.h&&rk({},function(g,ee){rU($,ee,g)})}function n$(g,$,ee){ee=Math.min(g.j.length,ee);var et=g.h?eA(g.h.Va,g.h,g):null;e:{var er=g.j;let $=-1;for(;;){let g=["count="+ee];-1==$?0<ee?($=er[0].g,g.push("ofs="+$)):$=0:g.push("ofs="+$);let en=!0;for(let ei=0;ei<ee;ei++){let ee=er[ei].g,es=er[ei].map;if(0>(ee-=$))$=Math.max(0,er[ei].g-100),en=!1;else try{no(es,g,"req"+ee+"_")}catch(g){et&&et(es)}}if(en){et=g.join("&");break e}}}return g=g.j.splice(0,ee),$.F=g,et}function nK(g){if(!g.g&&!g.u){g.ba=1;var $=g.Ma;tM||tB(),tL||(tM(),tL=!0),tF.add($,g),g.A=0}}function nW(g){return!g.g&&!g.u&&!(3<=g.A)&&(g.ba++,g.u=t7(eA(g.Ma,g),nX(g,g.A)),g.A++,!0)}function nH(g){null!=g.B&&(eS.clearTimeout(g.B),g.B=null)}function nQ(g){g.g=new rp(g,g.l,"rpc",g.ba),null===g.o&&(g.g.I=g.s),g.g.O=0;var $=rL(g.wa);rU($,"RID","rpc"),rU($,"SID",g.K),rU($,"AID",g.V),rU($,"CI",g.G?"0":"1"),!g.G&&g.qa&&rU($,"TO",g.qa),rU($,"TYPE","xmlhttp"),nG(g,$),g.o&&g.s&&nM($,g.o,g.s),g.L&&g.g.setTimeout(g.L);var ee=g.g;g=g.pa,ee.L=1,ee.v=rV(rL($)),ee.s=null,ee.S=!0,rS(ee,g)}function nY(g){null!=g.v&&(eS.clearTimeout(g.v),g.v=null)}function nJ(g,$){var ee=null;if(g.g==$){nY(g),nH(g),g.g=null;var et=2}else{if(!r8(g.i,$))return;ee=$.F,ne(g.i,$),et=1}if(0!=g.H){if($.i){if(1==et){ee=$.s?$.s.length:0,$=Date.now()-$.G;var er=g.C;tC(et=t3(),new t8(et,ee)),nV(g)}else nK(g)}else if(3==(er=$.o)||0==er&&0<$.ca||!(1==et&&nq(g,$)||2==et&&nW(g)))switch(ee&&0<ee.length&&(($=g.i).i=$.i.concat(ee)),er){case 1:nZ(g,5);break;case 4:nZ(g,10);break;case 3:nZ(g,6);break;default:nZ(g,2)}}}function nX(g,$){let ee=g.ab+Math.floor(Math.random()*g.hb);return g.isActive()||(ee*=2),ee*$}function nZ(g,$){if(g.l.info("Error code "+$),2==$){var ee=null;g.h&&(ee=null);var et=eA(g.pb,g);ee||(ee=new rM("//www.google.com/images/cleardot.gif"),eS.location&&"http"==eS.location.protocol||rF(ee,"https"),rV(ee)),nu(ee.toString(),et)}else t9(2);g.H=0,g.h&&g.h.za($),n0(g),nU(g)}function n0(g){if(g.H=0,g.ma=[],g.h){let $=nt(g.i);(0!=$.length||0!=g.j.length)&&(eM(g.ma,$),eM(g.ma,g.j),g.i.i.length=0,eP(g.j),g.j.length=0),g.h.ya()}}function n3(g,$,ee){var et=ee instanceof rM?rL(ee):new rM(ee);if(""!=et.g)$&&(et.g=$+"."+et.g),rB(et,et.m);else{var er=eS.location;et=er.protocol,$=$?$+"."+er.hostname:er.hostname,er=+er.port;var en=new rM(null);et&&rF(en,et),$&&(en.g=$),er&&rB(en,er),ee&&(en.l=ee),et=en}return ee=g.F,$=g.Da,ee&&$&&rU(et,ee,$),rU(et,"VER",g.ra),nG(g,et),et}function n4(g,$,ee){if($&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return($=new nT(ee&&g.Ha&&!g.va?new np({ob:!0}):g.va)).Oa(g.J),$}function n6(){}function n5(){if(eG&&!(10<=Number(eZ)))throw Error("Environmental error: no available transport.")}function n9(g,$){tw.call(this),this.g=new nF($),this.l=g,this.h=$&&$.messageUrlParams||null,g=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.s=g,g=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(g?g["X-WebChannel-Content-Type"]=$.messageContentType:g={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.Ca&&(g?g["X-WebChannel-Client-Profile"]=$.Ca:g={"X-WebChannel-Client-Profile":$.Ca}),this.g.U=g,(g=$&&$.cc)&&!eB(g)&&(this.g.o=g),this.A=$&&$.supportsCrossDomainXhr||!1,this.v=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!eB($)&&(this.g.F=$,null!==(g=this.h)&&$ in g&&$ in(g=this.h)&&delete g[$]),this.j=new ie(this)}function n8(g){rl.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var $=g.__sm__;if($){e:{for(let ee in $){g=ee;break e}g=void 0}(this.i=g)&&(g=this.i,$=null!==$&&g in $?$[g]:void 0),this.data=$}else this.data=g}function n7(){ru.call(this),this.status=1}function ie(g){this.g=g}function ir(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ii(g,$,ee){ee||(ee=0);var et=Array(16);if("string"==typeof $)for(var er=0;16>er;++er)et[er]=$.charCodeAt(ee++)|$.charCodeAt(ee++)<<8|$.charCodeAt(ee++)<<16|$.charCodeAt(ee++)<<24;else for(er=0;16>er;++er)et[er]=$[ee++]|$[ee++]<<8|$[ee++]<<16|$[ee++]<<24;$=g.g[0],ee=g.g[1],er=g.g[2];var en=g.g[3],ei=$+(en^ee&(er^en))+et[0]+3614090360&4294967295;ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[1]+3905402710&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[2]+606105819&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[3]+3250441966&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[4]+4118548399&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[5]+1200080426&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[6]+2821735955&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[7]+4249261313&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[8]+1770035416&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[9]+2336552879&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[10]+4294925233&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[11]+2304563134&4294967295,ei=$+(en^(ee=er+(ei<<22&4294967295|ei>>>10))&(er^en))+et[12]+1804603682&4294967295,ei=en+(er^($=ee+(ei<<7&4294967295|ei>>>25))&(ee^er))+et[13]+4254626195&4294967295,ei=er+(ee^(en=$+(ei<<12&4294967295|ei>>>20))&($^ee))+et[14]+2792965006&4294967295,ei=ee+($^(er=en+(ei<<17&4294967295|ei>>>15))&(en^$))+et[15]+1236535329&4294967295,ee=er+(ei<<22&4294967295|ei>>>10),ei=$+(er^en&(ee^er))+et[1]+4129170786&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[6]+3225465664&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[11]+643717713&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[0]+3921069994&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[5]+3593408605&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[10]+38016083&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[15]+3634488961&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[4]+3889429448&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[9]+568446438&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[14]+3275163606&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[3]+4107603335&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[8]+1163531501&4294967295,ee=er+(ei<<20&4294967295|ei>>>12),ei=$+(er^en&(ee^er))+et[13]+2850285829&4294967295,$=ee+(ei<<5&4294967295|ei>>>27),ei=en+(ee^er&($^ee))+et[2]+4243563512&4294967295,en=$+(ei<<9&4294967295|ei>>>23),ei=er+($^ee&(en^$))+et[7]+1735328473&4294967295,er=en+(ei<<14&4294967295|ei>>>18),ei=ee+(en^$&(er^en))+et[12]+2368359562&4294967295,ei=$+((ee=er+(ei<<20&4294967295|ei>>>12))^er^en)+et[5]+4294588738&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[8]+2272392833&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[11]+1839030562&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[14]+4259657740&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[1]+2763975236&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[4]+1272893353&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[7]+4139469664&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[10]+3200236656&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[13]+681279174&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[0]+3936430074&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[3]+3572445317&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[6]+76029189&4294967295,ei=$+((ee=er+(ei<<23&4294967295|ei>>>9))^er^en)+et[9]+3654602809&4294967295,ei=en+(($=ee+(ei<<4&4294967295|ei>>>28))^ee^er)+et[12]+3873151461&4294967295,ei=er+((en=$+(ei<<11&4294967295|ei>>>21))^$^ee)+et[15]+530742520&4294967295,ei=ee+((er=en+(ei<<16&4294967295|ei>>>16))^en^$)+et[2]+3299628645&4294967295,ee=er+(ei<<23&4294967295|ei>>>9),ei=$+(er^(ee|~en))+et[0]+4096336452&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[7]+1126891415&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[14]+2878612391&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[5]+4237533241&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[12]+1700485571&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[3]+2399980690&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[10]+4293915773&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[1]+2240044497&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[8]+1873313359&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[15]+4264355552&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[6]+2734768916&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[13]+1309151649&4294967295,ee=er+(ei<<21&4294967295|ei>>>11),ei=$+(er^(ee|~en))+et[4]+4149444226&4294967295,$=ee+(ei<<6&4294967295|ei>>>26),ei=en+(ee^($|~er))+et[11]+3174756917&4294967295,en=$+(ei<<10&4294967295|ei>>>22),ei=er+($^(en|~ee))+et[2]+718787259&4294967295,er=en+(ei<<15&4294967295|ei>>>17),ei=ee+(en^(er|~$))+et[9]+3951481745&4294967295,g.g[0]=g.g[0]+$&4294967295,g.g[1]=g.g[1]+(er+(ei<<21&4294967295|ei>>>11))&4294967295,g.g[2]=g.g[2]+er&4294967295,g.g[3]=g.g[3]+en&4294967295}function is(g,$){this.h=$;for(var ee=[],et=!0,er=g.length-1;0<=er;er--){var en=0|g[er];et&&en==$||(ee[er]=en,et=!1)}this.g=ee}(es=nT.prototype).Oa=function(g){this.M=g},es.ha=function(g,$,ee,et){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+g);$=$?$.toUpperCase():"GET",this.I=g,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():en.g(),this.C=this.u?ri(this.u):ri(en),this.g.onreadystatechange=eA(this.La,this);try{this.G=!0,this.g.open($,String(g),!0),this.G=!1}catch(g){nI(this,g);return}if(g=ee||"",ee=new Map(this.headers),et){if(Object.getPrototypeOf(et)===Object.prototype)for(var er in et)ee.set(er,et[er]);else if("function"==typeof et.keys&&"function"==typeof et.get)for(let g of et.keys())ee.set(g,et.get(g));else throw Error("Unknown input type for opt_headers: "+String(et))}for(let[en,ei]of(et=Array.from(ee.keys()).find(g=>"content-type"==g.toLowerCase()),er=eS.FormData&&g instanceof eS.FormData,!(0<=ex(nC,$))||et||er||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),ee))this.g.setRequestHeader(en,ei);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nR(this),0<this.B&&((this.L=n_(this.g))?(this.g.timeout=this.B,this.g.ontimeout=eA(this.ua,this)):this.A=tq(this.ua,this.B,this)),this.v=!0,this.g.send(g),this.v=!1}catch(g){nI(this,g)}},es.ua=function(){void 0!==ev&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tC(this,"timeout"),this.abort(8))},es.abort=function(g){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=g||7,tC(this,"complete"),tC(this,"abort"),nN(this))},es.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nN(this,!0)),nT.$.N.call(this)},es.La=function(){this.s||(this.G||this.v||this.l?nA(this):this.kb())},es.kb=function(){nA(this)},es.isActive=function(){return!!this.g},es.da=function(){try{return 2<nD(this)?this.g.status:-1}catch(g){return -1}},es.ja=function(){try{return this.g?this.g.responseText:""}catch(g){return""}},es.Wa=function(g){if(this.g){var $=this.g.responseText;return g&&0==$.indexOf(g)&&($=$.substring(g.length)),nS($)}},es.Ia=function(){return this.m},es.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(es=nF.prototype).ra=8,es.H=1,es.Na=function(g){if(this.m){if(this.m=null,1==this.H){if(!g){this.W=Math.floor(1e5*Math.random()),g=this.W++;let er=new rp(this,this.l,g),en=this.s;if(this.U&&(en?te(en=e8(en),this.U):en=this.U),null!==this.o||this.O||(er.I=en,en=null),this.P)e:{for(var $=0,ee=0;ee<this.j.length;ee++){t:{var et=this.j[ee];if("__data__"in et.map&&"string"==typeof(et=et.map.__data__)){et=et.length;break t}et=void 0}if(void 0===et)break;if(4096<($+=et)){$=ee;break e}if(4096===$||ee===this.j.length-1){$=ee+1;break e}}$=1e3}else $=1e3;$=n$(this,er,$),rU(ee=rL(this.I),"RID",g),rU(ee,"CVER",22),this.F&&rU(ee,"X-HTTP-Session-Id",this.F),nG(this,ee),en&&(this.O?$="headers="+encodeURIComponent(String(nP(en)))+"&"+$:this.o&&nM(ee,this.o,en)),r7(this.i,er),this.bb&&rU(ee,"TYPE","init"),this.P?(rU(ee,"$req",$),rU(ee,"SID","null"),er.aa=!0,rv(er,ee,null)):rv(er,ee,$),this.H=2}}else 3==this.H&&(g?nz(this,g):0==this.j.length||r5(this.i)||nz(this))}},es.Ma=function(){if(this.u=null,nQ(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var g=2*this.S;this.l.info("BP detection timer enabled: "+g),this.B=t7(eA(this.jb,this),g)}},es.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,t9(10),nj(this),nQ(this))},es.ib=function(){null!=this.v&&(this.v=null,nj(this),nW(this),t9(19))},es.pb=function(g){g?(this.l.info("Successfully pinged google.com"),t9(2)):(this.l.info("Failed to ping google.com"),t9(1))},es.isActive=function(){return!!this.h&&this.h.isActive(this)},(es=n6.prototype).Ba=function(){},es.Aa=function(){},es.za=function(){},es.ya=function(){},es.isActive=function(){return!0},es.Va=function(){},n5.prototype.g=function(g,$){return new n9(g,$)},eR(n9,tw),n9.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var g=this.g,$=this.l,ee=this.h||void 0;t9(0),g.Y=$,g.na=ee||{},g.G=g.aa,g.I=n3(g,null,g.Y),nV(g)},n9.prototype.close=function(){nB(this.g)},n9.prototype.u=function(g){var $=this.g;if("string"==typeof g){var ee={};ee.__data__=g,g=ee}else this.v&&((ee={}).__data__=tI(g),g=ee);$.j.push(new r3($.fb++,g)),3==$.H&&nV($)},n9.prototype.N=function(){this.g.h=null,delete this.j,nB(this.g),delete this.g,n9.$.N.call(this)},eR(n8,rl),eR(n7,ru),eR(ie,n6),ie.prototype.Ba=function(){tC(this.g,"a")},ie.prototype.Aa=function(g){tC(this.g,new n8(g))},ie.prototype.za=function(g){tC(this.g,new n7)},ie.prototype.ya=function(){tC(this.g,"b")},eR(ir,function(){this.blockSize=-1}),ir.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ir.prototype.j=function(g,$){void 0===$&&($=g.length);for(var ee=$-this.blockSize,et=this.m,er=this.h,en=0;en<$;){if(0==er)for(;en<=ee;)ii(this,g,en),en+=this.blockSize;if("string"==typeof g){for(;en<$;)if(et[er++]=g.charCodeAt(en++),er==this.blockSize){ii(this,et),er=0;break}}else for(;en<$;)if(et[er++]=g[en++],er==this.blockSize){ii(this,et),er=0;break}}this.h=er,this.i+=$},ir.prototype.l=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var $=1;$<g.length-8;++$)g[$]=0;var ee=8*this.i;for($=g.length-8;$<g.length;++$)g[$]=255&ee,ee/=256;for(this.j(g),g=Array(16),$=ee=0;4>$;++$)for(var et=0;32>et;et+=8)g[ee++]=this.g[$]>>>et&255;return g};var io={};function il(g){return -128<=g&&128>g?eq(g,function(g){return new is([0|g],0>g?-1:0)}):new is([0|g],0>g?-1:0)}function iu(g){if(isNaN(g)||!isFinite(g))return ig;if(0>g)return iT(iu(-g));for(var $=[],ee=1,et=0;g>=ee;et++)$[et]=g/ee|0,ee*=ip;return new is($,0)}function ih(g,$){if(0==g.length)throw Error("number format error: empty string");if(2>($=$||10)||36<$)throw Error("radix out of range: "+$);if("-"==g.charAt(0))return iT(ih(g.substring(1),$));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var ee=iu(Math.pow($,8)),et=ig,er=0;er<g.length;er+=8){var en=Math.min(8,g.length-er),ei=parseInt(g.substring(er,er+en),$);8>en?(en=iu(Math.pow($,en)),et=et.R(en).add(iu(ei))):et=(et=et.R(ee)).add(iu(ei))}return et}var ip=4294967296,ig=il(0),im=il(1),iy=il(16777216);function iv(g){if(0!=g.h)return!1;for(var $=0;$<g.g.length;$++)if(0!=g.g[$])return!1;return!0}function iS(g){return -1==g.h}function iT(g){for(var $=g.g.length,ee=[],et=0;et<$;et++)ee[et]=~g.g[et];return new is(ee,~g.h).add(im)}function iE(g,$){return g.add(iT($))}function iw(g,$){for(;(65535&g[$])!=g[$];)g[$+1]+=g[$]>>>16,g[$]&=65535,$++}function iC(g,$){this.g=g,this.h=$}function i_(g,$){if(iv($))throw Error("division by zero");if(iv(g))return new iC(ig,ig);if(iS(g))return $=i_(iT(g),$),new iC(iT($.g),iT($.h));if(iS($))return $=i_(g,iT($)),new iC(iT($.g),$.h);if(30<g.g.length){if(iS(g)||iS($))throw Error("slowDivide_ only works with positive integers.");for(var ee=im,et=$;0>=et.X(g);)ee=iI(ee),et=iI(et);var er=iO(ee,1),en=iO(et,1);for(et=iO(et,2),ee=iO(ee,2);!iv(et);){var ei=en.add(et);0>=ei.X(g)&&(er=er.add(ee),en=ei),et=iO(et,1),ee=iO(ee,1)}return $=iE(g,er.R($)),new iC(er,$)}for(er=ig;0<=g.X($);){for(et=48>=(et=Math.ceil(Math.log(ee=Math.max(1,Math.floor(g.ea()/$.ea())))/Math.LN2))?1:Math.pow(2,et-48),ei=(en=iu(ee)).R($);iS(ei)||0<ei.X(g);)ee-=et,ei=(en=iu(ee)).R($);iv(en)&&(en=im),er=er.add(en),g=iE(g,ei)}return new iC(er,g)}function iI(g){for(var $=g.g.length+1,ee=[],et=0;et<$;et++)ee[et]=g.D(et)<<1|g.D(et-1)>>>31;return new is(ee,g.h)}function iO(g,$){var ee=$>>5;$%=32;for(var et=g.g.length-ee,er=[],en=0;en<et;en++)er[en]=0<$?g.D(en+ee)>>>$|g.D(en+ee+1)<<32-$:g.D(en+ee);return new is(er,g.h)}(es=is.prototype).ea=function(){if(iS(this))return-iT(this).ea();for(var g=0,$=1,ee=0;ee<this.g.length;ee++){var et=this.D(ee);g+=(0<=et?et:ip+et)*$,$*=ip}return g},es.toString=function(g){if(2>(g=g||10)||36<g)throw Error("radix out of range: "+g);if(iv(this))return"0";if(iS(this))return"-"+iT(this).toString(g);for(var $=iu(Math.pow(g,6)),ee=this,et="";;){var er=i_(ee,$).g,en=((0<(ee=iE(ee,er.R($))).g.length?ee.g[0]:ee.h)>>>0).toString(g);if(iv(ee=er))return en+et;for(;6>en.length;)en="0"+en;et=en+et}},es.D=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h},es.X=function(g){return iS(g=iE(this,g))?-1:iv(g)?0:1},es.abs=function(){return iS(this)?iT(this):this},es.add=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0,er=0;er<=$;er++){var en=et+(65535&this.D(er))+(65535&g.D(er)),ei=(en>>>16)+(this.D(er)>>>16)+(g.D(er)>>>16);et=ei>>>16,en&=65535,ei&=65535,ee[er]=ei<<16|en}return new is(ee,-2147483648&ee[ee.length-1]?-1:0)},es.R=function(g){if(iv(this)||iv(g))return ig;if(iS(this))return iS(g)?iT(this).R(iT(g)):iT(iT(this).R(g));if(iS(g))return iT(this.R(iT(g)));if(0>this.X(iy)&&0>g.X(iy))return iu(this.ea()*g.ea());for(var $=this.g.length+g.g.length,ee=[],et=0;et<2*$;et++)ee[et]=0;for(et=0;et<this.g.length;et++)for(var er=0;er<g.g.length;er++){var en=this.D(et)>>>16,ei=65535&this.D(et),es=g.D(er)>>>16,eo=65535&g.D(er);ee[2*et+2*er]+=ei*eo,iw(ee,2*et+2*er),ee[2*et+2*er+1]+=en*eo,iw(ee,2*et+2*er+1),ee[2*et+2*er+1]+=ei*es,iw(ee,2*et+2*er+1),ee[2*et+2*er+2]+=en*es,iw(ee,2*et+2*er+2)}for(et=0;et<$;et++)ee[et]=ee[2*et+1]<<16|ee[2*et];for(et=$;et<2*$;et++)ee[et]=0;return new is(ee,0)},es.gb=function(g){return i_(this,g).h},es.and=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)&g.D(et);return new is(ee,this.h&g.h)},es.or=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)|g.D(et);return new is(ee,this.h|g.h)},es.xor=function(g){for(var $=Math.max(this.g.length,g.g.length),ee=[],et=0;et<$;et++)ee[et]=this.D(et)^g.D(et);return new is(ee,this.h^g.h)},n5.prototype.createWebChannel=n5.prototype.g,n9.prototype.send=n9.prototype.u,n9.prototype.open=n9.prototype.m,n9.prototype.close=n9.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,rr.COMPLETE="complete",rs.EventType=ro,ro.OPEN="a",ro.CLOSE="b",ro.ERROR="c",ro.MESSAGE="d",tw.prototype.listen=tw.prototype.O,nT.prototype.listenOnce=nT.prototype.P,nT.prototype.getLastError=nT.prototype.Sa,nT.prototype.getLastErrorCode=nT.prototype.Ia,nT.prototype.getStatus=nT.prototype.da,nT.prototype.getResponseJson=nT.prototype.Wa,nT.prototype.getResponseText=nT.prototype.ja,nT.prototype.send=nT.prototype.ha,nT.prototype.setWithCredentials=nT.prototype.Oa,ir.prototype.digest=ir.prototype.l,ir.prototype.reset=ir.prototype.reset,ir.prototype.update=ir.prototype.j,is.prototype.add=is.prototype.add,is.prototype.multiply=is.prototype.R,is.prototype.modulo=is.prototype.gb,is.prototype.compare=is.prototype.X,is.prototype.toNumber=is.prototype.ea,is.prototype.toString=is.prototype.toString,is.prototype.getBits=is.prototype.D,is.fromNumber=iu,is.fromString=ih,ey.createWebChannelTransport=function(){return new n5},ey.getStatEventTarget=function(){return t3()},ey.ErrorCode=rt,ey.EventType=rr,ey.Event=t1,ey.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ey.FetchXmlHttpFactory=np,ey.WebChannel=rs,ey.XhrIo=nT;var iA=ey.Md5=ir,iN=ey.Integer=is,iR=ee(88388),iD=ee(64663);let ik="@firebase/firestore",ix="3.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(g){this.uid=g}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(g){return g.uid===this.uid}}iP.UNAUTHENTICATED=new iP(null),iP.GOOGLE_CREDENTIALS=new iP("google-credentials-uid"),iP.FIRST_PARTY=new iP("first-party-uid"),iP.MOCK_USER=new iP("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iM="9.23.0";function iL(g){iM=g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(g){return(0,ep.inspect)(g,{depth:100})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iB=new eh.Yd("@firebase/firestore");function ij(){return iB.logLevel}function iU(g,...$){if(iB.logLevel<=eh.in.DEBUG){let ee=$.map(iz);iB.debug(`Firestore (${iM}): ${g}`,...ee)}}function iV(g,...$){if(iB.logLevel<=eh.in.ERROR){let ee=$.map(iz);iB.error(`Firestore (${iM}): ${g}`,...ee)}}function iq(g,...$){if(iB.logLevel<=eh.in.WARN){let ee=$.map(iz);iB.warn(`Firestore (${iM}): ${g}`,...ee)}}function iz(g){if("string"==typeof g)return g;try{return iF(g)}catch($){return g}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iG(g="Unexpected state"){let $=`FIRESTORE (${iM}) INTERNAL ASSERTION FAILED: `+g;throw iV($),Error($)}function i$(g,$){g||iG()}function iK(g,$){return g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iW={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class iH extends ef.ZR{constructor(g,$){super(g,$),this.code=g,this.message=$,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(){this.promise=new Promise((g,$)=>{this.resolve=g,this.reject=$})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(g,$){this.user=$,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${g}`)}}class iJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(g,$){g.enqueueRetryable(()=>$(iP.UNAUTHENTICATED))}shutdown(){}}class iX{constructor(g){this.token=g,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(g,$){this.changeListener=$,g.enqueueRetryable(()=>$(this.token.user))}shutdown(){this.changeListener=null}}class iZ{constructor(g){this.authProvider=g,this.currentUser=iP.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(g,$){let ee=this.tokenCounter,et=g=>this.tokenCounter!==ee?(ee=this.tokenCounter,$(g)):Promise.resolve(),er=new iQ;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),er.resolve(),er=new iQ,g.enqueueRetryable(()=>et(this.currentUser))};let en=()=>{let $=er;g.enqueueRetryable(async()=>{await $.promise,await et(this.currentUser)})},ei=g=>{iU("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.auth.addAuthTokenListener(this.tokenListener),en()};this.authProvider.onInit(g=>ei(g)),setTimeout(()=>{if(!this.auth){let g=this.authProvider.getImmediate({optional:!0});g?ei(g):(iU("FirebaseAuthCredentialsProvider","Auth not yet detected"),er.resolve(),er=new iQ)}},0),en()}getToken(){let g=this.tokenCounter,$=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken($).then($=>this.tokenCounter!==g?(iU("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):$?(i$("string"==typeof $.accessToken),new iY($.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let g=this.auth&&this.auth.getUid();return i$(null===g||"string"==typeof g),new iP(g)}}class i0{constructor(g,$,ee){this.sessionIndex=g,this.iamToken=$,this.authTokenFactory=ee,this.type="FirstParty",this.user=iP.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let g=this.getAuthToken();return g&&this._headers.set("Authorization",g),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class i1{constructor(g,$,ee){this.sessionIndex=g,this.iamToken=$,this.authTokenFactory=ee}getToken(){return Promise.resolve(new i0(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(g,$){g.enqueueRetryable(()=>$(iP.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i2{constructor(g){this.value=g,this.type="AppCheck",this.headers=new Map,g&&g.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i3{constructor(g){this.appCheckProvider=g,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(g,$){let ee=g=>{null!=g.error&&iU("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);let ee=g.token!==this.latestAppCheckToken;return this.latestAppCheckToken=g.token,iU("FirebaseAppCheckTokenProvider",`Received ${ee?"new":"existing"} token.`),ee?$(g.token):Promise.resolve()};this.tokenListener=$=>{g.enqueueRetryable(()=>ee($))};let et=g=>{iU("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(g=>et(g)),setTimeout(()=>{if(!this.appCheck){let g=this.appCheckProvider.getImmediate({optional:!0});g?et(g):iU("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let g=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(g).then(g=>g?(i$("string"==typeof g.token),this.latestAppCheckToken=g.token,new i2(g.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}}function i4(g){if(!g)return new iJ;switch(g.type){case"firstParty":return new i1(g.sessionIndex||"0",g.iamToken||null,g.authTokenFactory||null);case"provider":return g.client;default:throw new iH(iW.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(g){return(0,eg.randomBytes)(g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{static newId(){let g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",$=Math.floor(256/g.length)*g.length,ee="",et=20;for(;ee.length<et;){let er=i6(40);for(let en=0;en<er.length;++en)ee.length<et&&er[en]<$&&(ee+=g.charAt(er[en]%g.length))}return ee}}function i9(g,$){return g<$?-1:g>$?1:0}function i8(g,$,ee){return g.length===$.length&&g.every((g,et)=>ee(g,$[et]))}function i7(g){return g+"\x00"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let se=-62135596800,st=1e6;class sr{constructor(g,$){if(this.seconds=g,this.nanoseconds=$,$<0||$>=1e9)throw new iH(iW.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+$);if(g<se||g>=253402300800)throw new iH(iW.INVALID_ARGUMENT,"Timestamp seconds out of range: "+g)}static now(){return sr.fromMillis(Date.now())}static fromDate(g){return sr.fromMillis(g.getTime())}static fromMillis(g){let $=Math.floor(g/1e3),ee=Math.floor((g-1e3*$)*st);return new sr($,ee)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/st}_compareTo(g){return this.seconds===g.seconds?i9(this.nanoseconds,g.nanoseconds):i9(this.seconds,g.seconds)}isEqual(g){return g.seconds===this.seconds&&g.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-se).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(g){this.timestamp=g}static fromTimestamp(g){return new sn(g)}static min(){return new sn(new sr(0,0))}static max(){return new sn(new sr(253402300799,1e9-1))}compareTo(g){return this.timestamp._compareTo(g.timestamp)}isEqual(g){return this.timestamp.isEqual(g.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si="__name__";class ss{constructor(g,$,ee){void 0===$?$=0:$>g.length&&iG(),void 0===ee?ee=g.length-$:ee>g.length-$&&iG(),this.segments=g,this.offset=$,this.len=ee}get length(){return this.len}isEqual(g){return 0===ss.comparator(this,g)}child(g){let $=this.segments.slice(this.offset,this.limit());return g instanceof ss?g.forEach(g=>{$.push(g)}):$.push(g),this.construct($)}limit(){return this.offset+this.length}popFirst(g){return g=void 0===g?1:g,this.construct(this.segments,this.offset+g,this.length-g)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(g){return this.segments[this.offset+g]}isEmpty(){return 0===this.length}isPrefixOf(g){if(g.length<this.length)return!1;for(let $=0;$<this.length;$++)if(this.get($)!==g.get($))return!1;return!0}isImmediateParentOf(g){if(this.length+1!==g.length)return!1;for(let $=0;$<this.length;$++)if(this.get($)!==g.get($))return!1;return!0}forEach(g){for(let $=this.offset,ee=this.limit();$<ee;$++)g(this.segments[$])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(g,$){let ee=Math.min(g.length,$.length);for(let et=0;et<ee;et++){let ee=g.get(et),er=$.get(et);if(ee<er)return -1;if(ee>er)return 1}return g.length<$.length?-1:g.length>$.length?1:0}}class so extends ss{construct(g,$,ee){return new so(g,$,ee)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...g){let $=[];for(let ee of g){if(ee.indexOf("//")>=0)throw new iH(iW.INVALID_ARGUMENT,`Invalid segment (${ee}). Paths must not contain // in them.`);$.push(...ee.split("/").filter(g=>g.length>0))}return new so($)}static emptyPath(){return new so([])}}let sl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class su extends ss{construct(g,$,ee){return new su(g,$,ee)}static isValidIdentifier(g){return sl.test(g)}canonicalString(){return this.toArray().map(g=>(g=g.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),su.isValidIdentifier(g)||(g="`"+g+"`"),g)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===si}static keyField(){return new su([si])}static fromServerFormat(g){let $=[],ee="",et=0,er=()=>{if(0===ee.length)throw new iH(iW.INVALID_ARGUMENT,`Invalid field path (${g}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);$.push(ee),ee=""},en=!1;for(;et<g.length;){let $=g[et];if("\\"===$){if(et+1===g.length)throw new iH(iW.INVALID_ARGUMENT,"Path has trailing escape character: "+g);let $=g[et+1];if(!("\\"===$||"."===$||"`"===$))throw new iH(iW.INVALID_ARGUMENT,"Path has invalid escape sequence: "+g);ee+=$,et+=2}else"`"===$?en=!en:"."!==$||en?ee+=$:er(),et++}if(er(),en)throw new iH(iW.INVALID_ARGUMENT,"Unterminated ` in path: "+g);return new su($)}static emptyPath(){return new su([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(g){this.path=g}static fromPath(g){return new sh(so.fromString(g))}static fromName(g){return new sh(so.fromString(g).popFirst(5))}static empty(){return new sh(so.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(g){return this.path.length>=2&&this.path.get(this.path.length-2)===g}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(g){return null!==g&&0===so.comparator(this.path,g.path)}toString(){return this.path.toString()}static comparator(g,$){return so.comparator(g.path,$.path)}static isDocumentKey(g){return g.length%2==0}static fromSegments(g){return new sh(new so(g.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp=-1,sf=0;class sg{constructor(g,$,ee,et){this.indexId=g,this.collectionGroup=$,this.fields=ee,this.indexState=et}}function sm(g){return g.fields.find(g=>2===g.kind)}function sy(g){return g.fields.filter(g=>2!==g.kind)}function sv(g){let $=sy(g);return 0===$.length?0:$[$.length-1].kind}function sS(g,$){let ee=i9(g.collectionGroup,$.collectionGroup);if(0!==ee)return ee;for(let et=0;et<Math.min(g.fields.length,$.fields.length);++et)if(0!==(ee=sw(g.fields[et],$.fields[et])))return ee;return i9(g.fields.length,$.fields.length)}function sT(g){return`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`}sg.UNKNOWN_ID=-1;class sE{constructor(g,$){this.fieldPath=g,this.kind=$}}function sw(g,$){let ee=su.comparator(g.fieldPath,$.fieldPath);return 0!==ee?ee:i9(g.kind,$.kind)}class sC{constructor(g,$){this.sequenceNumber=g,this.offset=$}static empty(){return new sC(sf,sO.min())}}function s_(g,$){let ee=g.toTimestamp().seconds,et=g.toTimestamp().nanoseconds+1;return new sO(sn.fromTimestamp(1e9===et?new sr(ee+1,0):new sr(ee,et)),sh.empty(),$)}function sI(g){return new sO(g.readTime,g.key,sp)}class sO{constructor(g,$,ee){this.readTime=g,this.documentKey=$,this.largestBatchId=ee}static min(){return new sO(sn.min(),sh.empty(),sp)}static max(){return new sO(sn.max(),sh.empty(),sp)}}function sA(g,$){let ee=g.readTime.compareTo($.readTime);return 0!==ee||0!==(ee=sh.comparator(g.documentKey,$.documentKey))?ee:i9(g.largestBatchId,$.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(g){this.onCommittedListeners.push(g)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(g=>g())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(g){if(g.code===iW.FAILED_PRECONDITION&&g.message===sN)iU("LocalStore","Unexpectedly lost primary lease");else throw g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(g){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,g(g=>{this.isDone=!0,this.result=g,this.nextCallback&&this.nextCallback(g)},g=>{this.isDone=!0,this.error=g,this.catchCallback&&this.catchCallback(g)})}catch(g){return this.next(void 0,g)}next(g,$){return(this.callbackAttached&&iG(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure($,this.error):this.wrapSuccess(g,this.result):new sk((ee,et)=>{this.nextCallback=$=>{this.wrapSuccess(g,$).next(ee,et)},this.catchCallback=g=>{this.wrapFailure($,g).next(ee,et)}})}toPromise(){return new Promise((g,$)=>{this.next(g,$)})}wrapUserFunction(g){try{let $=g();if($ instanceof sk)return $;return sk.resolve($)}catch(g){return sk.reject(g)}}wrapSuccess(g,$){return g?this.wrapUserFunction(()=>g($)):sk.resolve($)}wrapFailure(g,$){return g?this.wrapUserFunction(()=>g($)):sk.reject($)}static resolve(g){return new sk(($,ee)=>{$(g)})}static reject(g){return new sk(($,ee)=>{ee(g)})}static waitFor(g){return new sk(($,ee)=>{let et=0,er=0,en=!1;g.forEach(g=>{++et,g.next(()=>{++er,en&&er===et&&$()},g=>ee(g))}),en=!0,er===et&&$()})}static or(g){let $=sk.resolve(!1);for(let ee of g)$=$.next(g=>g?sk.resolve(g):ee());return $}static forEach(g,$){let ee=[];return g.forEach((g,et)=>{ee.push($.call(this,g,et))}),this.waitFor(ee)}static mapArray(g,$){return new sk((ee,et)=>{let er=g.length,en=Array(er),ei=0;for(let es=0;es<er;es++){let eo=es;$(g[eo]).next(g=>{en[eo]=g,++ei===er&&ee(en)},g=>et(g))}})}static doWhile(g,$){return new sk((ee,et)=>{let er=()=>{!0===g()?$().next(()=>{er()},et):ee()};er()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sx="SimpleDb",sP=3;class sM{constructor(g,$){this.action=g,this.transaction=$,this.aborted=!1,this.completionDeferred=new iQ,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{$.error?this.completionDeferred.reject(new sB(g,$.error)):this.completionDeferred.resolve()},this.transaction.onerror=$=>{let ee=sz($.target.error);this.completionDeferred.reject(new sB(g,ee))}}static open(g,$,ee,et){try{return new sM($,g.transaction(et,ee))}catch(g){throw new sB($,g)}}get completionPromise(){return this.completionDeferred.promise}abort(g){g&&this.completionDeferred.reject(g),this.aborted||(iU(sx,"Aborting transaction:",g?g.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let g=this.transaction;this.aborted||"function"!=typeof g.commit||g.commit()}store(g){return new sU(this.transaction.objectStore(g))}}class sL{constructor(g,$,ee){this.name=g,this.version=$,this.schemaConverter=ee,12.2===sL.getIOSVersion(getUA())&&iV("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(g){return iU(sx,"Removing database:",g),sV(window.indexedDB.deleteDatabase(g)).toPromise()}static isAvailable(){if(!isIndexedDBAvailable())return!1;if(sL.isMockPersistence())return!0;let g=getUA(),$=sL.getIOSVersion(g),ee=0<$&&$<10,et=sL.getAndroidVersion(g),er=0<et&&et<4.5;return!(g.indexOf("MSIE ")>0||g.indexOf("Trident/")>0||g.indexOf("Edge/")>0)&&!ee&&!er}static isMockPersistence(){var g;return"undefined"!=typeof process&&(null===(g=process.env)||void 0===g?void 0:g.USE_MOCK_PERSISTENCE)==="YES"}static getStore(g,$){return g.store($)}static getIOSVersion(g){let $=g.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number($?$[1].split("_").slice(0,2).join("."):"-1")}static getAndroidVersion(g){let $=g.match(/Android ([\d.]+)/i);return Number($?$[1].split(".").slice(0,2).join("."):"-1")}async ensureDb(g){return this.db||(iU(sx,"Opening database:",this.name),this.db=await new Promise(($,ee)=>{let et=indexedDB.open(this.name,this.version);et.onsuccess=g=>{$(g.target.result)},et.onblocked=()=>{ee(new sB(g,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},et.onerror=$=>{let et=$.target.error;"VersionError"===et.name?ee(new iH(iW.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===et.name?ee(new iH(iW.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+et)):ee(new sB(g,et))},et.onupgradeneeded=g=>{iU(sx,'Database "'+this.name+'" requires upgrade from version:',g.oldVersion);let $=g.target.result;this.schemaConverter.createOrUpgrade($,et.transaction,g.oldVersion,this.version).next(()=>{iU(sx,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=g=>this.versionchangelistener(g)),this.db}setVersionChangeListener(g){this.versionchangelistener=g,this.db&&(this.db.onversionchange=$=>g($))}async runTransaction(g,$,ee,et){let er="readonly"===$,en=0;for(;;){++en;try{this.db=await this.ensureDb(g);let $=sM.open(this.db,g,er?"readonly":"readwrite",ee),en=et($).next(g=>($.maybeCommit(),g)).catch(g=>($.abort(g),sk.reject(g))).toPromise();return en.catch(()=>{}),await $.completionPromise,en}catch(ee){let g=ee,$="FirebaseError"!==g.name&&en<sP;if(iU(sx,"Transaction failed with error:",g.message,"Retrying:",$),this.close(),!$)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}class sF{constructor(g){this.dbCursor=g,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(g){this.dbCursor=g}done(){this.shouldStop=!0}skip(g){this.nextKey=g}delete(){return sV(this.dbCursor.delete())}}class sB extends null{constructor(g,$){super(iW.UNAVAILABLE,`IndexedDB transaction '${g}' failed: ${$}`),this.name="IndexedDbTransactionError"}}function sj(g){return"IndexedDbTransactionError"===g.name}class sU{constructor(g){this.store=g}put(g,$){let ee;return void 0!==$?(iU(sx,"PUT",this.store.name,g,$),ee=this.store.put($,g)):(iU(sx,"PUT",this.store.name,"<auto-key>",g),ee=this.store.put(g)),sV(ee)}add(g){return iU(sx,"ADD",this.store.name,g,g),sV(this.store.add(g))}get(g){return sV(this.store.get(g)).next($=>(void 0===$&&($=null),iU(sx,"GET",this.store.name,g,$),$))}delete(g){return iU(sx,"DELETE",this.store.name,g),sV(this.store.delete(g))}count(){return iU(sx,"COUNT",this.store.name),sV(this.store.count())}loadAll(g,$){let ee=this.options(g,$);if(ee.index||"function"!=typeof this.store.getAll){let g=this.cursor(ee),$=[];return this.iterateCursor(g,(g,ee)=>{$.push(ee)}).next(()=>$)}{let g=this.store.getAll(ee.range);return new sk(($,ee)=>{g.onerror=g=>{ee(g.target.error)},g.onsuccess=g=>{$(g.target.result)}})}}loadFirst(g,$){let ee=this.store.getAll(g,null===$?void 0:$);return new sk((g,$)=>{ee.onerror=g=>{$(g.target.error)},ee.onsuccess=$=>{g($.target.result)}})}deleteAll(g,$){iU(sx,"DELETE ALL",this.store.name);let ee=this.options(g,$);ee.keysOnly=!1;let et=this.cursor(ee);return this.iterateCursor(et,(g,$,ee)=>ee.delete())}iterate(g,$){let ee;$?ee=g:(ee={},$=g);let et=this.cursor(ee);return this.iterateCursor(et,$)}iterateSerial(g){let $=this.cursor({});return new sk((ee,et)=>{$.onerror=g=>{et(sz(g.target.error))},$.onsuccess=$=>{let et=$.target.result;if(!et){ee();return}g(et.primaryKey,et.value).next(g=>{g?et.continue():ee()})}})}iterateCursor(g,$){let ee=[];return new sk((et,er)=>{g.onerror=g=>{er(g.target.error)},g.onsuccess=g=>{let er=g.target.result;if(!er){et();return}let en=new sF(er),ei=$(er.primaryKey,er.value,en);if(ei instanceof sk){let g=ei.catch(g=>(en.done(),sk.reject(g)));ee.push(g)}en.isDone?et():null===en.skipToKey?er.continue():er.continue(en.skipToKey)}}).next(()=>sk.waitFor(ee))}options(g,$){let ee;return void 0!==g&&("string"==typeof g?ee=g:$=g),{index:ee,range:$}}cursor(g){let $="next";if(g.reverse&&($="prev"),!g.index)return this.store.openCursor(g.range,$);{let ee=this.store.index(g.index);return g.keysOnly?ee.openKeyCursor(g.range,$):ee.openCursor(g.range,$)}}}function sV(g){return new sk(($,ee)=>{g.onsuccess=g=>{$(g.target.result)},g.onerror=g=>{ee(sz(g.target.error))}})}let sq=!1;function sz(g){let $=sL.getIOSVersion(getUA());if($>=12.2&&$<13){let $="An internal error was encountered in the Indexed Database server";if(g.message.indexOf($)>=0){let g=new iH("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${$}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sq||(sq=!0,setTimeout(()=>{throw g},0)),g}}return g}let sG="IndexBackiller",s$=null,sK=null,sW=50;class sH{constructor(g,$){this.asyncQueue=g,this.backfiller=$,this.task=null}start(){this.schedule(s$)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(g){iU(sG,`Scheduled in ${g}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",g,async()=>{this.task=null;try{let g=await this.backfiller.backfill();iU(sG,`Documents written: ${g}`)}catch(g){sj(g)?iU(sG,"Ignoring IndexedDB error during index backfill: ",g):await sD(g)}await this.schedule(sK)})}}class sQ{constructor(g,$){this.localStore=g,this.persistence=$}async backfill(g=sW){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",$=>this.writeIndexEntries($,g))}writeIndexEntries(g,$){let ee=new Set,et=$,er=!0;return sk.doWhile(()=>!0===er&&et>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(g).next($=>{if(!(null===$||ee.has($)))return iU(sG,`Processing collection: ${$}`),this.writeEntriesForCollectionGroup(g,$,et).next(g=>{et-=g,ee.add($)});er=!1})).next(()=>$-et)}writeEntriesForCollectionGroup(g,$,ee){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(g,$).next(et=>this.localStore.localDocuments.getNextDocuments(g,$,et,ee).next(ee=>{let er=ee.changes;return this.localStore.indexManager.updateIndexEntries(g,er).next(()=>this.getNewOffset(et,ee)).next(ee=>(iU(sG,`Updating offset: ${ee}`),this.localStore.indexManager.updateCollectionGroup(g,$,ee))).next(()=>er.size)}))}getNewOffset(g,$){let ee=g;return $.changes.forEach((g,$)=>{let et=sI($);sA(et,ee)>0&&(ee=et)}),new sO(ee.readTime,ee.documentKey,Math.max($.batchId,g.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(g,$){this.previousValue=g,$&&($.sequenceNumberHandler=g=>this.setPreviousValue(g),this.writeNewSequenceNumber=g=>$.writeSequenceNumber(g))}setPreviousValue(g){return this.previousValue=Math.max(g,this.previousValue),this.previousValue}next(){let g=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(g),g}}sY.INVALID=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sJ="\x01",sX="\x01",sZ="\x10",s0="\x11";function s1(g){let $="";for(let ee=0;ee<g.length;ee++)$.length>0&&($=s3($)),$=s2(g.get(ee),$);return s3($)}function s2(g,$){let ee=$,et=g.length;for(let $=0;$<et;$++){let et=g.charAt($);switch(et){case"\x00":ee+=sJ+sZ;break;case sJ:ee+=sJ+s0;break;default:ee+=et}}return ee}function s3(g){return g+sJ+sX}function s4(g){let $=g.length;if(i$($>=2),2===$)return i$(g.charAt(0)===sJ&&g.charAt(1)===sX),so.emptyPath();let ee=$-2,et=[],er="";for(let en=0;en<$;){let $=g.indexOf(sJ,en);switch(($<0||$>ee)&&iG(),g.charAt($+1)){case sX:let ei;let es=g.substring(en,$);0===er.length?ei=es:(er+=es,ei=er,er=""),et.push(ei);break;case sZ:er+=g.substring(en,$)+"\x00";break;case s0:er+=g.substring(en,$+1);break;default:iG()}en=$+2}return new so(et)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s6="remoteDocuments",s5="owner",s9="owner",s8="mutationQueues",s7="userId",oe="mutations",ot="batchId",or="userMutationsIndex",on=null;function oi(g){return[g]}function oo(g,$){return[g,s1($)]}function ol(g,$,ee){return[g,s1($),ee]}let ou={},oh="documentMutations",of="remoteDocumentsV14",og=null,om="documentKeyIndex",oy=null,ov="collectionGroupIndex",oS=null,oT="remoteDocumentGlobal",oE="remoteDocumentGlobalKey",ow="targets",oC="targetId",o_="queryTargetsIndex",oI=null,oO="targetDocuments",oA=null,oN="documentTargetsIndex",oR=null,oD="targetGlobalKey",ok="targetGlobal",ox="collectionParents",oP=null,oM="clientMetadata",oL="clientId",oF="bundles",oB="bundleId",oj="namedQueries",oU="name",oV="indexConfiguration",oq="indexId",oz="collectionGroupIndex",oG="collectionGroup",o$="indexState",oK=null,oW="sequenceNumberIndex",oH=null,oQ="indexEntries",oY=null,oJ="documentKeyIndex",oX=null,oZ="documentOverlays",o0=null,o1="collectionPathOverlayIndex",o2=null,o3="collectionGroupOverlayIndex",o4=null,o6=[s8,oe,oh,s6,ow,s5,ok,oO,oM,oT,ox,oF,oj],o5=[...o6,oZ],o9=[s8,oe,oh,of,ow,s5,ok,oO,oM,oT,ox,oF,oj,oZ],o8=o9,o7=[...o8,oV,o$,oQ];function at(g){return 15===g?o7:14===g?o8:13===g?o9:12===g?o5:11===g?o6:void iG()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends null{constructor(g,$){super(),this.simpleDbTransaction=g,this.currentSequenceNumber=$}}function an(g,$){let ee=iK(g);return sL.getStore(ee.simpleDbTransaction,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(g){let $=0;for(let ee in g)Object.prototype.hasOwnProperty.call(g,ee)&&$++;return $}function as(g,$){for(let ee in g)Object.prototype.hasOwnProperty.call(g,ee)&&$(ee,g[ee])}function ao(g){for(let $ in g)if(Object.prototype.hasOwnProperty.call(g,$))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(g,$){this.comparator=g,this.root=$||ah.EMPTY}insert(g,$){return new al(this.comparator,this.root.insert(g,$,this.comparator).copy(null,null,ah.BLACK,null,null))}remove(g){return new al(this.comparator,this.root.remove(g,this.comparator).copy(null,null,ah.BLACK,null,null))}get(g){let $=this.root;for(;!$.isEmpty();){let ee=this.comparator(g,$.key);if(0===ee)return $.value;ee<0?$=$.left:ee>0&&($=$.right)}return null}indexOf(g){let $=0,ee=this.root;for(;!ee.isEmpty();){let et=this.comparator(g,ee.key);if(0===et)return $+ee.left.size;et<0?ee=ee.left:($+=ee.left.size+1,ee=ee.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(g){return this.root.inorderTraversal(g)}forEach(g){this.inorderTraversal(($,ee)=>(g($,ee),!1))}toString(){let g=[];return this.inorderTraversal(($,ee)=>(g.push(`${$}:${ee}`),!1)),`{${g.join(", ")}}`}reverseTraversal(g){return this.root.reverseTraversal(g)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(g){return new au(this.root,g,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(g){return new au(this.root,g,this.comparator,!0)}}class au{constructor(g,$,ee,et){this.isReverse=et,this.nodeStack=[];let er=1;for(;!g.isEmpty();)if(er=$?ee(g.key,$):1,$&&et&&(er*=-1),er<0)g=this.isReverse?g.left:g.right;else if(0===er){this.nodeStack.push(g);break}else this.nodeStack.push(g),g=this.isReverse?g.right:g.left}getNext(){let g=this.nodeStack.pop(),$={key:g.key,value:g.value};if(this.isReverse)for(g=g.left;!g.isEmpty();)this.nodeStack.push(g),g=g.right;else for(g=g.right;!g.isEmpty();)this.nodeStack.push(g),g=g.left;return $}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let g=this.nodeStack[this.nodeStack.length-1];return{key:g.key,value:g.value}}}class ah{constructor(g,$,ee,et,er){this.key=g,this.value=$,this.color=null!=ee?ee:ah.RED,this.left=null!=et?et:ah.EMPTY,this.right=null!=er?er:ah.EMPTY,this.size=this.left.size+1+this.right.size}copy(g,$,ee,et,er){return new ah(null!=g?g:this.key,null!=$?$:this.value,null!=ee?ee:this.color,null!=et?et:this.left,null!=er?er:this.right)}isEmpty(){return!1}inorderTraversal(g){return this.left.inorderTraversal(g)||g(this.key,this.value)||this.right.inorderTraversal(g)}reverseTraversal(g){return this.right.reverseTraversal(g)||g(this.key,this.value)||this.left.reverseTraversal(g)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(g,$,ee){let et=this,er=ee(g,et.key);return(et=er<0?et.copy(null,null,null,et.left.insert(g,$,ee),null):0===er?et.copy(null,$,null,null,null):et.copy(null,null,null,null,et.right.insert(g,$,ee))).fixUp()}removeMin(){if(this.left.isEmpty())return ah.EMPTY;let g=this;return g.left.isRed()||g.left.left.isRed()||(g=g.moveRedLeft()),(g=g.copy(null,null,null,g.left.removeMin(),null)).fixUp()}remove(g,$){let ee;let et=this;if(0>$(g,et.key))et.left.isEmpty()||et.left.isRed()||et.left.left.isRed()||(et=et.moveRedLeft()),et=et.copy(null,null,null,et.left.remove(g,$),null);else{if(et.left.isRed()&&(et=et.rotateRight()),et.right.isEmpty()||et.right.isRed()||et.right.left.isRed()||(et=et.moveRedRight()),0===$(g,et.key)){if(et.right.isEmpty())return ah.EMPTY;ee=et.right.min(),et=et.copy(ee.key,ee.value,null,null,et.right.removeMin())}et=et.copy(null,null,null,null,et.right.remove(g,$))}return et.fixUp()}isRed(){return this.color}fixUp(){let g=this;return g.right.isRed()&&!g.left.isRed()&&(g=g.rotateLeft()),g.left.isRed()&&g.left.left.isRed()&&(g=g.rotateRight()),g.left.isRed()&&g.right.isRed()&&(g=g.colorFlip()),g}moveRedLeft(){let g=this.colorFlip();return g.right.left.isRed()&&(g=(g=(g=g.copy(null,null,null,null,g.right.rotateRight())).rotateLeft()).colorFlip()),g}moveRedRight(){let g=this.colorFlip();return g.left.left.isRed()&&(g=(g=g.rotateRight()).colorFlip()),g}rotateLeft(){let g=this.copy(null,null,ah.RED,null,this.right.left);return this.right.copy(null,null,this.color,g,null)}rotateRight(){let g=this.copy(null,null,ah.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,g)}colorFlip(){let g=this.left.copy(null,null,!this.left.color,null,null),$=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,g,$)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw iG();let g=this.left.check();if(g===this.right.check())return g+(this.isRed()?0:1);throw iG()}}ah.EMPTY=null,ah.RED=!0,ah.BLACK=!1;class ap{constructor(){this.size=0}get key(){throw iG()}get value(){throw iG()}get color(){throw iG()}get left(){throw iG()}get right(){throw iG()}copy(g,$,ee,et,er){return this}insert(g,$,ee){return new ah(g,$)}remove(g,$){return this}isEmpty(){return!0}inorderTraversal(g){return!1}reverseTraversal(g){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}ah.EMPTY=new ap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(g){this.comparator=g,this.data=new al(this.comparator)}has(g){return null!==this.data.get(g)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(g){return this.data.indexOf(g)}forEach(g){this.data.inorderTraversal(($,ee)=>(g($),!1))}forEachInRange(g,$){let ee=this.data.getIteratorFrom(g[0]);for(;ee.hasNext();){let et=ee.getNext();if(this.comparator(et.key,g[1])>=0)return;$(et.key)}}forEachWhile(g,$){let ee;for(ee=void 0!==$?this.data.getIteratorFrom($):this.data.getIterator();ee.hasNext();)if(!g(ee.getNext().key))return}firstAfterOrEqual(g){let $=this.data.getIteratorFrom(g);return $.hasNext()?$.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(g){return new ag(this.data.getIteratorFrom(g))}add(g){return this.copy(this.data.remove(g).insert(g,!0))}delete(g){return this.has(g)?this.copy(this.data.remove(g)):this}isEmpty(){return this.data.isEmpty()}unionWith(g){let $=this;return $.size<g.size&&($=g,g=this),g.forEach(g=>{$=$.add(g)}),$}isEqual(g){if(!(g instanceof af)||this.size!==g.size)return!1;let $=this.data.getIterator(),ee=g.data.getIterator();for(;$.hasNext();){let g=$.getNext().key,et=ee.getNext().key;if(0!==this.comparator(g,et))return!1}return!0}toArray(){let g=[];return this.forEach($=>{g.push($)}),g}toString(){let g=[];return this.forEach($=>g.push($)),"SortedSet("+g.toString()+")"}copy(g){let $=new af(this.comparator);return $.data=g,$}}class ag{constructor(g){this.iter=g}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function am(g,$,ee,et,er){let en=g.getIterator(),ei=$.getIterator(),es=ay(en),eo=ay(ei);for(;es||eo;){let g=!1,$=!1;if(es&&eo){let et=ee(es,eo);et<0?$=!0:et>0&&(g=!0)}else null!=es?$=!0:g=!0;g?(et(eo),eo=ay(ei)):$?(er(es),es=ay(en)):(es=ay(en),eo=ay(ei))}}function ay(g){return g.hasNext()?g.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(g){this.fields=g,g.sort(su.comparator)}static empty(){return new av([])}unionWith(g){let $=new af(su.comparator);for(let g of this.fields)$=$.add(g);for(let ee of g)$=$.add(ee);return new av($.toArray())}covers(g){for(let $ of this.fields)if($.isPrefixOf(g))return!0;return!1}isEqual(g){return i8(this.fields,g.fields,(g,$)=>g.isEqual($))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(g){return Buffer.from(g,"base64").toString("binary")}function aT(g){return Buffer.from(g,"binary").toString("base64")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(g){this.binaryString=g}static fromBase64String(g){return new aE(aS(g))}static fromUint8Array(g){return new aE(aw(g))}[Symbol.iterator](){let g=0;return{next:()=>g<this.binaryString.length?{value:this.binaryString.charCodeAt(g++),done:!1}:{value:void 0,done:!0}}}toBase64(){return aT(this.binaryString)}toUint8Array(){return aC(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(g){return i9(this.binaryString,g.binaryString)}isEqual(g){return this.binaryString===g.binaryString}}function aw(g){let $="";for(let ee=0;ee<g.length;++ee)$+=String.fromCharCode(g[ee]);return $}function aC(g){let $=new Uint8Array(g.length);for(let ee=0;ee<g.length;ee++)$[ee]=g.charCodeAt(ee);return $}aE.EMPTY_BYTE_STRING=new aE("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aI(g){if(i$(!!g),"string"==typeof g){let $=0,ee=a_.exec(g);if(i$(!!ee),ee[1]){let g=ee[1];$=Number(g=(g+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(g).getTime()/1e3),nanos:$}}return{seconds:aO(g.seconds),nanos:aO(g.nanos)}}function aO(g){return"number"==typeof g?g:"string"==typeof g?Number(g):0}function aA(g){return"string"==typeof g?aE.fromBase64String(g):aE.fromUint8Array(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aN="server_timestamp",aR="__type__",aD="__previous_value__",ak="__local_write_time__";function ax(g){var $,ee;return(null===(ee=((null===($=null==g?void 0:g.mapValue)||void 0===$?void 0:$.fields)||{})[aR])||void 0===ee?void 0:ee.stringValue)===aN}function aP(g,$){let ee={fields:{[aR]:{stringValue:aN},[ak]:{timestampValue:{seconds:g.seconds,nanos:g.nanoseconds}}}};return $&&ax($)&&($=aM($)),$&&(ee.fields[aD]=$),{mapValue:ee}}function aM(g){let $=g.mapValue.fields[aD];return ax($)?aM($):$}function aL(g){let $=aI(g.mapValue.fields[ak].timestampValue);return new sr($.seconds,$.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(g,$,ee,et,er,en,ei,es,eo){this.databaseId=g,this.appId=$,this.persistenceKey=ee,this.host=et,this.ssl=er,this.forceLongPolling=en,this.autoDetectLongPolling=ei,this.longPollingOptions=es,this.useFetchStreams=eo}}let aB="(default)";class aj{constructor(g,$){this.projectId=g,this.database=$||aB}static empty(){return new aj("","")}get isDefaultDatabase(){return this.database===aB}isEqual(g){return g instanceof aj&&g.projectId===this.projectId&&g.database===this.database}}function aU(g,$){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new iH(iW.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aj(g.options.projectId,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aV=-1;function aq(g){return null==g}function az(g){return 0===g&&1/g==-1/0}function aG(g){return"number"==typeof g&&Number.isInteger(g)&&!az(g)&&g<=Number.MAX_SAFE_INTEGER&&g>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a$="__max__",aK={mapValue:{fields:{__type__:{stringValue:a$}}}},aW={nullValue:"NULL_VALUE"};function aH(g){if("nullValue"in g)return 0;if("booleanValue"in g)return 1;if("integerValue"in g||"doubleValue"in g)return 2;if("timestampValue"in g)return 3;if("stringValue"in g)return 5;if("bytesValue"in g)return 6;if("referenceValue"in g)return 7;else if("geoPointValue"in g)return 8;else if("arrayValue"in g)return 9;else if(!("mapValue"in g))return iG();else return ax(g)?4:lI(g)?9007199254740991:10}function aQ(g,$){if(g===$)return!0;let ee=aH(g);if(ee!==aH($))return!1;switch(ee){case 0:case 9007199254740991:return!0;case 1:return g.booleanValue===$.booleanValue;case 4:return aL(g).isEqual(aL($));case 3:return aY(g,$);case 5:return g.stringValue===$.stringValue;case 6:return aX(g,$);case 7:return g.referenceValue===$.referenceValue;case 8:return aJ(g,$);case 2:return aZ(g,$);case 9:return i8(g.arrayValue.values||[],$.arrayValue.values||[],aQ);case 10:return a0(g,$);default:return iG()}}function aY(g,$){if("string"==typeof g.timestampValue&&"string"==typeof $.timestampValue&&g.timestampValue.length===$.timestampValue.length)return g.timestampValue===$.timestampValue;let ee=aI(g.timestampValue),et=aI($.timestampValue);return ee.seconds===et.seconds&&ee.nanos===et.nanos}function aJ(g,$){return aO(g.geoPointValue.latitude)===aO($.geoPointValue.latitude)&&aO(g.geoPointValue.longitude)===aO($.geoPointValue.longitude)}function aX(g,$){return aA(g.bytesValue).isEqual(aA($.bytesValue))}function aZ(g,$){if("integerValue"in g&&"integerValue"in $)return aO(g.integerValue)===aO($.integerValue);if("doubleValue"in g&&"doubleValue"in $){let ee=aO(g.doubleValue),et=aO($.doubleValue);return ee===et?az(ee)===az(et):isNaN(ee)&&isNaN(et)}return!1}function a0(g,$){let ee=g.mapValue.fields||{},et=$.mapValue.fields||{};if(ai(ee)!==ai(et))return!1;for(let g in ee)if(ee.hasOwnProperty(g)&&(void 0===et[g]||!aQ(ee[g],et[g])))return!1;return!0}function a1(g,$){return void 0!==(g.values||[]).find(g=>aQ(g,$))}function a2(g,$){if(g===$)return 0;let ee=aH(g),et=aH($);if(ee!==et)return i9(ee,et);switch(ee){case 0:case 9007199254740991:return 0;case 1:return i9(g.booleanValue,$.booleanValue);case 2:return a3(g,$);case 3:return a4(g.timestampValue,$.timestampValue);case 4:return a4(aL(g),aL($));case 5:return i9(g.stringValue,$.stringValue);case 6:return a9(g.bytesValue,$.bytesValue);case 7:return a6(g.referenceValue,$.referenceValue);case 8:return a5(g.geoPointValue,$.geoPointValue);case 9:return a8(g.arrayValue,$.arrayValue);case 10:return a7(g.mapValue,$.mapValue);default:throw iG()}}function a3(g,$){let ee=aO(g.integerValue||g.doubleValue),et=aO($.integerValue||$.doubleValue);return ee<et?-1:ee>et?1:ee===et?0:isNaN(ee)?isNaN(et)?0:-1:1}function a4(g,$){if("string"==typeof g&&"string"==typeof $&&g.length===$.length)return i9(g,$);let ee=aI(g),et=aI($),er=i9(ee.seconds,et.seconds);return 0!==er?er:i9(ee.nanos,et.nanos)}function a6(g,$){let ee=g.split("/"),et=$.split("/");for(let g=0;g<ee.length&&g<et.length;g++){let $=i9(ee[g],et[g]);if(0!==$)return $}return i9(ee.length,et.length)}function a5(g,$){let ee=i9(aO(g.latitude),aO($.latitude));return 0!==ee?ee:i9(aO(g.longitude),aO($.longitude))}function a9(g,$){let ee=aA(g),et=aA($);return ee.compareTo(et)}function a8(g,$){let ee=g.values||[],et=$.values||[];for(let g=0;g<ee.length&&g<et.length;++g){let $=a2(ee[g],et[g]);if($)return $}return i9(ee.length,et.length)}function a7(g,$){if(g===aK.mapValue&&$===aK.mapValue)return 0;if(g===aK.mapValue)return 1;if($===aK.mapValue)return -1;let ee=g.fields||{},et=Object.keys(ee),er=$.fields||{},en=Object.keys(er);et.sort(),en.sort();for(let g=0;g<et.length&&g<en.length;++g){let $=i9(et[g],en[g]);if(0!==$)return $;let ei=a2(ee[et[g]],er[en[g]]);if(0!==ei)return ei}return i9(et.length,en.length)}function lt(g){return lr(g)}function lr(g){if("nullValue"in g)return"null";if("booleanValue"in g)return""+g.booleanValue;if("integerValue"in g)return""+g.integerValue;if("doubleValue"in g)return""+g.doubleValue;if("timestampValue"in g)return li(g.timestampValue);if("stringValue"in g)return g.stringValue;if("bytesValue"in g)return ln(g.bytesValue);else if("referenceValue"in g)return ll(g.referenceValue);else if("geoPointValue"in g)return ls(g.geoPointValue);else if("arrayValue"in g)return lh(g.arrayValue);else if("mapValue"in g)return lu(g.mapValue);else return iG()}function ln(g){return aA(g).toBase64()}function li(g){let $=aI(g);return`time(${$.seconds},${$.nanos})`}function ls(g){return`geo(${g.latitude},${g.longitude})`}function ll(g){return sh.fromName(g).toString()}function lu(g){let $=Object.keys(g.fields||{}).sort(),ee="{",et=!0;for(let er of $)et?et=!1:ee+=",",ee+=`${er}:${lr(g.fields[er])}`;return ee+"}"}function lh(g){let $="[",ee=!0;for(let et of g.values||[])ee?ee=!1:$+=",",$+=lr(et);return $+"]"}function lp(g){switch(aH(g)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let $=aM(g);return $?16+lp($):16;case 5:return 2*g.stringValue.length;case 6:return aA(g.bytesValue).approximateByteSize();case 7:return g.referenceValue.length;case 9:return lg(g.arrayValue);case 10:return lf(g.mapValue);default:throw iG()}}function lf(g){let $=0;return as(g.fields,(g,ee)=>{$+=g.length+lp(ee)}),$}function lg(g){return(g.values||[]).reduce((g,$)=>g+lp($),0)}function lm(g,$){return{referenceValue:`projects/${g.projectId}/databases/${g.database}/documents/${$.path.canonicalString()}`}}function ly(g){return!!g&&"integerValue"in g}function lv(g){return!!g&&"doubleValue"in g}function lS(g){return ly(g)||lv(g)}function lT(g){return!!g&&"arrayValue"in g}function lE(g){return!!g&&"nullValue"in g}function lw(g){return!!g&&"doubleValue"in g&&isNaN(Number(g.doubleValue))}function lC(g){return!!g&&"mapValue"in g}function l_(g){if(g.geoPointValue)return{geoPointValue:Object.assign({},g.geoPointValue)};if(g.timestampValue&&"object"==typeof g.timestampValue)return{timestampValue:Object.assign({},g.timestampValue)};if(g.mapValue){let $={mapValue:{fields:{}}};return as(g.mapValue.fields,(g,ee)=>$.mapValue.fields[g]=l_(ee)),$}{if(!g.arrayValue)return Object.assign({},g);let $={arrayValue:{values:[]}};for(let ee=0;ee<(g.arrayValue.values||[]).length;++ee)$.arrayValue.values[ee]=l_(g.arrayValue.values[ee]);return $}}function lI(g){return(((g.mapValue||{}).fields||{}).__type__||{}).stringValue===a$}function lO(g){if("nullValue"in g)return aW;if("booleanValue"in g)return{booleanValue:!1};if("integerValue"in g||"doubleValue"in g)return{doubleValue:NaN};if("timestampValue"in g)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in g)return{stringValue:""};if("bytesValue"in g)return{bytesValue:""};if("referenceValue"in g)return lm(aj.empty(),sh.empty());else if("geoPointValue"in g)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in g)return{arrayValue:{}};else if("mapValue"in g)return{mapValue:{}};else return iG()}function lA(g){if("nullValue"in g)return{booleanValue:!1};if("booleanValue"in g)return{doubleValue:NaN};if("integerValue"in g||"doubleValue"in g)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in g)return{stringValue:""};if("stringValue"in g)return{bytesValue:""};if("bytesValue"in g)return lm(aj.empty(),sh.empty());if("referenceValue"in g)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in g)return{arrayValue:{}};else if("arrayValue"in g)return{mapValue:{}};else if("mapValue"in g)return aK;else return iG()}function lN(g,$){let ee=a2(g.value,$.value);return 0!==ee?ee:g.inclusive&&!$.inclusive?-1:!g.inclusive&&$.inclusive?1:0}function lR(g,$){let ee=a2(g.value,$.value);return 0!==ee?ee:g.inclusive&&!$.inclusive?1:!g.inclusive&&$.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(g){this.value=g}static empty(){return new lD({mapValue:{}})}field(g){if(g.isEmpty())return this.value;{let $=this.value;for(let ee=0;ee<g.length-1;++ee)if(!lC($=($.mapValue.fields||{})[g.get(ee)]))return null;return($=($.mapValue.fields||{})[g.lastSegment()])||null}}set(g,$){this.getFieldsMap(g.popLast())[g.lastSegment()]=l_($)}setAll(g){let $=su.emptyPath(),ee={},et=[];g.forEach((g,er)=>{if(!$.isImmediateParentOf(er)){let g=this.getFieldsMap($);this.applyChanges(g,ee,et),ee={},et=[],$=er.popLast()}g?ee[er.lastSegment()]=l_(g):et.push(er.lastSegment())});let er=this.getFieldsMap($);this.applyChanges(er,ee,et)}delete(g){let $=this.field(g.popLast());lC($)&&$.mapValue.fields&&delete $.mapValue.fields[g.lastSegment()]}isEqual(g){return aQ(this.value,g.value)}getFieldsMap(g){let $=this.value;$.mapValue.fields||($.mapValue={fields:{}});for(let ee=0;ee<g.length;++ee){let et=$.mapValue.fields[g.get(ee)];lC(et)&&et.mapValue.fields||(et={mapValue:{fields:{}}},$.mapValue.fields[g.get(ee)]=et),$=et}return $.mapValue.fields}applyChanges(g,$,ee){for(let et of(as($,($,ee)=>g[$]=ee),ee))delete g[et]}clone(){return new lD(l_(this.value))}}function lk(g){let $=[];return as(g.fields,(g,ee)=>{let et=new su([g]);if(lC(ee)){let g=lk(ee.mapValue).fields;if(0===g.length)$.push(et);else for(let ee of g)$.push(et.child(ee))}else $.push(et)}),new av($)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(g,$,ee,et,er,en,ei){this.key=g,this.documentType=$,this.version=ee,this.readTime=et,this.createTime=er,this.data=en,this.documentState=ei}static newInvalidDocument(g){return new lx(g,0,sn.min(),sn.min(),sn.min(),lD.empty(),0)}static newFoundDocument(g,$,ee,et){return new lx(g,1,$,sn.min(),ee,et,0)}static newNoDocument(g,$){return new lx(g,2,$,sn.min(),sn.min(),lD.empty(),0)}static newUnknownDocument(g,$){return new lx(g,3,$,sn.min(),sn.min(),lD.empty(),2)}convertToFoundDocument(g,$){return this.createTime.isEqual(sn.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=g),this.version=g,this.documentType=1,this.data=$,this.documentState=0,this}convertToNoDocument(g){return this.version=g,this.documentType=2,this.data=lD.empty(),this.documentState=0,this}convertToUnknownDocument(g){return this.version=g,this.documentType=3,this.data=lD.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(g){return this.readTime=g,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(g){return g instanceof lx&&this.key.isEqual(g.key)&&this.version.isEqual(g.version)&&this.documentType===g.documentType&&this.documentState===g.documentState&&this.data.isEqual(g.data)}mutableCopy(){return new lx(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function lP(g,$,ee){let et=$.data.field(g),er=ee.data.field(g);return null!==et&&null!==er?a2(et,er):iG()}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(g,$){this.position=g,this.inclusive=$}}function lL(g,$,ee){let et=0;for(let er=0;er<g.position.length;er++){let en=$[er],ei=g.position[er];if(et=en.field.isKeyField()?sh.comparator(sh.fromName(ei.referenceValue),ee.key):a2(ei,ee.data.field(en.field)),"desc"===en.dir&&(et*=-1),0!==et)break}return et}function lF(g,$,ee){let et=lL(g,$,ee);return g.inclusive?et>=0:et>0}function lB(g,$,ee){let et=lL(g,$,ee);return g.inclusive?et<=0:et<0}function lj(g,$){if(null===g)return null===$;if(null===$||g.inclusive!==$.inclusive||g.position.length!==$.position.length)return!1;for(let ee=0;ee<g.position.length;ee++)if(!aQ(g.position[ee],$.position[ee]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(g,$="asc"){this.field=g,this.dir=$}}function lV(g){return g.field.canonicalString()+g.dir}function lq(g){return`${g.field.canonicalString()} (${g.dir})`}function lz(g,$){return g.dir===$.dir&&g.field.isEqual($.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{}class l$ extends lG{constructor(g,$,ee){super(),this.field=g,this.op=$,this.value=ee}static create(g,$,ee){return g.isKeyField()?"in"===$||"not-in"===$?this.createKeyFieldInFilter(g,$,ee):new l6(g,$,ee):"array-contains"===$?new l7(g,ee):"in"===$?new ue(g,ee):"not-in"===$?new ut(g,ee):"array-contains-any"===$?new ur(g,ee):new l$(g,$,ee)}static createKeyFieldInFilter(g,$,ee){return"in"===$?new l5(g,ee):new l9(g,ee)}matches(g){let $=g.data.field(this.field);return"!="===this.op?null!==$&&this.matchesComparison(a2($,this.value)):null!==$&&aH(this.value)===aH($)&&this.matchesComparison(a2($,this.value))}matchesComparison(g){switch(this.op){case"<":return g<0;case"<=":return g<=0;case"==":return 0===g;case"!=":return 0!==g;case">":return g>0;case">=":return g>=0;default:return iG()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class lK extends lG{constructor(g,$){super(),this.filters=g,this.op=$,this.memoizedFlattenedFilters=null}static create(g,$){return new lK(g,$)}matches(g){return lW(this)?void 0===this.filters.find($=>!$.matches(g)):void 0!==this.filters.find($=>$.matches(g))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((g,$)=>g.concat($.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let g=this.findFirstMatchingFilter(g=>g.isInequality());return null!==g?g.field:null}findFirstMatchingFilter(g){for(let $ of this.getFlattenedFilters())if(g($))return $;return null}}function lW(g){return"and"===g.op}function lH(g){return"or"===g.op}function lQ(g){return lY(g)&&lW(g)}function lY(g){for(let $ of g.filters)if($ instanceof lK)return!1;return!0}function lJ(g){if(g instanceof l$)return g.field.canonicalString()+g.op.toString()+lt(g.value);if(lQ(g))return g.filters.map(g=>lJ(g)).join(",");{let $=g.filters.map(g=>lJ(g)).join(",");return`${g.op}(${$})`}}function lX(g,$){return g instanceof l$?lZ(g,$):g instanceof lK?l0(g,$):void iG()}function lZ(g,$){return $ instanceof l$&&g.op===$.op&&g.field.isEqual($.field)&&aQ(g.value,$.value)}function l0(g,$){return $ instanceof lK&&g.op===$.op&&g.filters.length===$.filters.length&&g.filters.reduce((g,ee,et)=>g&&lX(ee,$.filters[et]),!0)}function l1(g,$){let ee=g.filters.concat($);return lK.create(ee,g.op)}function l2(g){return g instanceof l$?l4(g):g instanceof lK?l3(g):"Filter"}function l3(g){return g.op.toString()+" {"+g.getFilters().map(l2).join(" ,")+"}"}function l4(g){return`${g.field.canonicalString()} ${g.op} ${lt(g.value)}`}class l6 extends l${constructor(g,$,ee){super(g,$,ee),this.key=sh.fromName(ee.referenceValue)}matches(g){let $=sh.comparator(g.key,this.key);return this.matchesComparison($)}}class l5 extends l${constructor(g,$){super(g,"in",$),this.keys=l8("in",$)}matches(g){return this.keys.some($=>$.isEqual(g.key))}}class l9 extends l${constructor(g,$){super(g,"not-in",$),this.keys=l8("not-in",$)}matches(g){return!this.keys.some($=>$.isEqual(g.key))}}function l8(g,$){var ee;return((null===(ee=$.arrayValue)||void 0===ee?void 0:ee.values)||[]).map(g=>sh.fromName(g.referenceValue))}class l7 extends l${constructor(g,$){super(g,"array-contains",$)}matches(g){let $=g.data.field(this.field);return lT($)&&a1($.arrayValue,this.value)}}class ue extends l${constructor(g,$){super(g,"in",$)}matches(g){let $=g.data.field(this.field);return null!==$&&a1(this.value.arrayValue,$)}}class ut extends l${constructor(g,$){super(g,"not-in",$)}matches(g){if(a1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let $=g.data.field(this.field);return null!==$&&!a1(this.value.arrayValue,$)}}class ur extends l${constructor(g,$){super(g,"array-contains-any",$)}matches(g){let $=g.data.field(this.field);return!!lT($)&&!!$.arrayValue.values&&$.arrayValue.values.some(g=>a1(this.value.arrayValue,g))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(g,$=null,ee=[],et=[],er=null,en=null,ei=null){this.path=g,this.collectionGroup=$,this.orderBy=ee,this.filters=et,this.limit=er,this.startAt=en,this.endAt=ei,this.memoizedCanonicalId=null}}function ui(g,$=null,ee=[],et=[],er=null,en=null,ei=null){return new un(g,$,ee,et,er,en,ei)}function us(g){let $=iK(g);if(null===$.memoizedCanonicalId){let g=$.path.canonicalString();null!==$.collectionGroup&&(g+="|cg:"+$.collectionGroup),g+="|f:"+$.filters.map(g=>lJ(g)).join(",")+"|ob:"+$.orderBy.map(g=>lV(g)).join(","),aq($.limit)||(g+="|l:"+$.limit),$.startAt&&(g+="|lb:"+($.startAt.inclusive?"b:":"a:")+$.startAt.position.map(g=>lt(g)).join(",")),$.endAt&&(g+="|ub:"+($.endAt.inclusive?"a:":"b:")+$.endAt.position.map(g=>lt(g)).join(",")),$.memoizedCanonicalId=g}return $.memoizedCanonicalId}function uo(g){let $=g.path.canonicalString();return null!==g.collectionGroup&&($+=" collectionGroup="+g.collectionGroup),g.filters.length>0&&($+=`, filters: [${g.filters.map(g=>l2(g)).join(", ")}]`),aq(g.limit)||($+=", limit: "+g.limit),g.orderBy.length>0&&($+=`, orderBy: [${g.orderBy.map(g=>lq(g)).join(", ")}]`),g.startAt&&($+=", startAt: "+(g.startAt.inclusive?"b:":"a:")+g.startAt.position.map(g=>lt(g)).join(",")),g.endAt&&($+=", endAt: "+(g.endAt.inclusive?"a:":"b:")+g.endAt.position.map(g=>lt(g)).join(",")),`Target(${$})`}function ul(g,$){if(g.limit!==$.limit||g.orderBy.length!==$.orderBy.length)return!1;for(let ee=0;ee<g.orderBy.length;ee++)if(!lz(g.orderBy[ee],$.orderBy[ee]))return!1;if(g.filters.length!==$.filters.length)return!1;for(let ee=0;ee<g.filters.length;ee++)if(!lX(g.filters[ee],$.filters[ee]))return!1;return!!(g.collectionGroup===$.collectionGroup&&g.path.isEqual($.path)&&lj(g.startAt,$.startAt))&&lj(g.endAt,$.endAt)}function uu(g){return sh.isDocumentKey(g.path)&&null===g.collectionGroup&&0===g.filters.length}function uh(g,$){return g.filters.filter(g=>g instanceof l$&&g.field.isEqual($))}function up(g,$){let ee=sm($);if(void 0===ee)return null;for(let $ of uh(g,ee.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}function uf(g,$){let ee=new Map;for(let et of sy($))for(let $ of uh(g,et.fieldPath))switch($.op){case"==":case"in":ee.set(et.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return ee.set(et.fieldPath.canonicalString(),$.value),Array.from(ee.values())}return null}function ug(g,$){let ee=[],et=!0;for(let er of sy($)){let $=0===er.kind?uy(g,er.fieldPath,g.startAt):uv(g,er.fieldPath,g.startAt);ee.push($.value),et&&(et=$.inclusive)}return new lM(ee,et)}function um(g,$){let ee=[],et=!0;for(let er of sy($)){let $=0===er.kind?uv(g,er.fieldPath,g.endAt):uy(g,er.fieldPath,g.endAt);ee.push($.value),et&&(et=$.inclusive)}return new lM(ee,et)}function uy(g,$,ee){let et=aW,er=!0;for(let ee of uh(g,$)){let g=aW,$=!0;switch(ee.op){case"<":case"<=":g=lO(ee.value);break;case"==":case"in":case">=":g=ee.value;break;case">":g=ee.value,$=!1;break;case"!=":case"not-in":g=aW}0>lN({value:et,inclusive:er},{value:g,inclusive:$})&&(et=g,er=$)}if(null!==ee){for(let en=0;en<g.orderBy.length;++en)if(g.orderBy[en].field.isEqual($)){let g=ee.position[en];0>lN({value:et,inclusive:er},{value:g,inclusive:ee.inclusive})&&(et=g,er=ee.inclusive);break}}return{value:et,inclusive:er}}function uv(g,$,ee){let et=aK,er=!0;for(let ee of uh(g,$)){let g=aK,$=!0;switch(ee.op){case">=":case">":g=lA(ee.value),$=!1;break;case"==":case"in":case"<=":g=ee.value;break;case"<":g=ee.value,$=!1;break;case"!=":case"not-in":g=aK}lR({value:et,inclusive:er},{value:g,inclusive:$})>0&&(et=g,er=$)}if(null!==ee){for(let en=0;en<g.orderBy.length;++en)if(g.orderBy[en].field.isEqual($)){let g=ee.position[en];lR({value:et,inclusive:er},{value:g,inclusive:ee.inclusive})>0&&(et=g,er=ee.inclusive);break}}return{value:et,inclusive:er}}function uS(g){let $=new af(su.comparator),ee=!1;for(let et of g.filters)for(let g of et.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?ee=!0:$=$.add(g.field));for(let ee of g.orderBy)ee.field.isKeyField()||($=$.add(ee.field));return $.size+(ee?1:0)}function uT(g){return null!==g.limit}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(g,$=null,ee=[],et=[],er=null,en="F",ei=null,es=null){this.path=g,this.collectionGroup=$,this.explicitOrderBy=ee,this.filters=et,this.limit=er,this.limitType=en,this.startAt=ei,this.endAt=es,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt,this.endAt}}function uw(g,$,ee,et,er,en,ei,es){return new uE(g,$,ee,et,er,en,ei,es)}function uC(g){return new uE(g)}function u_(g,$){return new uE($,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}function uI(g){return 0===g.filters.length&&null===g.limit&&null==g.startAt&&null==g.endAt&&(0===g.explicitOrderBy.length||1===g.explicitOrderBy.length&&g.explicitOrderBy[0].field.isKeyField())}function uO(g){return g.explicitOrderBy.length>0?g.explicitOrderBy[0].field:null}function uA(g){for(let $ of g.filters){let g=$.getFirstInequalityField();if(null!==g)return g}return null}function uN(g){return sh.isDocumentKey(g.path)&&null===g.collectionGroup&&0===g.filters.length}function uR(g){return null!==g.collectionGroup}function uD(g){let $=iK(g);if(null===$.memoizedOrderBy){$.memoizedOrderBy=[];let g=uA($),ee=uO($);if(null!==g&&null===ee)g.isKeyField()||$.memoizedOrderBy.push(new lU(g)),$.memoizedOrderBy.push(new lU(su.keyField(),"asc"));else{let g=!1;for(let ee of $.explicitOrderBy)$.memoizedOrderBy.push(ee),ee.field.isKeyField()&&(g=!0);if(!g){let g=$.explicitOrderBy.length>0?$.explicitOrderBy[$.explicitOrderBy.length-1].dir:"asc";$.memoizedOrderBy.push(new lU(su.keyField(),g))}}}return $.memoizedOrderBy}function uk(g){let $=iK(g);if(!$.memoizedTarget){if("F"===$.limitType)$.memoizedTarget=ui($.path,$.collectionGroup,uD($),$.filters,$.limit,$.startAt,$.endAt);else{let g=[];for(let ee of uD($)){let $="desc"===ee.dir?"asc":"desc";g.push(new lU(ee.field,$))}let ee=$.endAt?new lM($.endAt.position,$.endAt.inclusive):null,et=$.startAt?new lM($.startAt.position,$.startAt.inclusive):null;$.memoizedTarget=ui($.path,$.collectionGroup,g,$.filters,$.limit,ee,et)}}return $.memoizedTarget}function ux(g,$){$.getFirstInequalityField(),uA(g);let ee=g.filters.concat([$]);return new uE(g.path,g.collectionGroup,g.explicitOrderBy.slice(),ee,g.limit,g.limitType,g.startAt,g.endAt)}function uP(g,$){let ee=g.explicitOrderBy.concat([$]);return new uE(g.path,g.collectionGroup,ee,g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}function uM(g,$,ee){return new uE(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),$,ee,g.startAt,g.endAt)}function uL(g,$){return new uE(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,$,g.endAt)}function uF(g,$){return new uE(g.path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,$)}function uB(g,$){return ul(uk(g),uk($))&&g.limitType===$.limitType}function uj(g){return`${us(uk(g))}|lt:${g.limitType}`}function uU(g){return`Query(target=${uo(uk(g))}; limitType=${g.limitType})`}function uV(g,$){return $.isFoundDocument()&&uq(g,$)&&uz(g,$)&&uG(g,$)&&u$(g,$)}function uq(g,$){let ee=$.key.path;return null!==g.collectionGroup?$.key.hasCollectionId(g.collectionGroup)&&g.path.isPrefixOf(ee):sh.isDocumentKey(g.path)?g.path.isEqual(ee):g.path.isImmediateParentOf(ee)}function uz(g,$){for(let ee of uD(g))if(!ee.field.isKeyField()&&null===$.data.field(ee.field))return!1;return!0}function uG(g,$){for(let ee of g.filters)if(!ee.matches($))return!1;return!0}function u$(g,$){return(!g.startAt||!!lB(g.startAt,uD(g),$))&&(!g.endAt||!!lF(g.endAt,uD(g),$))}function uK(g){return g.collectionGroup||(g.path.length%2==1?g.path.lastSegment():g.path.get(g.path.length-2))}function uW(g){return($,ee)=>{let et=!1;for(let er of uD(g)){let g=uH(er,$,ee);if(0!==g)return g;et=et||er.field.isKeyField()}return 0}}function uH(g,$,ee){let et=g.field.isKeyField()?sh.comparator($.key,ee.key):lP(g.field,$,ee);switch(g.dir){case"asc":return et;case"desc":return -1*et;default:return iG()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(g,$){this.mapKeyFn=g,this.equalsFn=$,this.inner={},this.innerSize=0}get(g){let $=this.mapKeyFn(g),ee=this.inner[$];if(void 0!==ee){for(let[$,et]of ee)if(this.equalsFn($,g))return et}}has(g){return void 0!==this.get(g)}set(g,$){let ee=this.mapKeyFn(g),et=this.inner[ee];if(void 0===et){this.inner[ee]=[[g,$]],this.innerSize++;return}for(let ee=0;ee<et.length;ee++)if(this.equalsFn(et[ee][0],g)){et[ee]=[g,$];return}et.push([g,$]),this.innerSize++}delete(g){let $=this.mapKeyFn(g),ee=this.inner[$];if(void 0===ee)return!1;for(let et=0;et<ee.length;et++)if(this.equalsFn(ee[et][0],g))return 1===ee.length?delete this.inner[$]:ee.splice(et,1),this.innerSize--,!0;return!1}forEach(g){as(this.inner,($,ee)=>{for(let[$,et]of ee)g($,et)})}isEmpty(){return ao(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uY=new al(sh.comparator);function uJ(){return uY}let uX=new al(sh.comparator);function uZ(...g){let $=uX;for(let ee of g)$=$.insert(ee.key,ee);return $}function u0(){return u4()}function u1(g){let $=uX;return g.forEach((g,ee)=>$=$.insert(g,ee.overlayedDocument)),$}function u2(){return u4()}function u3(){return u4()}function u4(){return new uQ(g=>g.toString(),(g,$)=>g.isEqual($))}let u6=new al(sh.comparator);function u5(){return u6}let u9=new af(sh.comparator);function u8(...g){let $=u9;for(let ee of g)$=$.add(ee);return $}let u7=new af(i9);function ce(){return u7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(g,$){if(g.useProto3Json){if(isNaN($))return{doubleValue:"NaN"};if($===1/0)return{doubleValue:"Infinity"};if($===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:az($)?"-0":$}}function cr(g){return{integerValue:""+g}}function cn(g,$){return aG($)?cr($):ct(g,$)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this._=void 0}}function cs(g,$,ee){return g instanceof ch?aP(ee,$):g instanceof cp?cf(g,$):g instanceof cm?cy(g,$):cS(g,$)}function co(g,$,ee){return g instanceof cp?cf(g,$):g instanceof cm?cy(g,$):ee}function cl(g,$){return g instanceof cv?lS($)?$:{integerValue:0}:null}function cu(g,$){return g instanceof cp&&$ instanceof cp||g instanceof cm&&$ instanceof cm?i8(g.elements,$.elements,aQ):g instanceof cv&&$ instanceof cv?aQ(g.operand,$.operand):g instanceof ch&&$ instanceof ch}class ch extends ci{}class cp extends ci{constructor(g){super(),this.elements=g}}function cf(g,$){let ee=cE($);for(let $ of g.elements)ee.some(g=>aQ(g,$))||ee.push($);return{arrayValue:{values:ee}}}class cm extends ci{constructor(g){super(),this.elements=g}}function cy(g,$){let ee=cE($);for(let $ of g.elements)ee=ee.filter(g=>!aQ(g,$));return{arrayValue:{values:ee}}}class cv extends ci{constructor(g,$){super(),this.serializer=g,this.operand=$}}function cS(g,$){let ee=cl(g,$),et=cT(ee)+cT(g.operand);return ly(ee)&&ly(g.operand)?cr(et):ct(g.serializer,et)}function cT(g){return aO(g.integerValue||g.doubleValue)}function cE(g){return lT(g)&&g.arrayValue.values?g.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(g,$){this.field=g,this.transform=$}}function cC(g,$){return g.field.isEqual($.field)&&cu(g.transform,$.transform)}function c_(g,$){return void 0===g&&void 0===$||!!g&&!!$&&i8(g,$,(g,$)=>cC(g,$))}class cI{constructor(g,$){this.version=g,this.transformResults=$}}class cO{constructor(g,$){this.updateTime=g,this.exists=$}static none(){return new cO}static exists(g){return new cO(void 0,g)}static updateTime(g){return new cO(g)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(g){return this.exists===g.exists&&(this.updateTime?!!g.updateTime&&this.updateTime.isEqual(g.updateTime):!g.updateTime)}}function cA(g,$){return void 0!==g.updateTime?$.isFoundDocument()&&$.version.isEqual(g.updateTime):void 0===g.exists||g.exists===$.isFoundDocument()}class cN{}function cR(g,$){if(!g.hasLocalMutations||$&&0===$.fields.length)return null;if(null===$)return g.isNoDocument()?new cG(g.key,cO.none()):new cM(g.key,g.data,cO.none());{let ee=g.data,et=lD.empty(),er=new af(su.comparator);for(let g of $.fields)if(!er.has(g)){let $=ee.field(g);null===$&&g.length>1&&(g=g.popLast(),$=ee.field(g)),null===$?et.delete(g):et.set(g,$),er=er.add(g)}return new cB(g.key,et,new av(er.toArray()),cO.none())}}function cD(g,$,ee){g instanceof cM?cL(g,$,ee):g instanceof cB?cj(g,$,ee):c$(g,$,ee)}function ck(g,$,ee,et){return g instanceof cM?cF(g,$,ee,et):g instanceof cB?cU(g,$,ee,et):cK(g,$,ee)}function cx(g,$){let ee=null;for(let et of g.fieldTransforms){let g=$.data.field(et.field),er=cl(et.transform,g||null);null!=er&&(null===ee&&(ee=lD.empty()),ee.set(et.field,er))}return ee||null}function cP(g,$){return!!(g.type===$.type&&g.key.isEqual($.key)&&g.precondition.isEqual($.precondition)&&c_(g.fieldTransforms,$.fieldTransforms))&&(0===g.type?g.value.isEqual($.value):1!==g.type||g.data.isEqual($.data)&&g.fieldMask.isEqual($.fieldMask))}class cM extends cN{constructor(g,$,ee,et=[]){super(),this.key=g,this.value=$,this.precondition=ee,this.fieldTransforms=et,this.type=0}getFieldMask(){return null}}function cL(g,$,ee){let et=g.value.clone(),er=cq(g.fieldTransforms,$,ee.transformResults);et.setAll(er),$.convertToFoundDocument(ee.version,et).setHasCommittedMutations()}function cF(g,$,ee,et){if(!cA(g.precondition,$))return ee;let er=g.value.clone(),en=cz(g.fieldTransforms,et,$);return er.setAll(en),$.convertToFoundDocument($.version,er).setHasLocalMutations(),null}class cB extends cN{constructor(g,$,ee,et,er=[]){super(),this.key=g,this.data=$,this.fieldMask=ee,this.precondition=et,this.fieldTransforms=er,this.type=1}getFieldMask(){return this.fieldMask}}function cj(g,$,ee){if(!cA(g.precondition,$)){$.convertToUnknownDocument(ee.version);return}let et=cq(g.fieldTransforms,$,ee.transformResults),er=$.data;er.setAll(cV(g)),er.setAll(et),$.convertToFoundDocument(ee.version,er).setHasCommittedMutations()}function cU(g,$,ee,et){if(!cA(g.precondition,$))return ee;let er=cz(g.fieldTransforms,et,$),en=$.data;return(en.setAll(cV(g)),en.setAll(er),$.convertToFoundDocument($.version,en).setHasLocalMutations(),null===ee)?null:ee.unionWith(g.fieldMask.fields).unionWith(g.fieldTransforms.map(g=>g.field))}function cV(g){let $=new Map;return g.fieldMask.fields.forEach(ee=>{if(!ee.isEmpty()){let et=g.data.field(ee);$.set(ee,et)}}),$}function cq(g,$,ee){let et=new Map;i$(g.length===ee.length);for(let er=0;er<ee.length;er++){let en=g[er],ei=en.transform,es=$.data.field(en.field);et.set(en.field,co(ei,es,ee[er]))}return et}function cz(g,$,ee){let et=new Map;for(let er of g){let g=er.transform,en=ee.data.field(er.field);et.set(er.field,cs(g,en,$))}return et}class cG extends cN{constructor(g,$){super(),this.key=g,this.precondition=$,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function c$(g,$,ee){$.convertToNoDocument(ee.version).setHasCommittedMutations()}function cK(g,$,ee){return cA(g.precondition,$)?($.convertToNoDocument($.version).setHasLocalMutations(),null):ee}class cW extends null{constructor(g,$){super(),this.key=g,this.precondition=$,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(g,$,ee,et){this.batchId=g,this.localWriteTime=$,this.baseMutations=ee,this.mutations=et}applyToRemoteDocument(g,$){let ee=$.mutationResults;for(let $=0;$<this.mutations.length;$++){let et=this.mutations[$];et.key.isEqual(g.key)&&cD(et,g,ee[$])}}applyToLocalView(g,$){for(let ee of this.baseMutations)ee.key.isEqual(g.key)&&($=ck(ee,g,$,this.localWriteTime));for(let ee of this.mutations)ee.key.isEqual(g.key)&&($=ck(ee,g,$,this.localWriteTime));return $}applyToLocalDocumentSet(g,$){let ee=u3();return this.mutations.forEach(et=>{let er=g.get(et.key),en=er.overlayedDocument,ei=this.applyToLocalView(en,er.mutatedFields),es=cR(en,ei=$.has(et.key)?null:ei);null!==es&&ee.set(et.key,es),en.isValidDocument()||en.convertToNoDocument(sn.min())}),ee}keys(){return this.mutations.reduce((g,$)=>g.add($.key),u8())}isEqual(g){return this.batchId===g.batchId&&i8(this.mutations,g.mutations,(g,$)=>cP(g,$))&&i8(this.baseMutations,g.baseMutations,(g,$)=>cP(g,$))}}class cQ{constructor(g,$,ee,et){this.batch=g,this.commitVersion=$,this.mutationResults=ee,this.docVersions=et}static from(g,$,ee){i$(g.mutations.length===ee.length);let et=u5(),er=g.mutations;for(let g=0;g<er.length;g++)et=et.insert(er[g].key,ee[g].version);return new cQ(g,$,ee,et)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(g,$){this.largestBatchId=g,this.mutation=$}getKey(){return this.mutation.key}isEqual(g){return null!==g&&this.mutation===g.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(g,$){this.count=g,this.unchangedNames=$}}function cX(g){switch(g){case iW.OK:return iG();case iW.CANCELLED:case iW.UNKNOWN:case iW.DEADLINE_EXCEEDED:case iW.RESOURCE_EXHAUSTED:case iW.INTERNAL:case iW.UNAVAILABLE:case iW.UNAUTHENTICATED:return!1;case iW.INVALID_ARGUMENT:case iW.NOT_FOUND:case iW.ALREADY_EXISTS:case iW.PERMISSION_DENIED:case iW.FAILED_PRECONDITION:case iW.ABORTED:case iW.OUT_OF_RANGE:case iW.UNIMPLEMENTED:case iW.DATA_LOSS:return!0;default:return iG()}}function cZ(g){return cX(g)&&g!==iW.ABORTED}function c0(g){if(void 0===g)return iV("GRPC error has no .code"),iW.UNKNOWN;switch(g){case ei.OK:return iW.OK;case ei.CANCELLED:return iW.CANCELLED;case ei.UNKNOWN:return iW.UNKNOWN;case ei.DEADLINE_EXCEEDED:return iW.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return iW.RESOURCE_EXHAUSTED;case ei.INTERNAL:return iW.INTERNAL;case ei.UNAVAILABLE:return iW.UNAVAILABLE;case ei.UNAUTHENTICATED:return iW.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return iW.INVALID_ARGUMENT;case ei.NOT_FOUND:return iW.NOT_FOUND;case ei.ALREADY_EXISTS:return iW.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return iW.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return iW.FAILED_PRECONDITION;case ei.ABORTED:return iW.ABORTED;case ei.OUT_OF_RANGE:return iW.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return iW.UNIMPLEMENTED;case ei.DATA_LOSS:return iW.DATA_LOSS;default:return iG()}}!function(g){g[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS"}(ei||(ei={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return c5}static getOrCreateInstance(){return null===c5&&(c5=new c6),c5}onExistenceFilterMismatch(g){let $=Symbol();return this.onExistenceFilterMismatchCallbacks.set($,g),()=>this.onExistenceFilterMismatchCallbacks.delete($)}notifyOnExistenceFilterMismatch(g){this.onExistenceFilterMismatchCallbacks.forEach($=>$(g))}}let c5=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(){return new ep.TextEncoder}function c8(){return new TextDecoder("utf-8")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c7=new iN([4294967295,4294967295],0);function he(g){let $=c9().encode(g),ee=new iA;return ee.update($),new Uint8Array(ee.digest())}function ht(g){let $=new DataView(g.buffer),ee=$.getUint32(0,!0),et=$.getUint32(4,!0),er=$.getUint32(8,!0),en=$.getUint32(12,!0);return[new iN([ee,et],0),new iN([er,en],0)]}class hr{constructor(g,$,ee){if(this.bitmap=g,this.padding=$,this.hashCount=ee,$<0||$>=8)throw new hn(`Invalid padding: ${$}`);if(ee<0||g.length>0&&0===this.hashCount)throw new hn(`Invalid hash count: ${ee}`);if(0===g.length&&0!==$)throw new hn(`Invalid padding when bitmap length is 0: ${$}`);this.bitCount=8*g.length-$,this.bitCountInInteger=iN.fromNumber(this.bitCount)}getBitIndex(g,$,ee){let et=g.add($.multiply(iN.fromNumber(ee)));return 1===et.compare(c7)&&(et=new iN([et.getBits(0),et.getBits(1)],0)),et.modulo(this.bitCountInInteger).toNumber()}isBitSet(g){return(this.bitmap[Math.floor(g/8)]&1<<g%8)!=0}mightContain(g){if(0===this.bitCount)return!1;let[$,ee]=ht(he(g));for(let g=0;g<this.hashCount;g++){let et=this.getBitIndex($,ee,g);if(!this.isBitSet(et))return!1}return!0}static create(g,$,ee){let et=g%8==0?0:8-g%8,er=new hr(new Uint8Array(Math.ceil(g/8)),et,$);return ee.forEach(g=>er.insert(g)),er}insert(g){if(0===this.bitCount)return;let[$,ee]=ht(he(g));for(let g=0;g<this.hashCount;g++){let et=this.getBitIndex($,ee,g);this.setBit(et)}}setBit(g){let $=Math.floor(g/8),ee=g%8;this.bitmap[$]|=1<<ee}}class hn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(g,$,ee,et,er){this.snapshotVersion=g,this.targetChanges=$,this.targetMismatches=ee,this.documentUpdates=et,this.resolvedLimboDocuments=er}static createSynthesizedRemoteEventForCurrentChange(g,$,ee){let et=new Map;return et.set(g,ho.createSynthesizedTargetChangeForCurrentChange(g,$,ee)),new hs(sn.min(),et,new al(i9),uJ(),u8())}}class ho{constructor(g,$,ee,et,er){this.resumeToken=g,this.current=$,this.addedDocuments=ee,this.modifiedDocuments=et,this.removedDocuments=er}static createSynthesizedTargetChangeForCurrentChange(g,$,ee){return new ho(ee,$,u8(),u8(),u8())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(g,$,ee,et){this.updatedTargetIds=g,this.removedTargetIds=$,this.key=ee,this.newDoc=et}}class hu{constructor(g,$){this.targetId=g,this.existenceFilter=$}}class hh{constructor(g,$,ee=aE.EMPTY_BYTE_STRING,et=null){this.state=g,this.targetIds=$,this.resumeToken=ee,this.cause=et}}class hp{constructor(){this.pendingResponses=0,this.documentChanges=hy(),this._resumeToken=aE.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(g){g.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=g)}toTargetChange(){let g=u8(),$=u8(),ee=u8();return this.documentChanges.forEach((et,er)=>{switch(er){case 0:g=g.add(et);break;case 2:$=$.add(et);break;case 1:ee=ee.add(et);break;default:iG()}}),new ho(this._resumeToken,this._current,g,$,ee)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=hy()}addDocumentChange(g,$){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(g,$)}removeDocumentChange(g){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(g)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let hf="WatchChangeAggregator";class hg{constructor(g){this.metadataProvider=g,this.targetStates=new Map,this.pendingDocumentUpdates=uJ(),this.pendingDocumentTargetMapping=hm(),this.pendingTargetResets=new al(i9)}handleDocumentChange(g){for(let $ of g.updatedTargetIds)g.newDoc&&g.newDoc.isFoundDocument()?this.addDocumentToTarget($,g.newDoc):this.removeDocumentFromTarget($,g.key,g.newDoc);for(let $ of g.removedTargetIds)this.removeDocumentFromTarget($,g.key,g.newDoc)}handleTargetChange(g){this.forEachTarget(g,$=>{let ee=this.ensureTargetState($);switch(g.state){case 0:this.isActiveTarget($)&&ee.updateResumeToken(g.resumeToken);break;case 1:ee.recordTargetResponse(),ee.isPending||ee.clearPendingChanges(),ee.updateResumeToken(g.resumeToken);break;case 2:ee.recordTargetResponse(),ee.isPending||this.removeTarget($);break;case 3:this.isActiveTarget($)&&(ee.markCurrent(),ee.updateResumeToken(g.resumeToken));break;case 4:this.isActiveTarget($)&&(this.resetTarget($),ee.updateResumeToken(g.resumeToken));break;default:iG()}})}forEachTarget(g,$){g.targetIds.length>0?g.targetIds.forEach($):this.targetStates.forEach((g,ee)=>{this.isActiveTarget(ee)&&$(ee)})}handleExistenceFilter(g){var $;let ee=g.targetId,et=g.existenceFilter.count,er=this.targetDataForActiveTarget(ee);if(er){let en=er.target;if(uu(en)){if(0===et){let g=new sh(en.path);this.removeDocumentFromTarget(ee,g,lx.newNoDocument(g,sn.min()))}else i$(1===et)}else{let er=this.getCurrentDocumentCountForTarget(ee);if(er!==et){let et=this.applyBloomFilter(g,er);if(0!==et){this.resetTarget(ee);let g=2===et?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(ee,g)}null===($=c6.instance)||void 0===$||$.notifyOnExistenceFilterMismatch(hv(et,er,g.existenceFilter))}}}}applyBloomFilter(g,$){let ee,et;let{unchangedNames:er,count:en}=g.existenceFilter;if(!er||!er.bits)return 1;let{bits:{bitmap:ei="",padding:es=0},hashCount:eo=0}=er;try{ee=aA(ei).toUint8Array()}catch(g){if(g instanceof c4)return iq("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw g}try{et=new hr(ee,es,eo)}catch(g){return g instanceof hn?iq("BloomFilter error: ",g):iq("Applying bloom filter failed: ",g),1}return 0===et.bitCount?1:en!==$-this.filterRemovedDocuments(g.targetId,et)?2:0}filterRemovedDocuments(g,$){let ee=this.metadataProvider.getRemoteKeysForTarget(g),et=0;return ee.forEach(ee=>{let er=this.metadataProvider.getDatabaseId(),en=`projects/${er.projectId}/databases/${er.database}/documents/${ee.path.canonicalString()}`;!$.mightContain(en)&&(this.removeDocumentFromTarget(g,ee,null),et++)}),et}createRemoteEvent(g){let $=new Map;this.targetStates.forEach((ee,et)=>{let er=this.targetDataForActiveTarget(et);if(er){if(ee.current&&uu(er.target)){let $=new sh(er.target.path);null!==this.pendingDocumentUpdates.get($)||this.targetContainsDocument(et,$)||this.removeDocumentFromTarget(et,$,lx.newNoDocument($,g))}ee.hasPendingChanges&&($.set(et,ee.toTargetChange()),ee.clearPendingChanges())}});let ee=u8();this.pendingDocumentTargetMapping.forEach((g,$)=>{let et=!0;$.forEachWhile(g=>{let $=this.targetDataForActiveTarget(g);return!$||"TargetPurposeLimboResolution"===$.purpose||(et=!1,!1)}),et&&(ee=ee.add(g))}),this.pendingDocumentUpdates.forEach(($,ee)=>ee.setReadTime(g));let et=new hs(g,$,this.pendingTargetResets,this.pendingDocumentUpdates,ee);return this.pendingDocumentUpdates=uJ(),this.pendingDocumentTargetMapping=hm(),this.pendingTargetResets=new al(i9),et}addDocumentToTarget(g,$){if(!this.isActiveTarget(g))return;let ee=this.targetContainsDocument(g,$.key)?2:0;this.ensureTargetState(g).addDocumentChange($.key,ee),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert($.key,$),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert($.key,this.ensureDocumentTargetMapping($.key).add(g))}removeDocumentFromTarget(g,$,ee){if(!this.isActiveTarget(g))return;let et=this.ensureTargetState(g);this.targetContainsDocument(g,$)?et.addDocumentChange($,1):et.removeDocumentChange($),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert($,this.ensureDocumentTargetMapping($).delete(g)),ee&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert($,ee))}removeTarget(g){this.targetStates.delete(g)}getCurrentDocumentCountForTarget(g){let $=this.ensureTargetState(g).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(g).size+$.addedDocuments.size-$.removedDocuments.size}recordPendingTargetRequest(g){this.ensureTargetState(g).recordPendingTargetRequest()}ensureTargetState(g){let $=this.targetStates.get(g);return $||($=new hp,this.targetStates.set(g,$)),$}ensureDocumentTargetMapping(g){let $=this.pendingDocumentTargetMapping.get(g);return $||($=new af(i9),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(g,$)),$}isActiveTarget(g){let $=null!==this.targetDataForActiveTarget(g);return $||iU(hf,"Detected inactive target",g),$}targetDataForActiveTarget(g){let $=this.targetStates.get(g);return $&&$.isPending?null:this.metadataProvider.getTargetDataForTarget(g)}resetTarget(g){this.targetStates.set(g,new hp),this.metadataProvider.getRemoteKeysForTarget(g).forEach($=>{this.removeDocumentFromTarget(g,$,null)})}targetContainsDocument(g,$){return this.metadataProvider.getRemoteKeysForTarget(g).has($)}}function hm(){return new al(sh.comparator)}function hy(){return new al(sh.comparator)}function hv(g,$,ee){var et,er,en,ei,es,eo;let eu={localCacheCount:$,existenceFilterCount:ee.count},eh=ee.unchangedNames;return eh&&(eu.bloomFilter={applied:0===g,hashCount:null!==(et=null==eh?void 0:eh.hashCount)&&void 0!==et?et:0,bitmapLength:null!==(ei=null===(en=null===(er=null==eh?void 0:eh.bits)||void 0===er?void 0:er.bitmap)||void 0===en?void 0:en.length)&&void 0!==ei?ei:0,padding:null!==(eo=null===(es=null==eh?void 0:eh.bits)||void 0===es?void 0:es.padding)&&void 0!==eo?eo:0}),eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hS=(()=>{let g={};return g.asc="ASCENDING",g.desc="DESCENDING",g})(),hT=(()=>{let g={};return g["<"]="LESS_THAN",g["<="]="LESS_THAN_OR_EQUAL",g[">"]="GREATER_THAN",g[">="]="GREATER_THAN_OR_EQUAL",g["=="]="EQUAL",g["!="]="NOT_EQUAL",g["array-contains"]="ARRAY_CONTAINS",g.in="IN",g["not-in"]="NOT_IN",g["array-contains-any"]="ARRAY_CONTAINS_ANY",g})(),hE=(()=>{let g={};return g.and="AND",g.or="OR",g})();class hw{constructor(g,$){this.databaseId=g,this.useProto3Json=$}}function hC(g){return new iH(void 0===g.code?iW.UNKNOWN:c0(g.code),g.message||"")}function h_(g,$){return g.useProto3Json||aq($)?$:{value:$}}function hI(g){let $;return aq($="object"==typeof g?g.value:g)?null:$}function hO(g,$){if(!g.useProto3Json)return{seconds:""+$.seconds,nanos:$.nanoseconds};{let g=new Date(1e3*$.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),ee=("000000000"+$.nanoseconds).slice(-9);return`${g}.${ee}Z`}}function hA(g){let $=aI(g);return new sr($.seconds,$.nanos)}function hN(g,$){return g.useProto3Json?$.toBase64():$.toUint8Array()}function hR(g,$){return g.useProto3Json?(i$(void 0===$||"string"==typeof $),aE.fromBase64String($||"")):(i$(void 0===$||$ instanceof Uint8Array),aE.fromUint8Array($||new Uint8Array))}function hD(g,$){return hO(g,$.toTimestamp())}function hk(g){return i$(!!g),sn.fromTimestamp(hA(g))}function hx(g,$){return hU(g).child("documents").child($).canonicalString()}function hP(g){let $=so.fromString(g);return i$(dF($)),$}function hM(g,$){return hx(g.databaseId,$.path)}function hL(g,$){let ee=hP($);if(ee.get(1)!==g.databaseId.projectId)throw new iH(iW.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+ee.get(1)+" vs "+g.databaseId.projectId);if(ee.get(3)!==g.databaseId.database)throw new iH(iW.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+ee.get(3)+" vs "+g.databaseId.database);return new sh(hV(ee))}function hF(g,$){return hx(g.databaseId,$)}function hB(g){let $=hP(g);return 4===$.length?so.emptyPath():hV($)}function hj(g){return new so(["projects",g.databaseId.projectId,"databases",g.databaseId.database]).canonicalString()}function hU(g){return new so(["projects",g.projectId,"databases",g.database])}function hV(g){return i$(g.length>4&&"documents"===g.get(4)),g.popFirst(5)}function hq(g,$,ee){return{name:hM(g,$),fields:ee.value.mapValue.fields}}function hz(g,$){return{name:hM(g,$.key),fields:$.data.value.mapValue.fields,updateTime:hO(g,$.version.toTimestamp()),createTime:hO(g,$.createTime.toTimestamp())}}function hG(g,$,ee){let et=hL(g,$.name),er=hk($.updateTime),en=$.createTime?hk($.createTime):sn.min(),ei=new lD({mapValue:{fields:$.fields}}),es=lx.newFoundDocument(et,er,en,ei);return ee&&es.setHasCommittedMutations(),ee?es.setHasCommittedMutations():es}function h$(g,$){i$(!!$.found),$.found.name,$.found.updateTime;let ee=hL(g,$.found.name),et=hk($.found.updateTime),er=$.found.createTime?hk($.found.createTime):sn.min(),en=new lD({mapValue:{fields:$.found.fields}});return lx.newFoundDocument(ee,et,er,en)}function hK(g,$){i$(!!$.missing),i$(!!$.readTime);let ee=hL(g,$.missing),et=hk($.readTime);return lx.newNoDocument(ee,et)}function hW(g,$){return"found"in $?h$(g,$):"missing"in $?hK(g,$):iG()}function hH(g,$){let ee;if("targetChange"in $){$.targetChange;let et=hQ($.targetChange.targetChangeType||"NO_CHANGE"),er=$.targetChange.targetIds||[],en=hR(g,$.targetChange.resumeToken),ei=$.targetChange.cause;ee=new hh(et,er,en,ei&&hC(ei)||null)}else if("documentChange"in $){$.documentChange;let et=$.documentChange;et.document,et.document.name,et.document.updateTime;let er=hL(g,et.document.name),en=hk(et.document.updateTime),ei=et.document.createTime?hk(et.document.createTime):sn.min(),es=new lD({mapValue:{fields:et.document.fields}}),eo=lx.newFoundDocument(er,en,ei,es);ee=new hl(et.targetIds||[],et.removedTargetIds||[],eo.key,eo)}else if("documentDelete"in $){$.documentDelete;let et=$.documentDelete;et.document;let er=hL(g,et.document),en=et.readTime?hk(et.readTime):sn.min(),ei=lx.newNoDocument(er,en);ee=new hl([],et.removedTargetIds||[],ei.key,ei)}else if("documentRemove"in $){$.documentRemove;let et=$.documentRemove;et.document;let er=hL(g,et.document);ee=new hl([],et.removedTargetIds||[],er,null)}else{if(!("filter"in $))return iG();$.filter;let g=$.filter;g.targetId;let{count:et=0,unchangedNames:er}=g,en=new cJ(et,er);ee=new hu(g.targetId,en)}return ee}function hQ(g){return"NO_CHANGE"===g?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:iG()}function hY(g){if(!("targetChange"in g))return sn.min();let $=g.targetChange;return $.targetIds&&$.targetIds.length||!$.readTime?sn.min():hk($.readTime)}function hJ(g,$){let ee;if($ instanceof cM)ee={update:hq(g,$.key,$.value)};else if($ instanceof cG)ee={delete:hM(g,$.key)};else if($ instanceof cB)ee={update:hq(g,$.key,$.data),updateMask:dM($.fieldMask)};else{if(!($ instanceof cW))return iG();ee={verify:hM(g,$.key)}}return $.fieldTransforms.length>0&&(ee.updateTransforms=$.fieldTransforms.map($=>h3(g,$))),$.precondition.isNone||(ee.currentDocument=hZ(g,$.precondition)),ee}function hX(g,$){let ee=$.currentDocument?h0($.currentDocument):cO.none(),et=$.updateTransforms?$.updateTransforms.map($=>h4(g,$)):[];if($.update){$.update.name;let er=hL(g,$.update.name),en=new lD({mapValue:{fields:$.update.fields}});return $.updateMask?new cB(er,en,dL($.updateMask),ee,et):new cM(er,en,ee,et)}return $.delete?new cG(hL(g,$.delete),ee):$.verify?new cW(hL(g,$.verify),ee):iG()}function hZ(g,$){return void 0!==$.updateTime?{updateTime:hD(g,$.updateTime)}:void 0!==$.exists?{exists:$.exists}:iG()}function h0(g){return void 0!==g.updateTime?cO.updateTime(hk(g.updateTime)):void 0!==g.exists?cO.exists(g.exists):cO.none()}function h1(g,$){let ee=g.updateTime?hk(g.updateTime):hk($);return ee.isEqual(sn.min())&&(ee=hk($)),new cI(ee,g.transformResults||[])}function h2(g,$){return g&&g.length>0?(i$(void 0!==$),g.map(g=>h1(g,$))):[]}function h3(g,$){let ee=$.transform;if(ee instanceof ch)return{fieldPath:$.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ee instanceof cp)return{fieldPath:$.field.canonicalString(),appendMissingElements:{values:ee.elements}};if(ee instanceof cm)return{fieldPath:$.field.canonicalString(),removeAllFromArray:{values:ee.elements}};if(ee instanceof cv)return{fieldPath:$.field.canonicalString(),increment:ee.operand};throw iG()}function h4(g,$){let ee=null;return"setToServerValue"in $?(i$("REQUEST_TIME"===$.setToServerValue),ee=new ch):"appendMissingElements"in $?ee=new cp($.appendMissingElements.values||[]):"removeAllFromArray"in $?ee=new cm($.removeAllFromArray.values||[]):"increment"in $?ee=new cv(g,$.increment):iG(),new cw(su.fromServerFormat($.fieldPath),ee)}function h6(g,$){return{documents:[hF(g,$.path)]}}function h5(g){return i$(1===g.documents.length),uk(uC(hB(g.documents[0])))}function h9(g,$){let ee={structuredQuery:{}},et=$.path;null!==$.collectionGroup?(ee.parent=hF(g,et),ee.structuredQuery.from=[{collectionId:$.collectionGroup,allDescendants:!0}]):(ee.parent=hF(g,et.popLast()),ee.structuredQuery.from=[{collectionId:et.lastSegment()}]);let er=di($.filters);er&&(ee.structuredQuery.where=er);let en=du($.orderBy);en&&(ee.structuredQuery.orderBy=en);let ei=h_(g,$.limit);return null!==ei&&(ee.structuredQuery.limit=ei),$.startAt&&(ee.structuredQuery.startAt=dp($.startAt)),$.endAt&&(ee.structuredQuery.endAt=df($.endAt)),ee}function h8(g,$,ee){let et=h9(g,$),er={},en=[],ei=0;return ee.forEach(g=>{let $=`aggregate_${ei++}`;er[$]=g.alias,"count"===g.aggregateType?en.push({alias:$,count:{}}):"avg"===g.aggregateType?en.push({alias:$,avg:{field:d_(g.fieldPath)}}):"sum"===g.aggregateType&&en.push({alias:$,sum:{field:d_(g.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:en,structuredQuery:et.structuredQuery},parent:et.parent},aliasMap:er}}function h7(g){let $=hB(g.parent),ee=g.structuredQuery,et=ee.from?ee.from.length:0,er=null;if(et>0){i$(1===et);let g=ee.from[0];g.allDescendants?er=g.collectionId:$=$.child(g.collectionId)}let en=[];ee.where&&(en=ds(ee.where));let ei=[];ee.orderBy&&(ei=dh(ee.orderBy));let es=null;ee.limit&&(es=hI(ee.limit));let eo=null;ee.startAt&&(eo=dg(ee.startAt));let eu=null;return ee.endAt&&(eu=dm(ee.endAt)),uw($,er,ei,en,es,"F",eo,eu)}function de(g){return uk(h7(g))}function dt(g,$){let ee=dr($.purpose);return null==ee?null:{"goog-listen-tags":ee}}function dr(g){switch(g){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return iG()}}function dn(g,$){let ee;let et=$.target;if((ee=uu(et)?{documents:h6(g,et)}:{query:h9(g,et)}).targetId=$.targetId,$.resumeToken.approximateByteSize()>0){ee.resumeToken=hN(g,$.resumeToken);let et=h_(g,$.expectedCount);null!==et&&(ee.expectedCount=et)}else if($.snapshotVersion.compareTo(sn.min())>0){ee.readTime=hO(g,$.snapshotVersion.toTimestamp());let et=h_(g,$.expectedCount);null!==et&&(ee.expectedCount=et)}return ee}function di(g){if(0!==g.length)return dN(lK.create(g,"and"))}function ds(g){let $=dl(g);return $ instanceof lK&&lQ($)?$.getFilters():[$]}function dl(g){return void 0!==g.unaryFilter?dk(g):void 0!==g.fieldFilter?dx(g):void 0!==g.compositeFilter?dP(g):iG()}function du(g){if(0!==g.length)return g.map(g=>dO(g))}function dh(g){return g.map(g=>dA(g))}function dp(g){return{before:g.inclusive,values:g.position}}function df(g){return{before:!g.inclusive,values:g.position}}function dg(g){let $=!!g.before;return new lM(g.values||[],$)}function dm(g){let $=!g.before;return new lM(g.values||[],$)}function dy(g){return hS[g]}function dS(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function dT(g){return hT[g]}function dE(g){return hE[g]}function dw(g){switch(g){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return iG()}}function dC(g){switch(g){case"AND":return"and";case"OR":return"or";default:return iG()}}function d_(g){return{fieldPath:g.canonicalString()}}function dI(g){return su.fromServerFormat(g.fieldPath)}function dO(g){return{field:d_(g.field),direction:dy(g.dir)}}function dA(g){return new lU(dI(g.field),dS(g.direction))}function dN(g){return g instanceof l$?dD(g):g instanceof lK?dR(g):iG()}function dR(g){let $=g.getFilters().map(g=>dN(g));return 1===$.length?$[0]:{compositeFilter:{op:dE(g.op),filters:$}}}function dD(g){if("=="===g.op){if(lw(g.value))return{unaryFilter:{field:d_(g.field),op:"IS_NAN"}};if(lE(g.value))return{unaryFilter:{field:d_(g.field),op:"IS_NULL"}}}else if("!="===g.op){if(lw(g.value))return{unaryFilter:{field:d_(g.field),op:"IS_NOT_NAN"}};if(lE(g.value))return{unaryFilter:{field:d_(g.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:d_(g.field),op:dT(g.op),value:g.value}}}function dk(g){switch(g.unaryFilter.op){case"IS_NAN":let $=dI(g.unaryFilter.field);return l$.create($,"==",{doubleValue:NaN});case"IS_NULL":let ee=dI(g.unaryFilter.field);return l$.create(ee,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let et=dI(g.unaryFilter.field);return l$.create(et,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let er=dI(g.unaryFilter.field);return l$.create(er,"!=",{nullValue:"NULL_VALUE"});default:return iG()}}function dx(g){return l$.create(dI(g.fieldFilter.field),dw(g.fieldFilter.op),g.fieldFilter.value)}function dP(g){return lK.create(g.compositeFilter.filters.map(g=>dl(g)),dC(g.compositeFilter.op))}function dM(g){let $=[];return g.fields.forEach(g=>$.push(g.canonicalString())),{fieldPaths:$}}function dL(g){return new av((g.fieldPaths||[]).map(g=>su.fromServerFormat(g)))}function dF(g){return g.length>=4&&"projects"===g.get(0)&&"databases"===g.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(g,$,ee,et,er=sn.min(),en=sn.min(),ei=aE.EMPTY_BYTE_STRING,es=null){this.target=g,this.targetId=$,this.purpose=ee,this.sequenceNumber=et,this.snapshotVersion=er,this.lastLimboFreeSnapshotVersion=en,this.resumeToken=ei,this.expectedCount=es}withSequenceNumber(g){return new dB(this.target,this.targetId,this.purpose,g,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(g,$){return new dB(this.target,this.targetId,this.purpose,this.sequenceNumber,$,this.lastLimboFreeSnapshotVersion,g,null)}withExpectedCount(g){return new dB(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,g)}withLastLimboFreeSnapshotVersion(g){return new dB(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,g,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(g){this.remoteSerializer=g}}function dU(g,$){let ee;if($.document)ee=hG(g.remoteSerializer,$.document,!!$.hasCommittedMutations);else if($.noDocument){let g=sh.fromSegments($.noDocument.path),et=d$($.noDocument.readTime);ee=lx.newNoDocument(g,et),$.hasCommittedMutations&&ee.setHasCommittedMutations()}else{if(!$.unknownDocument)return iG();let g=sh.fromSegments($.unknownDocument.path),et=d$($.unknownDocument.version);ee=lx.newUnknownDocument(g,et)}return $.readTime&&ee.setReadTime(dz($.readTime)),ee}function dV(g,$){let ee=$.key,et={prefixPath:ee.getCollectionPath().popLast().toArray(),collectionGroup:ee.collectionGroup,documentId:ee.path.lastSegment(),readTime:dq($.readTime),hasCommittedMutations:$.hasCommittedMutations};if($.isFoundDocument())et.document=hz(g.remoteSerializer,$);else if($.isNoDocument())et.noDocument={path:ee.path.toArray(),readTime:dG($.version)};else{if(!$.isUnknownDocument())return iG();et.unknownDocument={path:ee.path.toArray(),version:dG($.version)}}return et}function dq(g){let $=g.toTimestamp();return[$.seconds,$.nanoseconds]}function dz(g){let $=new sr(g[0],g[1]);return sn.fromTimestamp($)}function dG(g){let $=g.toTimestamp();return{seconds:$.seconds,nanoseconds:$.nanoseconds}}function d$(g){let $=new sr(g.seconds,g.nanoseconds);return sn.fromTimestamp($)}function dK(g,$,ee){let et=ee.baseMutations.map($=>hJ(g.remoteSerializer,$)),er=ee.mutations.map($=>hJ(g.remoteSerializer,$));return{userId:$,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:et,mutations:er}}function dW(g,$){let ee=($.baseMutations||[]).map($=>hX(g.remoteSerializer,$));for(let g=0;g<$.mutations.length-1;++g){let ee=$.mutations[g];if(g+1<$.mutations.length&&void 0!==$.mutations[g+1].transform){let et=$.mutations[g+1];ee.updateTransforms=et.transform.fieldTransforms,$.mutations.splice(g+1,1),++g}}let et=$.mutations.map($=>hX(g.remoteSerializer,$)),er=sr.fromMillis($.localWriteTimeMs);return new cH($.batchId,er,ee,et)}function dH(g){let $;let ee=d$(g.readTime),et=void 0!==g.lastLimboFreeSnapshotVersion?d$(g.lastLimboFreeSnapshotVersion):sn.min();return new dB($=dY(g.query)?h5(g.query):de(g.query),g.targetId,"TargetPurposeListen",g.lastListenSequenceNumber,ee,et,aE.fromBase64String(g.resumeToken))}function dQ(g,$){let ee;let et=dG($.snapshotVersion),er=dG($.lastLimboFreeSnapshotVersion);ee=uu($.target)?h6(g.remoteSerializer,$.target):h9(g.remoteSerializer,$.target);let en=$.resumeToken.toBase64();return{targetId:$.targetId,canonicalId:us($.target),readTime:et,resumeToken:en,lastListenSequenceNumber:$.sequenceNumber,lastLimboFreeSnapshotVersion:er,query:ee}}function dY(g){return void 0!==g.documents}function dJ(g){return{id:g.bundleId,createTime:d$(g.createTime),version:g.version}}function dX(g){return{bundleId:g.id,createTime:dG(hk(g.createTime)),version:g.version}}function dZ(g){return{name:g.name,query:d3(g.bundledQuery),readTime:d$(g.readTime)}}function d0(g){return{name:g.name,readTime:dG(hk(g.readTime)),bundledQuery:g.bundledQuery}}function d3(g){let $=h7({parent:g.parent,structuredQuery:g.structuredQuery});return"LAST"===g.limitType?uM($,$.limit,"L"):$}function d4(g){return{name:g.name,query:d3(g.bundledQuery),readTime:hk(g.readTime)}}function d6(g){return{id:g.id,version:g.version,createTime:hk(g.createTime)}}function d5(g,$){return new cY($.largestBatchId,hX(g.remoteSerializer,$.overlayMutation))}function d9(g,$,ee){let[et,er,en]=d8($,ee.mutation.key);return{userId:$,collectionPath:er,documentId:en,collectionGroup:ee.mutation.key.getCollectionGroup(),largestBatchId:ee.largestBatchId,overlayMutation:hJ(g.remoteSerializer,ee.mutation)}}function d8(g,$){let ee=$.path.lastSegment();return[g,s1($.path.popLast()),ee]}function d7(g){return{indexId:g.indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}function pe(g,$){let ee=$?new sC($.sequenceNumber,new sO(d$($.readTime),new sh(s4($.documentKey)),$.largestBatchId)):sC.empty(),et=g.fields.map(([g,$])=>new sE(su.fromServerFormat(g),$));return new sg(g.indexId,g.collectionGroup,et,ee)}function pt(g,$,ee,et){return{indexId:g,uid:$.uid||"",sequenceNumber:ee,readTime:dG(et.readTime),documentKey:s1(et.documentKey.path),largestBatchId:et.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{getBundleMetadata(g,$){return pn(g).get($).next(g=>{if(g)return dJ(g)})}saveBundleMetadata(g,$){return pn(g).put(dX($))}getNamedQuery(g,$){return pi(g).get($).next(g=>{if(g)return dZ(g)})}saveNamedQuery(g,$){return pi(g).put(d0($))}}function pn(g){return an(g,oF)}function pi(g){return an(g,oj)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(g,$){this.serializer=g,this.userId=$}static forUser(g,$){return new ps(g,$.uid||"")}getOverlay(g,$){return po(g).get(d8(this.userId,$)).next(g=>g?d5(this.serializer,g):null)}getOverlays(g,$){let ee=u2();return sk.forEach($,$=>this.getOverlay(g,$).next(g=>{null!==g&&ee.set($,g)})).next(()=>ee)}saveOverlays(g,$,ee){let et=[];return ee.forEach((ee,er)=>{let en=new cY($,er);et.push(this.saveOverlay(g,en))}),sk.waitFor(et)}removeOverlaysForBatchId(g,$,ee){let et=new Set;$.forEach(g=>et.add(s1(g.getCollectionPath())));let er=[];return et.forEach($=>{let et=IDBKeyRange.bound([this.userId,$,ee],[this.userId,$,ee+1],!1,!0);er.push(po(g).deleteAll(o1,et))}),sk.waitFor(er)}getOverlaysForCollection(g,$,ee){let et=u2(),er=s1($),en=IDBKeyRange.bound([this.userId,er,ee],[this.userId,er,Number.POSITIVE_INFINITY],!0);return po(g).loadAll(o1,en).next(g=>{for(let $ of g){let g=d5(this.serializer,$);et.set(g.getKey(),g)}return et})}getOverlaysForCollectionGroup(g,$,ee,et){let er;let en=u2(),ei=IDBKeyRange.bound([this.userId,$,ee],[this.userId,$,Number.POSITIVE_INFINITY],!0);return po(g).iterate({index:o3,range:ei},(g,$,ee)=>{let ei=d5(this.serializer,$);en.size()<et||ei.largestBatchId===er?(en.set(ei.getKey(),ei),er=ei.largestBatchId):ee.done()}).next(()=>en)}saveOverlay(g,$){return po(g).put(d9(this.serializer,this.userId,$))}}function po(g){return an(g,oZ)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl=5,pu=10,ph=13,pp=15,pf=20,pg=25,pm=30,py=37,pv=45,pS=50,pT=55,pE=60,pw=2;class pC{constructor(){}writeIndexValue(g,$){this.writeIndexValueAux(g,$),$.writeInfinity()}writeIndexValueAux(g,$){if("nullValue"in g)this.writeValueTypeLabel($,pl);else if("booleanValue"in g)this.writeValueTypeLabel($,pu),$.writeNumber(g.booleanValue?1:0);else if("integerValue"in g)this.writeValueTypeLabel($,pp),$.writeNumber(aO(g.integerValue));else if("doubleValue"in g){let ee=aO(g.doubleValue);isNaN(ee)?this.writeValueTypeLabel($,ph):(this.writeValueTypeLabel($,pp),az(ee)?$.writeNumber(0):$.writeNumber(ee))}else if("timestampValue"in g){let ee=g.timestampValue;this.writeValueTypeLabel($,pf),"string"==typeof ee?$.writeString(ee):($.writeString(`${ee.seconds||""}`),$.writeNumber(ee.nanos||0))}else if("stringValue"in g)this.writeIndexString(g.stringValue,$),this.writeTruncationMarker($);else if("bytesValue"in g)this.writeValueTypeLabel($,pm),$.writeBytes(aA(g.bytesValue)),this.writeTruncationMarker($);else if("referenceValue"in g)this.writeIndexEntityRef(g.referenceValue,$);else if("geoPointValue"in g){let ee=g.geoPointValue;this.writeValueTypeLabel($,pv),$.writeNumber(ee.latitude||0),$.writeNumber(ee.longitude||0)}else"mapValue"in g?lI(g)?this.writeValueTypeLabel($,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(g.mapValue,$),this.writeTruncationMarker($)):"arrayValue"in g?(this.writeIndexArray(g.arrayValue,$),this.writeTruncationMarker($)):iG()}writeIndexString(g,$){this.writeValueTypeLabel($,pg),this.writeUnlabeledIndexString(g,$)}writeUnlabeledIndexString(g,$){$.writeString(g)}writeIndexMap(g,$){let ee=g.fields||{};for(let g of(this.writeValueTypeLabel($,pT),Object.keys(ee)))this.writeIndexString(g,$),this.writeIndexValueAux(ee[g],$)}writeIndexArray(g,$){let ee=g.values||[];for(let g of(this.writeValueTypeLabel($,pS),ee))this.writeIndexValueAux(g,$)}writeIndexEntityRef(g,$){this.writeValueTypeLabel($,py),sh.fromName(g).path.forEach(g=>{this.writeValueTypeLabel($,pE),this.writeUnlabeledIndexString(g,$)})}writeValueTypeLabel(g,$){g.writeNumber($)}writeTruncationMarker(g){g.writeNumber(pw)}}pC.INSTANCE=new pC;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p_="\uD800",pI="\uDBFF",pO=0,pA=255,pN=1,pR=255,pD=255,pk=0,px=64,pP=8,pM=1024;function pL(g){let $=new DataView(new ArrayBuffer(8));return $.setFloat64(0,g,!1),new Uint8Array($.buffer)}function pF(g){if(0===g)return 8;let $=0;return g>>4==0&&($+=4,g<<=4),g>>6==0&&($+=2,g<<=2),g>>7==0&&($+=1),$}function pB(g){let $=0;for(let ee=0;ee<8;++ee){let et=pF(255&g[ee]);if($+=et,8!==et)break}return $}function pj(g){return Math.ceil((px-pB(g))/pP)}class pU{constructor(){this.buffer=new Uint8Array(pM),this.position=0}writeBytesAscending(g){let $=g[Symbol.iterator](),ee=$.next();for(;!ee.done;)this.writeByteAscending(ee.value),ee=$.next();this.writeSeparatorAscending()}writeBytesDescending(g){let $=g[Symbol.iterator](),ee=$.next();for(;!ee.done;)this.writeByteDescending(ee.value),ee=$.next();this.writeSeparatorDescending()}writeUtf8Ascending(g){for(let $ of g){let g=$.charCodeAt(0);if(g<128)this.writeByteAscending(g);else if(g<2048)this.writeByteAscending(960|g>>>6),this.writeByteAscending(128|63&g);else if($<p_||pI<$)this.writeByteAscending(480|g>>>12),this.writeByteAscending(128|63&g>>>6),this.writeByteAscending(128|63&g);else{let g=$.codePointAt(0);this.writeByteAscending(240|g>>>18),this.writeByteAscending(128|63&g>>>12),this.writeByteAscending(128|63&g>>>6),this.writeByteAscending(128|63&g)}}this.writeSeparatorAscending()}writeUtf8Descending(g){for(let $ of g){let g=$.charCodeAt(0);if(g<128)this.writeByteDescending(g);else if(g<2048)this.writeByteDescending(960|g>>>6),this.writeByteDescending(128|63&g);else if($<p_||pI<$)this.writeByteDescending(480|g>>>12),this.writeByteDescending(128|63&g>>>6),this.writeByteDescending(128|63&g);else{let g=$.codePointAt(0);this.writeByteDescending(240|g>>>18),this.writeByteDescending(128|63&g>>>12),this.writeByteDescending(128|63&g>>>6),this.writeByteDescending(128|63&g)}}this.writeSeparatorDescending()}writeNumberAscending(g){let $=this.toOrderedBits(g),ee=pj($);this.ensureAvailable(1+ee),this.buffer[this.position++]=255&ee;for(let g=$.length-ee;g<$.length;++g)this.buffer[this.position++]=255&$[g]}writeNumberDescending(g){let $=this.toOrderedBits(g),ee=pj($);this.ensureAvailable(1+ee),this.buffer[this.position++]=~(255&ee);for(let g=$.length-ee;g<$.length;++g)this.buffer[this.position++]=~(255&$[g])}writeInfinityAscending(){this.writeEscapedByteAscending(pR),this.writeEscapedByteAscending(pD)}writeInfinityDescending(){this.writeEscapedByteDescending(pR),this.writeEscapedByteDescending(pD)}reset(){this.position=0}seed(g){this.ensureAvailable(g.length),this.buffer.set(g,this.position),this.position+=g.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(g){let $=pL(g),ee=(128&$[0])!=0;$[0]^=ee?255:128;for(let g=1;g<$.length;++g)$[g]^=ee?255:0;return $}writeByteAscending(g){let $=255&g;$===pO?(this.writeEscapedByteAscending(pO),this.writeEscapedByteAscending(pA)):$===pR?(this.writeEscapedByteAscending(pR),this.writeEscapedByteAscending(pk)):this.writeEscapedByteAscending($)}writeByteDescending(g){let $=255&g;$===pO?(this.writeEscapedByteDescending(pO),this.writeEscapedByteDescending(pA)):$===pR?(this.writeEscapedByteDescending(pR),this.writeEscapedByteDescending(pk)):this.writeEscapedByteDescending(g)}writeSeparatorAscending(){this.writeEscapedByteAscending(pO),this.writeEscapedByteAscending(pN)}writeSeparatorDescending(){this.writeEscapedByteDescending(pO),this.writeEscapedByteDescending(pN)}writeEscapedByteAscending(g){this.ensureAvailable(1),this.buffer[this.position++]=g}writeEscapedByteDescending(g){this.ensureAvailable(1),this.buffer[this.position++]=~g}ensureAvailable(g){let $=g+this.position;if($<=this.buffer.length)return;let ee=2*this.buffer.length;ee<$&&(ee=$);let et=new Uint8Array(ee);et.set(this.buffer),this.buffer=et}}class pV{constructor(g){this.orderedCode=g}writeBytes(g){this.orderedCode.writeBytesAscending(g)}writeString(g){this.orderedCode.writeUtf8Ascending(g)}writeNumber(g){this.orderedCode.writeNumberAscending(g)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class pq{constructor(g){this.orderedCode=g}writeBytes(g){this.orderedCode.writeBytesDescending(g)}writeString(g){this.orderedCode.writeUtf8Descending(g)}writeNumber(g){this.orderedCode.writeNumberDescending(g)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class pz{constructor(){this.orderedCode=new pU,this.ascending=new pV(this.orderedCode),this.descending=new pq(this.orderedCode)}seed(g){this.orderedCode.seed(g)}forKind(g){return 0===g?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(g,$,ee,et){this.indexId=g,this.documentKey=$,this.arrayValue=ee,this.directionalValue=et}successor(){let g=this.directionalValue.length,$=0===g||255===this.directionalValue[g-1]?g+1:g,ee=new Uint8Array($);return ee.set(this.directionalValue,0),$!==g?ee.set([0],this.directionalValue.length):++ee[ee.length-1],new pG(this.indexId,this.documentKey,this.arrayValue,ee)}}function p$(g,$){let ee=g.indexId-$.indexId;return 0!==ee||0!==(ee=pK(g.arrayValue,$.arrayValue))||0!==(ee=pK(g.directionalValue,$.directionalValue))?ee:sh.comparator(g.documentKey,$.documentKey)}function pK(g,$){for(let ee=0;ee<g.length&&ee<$.length;++ee){let et=g[ee]-$[ee];if(0!==et)return et}return g.length-$.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(g){for(let $ of(this.collectionId=null!=g.collectionGroup?g.collectionGroup:g.path.lastSegment(),this.orderBys=g.orderBy,this.equalityFilters=[],g.filters)){let g=$;g.isInequality()?this.inequalityFilter=g:this.equalityFilters.push(g)}}servedByIndex(g){i$(g.collectionGroup===this.collectionId);let $=sm(g);if(void 0!==$&&!this.hasMatchingEqualityFilter($))return!1;let ee=sy(g),et=new Set,er=0,en=0;for(;er<ee.length;++er)if(this.hasMatchingEqualityFilter(ee[er]))et=et.add(ee[er].fieldPath.canonicalString());else break;if(er===ee.length)return!0;if(void 0!==this.inequalityFilter){if(!et.has(this.inequalityFilter.field.canonicalString())){let g=ee[er];if(!this.matchesFilter(this.inequalityFilter,g)||!this.matchesOrderBy(this.orderBys[en++],g))return!1}++er}for(;er<ee.length;++er){let g=ee[er];if(en>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[en++],g))return!1}return!0}hasMatchingEqualityFilter(g){for(let $ of this.equalityFilters)if(this.matchesFilter($,g))return!0;return!1}matchesFilter(g,$){if(void 0===g||!g.field.isEqual($.fieldPath))return!1;let ee="array-contains"===g.op||"array-contains-any"===g.op;return 2===$.kind===ee}matchesOrderBy(g,$){return!!g.field.isEqual($.fieldPath)&&(0===$.kind&&"asc"===g.dir||1===$.kind&&"desc"===g.dir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(g){var $,ee;if(i$(g instanceof l$||g instanceof lK),g instanceof l$){if(!(g instanceof ue))return g;{let et=(null===(ee=null===($=g.value.arrayValue)||void 0===$?void 0:$.values)||void 0===ee?void 0:ee.map($=>l$.create(g.field,"==",$)))||[];return lK.create(et,"or")}}let et=g.filters.map(g=>pH(g));return lK.create(et,g.op)}function pQ(g){if(0===g.getFilters().length)return[];let $=p0(pH(g));return(i$(pX($)),pY($)||pJ($))?[$]:$.getFilters()}function pY(g){return g instanceof l$}function pJ(g){return g instanceof lK&&lQ(g)}function pX(g){return pY(g)||pJ(g)||pZ(g)}function pZ(g){if(g instanceof lK&&lH(g)){for(let $ of g.getFilters())if(!pY($)&&!pJ($))return!1;return!0}return!1}function p0(g){if(i$(g instanceof l$||g instanceof lK),g instanceof l$)return g;if(1===g.filters.length)return p0(g.filters[0]);let $=g.filters.map(g=>p0(g)),ee=lK.create($,g.op);return pX(ee=p9(ee))?ee:(i$(ee instanceof lK),i$(lW(ee)),i$(ee.filters.length>1),ee.filters.reduce((g,$)=>p3(g,$)))}function p3(g,$){let ee;return i$(g instanceof l$||g instanceof lK),i$($ instanceof l$||$ instanceof lK),p9(ee=g instanceof l$?$ instanceof l$?p4(g,$):p5(g,$):$ instanceof l$?p5($,g):p6(g,$))}function p4(g,$){return lK.create([g,$],"and")}function p6(g,$){if(i$(g.filters.length>0&&$.filters.length>0),lW(g)&&lW($))return l1(g,$.getFilters());let ee=lH(g)?g:$,et=lH(g)?$:g,er=ee.filters.map(g=>p3(g,et));return lK.create(er,"or")}function p5(g,$){if(lW($))return l1($,g.getFilters());{let ee=$.filters.map($=>p3(g,$));return lK.create(ee,"or")}}function p9(g){if(i$(g instanceof l$||g instanceof lK),g instanceof l$)return g;let $=g.getFilters();if(1===$.length)return p9($[0]);if(lY(g))return g;let ee=$.map(g=>p9(g)),et=[];return(ee.forEach($=>{$ instanceof l$?et.push($):$ instanceof lK&&($.op===g.op?et.push(...$.filters):et.push($))}),1===et.length)?et[0]:lK.create(et,g.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.collectionParentIndex=new p7}addToCollectionParentIndex(g,$){return this.collectionParentIndex.add($),sk.resolve()}getCollectionParents(g,$){return sk.resolve(this.collectionParentIndex.getEntries($))}addFieldIndex(g,$){return sk.resolve()}deleteFieldIndex(g,$){return sk.resolve()}getDocumentsMatchingTarget(g,$){return sk.resolve(null)}getIndexType(g,$){return sk.resolve(0)}getFieldIndexes(g,$){return sk.resolve([])}getNextCollectionGroupToUpdate(g){return sk.resolve(null)}getMinOffset(g,$){return sk.resolve(sO.min())}getMinOffsetFromCollectionGroup(g,$){return sk.resolve(sO.min())}updateCollectionGroup(g,$,ee){return sk.resolve()}updateIndexEntries(g,$){return sk.resolve()}}class p7{constructor(){this.index={}}add(g){let $=g.lastSegment(),ee=g.popLast(),et=this.index[$]||new af(so.comparator),er=!et.has(ee);return this.index[$]=et.add(ee),er}has(g){let $=g.lastSegment(),ee=g.popLast(),et=this.index[$];return et&&et.has(ee)}getEntries(g){return(this.index[g]||new af(so.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fe="IndexedDbIndexManager",ft=new Uint8Array(0);class fr{constructor(g,$){this.user=g,this.databaseId=$,this.collectionParentsCache=new p7,this.targetToDnfSubTargets=new uQ(g=>us(g),(g,$)=>ul(g,$)),this.uid=g.uid||""}addToCollectionParentIndex(g,$){if(!this.collectionParentsCache.has($)){let ee=$.lastSegment(),et=$.popLast();g.addOnCommittedListener(()=>{this.collectionParentsCache.add($)});let er={collectionId:ee,parent:s1(et)};return fi(g).put(er)}return sk.resolve()}getCollectionParents(g,$){let ee=[],et=IDBKeyRange.bound([$,""],[i7($),""],!1,!0);return fi(g).loadAll(et).next(g=>{for(let et of g){if(et.collectionId!==$)break;ee.push(s4(et.parent))}return ee})}addFieldIndex(g,$){let ee=fl(g),et=d7($);delete et.indexId;let er=ee.add(et);if(!$.indexState)return er.next();{let ee=fu(g);return er.next(g=>{ee.put(pt(g,this.user,$.indexState.sequenceNumber,$.indexState.offset))})}}deleteFieldIndex(g,$){let ee=fl(g),et=fu(g),er=fo(g);return ee.delete($.indexId).next(()=>et.delete(IDBKeyRange.bound([$.indexId],[$.indexId+1],!1,!0))).next(()=>er.delete(IDBKeyRange.bound([$.indexId],[$.indexId+1],!1,!0)))}getDocumentsMatchingTarget(g,$){let ee=fo(g),et=!0,er=new Map;return sk.forEach(this.getSubTargets($),$=>this.getFieldIndex(g,$).next(g=>{et&&(et=!!g),er.set($,g)})).next(()=>{if(!et)return sk.resolve(null);{let g=u8(),et=[];return sk.forEach(er,(er,en)=>{iU(fe,`Using index ${sT(er)} to execute ${us($)}`);let ei=up(en,er),es=uf(en,er),eo=ug(en,er),eu=um(en,er),eh=this.encodeBound(er,en,eo),ep=this.encodeBound(er,en,eu),ef=this.encodeValues(er,en,es),eg=this.generateIndexRanges(er.indexId,ei,eh,eo.inclusive,ep,eu.inclusive,ef);return sk.forEach(eg,er=>ee.loadFirst(er,$.limit).next($=>{$.forEach($=>{let ee=sh.fromSegments($.documentKey);g.has(ee)||(g=g.add(ee),et.push(ee))})}))}).next(()=>et)}})}getSubTargets(g){let $=this.targetToDnfSubTargets.get(g);return $||($=0===g.filters.length?[g]:pQ(lK.create(g.filters,"and")).map($=>ui(g.path,g.collectionGroup,g.orderBy,$.getFilters(),g.limit,g.startAt,g.endAt)),this.targetToDnfSubTargets.set(g,$)),$}generateIndexRanges(g,$,ee,et,er,en,ei){let es=(null!=$?$.length:1)*Math.max(ee.length,er.length),eo=es/(null!=$?$.length:1),eu=[];for(let eh=0;eh<es;++eh){let es=$?this.encodeSingleElement($[eh/eo]):ft,ep=this.generateLowerBound(g,es,ee[eh%eo],et),ef=this.generateUpperBound(g,es,er[eh%eo],en),eg=ei.map($=>this.generateLowerBound(g,es,$,!0));eu.push(...this.createRange(ep,ef,eg))}return eu}generateLowerBound(g,$,ee,et){let er=new pG(g,sh.empty(),$,ee);return et?er:er.successor()}generateUpperBound(g,$,ee,et){let er=new pG(g,sh.empty(),$,ee);return et?er.successor():er}getFieldIndex(g,$){let ee=new pW($),et=null!=$.collectionGroup?$.collectionGroup:$.path.lastSegment();return this.getFieldIndexes(g,et).next(g=>{let $=null;for(let et of g)ee.servedByIndex(et)&&(!$||et.fields.length>$.fields.length)&&($=et);return $})}getIndexType(g,$){let ee=2,et=this.getSubTargets($);return sk.forEach(et,$=>this.getFieldIndex(g,$).next(g=>{g?0!==ee&&g.fields.length<uS($)&&(ee=1):ee=0})).next(()=>uT($)&&et.length>1&&2===ee?1:ee)}encodeDirectionalElements(g,$){let ee=new pz;for(let et of sy(g)){let g=$.data.field(et.fieldPath);if(null==g)return null;let er=ee.forKind(et.kind);pC.INSTANCE.writeIndexValue(g,er)}return ee.encodedBytes()}encodeSingleElement(g){let $=new pz;return pC.INSTANCE.writeIndexValue(g,$.forKind(0)),$.encodedBytes()}encodeDirectionalKey(g,$){let ee=new pz;return pC.INSTANCE.writeIndexValue(lm(this.databaseId,$),ee.forKind(sv(g))),ee.encodedBytes()}encodeValues(g,$,ee){if(null===ee)return[];let et=[];et.push(new pz);let er=0;for(let en of sy(g)){let g=ee[er++];for(let ee of et)if(this.isInFilter($,en.fieldPath)&&lT(g))et=this.expandIndexValues(et,en,g);else{let $=ee.forKind(en.kind);pC.INSTANCE.writeIndexValue(g,$)}}return this.getEncodedBytes(et)}encodeBound(g,$,ee){return this.encodeValues(g,$,ee.position)}getEncodedBytes(g){let $=[];for(let ee=0;ee<g.length;++ee)$[ee]=g[ee].encodedBytes();return $}expandIndexValues(g,$,ee){let et=[...g],er=[];for(let g of ee.arrayValue.values||[])for(let ee of et){let et=new pz;et.seed(ee.encodedBytes()),pC.INSTANCE.writeIndexValue(g,et.forKind($.kind)),er.push(et)}return er}isInFilter(g,$){return!!g.filters.find(g=>g instanceof l$&&g.field.isEqual($)&&("in"===g.op||"not-in"===g.op))}getFieldIndexes(g,$){let ee=fl(g),et=fu(g);return($?ee.loadAll(oz,IDBKeyRange.bound($,$)):ee.loadAll()).next(g=>{let $=[];return sk.forEach(g,g=>et.get([g.indexId,this.uid]).next(ee=>{$.push(pe(g,ee))})).next(()=>$)})}getNextCollectionGroupToUpdate(g){return this.getFieldIndexes(g).next(g=>0===g.length?null:(g.sort((g,$)=>{let ee=g.indexState.sequenceNumber-$.indexState.sequenceNumber;return 0!==ee?ee:i9(g.collectionGroup,$.collectionGroup)}),g[0].collectionGroup))}updateCollectionGroup(g,$,ee){let et=fl(g),er=fu(g);return this.getNextSequenceNumber(g).next(g=>et.loadAll(oz,IDBKeyRange.bound($,$)).next($=>sk.forEach($,$=>er.put(pt($.indexId,this.user,g,ee)))))}updateIndexEntries(g,$){let ee=new Map;return sk.forEach($,($,et)=>{let er=ee.get($.collectionGroup);return(er?sk.resolve(er):this.getFieldIndexes(g,$.collectionGroup)).next(er=>(ee.set($.collectionGroup,er),sk.forEach(er,ee=>this.getExistingIndexEntries(g,$,ee).next($=>{let er=this.computeIndexEntries(et,ee);return $.isEqual(er)?sk.resolve():this.updateEntries(g,et,ee,$,er)}))))})}addIndexEntry(g,$,ee,et){return fo(g).put({indexId:et.indexId,uid:this.uid,arrayValue:et.arrayValue,directionalValue:et.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(ee,$.key),documentKey:$.key.path.toArray()})}deleteIndexEntry(g,$,ee,et){return fo(g).delete([et.indexId,this.uid,et.arrayValue,et.directionalValue,this.encodeDirectionalKey(ee,$.key),$.key.path.toArray()])}getExistingIndexEntries(g,$,ee){let et=fo(g),er=new af(p$);return et.iterate({index:oJ,range:IDBKeyRange.only([ee.indexId,this.uid,this.encodeDirectionalKey(ee,$)])},(g,et)=>{er=er.add(new pG(ee.indexId,$,et.arrayValue,et.directionalValue))}).next(()=>er)}computeIndexEntries(g,$){let ee=new af(p$),et=this.encodeDirectionalElements($,g);if(null==et)return ee;let er=sm($);if(null!=er){let en=g.data.field(er.fieldPath);if(lT(en))for(let er of en.arrayValue.values||[])ee=ee.add(new pG($.indexId,g.key,this.encodeSingleElement(er),et))}else ee=ee.add(new pG($.indexId,g.key,ft,et));return ee}updateEntries(g,$,ee,et,er){iU(fe,"Updating index entries for document '%s'",$.key);let en=[];return am(et,er,p$,et=>{en.push(this.addIndexEntry(g,$,ee,et))},et=>{en.push(this.deleteIndexEntry(g,$,ee,et))}),sk.waitFor(en)}getNextSequenceNumber(g){let $=1;return fu(g).iterate({index:oW,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(g,ee,et)=>{et.done(),$=ee.sequenceNumber+1}).next(()=>$)}createRange(g,$,ee){ee=ee.sort((g,$)=>p$(g,$)).filter((g,$,ee)=>!$||0!==p$(g,ee[$-1]));let et=[];for(let er of(et.push(g),ee)){let ee=p$(er,g),en=p$(er,$);if(0===ee)et[0]=g.successor();else if(ee>0&&en<0)et.push(er),et.push(er.successor());else if(en>0)break}et.push($);let er=[];for(let g=0;g<et.length;g+=2){if(this.isRangeMatchable(et[g],et[g+1]))return[];let $=[et[g].indexId,this.uid,et[g].arrayValue,et[g].directionalValue,ft,[]],ee=[et[g+1].indexId,this.uid,et[g+1].arrayValue,et[g+1].directionalValue,ft,[]];er.push(IDBKeyRange.bound($,ee))}return er}isRangeMatchable(g,$){return p$(g,$)>0}getMinOffsetFromCollectionGroup(g,$){return this.getFieldIndexes(g,$).next(fh)}getMinOffset(g,$){return sk.mapArray(this.getSubTargets($),$=>this.getFieldIndex(g,$).next(g=>g||iG())).next(fh)}}function fi(g){return an(g,ox)}function fo(g){return an(g,oQ)}function fl(g){return an(g,oV)}function fu(g){return an(g,o$)}function fh(g){i$(0!==g.length);let $=g[0].indexState.offset,ee=$.largestBatchId;for(let et=1;et<g.length;et++){let er=g[et].indexState.offset;0>sA(er,$)&&($=er),ee<er.largestBatchId&&(ee=er.largestBatchId)}return new sO($.readTime,$.documentKey,ee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(g,$,ee){let et=g.store(oe),er=g.store(oh),en=[],ei=IDBKeyRange.only(ee.batchId),es=0,eo=et.iterate({range:ei},(g,$,ee)=>(es++,ee.delete()));en.push(eo.next(()=>{i$(1===es)}));let eu=[];for(let g of ee.mutations){let et=ol($,g.key.path,ee.batchId);en.push(er.delete(et)),eu.push(g.key)}return sk.waitFor(en).next(()=>eu)}function ff(g){let $;if(!g)return 0;if(g.document)$=g.document;else if(g.unknownDocument)$=g.unknownDocument;else if(g.noDocument)$=g.noDocument;else throw iG();return JSON.stringify($).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(g,$,ee,et){this.userId=g,this.serializer=$,this.indexManager=ee,this.referenceDelegate=et,this.documentKeysByBatchId={}}static forUser(g,$,ee,et){return i$(""!==g.uid),new fg(g.isAuthenticated()?g.uid:"",$,ee,et)}checkEmpty(g){let $=!0,ee=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fv(g).iterate({index:or,range:ee},(g,ee,et)=>{$=!1,et.done()}).next(()=>$)}addMutationBatch(g,$,ee,et){let er=fS(g),en=fv(g);return en.add({}).next(ei=>{i$("number"==typeof ei);let es=new cH(ei,$,ee,et),eo=dK(this.serializer,this.userId,es),eu=[],eh=new af((g,$)=>i9(g.canonicalString(),$.canonicalString()));for(let g of et){let $=ol(this.userId,g.key.path,ei);eh=eh.add(g.key.path.popLast()),eu.push(en.put(eo)),eu.push(er.put($,ou))}return eh.forEach($=>{eu.push(this.indexManager.addToCollectionParentIndex(g,$))}),g.addOnCommittedListener(()=>{this.documentKeysByBatchId[ei]=es.keys()}),sk.waitFor(eu).next(()=>es)})}lookupMutationBatch(g,$){return fv(g).get($).next(g=>g?(i$(g.userId===this.userId),dW(this.serializer,g)):null)}lookupMutationKeys(g,$){return this.documentKeysByBatchId[$]?sk.resolve(this.documentKeysByBatchId[$]):this.lookupMutationBatch(g,$).next(g=>{if(!g)return null;{let ee=g.keys();return this.documentKeysByBatchId[$]=ee,ee}})}getNextMutationBatchAfterBatchId(g,$){let ee=$+1,et=IDBKeyRange.lowerBound([this.userId,ee]),er=null;return fv(g).iterate({index:or,range:et},(g,$,et)=>{$.userId===this.userId&&(i$($.batchId>=ee),er=dW(this.serializer,$)),et.done()}).next(()=>er)}getHighestUnacknowledgedBatchId(g){let $=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),ee=aV;return fv(g).iterate({index:or,range:$,reverse:!0},(g,$,et)=>{ee=$.batchId,et.done()}).next(()=>ee)}getAllMutationBatches(g){let $=IDBKeyRange.bound([this.userId,aV],[this.userId,Number.POSITIVE_INFINITY]);return fv(g).loadAll(or,$).next(g=>g.map(g=>dW(this.serializer,g)))}getAllMutationBatchesAffectingDocumentKey(g,$){let ee=oo(this.userId,$.path),et=IDBKeyRange.lowerBound(ee),er=[];return fS(g).iterate({range:et},(ee,et,en)=>{let[ei,es,eo]=ee,eu=s4(es);if(ei!==this.userId||!$.path.isEqual(eu)){en.done();return}return fv(g).get(eo).next(g=>{if(!g)throw iG();i$(g.userId===this.userId),er.push(dW(this.serializer,g))})}).next(()=>er)}getAllMutationBatchesAffectingDocumentKeys(g,$){let ee=new af(i9),et=[];return $.forEach($=>{let er=oo(this.userId,$.path),en=IDBKeyRange.lowerBound(er),ei=fS(g).iterate({range:en},(g,et,er)=>{let[en,ei,es]=g,eo=s4(ei);if(en!==this.userId||!$.path.isEqual(eo)){er.done();return}ee=ee.add(es)});et.push(ei)}),sk.waitFor(et).next(()=>this.lookupMutationBatches(g,ee))}getAllMutationBatchesAffectingQuery(g,$){let ee=$.path,et=ee.length+1,er=oo(this.userId,ee),en=IDBKeyRange.lowerBound(er),ei=new af(i9);return fS(g).iterate({range:en},(g,$,er)=>{let[en,es,eo]=g,eu=s4(es);if(en!==this.userId||!ee.isPrefixOf(eu)){er.done();return}eu.length===et&&(ei=ei.add(eo))}).next(()=>this.lookupMutationBatches(g,ei))}lookupMutationBatches(g,$){let ee=[],et=[];return $.forEach($=>{et.push(fv(g).get($).next(g=>{if(null===g)throw iG();i$(g.userId===this.userId),ee.push(dW(this.serializer,g))}))}),sk.waitFor(et).next(()=>ee)}removeMutationBatch(g,$){return fp(g.simpleDbTransaction,this.userId,$).next(ee=>(g.addOnCommittedListener(()=>{this.removeCachedMutationKeys($.batchId)}),sk.forEach(ee,$=>this.referenceDelegate.markPotentiallyOrphaned(g,$))))}removeCachedMutationKeys(g){delete this.documentKeysByBatchId[g]}performConsistencyCheck(g){return this.checkEmpty(g).next($=>{if(!$)return sk.resolve();let ee=IDBKeyRange.lowerBound(oi(this.userId)),et=[];return fS(g).iterate({range:ee},(g,$,ee)=>{if(g[0]!==this.userId){ee.done();return}{let $=s4(g[1]);et.push($)}}).next(()=>{i$(0===et.length)})})}containsKey(g,$){return fm(g,this.userId,$)}getMutationQueueMetadata(g){return fT(g).get(this.userId).next(g=>g||{userId:this.userId,lastAcknowledgedBatchId:aV,lastStreamToken:""})}}function fm(g,$,ee){let et=oo($,ee.path),er=et[1],en=IDBKeyRange.lowerBound(et),ei=!1;return fS(g).iterate({range:en,keysOnly:!0},(g,ee,et)=>{let[en,es,eo]=g;en===$&&es===er&&(ei=!0),et.done()}).next(()=>ei)}function fy(g,$){let ee=!1;return fT(g).iterateSerial(et=>fm(g,et,$).next(g=>(g&&(ee=!0),sk.resolve(!g)))).next(()=>ee)}function fv(g){return an(g,oe)}function fS(g){return an(g,oh)}function fT(g){return an(g,s8)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fE=2;class fw{constructor(g){this.lastId=g}next(){return this.lastId+=fE,this.lastId}static forTargetCache(){return new fw(2-fE)}static forSyncEngine(){return new fw(1-fE)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(g,$){this.referenceDelegate=g,this.serializer=$}allocateTargetId(g){return this.retrieveMetadata(g).next($=>{let ee=new fw($.highestTargetId);return $.highestTargetId=ee.next(),this.saveMetadata(g,$).next(()=>$.highestTargetId)})}getLastRemoteSnapshotVersion(g){return this.retrieveMetadata(g).next(g=>sn.fromTimestamp(new sr(g.lastRemoteSnapshotVersion.seconds,g.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(g){return this.retrieveMetadata(g).next(g=>g.highestListenSequenceNumber)}setTargetsMetadata(g,$,ee){return this.retrieveMetadata(g).next(et=>(et.highestListenSequenceNumber=$,ee&&(et.lastRemoteSnapshotVersion=ee.toTimestamp()),$>et.highestListenSequenceNumber&&(et.highestListenSequenceNumber=$),this.saveMetadata(g,et)))}addTargetData(g,$){return this.saveTargetData(g,$).next(()=>this.retrieveMetadata(g).next(ee=>(ee.targetCount+=1,this.updateMetadataFromTargetData($,ee),this.saveMetadata(g,ee))))}updateTargetData(g,$){return this.saveTargetData(g,$)}removeTargetData(g,$){return this.removeMatchingKeysForTargetId(g,$.targetId).next(()=>f_(g).delete($.targetId)).next(()=>this.retrieveMetadata(g)).next($=>(i$($.targetCount>0),$.targetCount-=1,this.saveMetadata(g,$)))}removeTargets(g,$,ee){let et=0,er=[];return f_(g).iterate((en,ei)=>{let es=dH(ei);es.sequenceNumber<=$&&null===ee.get(es.targetId)&&(et++,er.push(this.removeTargetData(g,es)))}).next(()=>sk.waitFor(er)).next(()=>et)}forEachTarget(g,$){return f_(g).iterate((g,ee)=>{$(dH(ee))})}retrieveMetadata(g){return fI(g).get(oD).next(g=>(i$(null!==g),g))}saveMetadata(g,$){return fI(g).put(oD,$)}saveTargetData(g,$){return f_(g).put(dQ(this.serializer,$))}updateMetadataFromTargetData(g,$){let ee=!1;return g.targetId>$.highestTargetId&&($.highestTargetId=g.targetId,ee=!0),g.sequenceNumber>$.highestListenSequenceNumber&&($.highestListenSequenceNumber=g.sequenceNumber,ee=!0),ee}getTargetCount(g){return this.retrieveMetadata(g).next(g=>g.targetCount)}getTargetData(g,$){let ee=us($),et=IDBKeyRange.bound([ee,Number.NEGATIVE_INFINITY],[ee,Number.POSITIVE_INFINITY]),er=null;return f_(g).iterate({range:et,index:o_},(g,ee,et)=>{let en=dH(ee);ul($,en.target)&&(er=en,et.done())}).next(()=>er)}addMatchingKeys(g,$,ee){let et=[],er=fO(g);return $.forEach($=>{let en=s1($.path);et.push(er.put({targetId:ee,path:en})),et.push(this.referenceDelegate.addReference(g,ee,$))}),sk.waitFor(et)}removeMatchingKeys(g,$,ee){let et=fO(g);return sk.forEach($,$=>{let er=s1($.path);return sk.waitFor([et.delete([ee,er]),this.referenceDelegate.removeReference(g,ee,$)])})}removeMatchingKeysForTargetId(g,$){let ee=fO(g),et=IDBKeyRange.bound([$],[$+1],!1,!0);return ee.delete(et)}getMatchingKeysForTargetId(g,$){let ee=IDBKeyRange.bound([$],[$+1],!1,!0),et=fO(g),er=u8();return et.iterate({range:ee,keysOnly:!0},(g,$,ee)=>{let et=new sh(s4(g[1]));er=er.add(et)}).next(()=>er)}containsKey(g,$){let ee=s1($.path),et=IDBKeyRange.bound([ee],[i7(ee)],!1,!0),er=0;return fO(g).iterate({index:oN,keysOnly:!0,range:et},([g,$],ee,et)=>{0!==g&&(er++,et.done())}).next(()=>er>0)}getTargetDataForTarget(g,$){return f_(g).get($).next(g=>g?dH(g):null)}}function f_(g){return an(g,ow)}function fI(g){return an(g,ok)}function fO(g){return an(g,oO)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fN=-1,fR=41943040;class fD{constructor(g,$,ee){this.cacheSizeCollectionThreshold=g,this.percentileToCollect=$,this.maximumSequenceNumbersToCollect=ee}static withCacheSize(g){return new fD(g,fD.DEFAULT_COLLECTION_PERCENTILE,fD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fD.DEFAULT_COLLECTION_PERCENTILE=10,fD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fD.DEFAULT=new fD(fR,fD.DEFAULT_COLLECTION_PERCENTILE,fD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fD.DISABLED=new fD(fN,0,0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fk="LruGarbageCollector",fx=1048576,fP=null,fM=null;function fL([g,$],[ee,et]){let er=i9(g,ee);return 0===er?i9($,et):er}class fF{constructor(g){this.maxElements=g,this.buffer=new af(fL),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(g){let $=[g,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add($);else{let g=this.buffer.last();0>fL($,g)&&(this.buffer=this.buffer.delete(g).add($))}}get maxValue(){return this.buffer.last()[0]}}class fB{constructor(g,$,ee){this.garbageCollector=g,this.asyncQueue=$,this.localStore=ee,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==fN&&this.scheduleGC(fP)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(g){iU(fk,`Garbage collection scheduled in ${g}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",g,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(g){sj(g)?iU(fk,"Ignoring IndexedDB error during garbage collection: ",g):await sD(g)}await this.scheduleGC(fM)})}}class fj{constructor(g,$){this.delegate=g,this.params=$}calculateTargetCount(g,$){return this.delegate.getSequenceNumberCount(g).next(g=>Math.floor($/100*g))}nthSequenceNumber(g,$){if(0===$)return sk.resolve(sY.INVALID);let ee=new fF($);return this.delegate.forEachTarget(g,g=>ee.addElement(g.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(g,g=>ee.addElement(g))).next(()=>ee.maxValue)}removeTargets(g,$,ee){return this.delegate.removeTargets(g,$,ee)}removeOrphanedDocuments(g,$){return this.delegate.removeOrphanedDocuments(g,$)}collect(g,$){return this.params.cacheSizeCollectionThreshold===fN?(iU("LruGarbageCollector","Garbage collection skipped; disabled"),sk.resolve(fA)):this.getCacheSize(g).next(ee=>ee<this.params.cacheSizeCollectionThreshold?(iU("LruGarbageCollector",`Garbage collection skipped; Cache size ${ee} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.runGarbageCollection(g,$))}getCacheSize(g){return this.delegate.getCacheSize(g)}runGarbageCollection(g,$){let ee,et,er,en,ei,es,eo;let eu=Date.now();return this.calculateTargetCount(g,this.params.percentileToCollect).next($=>($>this.params.maximumSequenceNumbersToCollect?(iU("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$}`),et=this.params.maximumSequenceNumbersToCollect):et=$,en=Date.now(),this.nthSequenceNumber(g,et))).next(et=>(ee=et,ei=Date.now(),this.removeTargets(g,ee,$))).next($=>(er=$,es=Date.now(),this.removeOrphanedDocuments(g,ee))).next(g=>(eo=Date.now(),ij()<=LogLevel.DEBUG&&iU("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${en-eu}ms
	Determined least recently used ${et} in ${ei-en}ms
	Removed ${er} targets in ${es-ei}ms
	Removed ${g} documents in ${eo-es}ms
Total Duration: ${eo-eu}ms`),sk.resolve({didRun:!0,sequenceNumbersCollected:et,targetsRemoved:er,documentsRemoved:g})))}}function fU(g,$){return new fj(g,$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(g,$){this.db=g,this.garbageCollector=fU(this,$)}getSequenceNumberCount(g){let $=this.orphanedDocumentCount(g);return this.db.getTargetCache().getTargetCount(g).next(g=>$.next($=>g+$))}orphanedDocumentCount(g){let $=0;return this.forEachOrphanedDocumentSequenceNumber(g,g=>{$++}).next(()=>$)}forEachTarget(g,$){return this.db.getTargetCache().forEachTarget(g,$)}forEachOrphanedDocumentSequenceNumber(g,$){return this.forEachOrphanedDocument(g,(g,ee)=>$(ee))}addReference(g,$,ee){return fG(g,ee)}removeReference(g,$,ee){return fG(g,ee)}removeTargets(g,$,ee){return this.db.getTargetCache().removeTargets(g,$,ee)}markPotentiallyOrphaned(g,$){return fG(g,$)}isPinned(g,$){return fy(g,$)}removeOrphanedDocuments(g,$){let ee=this.db.getRemoteDocumentCache().newChangeBuffer(),et=[],er=0;return this.forEachOrphanedDocument(g,(en,ei)=>{if(ei<=$){let $=this.isPinned(g,en).next($=>{if(!$)return er++,ee.getEntry(g,en).next(()=>(ee.removeEntry(en,sn.min()),fO(g).delete(fq(en))))});et.push($)}}).next(()=>sk.waitFor(et)).next(()=>ee.apply(g)).next(()=>er)}removeTarget(g,$){let ee=$.withSequenceNumber(g.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(g,ee)}updateLimboDocument(g,$){return fG(g,$)}forEachOrphanedDocument(g,$){let ee;let et=fO(g),er=sY.INVALID;return et.iterate({index:oN},([g,et],{path:en,sequenceNumber:ei})=>{0===g?(er!==sY.INVALID&&$(new sh(s4(ee)),er),er=ei,ee=en):er=sY.INVALID}).next(()=>{er!==sY.INVALID&&$(new sh(s4(ee)),er)})}getCacheSize(g){return this.db.getRemoteDocumentCache().getSize(g)}}function fq(g){return[0,s1(g.path)]}function fz(g,$){return{targetId:0,path:s1(g.path),sequenceNumber:$}}function fG(g,$){return fO(g).put(fz($,g.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this.changes=new uQ(g=>g.toString(),(g,$)=>g.isEqual($)),this.changesApplied=!1}addEntry(g){this.assertNotApplied(),this.changes.set(g.key,g)}removeEntry(g,$){this.assertNotApplied(),this.changes.set(g,lx.newInvalidDocument(g).setReadTime($))}getEntry(g,$){this.assertNotApplied();let ee=this.changes.get($);return void 0!==ee?sk.resolve(ee):this.getFromCache(g,$)}getEntries(g,$){return this.getAllFromCache(g,$)}apply(g){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(g)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(g){this.serializer=g}setIndexManager(g){this.indexManager=g}addEntry(g,$,ee){return fY(g).put(ee)}removeEntry(g,$,ee){return fY(g).delete(fX($,ee))}updateMetadata(g,$){return this.getMetadata(g).next(ee=>(ee.byteSize+=$,this.setMetadata(g,ee)))}getEntry(g,$){let ee=lx.newInvalidDocument($);return fY(g).iterate({index:om,range:IDBKeyRange.only(fJ($))},(g,et)=>{ee=this.maybeDecodeDocument($,et)}).next(()=>ee)}getSizedEntry(g,$){let ee={size:0,document:lx.newInvalidDocument($)};return fY(g).iterate({index:om,range:IDBKeyRange.only(fJ($))},(g,et)=>{ee={document:this.maybeDecodeDocument($,et),size:ff(et)}}).next(()=>ee)}getEntries(g,$){let ee=uJ();return this.forEachDbEntry(g,$,(g,$)=>{let et=this.maybeDecodeDocument(g,$);ee=ee.insert(g,et)}).next(()=>ee)}getSizedEntries(g,$){let ee=uJ(),et=new al(sh.comparator);return this.forEachDbEntry(g,$,(g,$)=>{let er=this.maybeDecodeDocument(g,$);ee=ee.insert(g,er),et=et.insert(g,ff($))}).next(()=>({documents:ee,sizeMap:et}))}forEachDbEntry(g,$,ee){if($.isEmpty())return sk.resolve();let et=new af(f0);$.forEach(g=>et=et.add(g));let er=IDBKeyRange.bound(fJ(et.first()),fJ(et.last())),en=et.getIterator(),ei=en.getNext();return fY(g).iterate({index:om,range:er},(g,$,et)=>{let er=sh.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;ei&&0>f0(ei,er);)ee(ei,null),ei=en.getNext();ei&&ei.isEqual(er)&&(ee(ei,$),ei=en.hasNext()?en.getNext():null),ei?et.skip(fJ(ei)):et.done()}).next(()=>{for(;ei;)ee(ei,null),ei=en.hasNext()?en.getNext():null})}getDocumentsMatchingQuery(g,$,ee,et){let er=$.path,en=[er.popLast().toArray(),er.lastSegment(),dq(ee.readTime),ee.documentKey.path.isEmpty()?"":ee.documentKey.path.lastSegment()],ei=[er.popLast().toArray(),er.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fY(g).loadAll(IDBKeyRange.bound(en,ei,!0)).next(g=>{let ee=uJ();for(let er of g){let g=this.maybeDecodeDocument(sh.fromSegments(er.prefixPath.concat(er.collectionGroup,er.documentId)),er);g.isFoundDocument()&&(uV($,g)||et.has(g.key))&&(ee=ee.insert(g.key,g))}return ee})}getAllFromCollectionGroup(g,$,ee,et){let er=uJ(),en=fZ($,ee),ei=fZ($,sO.max());return fY(g).iterate({index:ov,range:IDBKeyRange.bound(en,ei,!0)},(g,$,ee)=>{let en=this.maybeDecodeDocument(sh.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);(er=er.insert(en.key,en)).size===et&&ee.done()}).next(()=>er)}newChangeBuffer(g){return new fH(this,!!g&&g.trackRemovals)}getSize(g){return this.getMetadata(g).next(g=>g.byteSize)}getMetadata(g){return fQ(g).get(oE).next(g=>(i$(!!g),g))}setMetadata(g,$){return fQ(g).put(oE,$)}maybeDecodeDocument(g,$){if($){let g=dU(this.serializer,$);if(!(g.isNoDocument()&&g.version.isEqual(sn.min())))return g}return lx.newInvalidDocument(g)}}function fW(g){return new fK(g)}class fH extends null{constructor(g,$){super(),this.documentCache=g,this.trackRemovals=$,this.documentStates=new uQ(g=>g.toString(),(g,$)=>g.isEqual($))}applyChanges(g){let $=[],ee=0,et=new af((g,$)=>i9(g.canonicalString(),$.canonicalString()));return this.changes.forEach((er,en)=>{let ei=this.documentStates.get(er);if($.push(this.documentCache.removeEntry(g,er,ei.readTime)),en.isValidDocument()){let es=dV(this.documentCache.serializer,en);et=et.add(er.path.popLast());let eo=ff(es);ee+=eo-ei.size,$.push(this.documentCache.addEntry(g,er,es))}else if(ee-=ei.size,this.trackRemovals){let ee=dV(this.documentCache.serializer,en.convertToNoDocument(sn.min()));$.push(this.documentCache.addEntry(g,er,ee))}}),et.forEach(ee=>{$.push(this.documentCache.indexManager.addToCollectionParentIndex(g,ee))}),$.push(this.documentCache.updateMetadata(g,ee)),sk.waitFor($)}getFromCache(g,$){return this.documentCache.getSizedEntry(g,$).next(g=>(this.documentStates.set($,{size:g.size,readTime:g.document.readTime}),g.document))}getAllFromCache(g,$){return this.documentCache.getSizedEntries(g,$).next(({documents:g,sizeMap:$})=>($.forEach(($,ee)=>{this.documentStates.set($,{size:ee,readTime:g.get($).readTime})}),g))}}function fQ(g){return an(g,oT)}function fY(g){return an(g,of)}function fJ(g){let $=g.path.toArray();return[$.slice(0,$.length-2),$[$.length-2],$[$.length-1]]}function fX(g,$){let ee=g.path.toArray();return[ee.slice(0,ee.length-2),ee[ee.length-2],dq($),ee[ee.length-1]]}function fZ(g,$){let ee=$.documentKey.path.toArray();return[g,dq($.readTime),ee.slice(0,ee.length-2),ee.length>0?ee[ee.length-1]:""]}function f0(g,$){let ee=g.path.toArray(),et=$.path.toArray(),er=0;for(let g=0;g<ee.length-2&&g<et.length-2;++g)if(er=i9(ee[g],et[g]))return er;return(er=i9(ee.length,et.length))||(er=i9(ee[ee.length-2],et[et.length-2]))?er:i9(ee[ee.length-1],et[et.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f3=15;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(g,$){this.overlayedDocument=g,this.mutatedFields=$}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(g,$,ee,et){this.remoteDocumentCache=g,this.mutationQueue=$,this.documentOverlayCache=ee,this.indexManager=et}getDocument(g,$){let ee=null;return this.documentOverlayCache.getOverlay(g,$).next(et=>(ee=et,this.remoteDocumentCache.getEntry(g,$))).next(g=>(null!==ee&&ck(ee.mutation,g,av.empty(),sr.now()),g))}getDocuments(g,$){return this.remoteDocumentCache.getEntries(g,$).next($=>this.getLocalViewOfDocuments(g,$,u8()).next(()=>$))}getLocalViewOfDocuments(g,$,ee=u8()){let et=u2();return this.populateOverlays(g,et,$).next(()=>this.computeViews(g,$,et,ee).next(g=>{let $=uZ();return g.forEach((g,ee)=>{$=$.insert(g,ee.overlayedDocument)}),$}))}getOverlayedDocuments(g,$){let ee=u2();return this.populateOverlays(g,ee,$).next(()=>this.computeViews(g,$,ee,u8()))}populateOverlays(g,$,ee){let et=[];return ee.forEach(g=>{$.has(g)||et.push(g)}),this.documentOverlayCache.getOverlays(g,et).next(g=>{g.forEach((g,ee)=>{$.set(g,ee)})})}computeViews(g,$,ee,et){let er=uJ(),en=u4(),ei=u0();return $.forEach((g,$)=>{let ei=ee.get($.key);et.has($.key)&&(void 0===ei||ei.mutation instanceof cB)?er=er.insert($.key,$):void 0!==ei?(en.set($.key,ei.mutation.getFieldMask()),ck(ei.mutation,$,ei.mutation.getFieldMask(),sr.now())):en.set($.key,av.empty())}),this.recalculateAndSaveOverlays(g,er).next(g=>(g.forEach((g,$)=>en.set(g,$)),$.forEach((g,$)=>{var ee;return ei.set(g,new f4($,null!==(ee=en.get(g))&&void 0!==ee?ee:null))}),ei))}recalculateAndSaveOverlays(g,$){let ee=u4(),et=new al((g,$)=>g-$),er=u8();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(g,$).next(g=>{for(let er of g)er.keys().forEach(g=>{let en=$.get(g);if(null===en)return;let ei=ee.get(g)||av.empty();ei=er.applyToLocalView(en,ei),ee.set(g,ei);let es=(et.get(er.batchId)||u8()).add(g);et=et.insert(er.batchId,es)})}).next(()=>{let en=[],ei=et.getReverseIterator();for(;ei.hasNext();){let et=ei.getNext(),es=et.key,eo=et.value,eu=u3();eo.forEach(g=>{if(!er.has(g)){let et=cR($.get(g),ee.get(g));null!==et&&eu.set(g,et),er=er.add(g)}}),en.push(this.documentOverlayCache.saveOverlays(g,es,eu))}return sk.waitFor(en)}).next(()=>ee)}recalculateAndSaveOverlaysForDocumentKeys(g,$){return this.remoteDocumentCache.getEntries(g,$).next($=>this.recalculateAndSaveOverlays(g,$))}getDocumentsMatchingQuery(g,$,ee){return uN($)?this.getDocumentsMatchingDocumentQuery(g,$.path):uR($)?this.getDocumentsMatchingCollectionGroupQuery(g,$,ee):this.getDocumentsMatchingCollectionQuery(g,$,ee)}getNextDocuments(g,$,ee,et){return this.remoteDocumentCache.getAllFromCollectionGroup(g,$,ee,et).next(er=>{let en=et-er.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(g,$,ee.largestBatchId,et-er.size):sk.resolve(u2()),ei=sp,es=er;return en.next($=>sk.forEach($,($,ee)=>(ei<ee.largestBatchId&&(ei=ee.largestBatchId),er.get($))?sk.resolve():this.remoteDocumentCache.getEntry(g,$).next(g=>{es=es.insert($,g)})).next(()=>this.populateOverlays(g,$,er)).next(()=>this.computeViews(g,es,$,u8())).next(g=>({batchId:ei,changes:u1(g)})))})}getDocumentsMatchingDocumentQuery(g,$){return this.getDocument(g,new sh($)).next(g=>{let $=uZ();return g.isFoundDocument()&&($=$.insert(g.key,g)),$})}getDocumentsMatchingCollectionGroupQuery(g,$,ee){let et=$.collectionGroup,er=uZ();return this.indexManager.getCollectionParents(g,et).next(en=>sk.forEach(en,en=>{let ei=u_($,en.child(et));return this.getDocumentsMatchingCollectionQuery(g,ei,ee).next(g=>{g.forEach((g,$)=>{er=er.insert(g,$)})})}).next(()=>er))}getDocumentsMatchingCollectionQuery(g,$,ee){let et;return this.documentOverlayCache.getOverlaysForCollection(g,$.path,ee.largestBatchId).next(er=>(et=er,this.remoteDocumentCache.getDocumentsMatchingQuery(g,$,ee,et))).next(g=>{et.forEach(($,ee)=>{let et=ee.getKey();null===g.get(et)&&(g=g.insert(et,lx.newInvalidDocument(et)))});let ee=uZ();return g.forEach((g,er)=>{let en=et.get(g);void 0!==en&&ck(en.mutation,er,av.empty(),sr.now()),uV($,er)&&(ee=ee.insert(g,er))}),ee})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(g){this.serializer=g,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(g,$){return sk.resolve(this.bundles.get($))}saveBundleMetadata(g,$){return this.bundles.set($.id,d6($)),sk.resolve()}getNamedQuery(g,$){return sk.resolve(this.namedQueries.get($))}saveNamedQuery(g,$){return this.namedQueries.set($.name,d4($)),sk.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.overlays=new al(sh.comparator),this.overlayByBatchId=new Map}getOverlay(g,$){return sk.resolve(this.overlays.get($))}getOverlays(g,$){let ee=u2();return sk.forEach($,$=>this.getOverlay(g,$).next(g=>{null!==g&&ee.set($,g)})).next(()=>ee)}saveOverlays(g,$,ee){return ee.forEach((ee,et)=>{this.saveOverlay(g,$,et)}),sk.resolve()}removeOverlaysForBatchId(g,$,ee){let et=this.overlayByBatchId.get(ee);return void 0!==et&&(et.forEach(g=>this.overlays=this.overlays.remove(g)),this.overlayByBatchId.delete(ee)),sk.resolve()}getOverlaysForCollection(g,$,ee){let et=u2(),er=$.length+1,en=new sh($.child("")),ei=this.overlays.getIteratorFrom(en);for(;ei.hasNext();){let g=ei.getNext().value,en=g.getKey();if(!$.isPrefixOf(en.path))break;en.path.length===er&&g.largestBatchId>ee&&et.set(g.getKey(),g)}return sk.resolve(et)}getOverlaysForCollectionGroup(g,$,ee,et){let er=new al((g,$)=>g-$),en=this.overlays.getIterator();for(;en.hasNext();){let g=en.getNext().value;if(g.getKey().getCollectionGroup()===$&&g.largestBatchId>ee){let $=er.get(g.largestBatchId);null===$&&($=u2(),er=er.insert(g.largestBatchId,$)),$.set(g.getKey(),g)}}let ei=u2(),es=er.getIterator();for(;es.hasNext()&&(es.getNext().value.forEach((g,$)=>ei.set(g,$)),!(ei.size()>=et)););return sk.resolve(ei)}saveOverlay(g,$,ee){let et=this.overlays.get(ee.key);if(null!==et){let g=this.overlayByBatchId.get(et.largestBatchId).delete(ee.key);this.overlayByBatchId.set(et.largestBatchId,g)}this.overlays=this.overlays.insert(ee.key,new cY($,ee));let er=this.overlayByBatchId.get($);void 0===er&&(er=u8(),this.overlayByBatchId.set($,er)),this.overlayByBatchId.set($,er.add(ee.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.refsByKey=new af(f7.compareByKey),this.refsByTarget=new af(f7.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(g,$){let ee=new f7(g,$);this.refsByKey=this.refsByKey.add(ee),this.refsByTarget=this.refsByTarget.add(ee)}addReferences(g,$){g.forEach(g=>this.addReference(g,$))}removeReference(g,$){this.removeRef(new f7(g,$))}removeReferences(g,$){g.forEach(g=>this.removeReference(g,$))}removeReferencesForId(g){let $=new sh(new so([])),ee=new f7($,g),et=new f7($,g+1),er=[];return this.refsByTarget.forEachInRange([ee,et],g=>{this.removeRef(g),er.push(g.key)}),er}removeAllReferences(){this.refsByKey.forEach(g=>this.removeRef(g))}removeRef(g){this.refsByKey=this.refsByKey.delete(g),this.refsByTarget=this.refsByTarget.delete(g)}referencesForId(g){let $=new sh(new so([])),ee=new f7($,g),et=new f7($,g+1),er=u8();return this.refsByTarget.forEachInRange([ee,et],g=>{er=er.add(g.key)}),er}containsKey(g){let $=new f7(g,0),ee=this.refsByKey.firstAfterOrEqual($);return null!==ee&&g.isEqual(ee.key)}}class f7{constructor(g,$){this.key=g,this.targetOrBatchId=$}static compareByKey(g,$){return sh.comparator(g.key,$.key)||i9(g.targetOrBatchId,$.targetOrBatchId)}static compareByTargetId(g,$){return i9(g.targetOrBatchId,$.targetOrBatchId)||sh.comparator(g.key,$.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(g,$){this.indexManager=g,this.referenceDelegate=$,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new af(f7.compareByKey)}checkEmpty(g){return sk.resolve(0===this.mutationQueue.length)}addMutationBatch(g,$,ee,et){let er=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let en=new cH(er,$,ee,et);for(let $ of(this.mutationQueue.push(en),et))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new f7($.key,er)),this.indexManager.addToCollectionParentIndex(g,$.key.path.popLast());return sk.resolve(en)}lookupMutationBatch(g,$){return sk.resolve(this.findMutationBatch($))}getNextMutationBatchAfterBatchId(g,$){let ee=$+1,et=this.indexOfBatchId(ee),er=et<0?0:et;return sk.resolve(this.mutationQueue.length>er?this.mutationQueue[er]:null)}getHighestUnacknowledgedBatchId(){return sk.resolve(0===this.mutationQueue.length?aV:this.nextBatchId-1)}getAllMutationBatches(g){return sk.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(g,$){let ee=new f7($,0),et=new f7($,Number.POSITIVE_INFINITY),er=[];return this.batchesByDocumentKey.forEachInRange([ee,et],g=>{let $=this.findMutationBatch(g.targetOrBatchId);er.push($)}),sk.resolve(er)}getAllMutationBatchesAffectingDocumentKeys(g,$){let ee=new af(i9);return $.forEach(g=>{let $=new f7(g,0),et=new f7(g,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([$,et],g=>{ee=ee.add(g.targetOrBatchId)})}),sk.resolve(this.findMutationBatches(ee))}getAllMutationBatchesAffectingQuery(g,$){let ee=$.path,et=ee.length+1,er=ee;sh.isDocumentKey(er)||(er=er.child(""));let en=new f7(new sh(er),0),ei=new af(i9);return this.batchesByDocumentKey.forEachWhile(g=>{let $=g.key.path;return!!ee.isPrefixOf($)&&($.length===et&&(ei=ei.add(g.targetOrBatchId)),!0)},en),sk.resolve(this.findMutationBatches(ei))}findMutationBatches(g){let $=[];return g.forEach(g=>{let ee=this.findMutationBatch(g);null!==ee&&$.push(ee)}),$}removeMutationBatch(g,$){i$(0===this.indexOfExistingBatchId($.batchId,"removed")),this.mutationQueue.shift();let ee=this.batchesByDocumentKey;return sk.forEach($.mutations,et=>{let er=new f7(et.key,$.batchId);return ee=ee.delete(er),this.referenceDelegate.markPotentiallyOrphaned(g,et.key)}).next(()=>{this.batchesByDocumentKey=ee})}removeCachedMutationKeys(g){}containsKey(g,$){let ee=new f7($,0),et=this.batchesByDocumentKey.firstAfterOrEqual(ee);return sk.resolve($.isEqual(et&&et.key))}performConsistencyCheck(g){return this.mutationQueue.length,sk.resolve()}indexOfExistingBatchId(g,$){return this.indexOfBatchId(g)}indexOfBatchId(g){return 0===this.mutationQueue.length?0:g-this.mutationQueue[0].batchId}findMutationBatch(g){let $=this.indexOfBatchId(g);return $<0||$>=this.mutationQueue.length?null:this.mutationQueue[$]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return new al(sh.comparator)}class gr{constructor(g){this.sizer=g,this.docs=gt(),this.size=0}setIndexManager(g){this.indexManager=g}addEntry(g,$){let ee=$.key,et=this.docs.get(ee),er=et?et.size:0,en=this.sizer($);return this.docs=this.docs.insert(ee,{document:$.mutableCopy(),size:en}),this.size+=en-er,this.indexManager.addToCollectionParentIndex(g,ee.path.popLast())}removeEntry(g){let $=this.docs.get(g);$&&(this.docs=this.docs.remove(g),this.size-=$.size)}getEntry(g,$){let ee=this.docs.get($);return sk.resolve(ee?ee.document.mutableCopy():lx.newInvalidDocument($))}getEntries(g,$){let ee=uJ();return $.forEach(g=>{let $=this.docs.get(g);ee=ee.insert(g,$?$.document.mutableCopy():lx.newInvalidDocument(g))}),sk.resolve(ee)}getDocumentsMatchingQuery(g,$,ee,et){let er=uJ(),en=$.path,ei=new sh(en.child("")),es=this.docs.getIteratorFrom(ei);for(;es.hasNext();){let{key:g,value:{document:ei}}=es.getNext();if(!en.isPrefixOf(g.path))break;!(g.path.length>en.length+1||0>=sA(sI(ei),ee))&&(et.has(ei.key)||uV($,ei))&&(er=er.insert(ei.key,ei.mutableCopy()))}return sk.resolve(er)}getAllFromCollectionGroup(g,$,ee,et){iG()}forEachDocumentKey(g,$){return sk.forEach(this.docs,g=>$(g))}newChangeBuffer(g){return new gi(this)}getSize(g){return sk.resolve(this.size)}}function gn(g){return new gr(g)}class gi extends f${constructor(g){super(),this.documentCache=g}applyChanges(g){let $=[];return this.changes.forEach((ee,et)=>{et.isValidDocument()?$.push(this.documentCache.addEntry(g,et)):this.documentCache.removeEntry(ee)}),sk.waitFor($)}getFromCache(g,$){return this.documentCache.getEntry(g,$)}getAllFromCache(g,$){return this.documentCache.getEntries(g,$)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(g){this.persistence=g,this.targets=new uQ(g=>us(g),ul),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new f8,this.targetCount=0,this.targetIdGenerator=fw.forTargetCache()}forEachTarget(g,$){return this.targets.forEach((g,ee)=>$(ee)),sk.resolve()}getLastRemoteSnapshotVersion(g){return sk.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(g){return sk.resolve(this.highestSequenceNumber)}allocateTargetId(g){return this.highestTargetId=this.targetIdGenerator.next(),sk.resolve(this.highestTargetId)}setTargetsMetadata(g,$,ee){return ee&&(this.lastRemoteSnapshotVersion=ee),$>this.highestSequenceNumber&&(this.highestSequenceNumber=$),sk.resolve()}saveTargetData(g){this.targets.set(g.target,g);let $=g.targetId;$>this.highestTargetId&&(this.targetIdGenerator=new fw($),this.highestTargetId=$),g.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=g.sequenceNumber)}addTargetData(g,$){return this.saveTargetData($),this.targetCount+=1,sk.resolve()}updateTargetData(g,$){return this.saveTargetData($),sk.resolve()}removeTargetData(g,$){return this.targets.delete($.target),this.references.removeReferencesForId($.targetId),this.targetCount-=1,sk.resolve()}removeTargets(g,$,ee){let et=0,er=[];return this.targets.forEach((en,ei)=>{ei.sequenceNumber<=$&&null===ee.get(ei.targetId)&&(this.targets.delete(en),er.push(this.removeMatchingKeysForTargetId(g,ei.targetId)),et++)}),sk.waitFor(er).next(()=>et)}getTargetCount(g){return sk.resolve(this.targetCount)}getTargetData(g,$){let ee=this.targets.get($)||null;return sk.resolve(ee)}addMatchingKeys(g,$,ee){return this.references.addReferences($,ee),sk.resolve()}removeMatchingKeys(g,$,ee){this.references.removeReferences($,ee);let et=this.persistence.referenceDelegate,er=[];return et&&$.forEach($=>{er.push(et.markPotentiallyOrphaned(g,$))}),sk.waitFor(er)}removeMatchingKeysForTargetId(g,$){return this.references.removeReferencesForId($),sk.resolve()}getMatchingKeysForTargetId(g,$){let ee=this.references.referencesForId($);return sk.resolve(ee)}containsKey(g,$){return sk.resolve(this.references.containsKey($))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="MemoryPersistence";class ga{constructor(g,$){this.mutationQueues={},this.overlays={},this.listenSequence=new sY(0),this._started=!1,this._started=!0,this.referenceDelegate=g(this),this.targetCache=new gs(this);let ee=g=>this.referenceDelegate.documentSize(g);this.indexManager=new p8,this.remoteDocumentCache=gn(ee),this.serializer=new dj($),this.bundleCache=new f5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(g){return this.indexManager}getDocumentOverlayCache(g){let $=this.overlays[g.toKey()];return $||($=new f9,this.overlays[g.toKey()]=$),$}getMutationQueue(g,$){let ee=this.mutationQueues[g.toKey()];return ee||(ee=new ge($,this.referenceDelegate),this.mutationQueues[g.toKey()]=ee),ee}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(g,$,ee){iU(go,"Starting transaction:",g);let et=new gl(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),ee(et).next(g=>this.referenceDelegate.onTransactionCommitted(et).next(()=>g)).toPromise().then(g=>(et.raiseOnCommittedEvent(),g))}mutationQueuesContainKey(g,$){return sk.or(Object.values(this.mutationQueues).map(ee=>()=>ee.containsKey(g,$)))}}class gl extends sR{constructor(g){super(),this.currentSequenceNumber=g}}class gu{constructor(g){this.persistence=g,this.localViewReferences=new f8,this._orphanedDocuments=null}static factory(g){return new gu(g)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw iG()}addReference(g,$,ee){return this.localViewReferences.addReference(ee,$),this.orphanedDocuments.delete(ee.toString()),sk.resolve()}removeReference(g,$,ee){return this.localViewReferences.removeReference(ee,$),this.orphanedDocuments.add(ee.toString()),sk.resolve()}markPotentiallyOrphaned(g,$){return this.orphanedDocuments.add($.toString()),sk.resolve()}removeTarget(g,$){this.localViewReferences.removeReferencesForId($.targetId).forEach(g=>this.orphanedDocuments.add(g.toString()));let ee=this.persistence.getTargetCache();return ee.getMatchingKeysForTargetId(g,$.targetId).next(g=>{g.forEach(g=>this.orphanedDocuments.add(g.toString()))}).next(()=>ee.removeTargetData(g,$))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(g){let $=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sk.forEach(this.orphanedDocuments,ee=>{let et=sh.fromPath(ee);return this.isReferenced(g,et).next(g=>{g||$.removeEntry(et,sn.min())})}).next(()=>(this._orphanedDocuments=null,$.apply(g)))}updateLimboDocument(g,$){return this.isReferenced(g,$).next(g=>{g?this.orphanedDocuments.delete($.toString()):this.orphanedDocuments.add($.toString())})}documentSize(g){return 0}isReferenced(g,$){return sk.or([()=>sk.resolve(this.localViewReferences.containsKey($)),()=>this.persistence.getTargetCache().containsKey(g,$),()=>this.persistence.mutationQueuesContainKey(g,$)])}}class gh{constructor(g,$){this.persistence=g,this.orphanedSequenceNumbers=new uQ(g=>s1(g.path),(g,$)=>g.isEqual($)),this.garbageCollector=fU(this,$)}static factory(g,$){return new gh(g,$)}onTransactionStarted(){}onTransactionCommitted(g){return sk.resolve()}forEachTarget(g,$){return this.persistence.getTargetCache().forEachTarget(g,$)}getSequenceNumberCount(g){let $=this.orphanedDocumentCount(g);return this.persistence.getTargetCache().getTargetCount(g).next(g=>$.next($=>g+$))}orphanedDocumentCount(g){let $=0;return this.forEachOrphanedDocumentSequenceNumber(g,g=>{$++}).next(()=>$)}forEachOrphanedDocumentSequenceNumber(g,$){return sk.forEach(this.orphanedSequenceNumbers,(ee,et)=>this.isPinned(g,ee,et).next(g=>g?sk.resolve():$(et)))}removeTargets(g,$,ee){return this.persistence.getTargetCache().removeTargets(g,$,ee)}removeOrphanedDocuments(g,$){let ee=0,et=this.persistence.getRemoteDocumentCache(),er=et.newChangeBuffer();return et.forEachDocumentKey(g,et=>this.isPinned(g,et,$).next(g=>{g||(ee++,er.removeEntry(et,sn.min()))})).next(()=>er.apply(g)).next(()=>ee)}markPotentiallyOrphaned(g,$){return this.orphanedSequenceNumbers.set($,g.currentSequenceNumber),sk.resolve()}removeTarget(g,$){let ee=$.withSequenceNumber(g.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(g,ee)}addReference(g,$,ee){return this.orphanedSequenceNumbers.set(ee,g.currentSequenceNumber),sk.resolve()}removeReference(g,$,ee){return this.orphanedSequenceNumbers.set(ee,g.currentSequenceNumber),sk.resolve()}updateLimboDocument(g,$){return this.orphanedSequenceNumbers.set($,g.currentSequenceNumber),sk.resolve()}documentSize(g){let $=g.key.toString().length;return g.isFoundDocument()&&($+=lp(g.data.value)),$}isPinned(g,$,ee){return sk.or([()=>this.persistence.mutationQueuesContainKey(g,$),()=>this.persistence.getTargetCache().containsKey(g,$),()=>{let g=this.orphanedSequenceNumbers.get($);return sk.resolve(void 0!==g&&g>ee)}])}getCacheSize(g){return this.persistence.getRemoteDocumentCache().getSize(g)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(g){this.serializer=g}createOrUpgrade(g,$,ee,et){let er=new sM("createOrUpgrade",$);ee<1&&et>=1&&(gg(g),gm(g),gE(g),gv(g));let en=sk.resolve();return ee<3&&et>=3&&(0!==ee&&(gw(g),gE(g)),en=en.next(()=>g_(er))),ee<4&&et>=4&&(0!==ee&&(en=en.next(()=>gy(g,er))),en=en.next(()=>{gI(g)})),ee<5&&et>=5&&(en=en.next(()=>this.removeAcknowledgedMutations(er))),ee<6&&et>=6&&(en=en.next(()=>(gT(g),this.addDocumentGlobal(er)))),ee<7&&et>=7&&(en=en.next(()=>this.ensureSequenceNumbers(er))),ee<8&&et>=8&&(en=en.next(()=>this.createCollectionParentIndex(g,er))),ee<9&&et>=9&&(en=en.next(()=>{gC(g)})),ee<10&&et>=10&&(en=en.next(()=>this.rewriteCanonicalIds(er))),ee<11&&et>=11&&(en=en.next(()=>{gO(g),gA(g)})),ee<12&&et>=12&&(en=en.next(()=>{gR(g)})),ee<13&&et>=13&&(en=en.next(()=>gS(g)).next(()=>this.rewriteRemoteDocumentCache(g,er)).next(()=>g.deleteObjectStore(s6))),ee<14&&et>=14&&(en=en.next(()=>this.runOverlayMigration(g,er))),ee<15&&et>=15&&(en=en.next(()=>gN(g))),en}addDocumentGlobal(g){let $=0;return g.store(s6).iterate((g,ee)=>{$+=ff(ee)}).next(()=>{let ee={byteSize:$};return g.store(oT).put(oE,ee)})}removeAcknowledgedMutations(g){let $=g.store(s8),ee=g.store(oe);return $.loadAll().next($=>sk.forEach($,$=>{let et=IDBKeyRange.bound([$.userId,aV],[$.userId,$.lastAcknowledgedBatchId]);return ee.loadAll(or,et).next(ee=>sk.forEach(ee,ee=>{i$(ee.userId===$.userId);let et=dW(this.serializer,ee);return fp(g,$.userId,et).next(()=>{})}))}))}ensureSequenceNumbers(g){let $=g.store(oO),ee=g.store(s6);return g.store(ok).get(oD).next(g=>{let et=ee=>$.put({targetId:0,path:s1(ee),sequenceNumber:g.highestListenSequenceNumber}),er=[];return ee.iterate((g,ee)=>{let en=new so(g),ei=gf(en);er.push($.get(ei).next(g=>g?sk.resolve():et(en)))}).next(()=>sk.waitFor(er))})}createCollectionParentIndex(g,$){g.createObjectStore(ox,{keyPath:oP});let ee=$.store(ox),et=new p7,er=g=>{if(et.add(g)){let $=g.lastSegment(),et=g.popLast();return ee.put({collectionId:$,parent:s1(et)})}};return $.store(s6).iterate({keysOnly:!0},(g,$)=>er(new so(g).popLast())).next(()=>$.store(oh).iterate({keysOnly:!0},([g,$,ee],et)=>er(s4($).popLast())))}rewriteCanonicalIds(g){let $=g.store(ow);return $.iterate((g,ee)=>{let et=dH(ee),er=dQ(this.serializer,et);return $.put(er)})}rewriteRemoteDocumentCache(g,$){let ee=$.store(s6),et=[];return ee.iterate((g,ee)=>{let er=$.store(of),en=gD(ee).path.toArray(),ei={prefixPath:en.slice(0,en.length-2),collectionGroup:en[en.length-2],documentId:en[en.length-1],readTime:ee.readTime||[0,0],unknownDocument:ee.unknownDocument,noDocument:ee.noDocument,document:ee.document,hasCommittedMutations:!!ee.hasCommittedMutations};et.push(er.put(ei))}).next(()=>sk.waitFor(et))}runOverlayMigration(g,$){let ee=$.store(oe),et=fW(this.serializer),er=new ga(gu.factory,this.serializer.remoteSerializer);return ee.loadAll().next(g=>{let ee=new Map;return g.forEach(g=>{var $;let et=null!==($=ee.get(g.userId))&&void 0!==$?$:u8();dW(this.serializer,g).keys().forEach(g=>et=et.add(g)),ee.set(g.userId,et)}),sk.forEach(ee,(g,ee)=>{let en=new iP(ee),ei=ps.forUser(this.serializer,en),es=er.getIndexManager(en);return new f6(et,fg.forUser(en,this.serializer,es,er.referenceDelegate),ei,es).recalculateAndSaveOverlaysForDocumentKeys(new ar($,sY.INVALID),g).next()})})}}function gf(g){return[0,s1(g)]}function gg(g){g.createObjectStore(s5)}function gm(g){g.createObjectStore(s8,{keyPath:s7}),g.createObjectStore(oe,{keyPath:ot,autoIncrement:!0}).createIndex(or,on,{unique:!0}),g.createObjectStore(oh)}function gy(g,$){return $.store(oe).loadAll().next(ee=>{g.deleteObjectStore(oe),g.createObjectStore(oe,{keyPath:ot,autoIncrement:!0}).createIndex(or,on,{unique:!0});let et=$.store(oe),er=ee.map(g=>et.put(g));return sk.waitFor(er)})}function gv(g){g.createObjectStore(s6)}function gS(g){let $=g.createObjectStore(of,{keyPath:og});$.createIndex(om,oy),$.createIndex(ov,oS)}function gT(g){g.createObjectStore(oT)}function gE(g){g.createObjectStore(oO,{keyPath:oA}).createIndex(oN,oR,{unique:!0}),g.createObjectStore(ow,{keyPath:oC}).createIndex(o_,oI,{unique:!0}),g.createObjectStore(ok)}function gw(g){g.deleteObjectStore(oO),g.deleteObjectStore(ow),g.deleteObjectStore(ok)}function gC(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}function g_(g){let $=g.store(ok),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sn.min().toTimestamp(),targetCount:0};return $.put(oD,ee)}function gI(g){g.createObjectStore(oM,{keyPath:oL})}function gO(g){g.createObjectStore(oF,{keyPath:oB})}function gA(g){g.createObjectStore(oj,{keyPath:oU})}function gN(g){g.createObjectStore(oV,{keyPath:oq,autoIncrement:!0}).createIndex(oz,oG,{unique:!1}),g.createObjectStore(o$,{keyPath:oK}).createIndex(oW,oH,{unique:!1}),g.createObjectStore(oQ,{keyPath:oY}).createIndex(oJ,oX,{unique:!1})}function gR(g){let $=g.createObjectStore(oZ,{keyPath:o0});$.createIndex(o1,o2,{unique:!1}),$.createIndex(o3,o4,{unique:!1})}function gD(g){return g.document?new sh(so.fromString(g.document.name).popFirst(5)):g.noDocument?sh.fromSegments(g.noDocument.path):g.unknownDocument?sh.fromSegments(g.unknownDocument.path):iG()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gk="IndexedDbPersistence",gx=null,gP=5e3,gM=4e3,gL=null,gF=null,gB="firestore_zombie",gj="main";class gU{constructor(g,$,ee,et,er,en,ei,es,eo,eu,eh=f3){if(this.allowTabSynchronization=g,this.persistenceKey=$,this.clientId=ee,this.queue=er,this.window=en,this.document=ei,this.sequenceNumberSyncer=eo,this.forceOwningTab=eu,this.schemaVersion=eh,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=g=>Promise.resolve(),!gU.isAvailable())throw new iH(iW.UNIMPLEMENTED,gF);this.referenceDelegate=new fV(this,et),this.dbName=$+gj,this.serializer=new dj(es),this.simpleDb=new sL(this.dbName,this.schemaVersion,new gp(this.serializer)),this.targetCache=new fC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fW(this.serializer),this.bundleCache=new pr,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===eu&&iV(gk,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new iH(iW.FAILED_PRECONDITION,gL);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",g=>this.targetCache.getHighestSequenceNumber(g))}).then(g=>{this.listenSequence=new sY(g,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(g=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(g)))}setPrimaryStateListener(g){return this.primaryStateListener=async $=>{if(this.started)return g($)},g(this.isPrimary)}setDatabaseDeletedListener(g){this.simpleDb.setVersionChangeListener(async $=>{null===$.newVersion&&await g()})}setNetworkEnabled(g){this.networkEnabled!==g&&(this.networkEnabled=g,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",g=>gq(g).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(g).next(g=>{g||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(g)).next($=>this.isPrimary&&!$?this.releasePrimaryLeaseIfHeld(g).next(()=>!1):!!$&&this.acquireOrExtendPrimaryLease(g).next(()=>!0))).catch(g=>{if(sj(g))return iU(gk,"Failed to extend owner lease: ",g),this.isPrimary;if(!this.allowTabSynchronization)throw g;return iU(gk,"Releasing owner lease after error during lease refresh",g),!1}).then(g=>{this.isPrimary!==g&&this.queue.enqueueRetryable(()=>this.primaryStateListener(g)),this.isPrimary=g})}verifyPrimaryLease(g){return gV(g).get(s9).next(g=>sk.resolve(this.isLocalClient(g)))}removeClientMetadata(g){return gq(g).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,gx)){this.lastGarbageCollectionTime=Date.now();let g=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",g=>{let $=an(g,oM);return $.loadAll().next(g=>{let ee=this.filterActiveClients(g,gx),et=g.filter(g=>-1===ee.indexOf(g));return sk.forEach(et,g=>$.delete(g.clientId)).next(()=>et)})}).catch(()=>[]);if(this.webStorage)for(let $ of g)this.webStorage.removeItem(this.zombiedClientLocalStorageKey($.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",gM,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(g){return!!g&&g.ownerId===this.clientId}canActAsPrimary(g){return this.forceOwningTab?sk.resolve(!0):gV(g).get(s9).next($=>{if(null!==$&&this.isWithinAge($.leaseTimestampMs,gP)&&!this.isClientZombied($.ownerId)){if(this.isLocalClient($)&&this.networkEnabled)return!0;if(!this.isLocalClient($)){if(!$.allowTabSynchronization)throw new iH(iW.FAILED_PRECONDITION,gL);return!1}}return!!this.networkEnabled&&!!this.inForeground||gq(g).loadAll().next(g=>void 0===this.filterActiveClients(g,gP).find(g=>{if(this.clientId!==g.clientId){let $=!this.networkEnabled&&g.networkEnabled,ee=!this.inForeground&&g.inForeground,et=this.networkEnabled===g.networkEnabled;if($||ee&&et)return!0}return!1}))}).next(g=>(this.isPrimary!==g&&iU(gk,`Client ${g?"is":"is not"} eligible for a primary lease.`),g))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[s5,oM],g=>{let $=new ar(g,sY.INVALID);return this.releasePrimaryLeaseIfHeld($).next(()=>this.removeClientMetadata($))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(g,$){return g.filter(g=>this.isWithinAge(g.updateTimeMs,$)&&!this.isClientZombied(g.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",g=>gq(g).loadAll().next(g=>this.filterActiveClients(g,gx).map(g=>g.clientId)))}get started(){return this._started}getMutationQueue(g,$){return fg.forUser(g,this.serializer,$,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(g){return new fr(g,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(g){return ps.forUser(this.serializer,g)}getBundleCache(){return this.bundleCache}runTransaction(g,$,ee){let et;iU(gk,"Starting transaction:",g);let er="readonly"===$?"readonly":"readwrite",en=at(this.schemaVersion);return this.simpleDb.runTransaction(g,er,en,er=>(et=new ar(er,this.listenSequence?this.listenSequence.next():sY.INVALID),"readwrite-primary"===$)?this.verifyPrimaryLease(et).next(g=>!!g||this.canActAsPrimary(et)).next($=>{if(!$)throw iV(`Failed to obtain primary lease for action '${g}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new iH(iW.FAILED_PRECONDITION,sN);return ee(et)}).next(g=>this.acquireOrExtendPrimaryLease(et).next(()=>g)):this.verifyAllowTabSynchronization(et).next(()=>ee(et))).then(g=>(et.raiseOnCommittedEvent(),g))}verifyAllowTabSynchronization(g){return gV(g).get(s9).next(g=>{if(null!==g&&this.isWithinAge(g.leaseTimestampMs,gP)&&!this.isClientZombied(g.ownerId)&&!this.isLocalClient(g)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!g.allowTabSynchronization))throw new iH(iW.FAILED_PRECONDITION,gL)})}acquireOrExtendPrimaryLease(g){let $={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gV(g).put(s9,$)}static isAvailable(){return sL.isAvailable()}releasePrimaryLeaseIfHeld(g){let $=gV(g);return $.get(s9).next(g=>this.isLocalClient(g)?(iU(gk,"Releasing primary lease."),$.delete(s9)):sk.resolve())}isWithinAge(g,$){let ee=Date.now(),et=ee-$,er=ee;return!(g<et)&&(!(g>er)||(iV(`Detected an update time that is in the future: ${g} > ${er}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var g;"function"==typeof(null===(g=this.window)||void 0===g?void 0:g.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let g=/(?:Version|Mobile)\/1[456]/;isSafari()&&(navigator.appVersion.match(g)||navigator.userAgent.match(g))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(g){var $;try{let ee=(null===($=this.webStorage)||void 0===$?void 0:$.getItem(this.zombiedClientLocalStorageKey(g)))!==null;return iU(gk,`Client '${g}' ${ee?"is":"is not"} zombied in LocalStorage`),ee}catch(g){return iV(gk,"Failed to get zombied client id.",g),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(g){iV("Failed to set zombie client id.",g)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(g){}}zombiedClientLocalStorageKey(g){return`${gB}_${this.persistenceKey}_${g}`}}function gV(g){return an(g,s5)}function gq(g){return an(g,oM)}function gz(g,$){let ee=g.projectId;return g.isDefaultDatabase||(ee+="."+g.database),"firestore/"+$+"/"+ee+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(g,$,ee,et,er){$=[...$],(g=[...g]).sort(ee),$.sort(ee);let en=g.length,ei=$.length,es=0,eo=0;for(;es<ei&&eo<en;){let en=ee(g[eo],$[es]);en<0?er(g[eo++]):en>0?et($[es++]):(es++,eo++)}for(;es<ei;)et($[es++]);for(;eo<en;)er(g[eo++])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g$="LocalStore",gK=3e8;class gW{constructor(g,$,ee,et){this.persistence=g,this.queryEngine=$,this.serializer=et,this.targetDataByTarget=new al(i9),this.targetIdByTarget=new uQ(g=>us(g),ul),this.collectionGroupReadTime=new Map,this.remoteDocuments=g.getRemoteDocumentCache(),this.targetCache=g.getTargetCache(),this.bundleCache=g.getBundleCache(),this.initializeUserComponents(ee)}initializeUserComponents(g){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(g),this.indexManager=this.persistence.getIndexManager(g),this.mutationQueue=this.persistence.getMutationQueue(g,this.indexManager),this.localDocuments=new f6(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(g){return this.persistence.runTransaction("Collect garbage","readwrite-primary",$=>g.collect($,this.targetDataByTarget))}}function gH(g,$,ee,et){return new gW(g,$,ee,et)}async function gQ(g,$){let ee=iK(g);return await ee.persistence.runTransaction("Handle user change","readonly",g=>{let et;return ee.mutationQueue.getAllMutationBatches(g).next(er=>(et=er,ee.initializeUserComponents($),ee.mutationQueue.getAllMutationBatches(g))).next($=>{let er=[],en=[],ei=u8();for(let g of et)for(let $ of(er.push(g.batchId),g.mutations))ei=ei.add($.key);for(let g of $)for(let $ of(en.push(g.batchId),g.mutations))ei=ei.add($.key);return ee.localDocuments.getDocuments(g,ei).next(g=>({affectedDocuments:g,removedBatchIds:er,addedBatchIds:en}))})})}function gY(g,$){let ee,et;let er=iK(g),en=sr.now(),ei=$.reduce((g,$)=>g.add($.key),u8());return er.persistence.runTransaction("Locally write mutations","readwrite",g=>{let es=uJ(),eo=u8();return er.remoteDocuments.getEntries(g,ei).next(g=>{(es=g).forEach((g,$)=>{$.isValidDocument()||(eo=eo.add(g))})}).next(()=>er.localDocuments.getOverlayedDocuments(g,es)).next(et=>{ee=et;let ei=[];for(let g of $){let $=cx(g,ee.get(g.key).overlayedDocument);null!=$&&ei.push(new cB(g.key,$,lk($.value.mapValue),cO.exists(!0)))}return er.mutationQueue.addMutationBatch(g,en,ei,$)}).next($=>{et=$;let en=$.applyToLocalDocumentSet(ee,eo);return er.documentOverlayCache.saveOverlays(g,$.batchId,en)})}).then(()=>({batchId:et.batchId,changes:u1(ee)}))}function gJ(g,$){let ee=iK(g);return ee.persistence.runTransaction("Acknowledge batch","readwrite-primary",g=>{let et=$.batch.keys(),er=ee.remoteDocuments.newChangeBuffer({trackRemovals:!0});return mr(ee,g,$,er).next(()=>er.apply(g)).next(()=>ee.mutationQueue.performConsistencyCheck(g)).next(()=>ee.documentOverlayCache.removeOverlaysForBatchId(g,et,$.batch.batchId)).next(()=>ee.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,gX($))).next(()=>ee.localDocuments.getDocuments(g,et))})}function gX(g){let $=u8();for(let ee=0;ee<g.mutationResults.length;++ee)g.mutationResults[ee].transformResults.length>0&&($=$.add(g.batch.mutations[ee].key));return $}function gZ(g,$){let ee=iK(g);return ee.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let et;return ee.mutationQueue.lookupMutationBatch(g,$).next($=>(i$(null!==$),et=$.keys(),ee.mutationQueue.removeMutationBatch(g,$))).next(()=>ee.mutationQueue.performConsistencyCheck(g)).next(()=>ee.documentOverlayCache.removeOverlaysForBatchId(g,et,$)).next(()=>ee.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,et)).next(()=>ee.localDocuments.getDocuments(g,et))})}function g0(g){let $=iK(g);return $.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>$.mutationQueue.getHighestUnacknowledgedBatchId(g))}function g1(g){let $=iK(g);return $.persistence.runTransaction("Get last remote snapshot version","readonly",g=>$.targetCache.getLastRemoteSnapshotVersion(g))}function g2(g,$){let ee=iK(g),et=$.snapshotVersion,er=ee.targetDataByTarget;return ee.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{let en=ee.remoteDocuments.newChangeBuffer({trackRemovals:!0});er=ee.targetDataByTarget;let ei=[];$.targetChanges.forEach((en,es)=>{let eo=er.get(es);if(!eo)return;ei.push(ee.targetCache.removeMatchingKeys(g,en.removedDocuments,es).next(()=>ee.targetCache.addMatchingKeys(g,en.addedDocuments,es)));let eu=eo.withSequenceNumber(g.currentSequenceNumber);null!==$.targetMismatches.get(es)?eu=eu.withResumeToken(aE.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):en.resumeToken.approximateByteSize()>0&&(eu=eu.withResumeToken(en.resumeToken,et)),er=er.insert(es,eu),g4(eo,eu,en)&&ei.push(ee.targetCache.updateTargetData(g,eu))});let es=uJ(),eo=u8();if($.documentUpdates.forEach(et=>{$.resolvedLimboDocuments.has(et)&&ei.push(ee.persistence.referenceDelegate.updateLimboDocument(g,et))}),ei.push(g3(g,en,$.documentUpdates).next(g=>{es=g.changedDocuments,eo=g.existenceChangedKeys})),!et.isEqual(sn.min())){let $=ee.targetCache.getLastRemoteSnapshotVersion(g).next($=>ee.targetCache.setTargetsMetadata(g,g.currentSequenceNumber,et));ei.push($)}return sk.waitFor(ei).next(()=>en.apply(g)).next(()=>ee.localDocuments.getLocalViewOfDocuments(g,es,eo)).next(()=>es)}).then(g=>(ee.targetDataByTarget=er,g))}function g3(g,$,ee){let et=u8(),er=u8();return ee.forEach(g=>et=et.add(g)),$.getEntries(g,et).next(g=>{let et=uJ();return ee.forEach((ee,en)=>{let ei=g.get(ee);en.isFoundDocument()!==ei.isFoundDocument()&&(er=er.add(ee)),en.isNoDocument()&&en.version.isEqual(sn.min())?($.removeEntry(ee,en.readTime),et=et.insert(ee,en)):!ei.isValidDocument()||en.version.compareTo(ei.version)>0||0===en.version.compareTo(ei.version)&&ei.hasPendingWrites?($.addEntry(en),et=et.insert(ee,en)):iU(g$,"Ignoring outdated watch update for ",ee,". Current version:",ei.version," Watch version:",en.version)}),{changedDocuments:et,existenceChangedKeys:er}})}function g4(g,$,ee){return!!(0===g.resumeToken.approximateByteSize()||$.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=gK)||ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}async function g6(g,$){let ee=iK(g);try{await ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>sk.forEach($,$=>sk.forEach($.addedKeys,et=>ee.persistence.referenceDelegate.addReference(g,$.targetId,et)).next(()=>sk.forEach($.removedKeys,et=>ee.persistence.referenceDelegate.removeReference(g,$.targetId,et)))))}catch(g){if(sj(g))iU(g$,"Failed to update sequence numbers: "+g);else throw g}for(let g of $){let $=g.targetId;if(!g.fromCache){let g=ee.targetDataByTarget.get($),et=g.snapshotVersion,er=g.withLastLimboFreeSnapshotVersion(et);ee.targetDataByTarget=ee.targetDataByTarget.insert($,er)}}}function g5(g,$){let ee=iK(g);return ee.persistence.runTransaction("Get next mutation batch","readonly",g=>(void 0===$&&($=aV),ee.mutationQueue.getNextMutationBatchAfterBatchId(g,$)))}function g9(g,$){let ee=iK(g);return ee.persistence.runTransaction("read document","readonly",g=>ee.localDocuments.getDocument(g,$))}function g8(g,$){let ee=iK(g);return ee.persistence.runTransaction("Allocate target","readwrite",g=>{let et;return ee.targetCache.getTargetData(g,$).next(er=>er?(et=er,sk.resolve(et)):ee.targetCache.allocateTargetId(g).next(er=>(et=new dB($,er,"TargetPurposeListen",g.currentSequenceNumber),ee.targetCache.addTargetData(g,et).next(()=>et))))}).then(g=>{let et=ee.targetDataByTarget.get(g.targetId);return(null===et||g.snapshotVersion.compareTo(et.snapshotVersion)>0)&&(ee.targetDataByTarget=ee.targetDataByTarget.insert(g.targetId,g),ee.targetIdByTarget.set($,g.targetId)),g})}function g7(g,$,ee){let et=iK(g),er=et.targetIdByTarget.get(ee);return void 0!==er?sk.resolve(et.targetDataByTarget.get(er)):et.targetCache.getTargetData($,ee)}async function me(g,$,ee){let et=iK(g),er=et.targetDataByTarget.get($),en=ee?"readwrite":"readwrite-primary";try{ee||await et.persistence.runTransaction("Release target",en,g=>et.persistence.referenceDelegate.removeTarget(g,er))}catch(g){if(sj(g))iU(g$,`Failed to update sequence numbers for target ${$}: ${g}`);else throw g}et.targetDataByTarget=et.targetDataByTarget.remove($),et.targetIdByTarget.delete(er.target)}function mt(g,$,ee){let et=iK(g),er=sn.min(),en=u8();return et.persistence.runTransaction("Execute query","readonly",g=>g7(et,g,uk($)).next($=>{if($)return er=$.lastLimboFreeSnapshotVersion,et.targetCache.getMatchingKeysForTargetId(g,$.targetId).next(g=>{en=g})}).next(()=>et.queryEngine.getDocumentsMatchingQuery(g,$,ee?er:sn.min(),ee?en:u8())).next(g=>(mu(et,uK($),g),{documents:g,remoteKeys:en})))}function mr(g,$,ee,et){let er=ee.batch,en=er.keys(),ei=sk.resolve();return en.forEach(g=>{ei=ei.next(()=>et.getEntry($,g)).next($=>{let en=ee.docVersions.get(g);i$(null!==en),0>$.version.compareTo(en)&&(er.applyToRemoteDocument($,ee),$.isValidDocument()&&($.setReadTime(ee.commitVersion),et.addEntry($)))})}),ei.next(()=>g.mutationQueue.removeMutationBatch($,er))}function mn(g,$){let ee=iK(g),et=iK(ee.mutationQueue);return ee.persistence.runTransaction("Lookup mutation documents","readonly",g=>et.lookupMutationKeys(g,$).next($=>$?ee.localDocuments.getDocuments(g,$):sk.resolve(null)))}function mi(g,$){iK(iK(g,gW).mutationQueue).removeCachedMutationKeys($)}function ms(g){return iK(iK(g,gW).persistence).getActiveClients()}function mo(g,$){let ee=iK(g),et=iK(ee.targetCache),er=ee.targetDataByTarget.get($);return er?Promise.resolve(er.target):ee.persistence.runTransaction("Get target data","readonly",g=>et.getTargetDataForTarget(g,$).next(g=>g?g.target:null))}function ml(g,$){let ee=iK(g),et=ee.collectionGroupReadTime.get($)||sn.min();return ee.persistence.runTransaction("Get new document changes","readonly",g=>ee.remoteDocuments.getAllFromCollectionGroup(g,$,s_(et,sp),Number.MAX_SAFE_INTEGER)).then(g=>(mu(ee,$,g),g))}function mu(g,$,ee){let et=g.collectionGroupReadTime.get($)||sn.min();ee.forEach((g,$)=>{$.readTime.compareTo(et)>0&&(et=$.readTime)}),g.collectionGroupReadTime.set($,et)}function mh(g){return uk(uC(so.fromString(`__bundle__/docs/${g}`)))}async function mp(g,$,ee,et){let er=iK(g),en=u8(),ei=uJ();for(let g of ee){let ee=$.toDocumentKey(g.metadata.name);g.document&&(en=en.add(ee));let et=$.toMutableDocument(g);et.setReadTime($.toSnapshotVersion(g.metadata.readTime)),ei=ei.insert(ee,et)}let es=er.remoteDocuments.newChangeBuffer({trackRemovals:!0}),eo=await g8(er,mh(et));return er.persistence.runTransaction("Apply bundle documents","readwrite",g=>g3(g,es,ei).next($=>(es.apply(g),$)).next($=>er.targetCache.removeMatchingKeysForTargetId(g,eo.targetId).next(()=>er.targetCache.addMatchingKeys(g,en,eo.targetId)).next(()=>er.localDocuments.getLocalViewOfDocuments(g,$.changedDocuments,$.existenceChangedKeys)).next(()=>$.changedDocuments)))}function mf(g,$){let ee=iK(g),et=hk($.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",g=>ee.bundleCache.getBundleMetadata(g,$.id)).then(g=>!!g&&g.createTime.compareTo(et)>=0)}function mg(g,$){let ee=iK(g);return ee.persistence.runTransaction("Save bundle","readwrite",g=>ee.bundleCache.saveBundleMetadata(g,$))}async function mm(g,$,ee=u8()){let et=await g8(g,uk(d3($.bundledQuery))),er=iK(g);return er.persistence.runTransaction("Save named query","readwrite",g=>{let en=hk($.readTime);if(et.snapshotVersion.compareTo(en)>=0)return er.bundleCache.saveNamedQuery(g,$);let ei=et.withResumeToken(aE.EMPTY_BYTE_STRING,en);return er.targetDataByTarget=er.targetDataByTarget.insert(ei.targetId,ei),er.targetCache.updateTargetData(g,ei).next(()=>er.targetCache.removeMatchingKeysForTargetId(g,et.targetId)).next(()=>er.targetCache.addMatchingKeys(g,ee,et.targetId)).next(()=>er.bundleCache.saveNamedQuery(g,$))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.initialized=!1}initialize(g,$){this.localDocumentsView=g,this.indexManager=$,this.initialized=!0}getDocumentsMatchingQuery(g,$,ee,et){return this.performQueryUsingIndex(g,$).next(er=>er||this.performQueryUsingRemoteKeys(g,$,et,ee)).next(ee=>ee||this.executeFullCollectionScan(g,$))}performQueryUsingIndex(g,$){if(uI($))return sk.resolve(null);let ee=uk($);return this.indexManager.getIndexType(g,ee).next(et=>0===et?null:(null!==$.limit&&1===et&&(ee=uk($=uM($,null,"F"))),this.indexManager.getDocumentsMatchingTarget(g,ee).next(et=>{let er=u8(...et);return this.localDocumentsView.getDocuments(g,er).next(et=>this.indexManager.getMinOffset(g,ee).next(ee=>{let en=this.applyQuery($,et);return this.needsRefill($,en,er,ee.readTime)?this.performQueryUsingIndex(g,uM($,null,"F")):this.appendRemainingResults(g,en,$,ee)}))})))}performQueryUsingRemoteKeys(g,$,ee,et){return uI($)||et.isEqual(sn.min())?this.executeFullCollectionScan(g,$):this.localDocumentsView.getDocuments(g,ee).next(er=>{let en=this.applyQuery($,er);return this.needsRefill($,en,ee,et)?this.executeFullCollectionScan(g,$):(ij()<=eh.in.DEBUG&&iU("QueryEngine","Re-using previous result from %s to execute query: %s",et.toString(),uU($)),this.appendRemainingResults(g,en,$,s_(et,sp)))})}applyQuery(g,$){let ee=new af(uW(g));return $.forEach(($,et)=>{uV(g,et)&&(ee=ee.add(et))}),ee}needsRefill(g,$,ee,et){if(null===g.limit)return!1;if(ee.size!==$.size)return!0;let er="F"===g.limitType?$.last():$.first();return!!er&&(er.hasPendingWrites||er.version.compareTo(et)>0)}executeFullCollectionScan(g,$){return ij()<=eh.in.DEBUG&&iU("QueryEngine","Using full collection scan to execute query:",uU($)),this.localDocumentsView.getDocumentsMatchingQuery(g,$,sO.min())}appendRemainingResults(g,$,ee,et){return this.localDocumentsView.getDocumentsMatchingQuery(g,ee,et).next(g=>($.forEach($=>{g=g.insert($.key,$)}),g))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv="firestore_clients";function mS(g,$){return`${mv}_${g}_${$}`}let mT="firestore_mutations";function mE(g,$,ee){let et=`${mT}_${g}_${ee}`;return $.isAuthenticated()&&(et+=`_${$.uid}`),et}let mw="firestore_targets";function mC(g,$){return`${mw}_${g}_${$}`}let m_="firestore_online_state";function mI(g){return`${m_}_${g}`}let mO="firestore_bundle_loaded_v2";function mA(g){return`${mO}_${g}`}let mN="firestore_sequence_number";function mR(g){return`${mN}_${g}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mD="SharedClientState";class mk{constructor(g,$,ee,et){this.user=g,this.batchId=$,this.state=ee,this.error=et}static fromWebStorageEntry(g,$,ee){let et;let er=JSON.parse(ee),en="object"==typeof er&&-1!==["pending","acknowledged","rejected"].indexOf(er.state)&&(void 0===er.error||"object"==typeof er.error);return(en&&er.error&&(en="string"==typeof er.error.message&&"string"==typeof er.error.code)&&(et=new iH(er.error.code,er.error.message)),en)?new mk(g,$,er.state,et):(iV(mD,`Failed to parse mutation state for ID '${$}': ${ee}`),null)}toWebStorageJSON(){let g={state:this.state,updateTimeMs:Date.now()};return this.error&&(g.error={code:this.error.code,message:this.error.message}),JSON.stringify(g)}}class mx{constructor(g,$,ee){this.targetId=g,this.state=$,this.error=ee}static fromWebStorageEntry(g,$){let ee;let et=JSON.parse($),er="object"==typeof et&&-1!==["not-current","current","rejected"].indexOf(et.state)&&(void 0===et.error||"object"==typeof et.error);return(er&&et.error&&(er="string"==typeof et.error.message&&"string"==typeof et.error.code)&&(ee=new iH(et.error.code,et.error.message)),er)?new mx(g,et.state,ee):(iV(mD,`Failed to parse target state for ID '${g}': ${$}`),null)}toWebStorageJSON(){let g={state:this.state,updateTimeMs:Date.now()};return this.error&&(g.error={code:this.error.code,message:this.error.message}),JSON.stringify(g)}}class mP{constructor(g,$){this.clientId=g,this.activeTargetIds=$}static fromWebStorageEntry(g,$){let ee=JSON.parse($),et="object"==typeof ee&&ee.activeTargetIds instanceof Array,er=ce();for(let g=0;et&&g<ee.activeTargetIds.length;++g)et=aG(ee.activeTargetIds[g]),er=er.add(ee.activeTargetIds[g]);return et?new mP(g,er):(iV(mD,`Failed to parse client data for instance '${g}': ${$}`),null)}}class mM{constructor(g,$){this.clientId=g,this.onlineState=$}static fromWebStorageEntry(g){let $=JSON.parse(g);return"object"==typeof $&&-1!==["Unknown","Online","Offline"].indexOf($.onlineState)&&"string"==typeof $.clientId?new mM($.clientId,$.onlineState):(iV(mD,`Failed to parse online state: ${g}`),null)}}class mL{constructor(){this.activeTargetIds=ce()}addQueryTarget(g){this.activeTargetIds=this.activeTargetIds.add(g)}removeQueryTarget(g){this.activeTargetIds=this.activeTargetIds.delete(g)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class mF{constructor(g,$,ee,et,er){this.window=g,this.queue=$,this.persistenceKey=ee,this.localClientId=et,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new al(i9),this.started=!1,this.earlyEvents=[];let en=ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=er,this.localClientStorageKey=mS(this.persistenceKey,this.localClientId),this.sequenceNumberKey=mR(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new mL),this.clientStateKeyRe=RegExp(`^${mv}_${en}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${mT}_${en}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${mw}_${en}_(\\d+)$`),this.onlineStateKey=mI(this.persistenceKey),this.bundleLoadedKey=mA(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(g){return!!(g&&g.localStorage)}async start(){for(let g of(await this.syncEngine.getActiveClients())){if(g===this.localClientId)continue;let $=this.getItem(mS(this.persistenceKey,g));if($){let ee=mP.fromWebStorageEntry(g,$);ee&&(this.activeClients=this.activeClients.insert(ee.clientId,ee))}}this.persistClientState();let g=this.storage.getItem(this.onlineStateKey);if(g){let $=this.fromWebStorageOnlineState(g);$&&this.handleOnlineStateEvent($)}for(let g of this.earlyEvents)this.handleWebStorageEvent(g);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(g){this.setItem(this.sequenceNumberKey,JSON.stringify(g))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(g){let $=!1;return this.activeClients.forEach((ee,et)=>{et.activeTargetIds.has(g)&&($=!0)}),$}addPendingMutation(g){this.persistMutationState(g,"pending")}updateMutationState(g,$,ee){this.persistMutationState(g,$,ee),this.removeMutationState(g)}addLocalQueryTarget(g){let $="not-current";if(this.isActiveQueryTarget(g)){let ee=this.storage.getItem(mC(this.persistenceKey,g));if(ee){let et=mx.fromWebStorageEntry(g,ee);et&&($=et.state)}}return this.localClientState.addQueryTarget(g),this.persistClientState(),$}removeLocalQueryTarget(g){this.localClientState.removeQueryTarget(g),this.persistClientState()}isLocalQueryTarget(g){return this.localClientState.activeTargetIds.has(g)}clearQueryState(g){this.removeItem(mC(this.persistenceKey,g))}updateQueryState(g,$,ee){this.persistQueryTargetState(g,$,ee)}handleUserChange(g,$,ee){$.forEach(g=>{this.removeMutationState(g)}),this.currentUser=g,ee.forEach(g=>{this.addPendingMutation(g)})}setOnlineState(g){this.persistOnlineState(g)}notifyBundleLoaded(g){this.persistBundleLoadedState(g)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(g){let $=this.storage.getItem(g);return iU(mD,"READ",g,$),$}setItem(g,$){iU(mD,"SET",g,$),this.storage.setItem(g,$)}removeItem(g){iU(mD,"REMOVE",g),this.storage.removeItem(g)}handleWebStorageEvent(g){let $=g;if($.storageArea===this.storage){if(iU(mD,"EVENT",$.key,$.newValue),$.key===this.localClientStorageKey){iV("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(async()=>{if(!this.started){this.earlyEvents.push($);return}if(null!==$.key){if(this.clientStateKeyRe.test($.key)){if(null!=$.newValue){let g=this.fromWebStorageClientState($.key,$.newValue);if(g)return this.handleClientStateEvent(g.clientId,g)}else{let g=this.fromWebStorageClientStateKey($.key);return this.handleClientStateEvent(g,null)}}else if(this.mutationBatchKeyRe.test($.key)){if(null!==$.newValue){let g=this.fromWebStorageMutationMetadata($.key,$.newValue);if(g)return this.handleMutationBatchEvent(g)}}else if(this.queryTargetKeyRe.test($.key)){if(null!==$.newValue){let g=this.fromWebStorageQueryTargetMetadata($.key,$.newValue);if(g)return this.handleQueryTargetEvent(g)}}else if($.key===this.onlineStateKey){if(null!==$.newValue){let g=this.fromWebStorageOnlineState($.newValue);if(g)return this.handleOnlineStateEvent(g)}}else if($.key===this.sequenceNumberKey){let g=mB($.newValue);g!==sY.INVALID&&this.sequenceNumberHandler(g)}else if($.key===this.bundleLoadedKey){let g=this.fromWebStoreBundleLoadedState($.newValue);await Promise.all(g.map(g=>this.syncEngine.synchronizeWithChangedDocuments(g)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(g,$,ee){let et=new mk(this.currentUser,g,$,ee),er=mE(this.persistenceKey,this.currentUser,g);this.setItem(er,et.toWebStorageJSON())}removeMutationState(g){let $=mE(this.persistenceKey,this.currentUser,g);this.removeItem($)}persistOnlineState(g){let $={clientId:this.localClientId,onlineState:g};this.storage.setItem(this.onlineStateKey,JSON.stringify($))}persistQueryTargetState(g,$,ee){let et=mC(this.persistenceKey,g),er=new mx(g,$,ee);this.setItem(et,er.toWebStorageJSON())}persistBundleLoadedState(g){let $=JSON.stringify(Array.from(g));this.setItem(this.bundleLoadedKey,$)}fromWebStorageClientStateKey(g){let $=this.clientStateKeyRe.exec(g);return $?$[1]:null}fromWebStorageClientState(g,$){let ee=this.fromWebStorageClientStateKey(g);return mP.fromWebStorageEntry(ee,$)}fromWebStorageMutationMetadata(g,$){let ee=this.mutationBatchKeyRe.exec(g),et=Number(ee[1]),er=void 0!==ee[2]?ee[2]:null;return mk.fromWebStorageEntry(new iP(er),et,$)}fromWebStorageQueryTargetMetadata(g,$){let ee=Number(this.queryTargetKeyRe.exec(g)[1]);return mx.fromWebStorageEntry(ee,$)}fromWebStorageOnlineState(g){return mM.fromWebStorageEntry(g)}fromWebStoreBundleLoadedState(g){return JSON.parse(g)}async handleMutationBatchEvent(g){if(g.user.uid!==this.currentUser.uid){iU(mD,`Ignoring mutation for non-active user ${g.user.uid}`);return}return this.syncEngine.applyBatchState(g.batchId,g.state,g.error)}handleQueryTargetEvent(g){return this.syncEngine.applyTargetState(g.targetId,g.state,g.error)}handleClientStateEvent(g,$){let ee=$?this.activeClients.insert(g,$):this.activeClients.remove(g),et=this.extractActiveQueryTargets(this.activeClients),er=this.extractActiveQueryTargets(ee),en=[],ei=[];return er.forEach(g=>{et.has(g)||en.push(g)}),et.forEach(g=>{er.has(g)||ei.push(g)}),this.syncEngine.applyActiveTargetsChange(en,ei).then(()=>{this.activeClients=ee})}handleOnlineStateEvent(g){this.activeClients.get(g.clientId)&&this.onlineStateHandler(g.onlineState)}extractActiveQueryTargets(g){let $=ce();return g.forEach((g,ee)=>{$=$.unionWith(ee.activeTargetIds)}),$}}function mB(g){let $=sY.INVALID;if(null!=g)try{let ee=JSON.parse(g);i$("number"==typeof ee),$=ee}catch(g){iV(mD,"Failed to read sequence number from WebStorage",g)}return $}class mj{constructor(){this.localState=new mL,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(g){}updateMutationState(g,$,ee){}addLocalQueryTarget(g){return this.localState.addQueryTarget(g),this.queryState[g]||"not-current"}updateQueryState(g,$,ee){this.queryState[g]=$}removeLocalQueryTarget(g){this.localState.removeQueryTarget(g)}isLocalQueryTarget(g){return this.localState.activeTargetIds.has(g)}clearQueryState(g){delete this.queryState[g]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(g){return this.localState.activeTargetIds.has(g)}start(){return this.localState=new mL,Promise.resolve()}handleUserChange(g,$,ee){}setOnlineState(g){}shutdown(){}writeSequenceNumber(g){}notifyBundleLoaded(g){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{addCallback(g){}shutdown(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(g){this.sendFn=g.sendFn,this.closeFn=g.closeFn}onOpen(g){this.wrappedOnOpen=g}onClose(g){this.wrappedOnClose=g}onMessage(g){this.wrappedOnMessage=g}close(){this.closeFn()}send(g){this.sendFn(g)}callOnOpen(){this.wrappedOnOpen()}callOnClose(g){this.wrappedOnClose(g)}callOnMessage(g){this.wrappedOnMessage(g)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mq=null;function mz(){return 268435456+Math.round(2147483648*Math.random())}function mG(){return null===mq?mq=mz():mq++,"0x"+mq.toString(16)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(g){return new Promise(($,ee)=>{g((g,et)=>{g?ee(g):$(et)})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mK="1.7.3",mW="GrpcConnection",mH=`gl-node/${process.versions.node} fire/${iM} grpc/${mK}`;function mQ(g,$,ee,et){i$(null===$||"OAuth"===$.type);let er=new iR.SF;return $&&$.headers.forEach((g,$)=>er.set($,g)),ee&&ee.headers.forEach((g,$)=>er.set($,g)),et&&er.set("X-Firebase-GMPID",et),er.set("X-Goog-Api-Client",mH),er.set("Google-Cloud-Resource-Prefix",g),er.set("x-goog-request-params",g),er}class mY{constructor(g,$){this.databaseInfo=$,this.cachedStub=null,this.firestore=g.google.firestore.v1,this.databasePath=`projects/${$.databaseId.projectId}/databases/${$.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){iU(mW,"Creating Firestore stub.");let g=this.databaseInfo.ssl?iR.K9.createSsl():iR.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,g)}return this.cachedStub}invokeRPC(g,$,ee,et,er){let en=mG(),ei=this.ensureActiveStub(),es=mQ(this.databasePath,et,er,this.databaseInfo.appId),eo=Object.assign({database:this.databasePath},ee);return m$($=>(iU(mW,`RPC '${g}' ${en} invoked with request:`,ee),ei[g](eo,es,(ee,et)=>{ee?(iU(mW,`RPC '${g}' ${en} failed with error:`,ee),$(new iH(c0(ee.code),ee.message))):(iU(mW,`RPC '${g}' ${en} completed with response:`,et),$(void 0,et))})))}invokeStreamingRPC(g,$,ee,et,er,en){let ei=mG(),es=[],eo=new iQ;iU(mW,`RPC '${g}' ${ei} invoked (streaming) with request:`,ee);let eu=this.ensureActiveStub(),eh=mQ(this.databasePath,et,er,this.databaseInfo.appId),ep=Object.assign(Object.assign({},ee),{database:this.databasePath}),ef=eu[g](ep,eh),eg=!1;return ef.on("data",$=>{iU(mW,`RPC ${g} ${ei} received result:`,$),es.push($),void 0!==en&&es.length===en&&(eg=!0,eo.resolve(es))}),ef.on("end",()=>{iU(mW,`RPC '${g}' ${ei} completed.`),eg||(eg=!0,eo.resolve(es))}),ef.on("error",$=>{iU(mW,`RPC '${g}' ${ei} failed with error:`,$);let ee=c0($.code);eo.reject(new iH(ee,$.message))}),eo.promise}openStream(g,$,ee){let et=mG(),er=this.ensureActiveStub(),en=mQ(this.databasePath,$,ee,this.databaseInfo.appId),ei=er[g](en),es=!1,eo=g=>{es||(es=!0,eu.callOnClose(g),ei.end())},eu=new mV({sendFn:$=>{if(es)iU(mW,`RPC '${g}' stream ${et} not sending because gRPC stream is closed:`,$);else{iU(mW,`RPC '${g}' stream ${et} sending:`,$);try{ei.write($)}catch(g){throw iV("Failure sending:",$),iV("Error:",g),g}}},closeFn:()=>{iU(mW,`RPC '${g}' stream ${et} closed locally via close().`),eo()}});return ei.on("data",$=>{es||(iU(mW,`RPC '${g}' stream ${et} received:`,$),eu.callOnMessage($))}),ei.on("end",()=>{iU(mW,`RPC '${g}' stream ${et} ended.`),eo()}),ei.on("error",$=>{es||(iq(mW,`RPC '${g}' stream ${et} error. Code:`,$.code,"Message:",$.message),eo(new iH(c0($.code),$.message)))}),iU(mW,`Opening RPC '${g}' stream ${et} to ${this.databaseInfo.host}`),setTimeout(()=>{eu.callOnOpen()},0),eu}}let mJ={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var mX={nested:mJ},mZ=Object.freeze({__proto__:null,nested:mJ,default:mX});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0={longs:String,enums:String,defaults:!0,oneofs:!1};function m1(){let g=iD.im(mZ,m0);return iR.Rz(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(g){return new mY(m1(),g)}function m3(){return new mU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function m6(){return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(g){return new hw(g,!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m9="ExponentialBackoff",m8=1e3,m7=1.5,ye=6e4;class yt{constructor(g,$,ee=m8,et=m7,er=ye){this.queue=g,this.timerId=$,this.initialDelayMs=ee,this.backoffFactor=et,this.maxDelayMs=er,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(g){this.cancel();let $=Math.floor(this.currentBaseMs+this.jitterDelayMs()),ee=Math.max(0,Date.now()-this.lastAttemptTime),et=Math.max(0,$-ee);et>0&&iU(m9,`Backing off for ${et} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${$} ms, last attempt: ${ee} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,et,()=>(this.lastAttemptTime=Date.now(),g())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yr="PersistentStream",yn=6e4,yi=1e4;class ys{constructor(g,$,ee,et,er,en,ei,es){this.queue=g,this.idleTimerId=ee,this.healthTimerId=et,this.connection=er,this.authCredentialsProvider=en,this.appCheckCredentialsProvider=ei,this.listener=es,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new yt(g,$)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,yn,()=>this.handleIdleCloseTimer()))}sendRequest(g){this.cancelIdleCheck(),this.stream.send(g)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(g,$){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==g?this.backoff.reset():$&&$.code===iW.RESOURCE_EXHAUSTED?(iV($.toString()),iV("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):$&&$.code===iW.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=g,await this.listener.onClose($)}tearDown(){}auth(){this.state=1;let g=this.getCloseGuardedDispatcher(this.closeCount),$=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([g,ee])=>{this.closeCount===$&&this.startStream(g,ee)},$=>{g(()=>{let g=new iH(iW.UNKNOWN,"Fetching auth token failed: "+$.message);return this.handleStreamClose(g)})})}startStream(g,$){let ee=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(g,$),this.stream.onOpen(()=>{ee(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,yi,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(g=>{ee(()=>this.handleStreamClose(g))}),this.stream.onMessage(g=>{ee(()=>this.onMessage(g))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(g){return iU(yr,`close with error: ${g}`),this.stream=null,this.close(4,g)}getCloseGuardedDispatcher(g){return $=>{this.queue.enqueueAndForget(()=>this.closeCount===g?$():(iU(yr,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yo extends ys{constructor(g,$,ee,et,er,en){super(g,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",$,ee,et,en),this.serializer=er}startRpc(g,$){return this.connection.openStream("Listen",g,$)}onMessage(g){this.backoff.reset();let $=hH(this.serializer,g),ee=hY(g);return this.listener.onWatchChange($,ee)}watch(g){let $={};$.database=hj(this.serializer),$.addTarget=dn(this.serializer,g);let ee=dt(this.serializer,g);ee&&($.labels=ee),this.sendRequest($)}unwatch(g){let $={};$.database=hj(this.serializer),$.removeTarget=g,this.sendRequest($)}}class yl extends null{constructor(g,$,ee,et,er,en){super(g,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",$,ee,et,en),this.serializer=er,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc(g,$){return this.connection.openStream("Write",g,$)}onMessage(g){if(i$(!!g.streamToken),this.lastStreamToken=g.streamToken,!this.handshakeComplete_)return i$(!g.writeResults||0===g.writeResults.length),this.handshakeComplete_=!0,this.listener.onHandshakeComplete();{this.backoff.reset();let $=h2(g.writeResults,g.commitTime),ee=hk(g.commitTime);return this.listener.onMutationResult(ee,$)}}writeHandshake(){let g={};g.database=hj(this.serializer),this.sendRequest(g)}writeMutations(g){let $={streamToken:this.lastStreamToken,writes:g.map(g=>hJ(this.serializer,g))};this.sendRequest($)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{}class yh extends yu{constructor(g,$,ee,et){super(),this.authCredentials=g,this.appCheckCredentials=$,this.connection=ee,this.serializer=et,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new iH(iW.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(g,$,ee){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([et,er])=>this.connection.invokeRPC(g,$,ee,et,er)).catch(g=>{if("FirebaseError"===g.name)throw g.code===iW.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g;throw new iH(iW.UNKNOWN,g.toString())})}invokeStreamingRPC(g,$,ee,et){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([er,en])=>this.connection.invokeStreamingRPC(g,$,ee,er,en,et)).catch(g=>{if("FirebaseError"===g.name)throw g.code===iW.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g;throw new iH(iW.UNKNOWN,g.toString())})}terminate(){this.terminated=!0}}function yp(g,$,ee,et){return new yh(g,$,ee,et)}async function yf(g,$){let ee=iK(g),et=hj(ee.serializer)+"/documents",er={writes:$.map(g=>hJ(ee.serializer,g))};await ee.invokeRPC("Commit",et,er)}async function yg(g,$){let ee=iK(g),et=hj(ee.serializer)+"/documents",er={documents:$.map(g=>hM(ee.serializer,g))},en=await ee.invokeStreamingRPC("BatchGetDocuments",et,er,$.length),ei=new Map;en.forEach(g=>{let $=hW(ee.serializer,g);ei.set($.key.toString(),$)});let es=[];return $.forEach(g=>{let $=ei.get(g.toString());i$(!!$),es.push($)}),es}async function ym(g,$,ee){var et;let er=iK(g),{request:en,aliasMap:ei}=h8(er.serializer,uk($),ee),es=en.parent;er.connection.shouldResourcePathBeIncludedInRequest||delete en.parent;let eo=(await er.invokeStreamingRPC("RunAggregationQuery",es,en,1)).filter(g=>!!g.result);i$(1===eo.length);let eu=null===(et=eo[0].result)||void 0===et?void 0:et.aggregateFields;return Object.keys(eu).reduce((g,$)=>(g[ei[$]]=eu[$],g),{})}function yy(g,$,ee){let et=iK(g);return et.verifyInitialized(),new yl($,et.connection,et.authCredentials,et.appCheckCredentials,et.serializer,ee)}function yv(g,$,ee){let et=iK(g);return et.verifyInitialized(),new yo($,et.connection,et.authCredentials,et.appCheckCredentials,et.serializer,ee)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yS="OnlineStateTracker",yT=1,yE=1e4;class yw{constructor(g,$){this.asyncQueue=g,this.onlineStateHandler=$,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",yE,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${yE/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(g){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=yT&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${yT} times. Most recent error: ${g.toString()}`),this.setAndBroadcast("Offline")))}set(g){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===g&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(g)}setAndBroadcast(g){g!==this.state&&(this.state=g,this.onlineStateHandler(g))}logClientOfflineWarningIfNecessary(g){let $=`Could not reach Cloud Firestore backend. ${g}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(iV($),this.shouldWarnClientIsOffline=!1):iU(yS,$)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yC="RemoteStore",y_=10;class yI{constructor(g,$,ee,et,er){this.localStore=g,this.datastore=$,this.asyncQueue=ee,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=er,this.connectivityMonitor.addCallback(g=>{ee.enqueueAndForget(async()=>{yF(this)&&(iU(yC,"Restarting streams for network reachability change."),await y2(this))})}),this.onlineStateTracker=new yw(ee,et)}}function yO(g,$,ee,et,er){return new yI(g,$,ee,et,er)}async function yA(g){if(yF(g))for(let $ of g.onNetworkStatusChange)await $(!0)}async function yN(g){for(let $ of g.onNetworkStatusChange)await $(!1)}async function yR(g){let $=iK(g);iU(yC,"RemoteStore shutting down."),$.offlineCauses.add(5),await yN($),$.connectivityMonitor.shutdown(),$.onlineStateTracker.set("Unknown")}function yD(g,$){let ee=iK(g);!ee.listenTargets.has($.targetId)&&(ee.listenTargets.set($.targetId,$),yL(ee)?yM(ee):y6(ee).isOpen()&&yx(ee,$))}function yk(g,$){let ee=iK(g),et=y6(ee);ee.listenTargets.delete($),et.isOpen()&&yP(ee,$),0===ee.listenTargets.size&&(et.isOpen()?et.markIdle():yF(ee)&&ee.onlineStateTracker.set("Unknown"))}function yx(g,$){if(g.watchChangeAggregator.recordPendingTargetRequest($.targetId),$.resumeToken.approximateByteSize()>0||$.snapshotVersion.compareTo(sn.min())>0){let ee=g.remoteSyncer.getRemoteKeysForTarget($.targetId).size;$=$.withExpectedCount(ee)}y6(g).watch($)}function yP(g,$){g.watchChangeAggregator.recordPendingTargetRequest($),y6(g).unwatch($)}function yM(g){g.watchChangeAggregator=new hg({getRemoteKeysForTarget:$=>g.remoteSyncer.getRemoteKeysForTarget($),getTargetDataForTarget:$=>g.listenTargets.get($)||null,getDatabaseId:()=>g.datastore.serializer.databaseId}),y6(g).start(),g.onlineStateTracker.handleWatchStreamStart()}function yL(g){return yF(g)&&!y6(g).isStarted()&&g.listenTargets.size>0}function yF(g){return 0===iK(g).offlineCauses.size}function yB(g){g.watchChangeAggregator=void 0}async function yj(g){g.listenTargets.forEach(($,ee)=>{yx(g,$)})}async function yU(g,$){yB(g),yL(g)?(g.onlineStateTracker.handleWatchStreamFailure($),yM(g)):g.onlineStateTracker.set("Unknown")}async function yV(g,$,ee){if(g.onlineStateTracker.set("Online"),$ instanceof hh&&2===$.state&&$.cause){try{await y$(g,$)}catch(ee){iU(yC,"Failed to remove targets %s: %s ",$.targetIds.join(","),ee),await yq(g,ee)}return}if($ instanceof hl?g.watchChangeAggregator.handleDocumentChange($):$ instanceof hu?g.watchChangeAggregator.handleExistenceFilter($):g.watchChangeAggregator.handleTargetChange($),!ee.isEqual(sn.min()))try{let $=await g1(g.localStore);ee.compareTo($)>=0&&await yG(g,ee)}catch($){iU(yC,"Failed to raise snapshot:",$),await yq(g,$)}}async function yq(g,$,ee){if(sj($))g.offlineCauses.add(1),await yN(g),g.onlineStateTracker.set("Offline"),ee||(ee=()=>g1(g.localStore)),g.asyncQueue.enqueueRetryable(async()=>{iU(yC,"Retrying IndexedDB access"),await ee(),g.offlineCauses.delete(1),await yA(g)});else throw $}function yz(g,$){return $().catch(ee=>yq(g,ee,$))}function yG(g,$){let ee=g.watchChangeAggregator.createRemoteEvent($);return ee.targetChanges.forEach((ee,et)=>{if(ee.resumeToken.approximateByteSize()>0){let er=g.listenTargets.get(et);er&&g.listenTargets.set(et,er.withResumeToken(ee.resumeToken,$))}}),ee.targetMismatches.forEach(($,ee)=>{let et=g.listenTargets.get($);et&&(g.listenTargets.set($,et.withResumeToken(aE.EMPTY_BYTE_STRING,et.snapshotVersion)),yP(g,$),yx(g,new dB(et.target,$,ee,et.sequenceNumber)))}),g.remoteSyncer.applyRemoteEvent(ee)}async function y$(g,$){let ee=$.cause;for(let et of $.targetIds)g.listenTargets.has(et)&&(await g.remoteSyncer.rejectListen(et,ee),g.listenTargets.delete(et),g.watchChangeAggregator.removeTarget(et))}async function yK(g){let $=iK(g),ee=y5($),et=$.writePipeline.length>0?$.writePipeline[$.writePipeline.length-1].batchId:aV;for(;yW($);)try{let g=await g5($.localStore,et);if(null===g){0===$.writePipeline.length&&ee.markIdle();break}et=g.batchId,yH($,g)}catch(g){await yq($,g)}yQ($)&&yY($)}function yW(g){return yF(g)&&g.writePipeline.length<y_}function yH(g,$){g.writePipeline.push($);let ee=y5(g);ee.isOpen()&&ee.handshakeComplete&&ee.writeMutations($.mutations)}function yQ(g){return yF(g)&&!y5(g).isStarted()&&g.writePipeline.length>0}function yY(g){y5(g).start()}async function yJ(g){y5(g).writeHandshake()}async function yX(g){let $=y5(g);for(let ee of g.writePipeline)$.writeMutations(ee.mutations)}async function yZ(g,$,ee){let et=g.writePipeline.shift(),er=cQ.from(et,$,ee);await yz(g,()=>g.remoteSyncer.applySuccessfulWrite(er)),await yK(g)}async function y0(g,$){$&&y5(g).handshakeComplete&&await y1(g,$),yQ(g)&&yY(g)}async function y1(g,$){if(cZ($.code)){let ee=g.writePipeline.shift();y5(g).inhibitBackoff(),await yz(g,()=>g.remoteSyncer.rejectFailedWrite(ee.batchId,$)),await yK(g)}}async function y2(g){let $=iK(g);$.offlineCauses.add(4),await yN($),$.onlineStateTracker.set("Unknown"),$.offlineCauses.delete(4),await yA($)}async function y3(g,$){let ee=iK(g);ee.asyncQueue.verifyOperationInProgress(),iU(yC,"RemoteStore received new credentials");let et=yF(ee);ee.offlineCauses.add(3),await yN(ee),et&&ee.onlineStateTracker.set("Unknown"),await ee.remoteSyncer.handleCredentialChange($),ee.offlineCauses.delete(3),await yA(ee)}async function y4(g,$){let ee=iK(g);$?(ee.offlineCauses.delete(2),await yA(ee)):$||(ee.offlineCauses.add(2),await yN(ee),ee.onlineStateTracker.set("Unknown"))}function y6(g){return g.watchStream||(g.watchStream=yv(g.datastore,g.asyncQueue,{onOpen:yj.bind(null,g),onClose:yU.bind(null,g),onWatchChange:yV.bind(null,g)}),g.onNetworkStatusChange.push(async $=>{$?(g.watchStream.inhibitBackoff(),yL(g)?yM(g):g.onlineStateTracker.set("Unknown")):(await g.watchStream.stop(),yB(g))})),g.watchStream}function y5(g){return g.writeStream||(g.writeStream=yy(g.datastore,g.asyncQueue,{onOpen:yJ.bind(null,g),onClose:y0.bind(null,g),onHandshakeComplete:yX.bind(null,g),onMutationResult:yZ.bind(null,g)}),g.onNetworkStatusChange.push(async $=>{$?(g.writeStream.inhibitBackoff(),await yK(g)):(await g.writeStream.stop(),g.writePipeline.length>0&&(iU(yC,`Stopping write stream with ${g.writePipeline.length} pending writes`),g.writePipeline=[]))})),g.writeStream}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y9="AsyncQueue";class y8{constructor(g,$,ee,et,er){this.asyncQueue=g,this.timerId=$,this.targetTimeMs=ee,this.op=et,this.removalCallback=er,this.deferred=new iQ,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(g,$,ee,et,er){let en=new y8(g,$,Date.now()+ee,et,er);return en.start(ee),en}start(g){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),g)}skipDelay(){return this.handleDelayElapsed()}cancel(g){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new iH(iW.CANCELLED,"Operation cancelled"+(g?": "+g:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(g=>this.deferred.resolve(g))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y7(g,$){if(iV(y9,`${$}: ${g}`),sj(g))return new iH(iW.UNAVAILABLE,`${$}: ${g}`);throw g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(g){g?this.comparator=($,ee)=>g($,ee)||sh.comparator($.key,ee.key):this.comparator=(g,$)=>sh.comparator(g.key,$.key),this.keyedMap=uZ(),this.sortedSet=new al(this.comparator)}static emptySet(g){return new ve(g.comparator)}has(g){return null!=this.keyedMap.get(g)}get(g){return this.keyedMap.get(g)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(g){let $=this.keyedMap.get(g);return $?this.sortedSet.indexOf($):-1}get size(){return this.sortedSet.size}forEach(g){this.sortedSet.inorderTraversal(($,ee)=>(g($),!1))}add(g){let $=this.delete(g.key);return $.copy($.keyedMap.insert(g.key,g),$.sortedSet.insert(g,null))}delete(g){let $=this.get(g);return $?this.copy(this.keyedMap.remove(g),this.sortedSet.remove($)):this}isEqual(g){if(!(g instanceof ve)||this.size!==g.size)return!1;let $=this.sortedSet.getIterator(),ee=g.sortedSet.getIterator();for(;$.hasNext();){let g=$.getNext().key,et=ee.getNext().key;if(!g.isEqual(et))return!1}return!0}toString(){let g=[];return(this.forEach($=>{g.push($.toString())}),0===g.length)?"DocumentSet ()":"DocumentSet (\n  "+g.join("  \n")+"\n)"}copy(g,$){let ee=new ve;return ee.comparator=this.comparator,ee.keyedMap=g,ee.sortedSet=$,ee}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(){this.changeMap=new al(sh.comparator)}track(g){let $=g.doc.key,ee=this.changeMap.get($);if(!ee){this.changeMap=this.changeMap.insert($,g);return}0!==g.type&&3===ee.type?this.changeMap=this.changeMap.insert($,g):3===g.type&&1!==ee.type?this.changeMap=this.changeMap.insert($,{type:ee.type,doc:g.doc}):2===g.type&&2===ee.type?this.changeMap=this.changeMap.insert($,{type:2,doc:g.doc}):2===g.type&&0===ee.type?this.changeMap=this.changeMap.insert($,{type:0,doc:g.doc}):1===g.type&&0===ee.type?this.changeMap=this.changeMap.remove($):1===g.type&&2===ee.type?this.changeMap=this.changeMap.insert($,{type:1,doc:ee.doc}):0===g.type&&1===ee.type?this.changeMap=this.changeMap.insert($,{type:2,doc:g.doc}):iG()}getChanges(){let g=[];return this.changeMap.inorderTraversal(($,ee)=>{g.push(ee)}),g}}class vr{constructor(g,$,ee,et,er,en,ei,es,eo){this.query=g,this.docs=$,this.oldDocs=ee,this.docChanges=et,this.mutatedKeys=er,this.fromCache=en,this.syncStateChanged=ei,this.excludesMetadataChanges=es,this.hasCachedResults=eo}static fromInitialDocuments(g,$,ee,et,er){let en=[];return $.forEach(g=>{en.push({type:0,doc:g})}),new vr(g,$,ve.emptySet($),en,ee,et,!0,!1,er)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(g){if(this.fromCache!==g.fromCache||this.hasCachedResults!==g.hasCachedResults||this.syncStateChanged!==g.syncStateChanged||!this.mutatedKeys.isEqual(g.mutatedKeys)||!uB(this.query,g.query)||!this.docs.isEqual(g.docs)||!this.oldDocs.isEqual(g.oldDocs))return!1;let $=this.docChanges,ee=g.docChanges;if($.length!==ee.length)return!1;for(let g=0;g<$.length;g++)if($[g].type!==ee[g].type||!$[g].doc.isEqual(ee[g].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.viewSnap=void 0,this.listeners=[]}}function vi(){return new vs}class vs{constructor(){this.queries=new uQ(g=>uj(g),uB),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}}async function vo(g,$){let ee=iK(g),et=$.query,er=!1,en=ee.queries.get(et);if(en||(er=!0,en=new vn),er)try{en.viewSnap=await ee.onListen(et)}catch(ee){let g=y7(ee,`Initialization of query '${uU($.query)}' failed`);$.onError(g);return}ee.queries.set(et,en),en.listeners.push($),$.applyOnlineStateChange(ee.onlineState),en.viewSnap&&$.onViewSnapshot(en.viewSnap)&&vf(ee)}async function vl(g,$){let ee=iK(g),et=$.query,er=!1,en=ee.queries.get(et);if(en){let g=en.listeners.indexOf($);g>=0&&(en.listeners.splice(g,1),er=0===en.listeners.length)}if(er)return ee.queries.delete(et),ee.onUnlisten(et)}function vu(g,$){let ee=iK(g),et=!1;for(let g of $){let $=g.query,er=ee.queries.get($);if(er){for(let $ of er.listeners)$.onViewSnapshot(g)&&(et=!0);er.viewSnap=g}}et&&vf(ee)}function vh(g,$,ee){let et=iK(g),er=et.queries.get($);if(er)for(let g of er.listeners)g.onError(ee);et.queries.delete($)}function vp(g,$){let ee=iK(g);ee.onlineState=$;let et=!1;ee.queries.forEach((g,ee)=>{for(let g of ee.listeners)g.applyOnlineStateChange($)&&(et=!0)}),et&&vf(ee)}function vf(g){g.snapshotsInSyncListeners.forEach(g=>{g.next()})}class vg{constructor(g,$,ee){this.query=g,this.queryObserver=$,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=ee||{}}onViewSnapshot(g){if(!this.options.includeMetadataChanges){let $=[];for(let ee of g.docChanges)3!==ee.type&&$.push(ee);g=new vr(g.query,g.docs,g.oldDocs,$,g.mutatedKeys,g.fromCache,g.syncStateChanged,!0,g.hasCachedResults)}let $=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(g)&&(this.queryObserver.next(g),$=!0):this.shouldRaiseInitialEvent(g,this.onlineState)&&(this.raiseInitialEvent(g),$=!0),this.snap=g,$}onError(g){this.queryObserver.error(g)}applyOnlineStateChange(g){this.onlineState=g;let $=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,g)&&(this.raiseInitialEvent(this.snap),$=!0),$}shouldRaiseInitialEvent(g,$){if(!g.fromCache)return!0;let ee="Offline"!==$;return(!this.options.waitForSyncWhenOnline||!ee)&&(!g.docs.isEmpty()||g.hasCachedResults||"Offline"===$)}shouldRaiseEvent(g){if(g.docChanges.length>0)return!0;let $=this.snap&&this.snap.hasPendingWrites!==g.hasPendingWrites;return(!!g.syncStateChanged||!!$)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(g){g=vr.fromInitialDocuments(g.query,g.docs,g.mutatedKeys,g.fromCache,g.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(g)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(g,$,ee,et){this.targetId=g,this.fromCache=$,this.addedKeys=ee,this.removedKeys=et}static fromSnapshot(g,$){let ee=u8(),et=u8();for(let g of $.docChanges)switch(g.type){case 0:ee=ee.add(g.doc.key);break;case 1:et=et.add(g.doc.key)}return new vm(g,$.fromCache,ee,et)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(g){this.serializer=g}toDocumentKey(g){return hL(this.serializer,g)}toMutableDocument(g){return g.metadata.exists?hG(this.serializer,g.document,!1):lx.newNoDocument(this.toDocumentKey(g.metadata.name),this.toSnapshotVersion(g.metadata.readTime))}toSnapshotVersion(g){return hk(g)}}class vv{constructor(g,$,ee){this.bundleMetadata=g,this.localStore=$,this.serializer=ee,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vS(g)}addSizedElement(g){this.progress.bytesLoaded+=g.byteLength;let $=this.progress.documentsLoaded;if(g.payload.namedQuery)this.queries.push(g.payload.namedQuery);else if(g.payload.documentMetadata){this.documents.push({metadata:g.payload.documentMetadata}),!g.payload.documentMetadata.exists&&++$;let ee=so.fromString(g.payload.documentMetadata.name);this.collectionGroups.add(ee.get(ee.length-2))}else g.payload.document&&(this.documents[this.documents.length-1].document=g.payload.document,++$);return $!==this.progress.documentsLoaded?(this.progress.documentsLoaded=$,Object.assign({},this.progress)):null}getQueryDocumentMapping(g){let $=new Map,ee=new vy(this.serializer);for(let et of g)if(et.metadata.queries){let g=ee.toDocumentKey(et.metadata.name);for(let ee of et.metadata.queries){let et=($.get(ee)||u8()).add(g);$.set(ee,et)}}return $}async complete(){let g=await mp(this.localStore,new vy(this.serializer),this.documents,this.bundleMetadata.id),$=this.getQueryDocumentMapping(this.documents);for(let g of this.queries)await mm(this.localStore,g,$.get(g.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:g}}}function vS(g){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}function vT(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(g){this.key=g}}class vw{constructor(g){this.key=g}}class vC{constructor(g,$){this.query=g,this._syncedDocuments=$,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=u8(),this.mutatedKeys=u8(),this.docComparator=uW(g),this.documentSet=new ve(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(g,$){let ee=$?$.changeSet:new vt,et=$?$.documentSet:this.documentSet,er=$?$.mutatedKeys:this.mutatedKeys,en=et,ei=!1,es="F"===this.query.limitType&&et.size===this.query.limit?et.last():null,eo="L"===this.query.limitType&&et.size===this.query.limit?et.first():null;if(g.inorderTraversal((g,$)=>{let eu=et.get(g),eh=uV(this.query,$)?$:null,ep=!!eu&&this.mutatedKeys.has(eu.key),ef=!!eh&&(eh.hasLocalMutations||this.mutatedKeys.has(eh.key)&&eh.hasCommittedMutations),eg=!1;eu&&eh?eu.data.isEqual(eh.data)?ep!==ef&&(ee.track({type:3,doc:eh}),eg=!0):!this.shouldWaitForSyncedDocument(eu,eh)&&(ee.track({type:2,doc:eh}),eg=!0,(es&&this.docComparator(eh,es)>0||eo&&0>this.docComparator(eh,eo))&&(ei=!0)):!eu&&eh?(ee.track({type:0,doc:eh}),eg=!0):eu&&!eh&&(ee.track({type:1,doc:eu}),eg=!0,(es||eo)&&(ei=!0)),eg&&(eh?(en=en.add(eh),er=ef?er.add(g):er.delete(g)):(en=en.delete(g),er=er.delete(g)))}),null!==this.query.limit)for(;en.size>this.query.limit;){let g="F"===this.query.limitType?en.last():en.first();en=en.delete(g.key),er=er.delete(g.key),ee.track({type:1,doc:g})}return{documentSet:en,changeSet:ee,needsRefill:ei,mutatedKeys:er}}shouldWaitForSyncedDocument(g,$){return g.hasLocalMutations&&$.hasCommittedMutations&&!$.hasLocalMutations}applyChanges(g,$,ee){let et=this.documentSet;this.documentSet=g.documentSet,this.mutatedKeys=g.mutatedKeys;let er=g.changeSet.getChanges();er.sort((g,$)=>v_(g.type,$.type)||this.docComparator(g.doc,$.doc)),this.applyTargetChange(ee);let en=$?this.updateLimboDocuments():[],ei=0===this.limboDocuments.size&&this.current?1:0,es=ei!==this.syncState;return(this.syncState=ei,0!==er.length||es)?{snapshot:new vr(this.query,g.documentSet,et,er,g.mutatedKeys,0===ei,es,!1,!!ee&&ee.resumeToken.approximateByteSize()>0),limboChanges:en}:{limboChanges:en}}applyOnlineStateChange(g){return this.current&&"Offline"===g?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new vt,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(g){return!this._syncedDocuments.has(g)&&!!this.documentSet.has(g)&&!this.documentSet.get(g).hasLocalMutations}applyTargetChange(g){g&&(g.addedDocuments.forEach(g=>this._syncedDocuments=this._syncedDocuments.add(g)),g.modifiedDocuments.forEach(g=>{}),g.removedDocuments.forEach(g=>this._syncedDocuments=this._syncedDocuments.delete(g)),this.current=g.current)}updateLimboDocuments(){if(!this.current)return[];let g=this.limboDocuments;this.limboDocuments=u8(),this.documentSet.forEach(g=>{this.shouldBeInLimbo(g.key)&&(this.limboDocuments=this.limboDocuments.add(g.key))});let $=[];return g.forEach(g=>{this.limboDocuments.has(g)||$.push(new vw(g))}),this.limboDocuments.forEach(ee=>{g.has(ee)||$.push(new vE(ee))}),$}synchronizeWithPersistedState(g){this._syncedDocuments=g.remoteKeys,this.limboDocuments=u8();let $=this.computeDocChanges(g.documents);return this.applyChanges($,!0)}computeInitialSnapshot(){return vr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function v_(g,$){let ee=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iG()}};return ee(g)-ee($)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI="SyncEngine";class vO{constructor(g,$,ee){this.query=g,this.targetId=$,this.view=ee}}class vA{constructor(g){this.key=g,this.receivedDocument=!1}}class vN{constructor(g,$,ee,et,er,en){this.localStore=g,this.remoteStore=$,this.eventManager=ee,this.sharedClientState=et,this.currentUser=er,this.maxConcurrentLimboResolutions=en,this.syncEngineListener={},this.queryViewsByQuery=new uQ(g=>uj(g),uB),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new al(sh.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new f8,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=fw.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function vR(g,$,ee,et,er,en,ei){let es=new vN(g,$,ee,et,er,en);return ei&&(es._isPrimaryClient=!0),es}async function vD(g,$){let ee,et;let er=br(g),en=er.queryViewsByQuery.get($);if(en)ee=en.targetId,er.sharedClientState.addLocalQueryTarget(ee),et=en.view.computeInitialSnapshot();else{let g=await g8(er.localStore,uk($)),en=er.sharedClientState.addLocalQueryTarget(g.targetId);ee=g.targetId,et=await vk(er,$,ee,"current"===en,g.resumeToken),er.isPrimaryClient&&yD(er.remoteStore,g)}return et}async function vk(g,$,ee,et,er){g.applyDocChanges=($,ee,et)=>vY(g,$,ee,et);let en=await mt(g.localStore,$,!0),ei=new vC($,en.remoteKeys),es=ei.computeDocChanges(en.documents),eo=ho.createSynthesizedTargetChangeForCurrentChange(ee,et&&"Offline"!==g.onlineState,er),eu=ei.applyChanges(es,g.isPrimaryClient,eo);vK(g,ee,eu.limboChanges);let eh=new vO($,ee,ei);return g.queryViewsByQuery.set($,eh),g.queriesByTarget.has(ee)?g.queriesByTarget.get(ee).push($):g.queriesByTarget.set(ee,[$]),eu.snapshot}async function vx(g,$){let ee=iK(g),et=ee.queryViewsByQuery.get($),er=ee.queriesByTarget.get(et.targetId);if(er.length>1){ee.queriesByTarget.set(et.targetId,er.filter(g=>!uB(g,$))),ee.queryViewsByQuery.delete($);return}ee.isPrimaryClient?(ee.sharedClientState.removeLocalQueryTarget(et.targetId),ee.sharedClientState.isActiveQueryTarget(et.targetId)||await me(ee.localStore,et.targetId,!1).then(()=>{ee.sharedClientState.clearQueryState(et.targetId),yk(ee.remoteStore,et.targetId),vG(ee,et.targetId)}).catch(sD)):(vG(ee,et.targetId),await me(ee.localStore,et.targetId,!0))}async function vP(g,$,ee){let et=bn(g);try{let g=await gY(et.localStore,$);et.sharedClientState.addPendingMutation(g.batchId),vq(et,g.batchId,ee),await vQ(et,g.changes),await yK(et.remoteStore)}catch($){let g=y7($,"Failed to persist write");ee.reject(g)}}async function vM(g,$){let ee=iK(g);try{let g=await g2(ee.localStore,$);$.targetChanges.forEach((g,$)=>{let et=ee.activeLimboResolutionsByTarget.get($);et&&(i$(g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size<=1),g.addedDocuments.size>0?et.receivedDocument=!0:g.modifiedDocuments.size>0?i$(et.receivedDocument):g.removedDocuments.size>0&&(i$(et.receivedDocument),et.receivedDocument=!1))}),await vQ(ee,g,$)}catch(g){await sD(g)}}function vL(g,$,ee){let et=iK(g);if(et.isPrimaryClient&&0===ee||!et.isPrimaryClient&&1===ee){let g=[];et.queryViewsByQuery.forEach((ee,et)=>{let er=et.view.applyOnlineStateChange($);er.snapshot&&g.push(er.snapshot)}),vp(et.eventManager,$),g.length&&et.syncEngineListener.onWatchChange(g),et.onlineState=$,et.isPrimaryClient&&et.sharedClientState.setOnlineState($)}}async function vF(g,$,ee){let et=iK(g);et.sharedClientState.updateQueryState($,"rejected",ee);let er=et.activeLimboResolutionsByTarget.get($),en=er&&er.key;if(en){let g=new al(sh.comparator);g=g.insert(en,lx.newNoDocument(en,sn.min()));let ee=u8().add(en),er=new hs(sn.min(),new Map,new al(i9),g,ee);await vM(et,er),et.activeLimboTargetsByKey=et.activeLimboTargetsByKey.remove(en),et.activeLimboResolutionsByTarget.delete($),vH(et)}else await me(et.localStore,$,!1).then(()=>vG(et,$,ee)).catch(sD)}async function vB(g,$){let ee=iK(g),et=$.batch.batchId;try{let g=await gJ(ee.localStore,$);vz(ee,et,null),vU(ee,et),ee.sharedClientState.updateMutationState(et,"acknowledged"),await vQ(ee,g)}catch(g){await sD(g)}}async function vj(g,$,ee){let et=iK(g);try{let g=await gZ(et.localStore,$);vz(et,$,ee),vU(et,$),et.sharedClientState.updateMutationState($,"rejected",ee),await vQ(et,g)}catch(g){await sD(g)}}function vU(g,$){(g.pendingWritesCallbacks.get($)||[]).forEach(g=>{g.resolve()}),g.pendingWritesCallbacks.delete($)}function vV(g,$){g.pendingWritesCallbacks.forEach(g=>{g.forEach(g=>{g.reject(new iH(iW.CANCELLED,$))})}),g.pendingWritesCallbacks.clear()}function vq(g,$,ee){let et=g.mutationUserCallbacks[g.currentUser.toKey()];et||(et=new al(i9)),et=et.insert($,ee),g.mutationUserCallbacks[g.currentUser.toKey()]=et}function vz(g,$,ee){let et=iK(g),er=et.mutationUserCallbacks[et.currentUser.toKey()];if(er){let g=er.get($);g&&(ee?g.reject(ee):g.resolve(),er=er.remove($)),et.mutationUserCallbacks[et.currentUser.toKey()]=er}}function vG(g,$,ee=null){for(let et of(g.sharedClientState.removeLocalQueryTarget($),g.queriesByTarget.get($)))g.queryViewsByQuery.delete(et),ee&&g.syncEngineListener.onWatchError(et,ee);g.queriesByTarget.delete($),g.isPrimaryClient&&g.limboDocumentRefs.removeReferencesForId($).forEach($=>{g.limboDocumentRefs.containsKey($)||v$(g,$)})}function v$(g,$){g.enqueuedLimboResolutions.delete($.path.canonicalString());let ee=g.activeLimboTargetsByKey.get($);null!==ee&&(yk(g.remoteStore,ee),g.activeLimboTargetsByKey=g.activeLimboTargetsByKey.remove($),g.activeLimboResolutionsByTarget.delete(ee),vH(g))}function vK(g,$,ee){for(let et of ee)et instanceof vE?(g.limboDocumentRefs.addReference(et.key,$),vW(g,et)):et instanceof vw?(iU(vI,"Document no longer in limbo: "+et.key),g.limboDocumentRefs.removeReference(et.key,$),g.limboDocumentRefs.containsKey(et.key)||v$(g,et.key)):iG()}function vW(g,$){let ee=$.key,et=ee.path.canonicalString();g.activeLimboTargetsByKey.get(ee)||g.enqueuedLimboResolutions.has(et)||(iU(vI,"New document in limbo: "+ee),g.enqueuedLimboResolutions.add(et),vH(g))}function vH(g){for(;g.enqueuedLimboResolutions.size>0&&g.activeLimboTargetsByKey.size<g.maxConcurrentLimboResolutions;){let $=g.enqueuedLimboResolutions.values().next().value;g.enqueuedLimboResolutions.delete($);let ee=new sh(so.fromString($)),et=g.limboTargetIdGenerator.next();g.activeLimboResolutionsByTarget.set(et,new vA(ee)),g.activeLimboTargetsByKey=g.activeLimboTargetsByKey.insert(ee,et),yD(g.remoteStore,new dB(uk(uC(ee.path)),et,"TargetPurposeLimboResolution",sY.INVALID))}}async function vQ(g,$,ee){let et=iK(g),er=[],en=[],ei=[];et.queryViewsByQuery.isEmpty()||(et.queryViewsByQuery.forEach((g,es)=>{ei.push(et.applyDocChanges(es,$,ee).then(g=>{if((g||ee)&&et.isPrimaryClient&&et.sharedClientState.updateQueryState(es.targetId,(null==g?void 0:g.fromCache)?"not-current":"current"),g){er.push(g);let $=vm.fromSnapshot(es.targetId,g);en.push($)}}))}),await Promise.all(ei),et.syncEngineListener.onWatchChange(er),await g6(et.localStore,en))}async function vY(g,$,ee,et){let er=$.view.computeDocChanges(ee);er.needsRefill&&(er=await mt(g.localStore,$.query,!1).then(({documents:g})=>$.view.computeDocChanges(g,er)));let en=et&&et.targetChanges.get($.targetId),ei=$.view.applyChanges(er,g.isPrimaryClient,en);return vK(g,$.targetId,ei.limboChanges),ei.snapshot}async function vJ(g,$){let ee=iK(g);if(!ee.currentUser.isEqual($)){iU(vI,"User change. New user:",$.toKey());let g=await gQ(ee.localStore,$);ee.currentUser=$,vV(ee,"'waitForPendingWrites' promise is rejected due to a user change."),ee.sharedClientState.handleUserChange($,g.removedBatchIds,g.addedBatchIds),await vQ(ee,g.affectedDocuments)}}function vX(g,$){let ee=iK(g),et=ee.activeLimboResolutionsByTarget.get($);if(et&&et.receivedDocument)return u8().add(et.key);{let g=u8(),et=ee.queriesByTarget.get($);if(!et)return g;for(let $ of et){let et=ee.queryViewsByQuery.get($);g=g.unionWith(et.view.syncedDocuments)}return g}}async function vZ(g,$){let ee=iK(g),et=await mt(ee.localStore,$.query,!0),er=$.view.synchronizeWithPersistedState(et);return ee.isPrimaryClient&&vK(ee,$.targetId,er.limboChanges),er}async function v0(g,$){let ee=iK(g);return ml(ee.localStore,$).then(g=>vQ(ee,g))}async function v3(g,$,ee,et){let er=iK(g),en=await mn(er.localStore,$);if(null===en){iU(vI,"Cannot apply mutation batch with id: "+$);return}"pending"===ee?await yK(er.remoteStore):"acknowledged"===ee||"rejected"===ee?(vz(er,$,et||null),vU(er,$),mi(er.localStore,$)):iG(),await vQ(er,en)}async function v4(g,$){let ee=iK(g);if(br(ee),bn(ee),!0===$&&!0!==ee._isPrimaryClient){let g=ee.sharedClientState.getAllActiveQueryTargets(),$=await v5(ee,g.toArray());for(let g of(ee._isPrimaryClient=!0,await y4(ee.remoteStore,!0),$))yD(ee.remoteStore,g)}else if(!1===$&&!1!==ee._isPrimaryClient){let g=[],$=Promise.resolve();ee.queriesByTarget.forEach((et,er)=>{ee.sharedClientState.isLocalQueryTarget(er)?g.push(er):$=$.then(()=>(vG(ee,er),me(ee.localStore,er,!0))),yk(ee.remoteStore,er)}),await $,await v5(ee,g),v6(ee),ee._isPrimaryClient=!1,await y4(ee.remoteStore,!1)}}function v6(g){let $=iK(g);$.activeLimboResolutionsByTarget.forEach((g,ee)=>{yk($.remoteStore,ee)}),$.limboDocumentRefs.removeAllReferences(),$.activeLimboResolutionsByTarget=new Map,$.activeLimboTargetsByKey=new al(sh.comparator)}async function v5(g,$,ee){let et=iK(g),er=[],en=[];for(let g of $){let $;let ee=et.queriesByTarget.get(g);if(ee&&0!==ee.length)for(let g of($=await g8(et.localStore,uk(ee[0])),ee)){let $=et.queryViewsByQuery.get(g),ee=await vZ(et,$);ee.snapshot&&en.push(ee.snapshot)}else{let ee=await mo(et.localStore,g);$=await g8(et.localStore,ee),await vk(et,v9(ee),g,!1,$.resumeToken)}er.push($)}return et.syncEngineListener.onWatchChange(en),er}function v9(g){return uw(g.path,g.collectionGroup,g.orderBy,g.filters,g.limit,"F",g.startAt,g.endAt)}function v8(g){return ms(iK(g).localStore)}async function v7(g,$,ee,et){let er=iK(g);if(er._isPrimaryClient){iU(vI,"Ignoring unexpected query state notification.");return}let en=er.queriesByTarget.get($);if(en&&en.length>0)switch(ee){case"current":case"not-current":{let g=await ml(er.localStore,uK(en[0])),et=hs.createSynthesizedRemoteEventForCurrentChange($,"current"===ee,aE.EMPTY_BYTE_STRING);await vQ(er,g,et);break}case"rejected":await me(er.localStore,$,!0),vG(er,$,et);break;default:iG()}}async function bt(g,$,ee){let et=br(g);if(et._isPrimaryClient){for(let g of $){if(et.queriesByTarget.has(g)){iU(vI,"Adding an already active target "+g);continue}let $=await mo(et.localStore,g),ee=await g8(et.localStore,$);await vk(et,v9($),ee.targetId,!1,ee.resumeToken),yD(et.remoteStore,ee)}for(let g of ee)et.queriesByTarget.has(g)&&await me(et.localStore,g,!1).then(()=>{yk(et.remoteStore,g),vG(et,g)}).catch(sD)}}function br(g){let $=iK(g);return $.remoteStore.remoteSyncer.applyRemoteEvent=vM.bind(null,$),$.remoteStore.remoteSyncer.getRemoteKeysForTarget=vX.bind(null,$),$.remoteStore.remoteSyncer.rejectListen=vF.bind(null,$),$.syncEngineListener.onWatchChange=vu.bind(null,$.eventManager),$.syncEngineListener.onWatchError=vh.bind(null,$.eventManager),$}function bn(g){let $=iK(g);return $.remoteStore.remoteSyncer.applySuccessfulWrite=vB.bind(null,$),$.remoteStore.remoteSyncer.rejectFailedWrite=vj.bind(null,$),$}async function bi(g,$,ee){try{let et=await $.getMetadata();if(await mf(g.localStore,et))return await $.close(),ee._completeWith(vT(et)),Promise.resolve(new Set);ee._updateProgress(vS(et));let er=new vv(et,g.localStore,$.serializer),en=await $.nextElement();for(;en;){let g=await er.addSizedElement(en);g&&ee._updateProgress(g),en=await $.nextElement()}let ei=await er.complete();return await vQ(g,ei.changedDocs,void 0),await mg(g.localStore,et),ee._completeWith(ei.progress),Promise.resolve(ei.changedCollectionGroups)}catch(g){return iq(vI,`Loading bundle failed with ${g}`),ee._failWith(g),Promise.resolve(new Set)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.synchronizeTabs=!1}async initialize(g){this.serializer=m5(g.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(g),this.persistence=this.createPersistence(g),await this.persistence.start(),this.localStore=this.createLocalStore(g),this.gcScheduler=this.createGarbageCollectionScheduler(g,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(g,this.localStore)}createGarbageCollectionScheduler(g,$){return null}createIndexBackfillerScheduler(g,$){return null}createLocalStore(g){return gH(this.persistence,new my,g.initialUser,this.serializer)}createPersistence(g){return new ga(gu.factory,this.serializer)}createSharedClientState(g){return new mj}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bo extends null{constructor(g,$,ee){super(),this.onlineComponentProvider=g,this.cacheSizeBytes=$,this.forceOwnership=ee,this.synchronizeTabs=!1}async initialize(g){await super.initialize(g),await this.onlineComponentProvider.initialize(this,g),await bn(this.onlineComponentProvider.syncEngine),await yK(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(g){return gH(this.persistence,new my,g.initialUser,this.serializer)}createGarbageCollectionScheduler(g,$){return new fB(this.persistence.referenceDelegate.garbageCollector,g.asyncQueue,$)}createIndexBackfillerScheduler(g,$){let ee=new sQ($,this.persistence);return new sH(g.asyncQueue,ee)}createPersistence(g){let $=gz(g.databaseInfo.databaseId,g.databaseInfo.persistenceKey),ee=void 0!==this.cacheSizeBytes?fD.withCacheSize(this.cacheSizeBytes):fD.DEFAULT;return new gU(this.synchronizeTabs,$,g.clientId,ee,g.asyncQueue,m4(),m6(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(g){return new mj}}class bl{async initialize(g,$){this.localStore||(this.localStore=g.localStore,this.sharedClientState=g.sharedClientState,this.datastore=this.createDatastore($),this.remoteStore=this.createRemoteStore($),this.eventManager=this.createEventManager($),this.syncEngine=this.createSyncEngine($,!g.synchronizeTabs),this.sharedClientState.onlineStateHandler=g=>vL(this.syncEngine,g,1),this.remoteStore.remoteSyncer.handleCredentialChange=vJ.bind(null,this.syncEngine),await y4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(g){return vi()}createDatastore(g){let $=m5(g.databaseInfo.databaseId),ee=m2(g.databaseInfo);return yp(g.authCredentials,g.appCheckCredentials,ee,$)}createRemoteStore(g){return yO(this.localStore,this.datastore,g.asyncQueue,g=>vL(this.syncEngine,g,0),m3())}createSyncEngine(g,$){return vR(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,g.initialUser,g.maxConcurrentLimboResolutions,$)}terminate(){return yR(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=10240;function bh(g,$=bu){let ee=0;return{async read(){if(ee<g.byteLength){let et={value:g.slice(ee,ee+$),done:!1};return ee+=$,et}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(g,$,ee){if(!ee)throw new iH(iW.INVALID_ARGUMENT,`Function ${g}() cannot be called with an empty ${$}.`)}function bf(g,$,ee,et){if(!0===$&&!0===et)throw new iH(iW.INVALID_ARGUMENT,`${g} and ${ee} cannot be used together.`)}function bg(g){if(!sh.isDocumentKey(g))throw new iH(iW.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${g} has ${g.length}.`)}function bm(g){if(sh.isDocumentKey(g))throw new iH(iW.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${g} has ${g.length}.`)}function by(g){return"object"==typeof g&&null!==g&&(Object.getPrototypeOf(g)===Object.prototype||null===Object.getPrototypeOf(g))}function bv(g){if(void 0===g)return"undefined";if(null===g)return"null";if("string"==typeof g)return g.length>20&&(g=`${g.substring(0,20)}...`),JSON.stringify(g);if("number"==typeof g||"boolean"==typeof g)return""+g;if("object"==typeof g){if(g instanceof Array)return"an array";{let $=bS(g);return $?`a custom ${$} object`:"an object"}}if("function"==typeof g)return"a function";return iG()}function bS(g){return g.constructor?g.constructor.name:null}function bT(g,$){if("_delegate"in g&&(g=g._delegate),!(g instanceof $)){if($.name===g.constructor.name)throw new iH(iW.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let ee=bv(g);throw new iH(iW.INVALID_ARGUMENT,`Expected type '${$.name}', but it was: ${ee}`)}}return g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(g,$){if(!(g instanceof Uint8Array))throw new iH(iW.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${bv(g)}`);return bh(g,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(g){this.observer=g,this.muted=!1}next(g){this.observer.next&&this.scheduleEvent(this.observer.next,g)}error(g){this.observer.error?this.scheduleEvent(this.observer.error,g):iV("Uncaught Error in snapshot listener:",g.toString())}mute(){this.muted=!0}scheduleEvent(g,$){this.muted||setTimeout(()=>{this.muted||g($)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(g,$){this.payload=g,this.byteLength=$}isBundleMetadata(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(g,$){this.reader=g,this.serializer=$,this.metadata=new iQ,this.buffer=new Uint8Array,this.textDecoder=c8(),this.nextElementImpl().then(g=>{g&&g.isBundleMetadata()?this.metadata.resolve(g.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==g?void 0:g.payload)}`))},g=>this.metadata.reject(g))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let g=await this.readLength();if(null===g)return null;let $=this.textDecoder.decode(g),ee=Number($);return isNaN(ee)&&this.raiseError(`length string (${$}) is not valid number`),new bC(JSON.parse(await this.readJsonString(ee)),g.length+ee)}indexOfOpenBracket(){return this.buffer.findIndex(g=>123===g)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let g=this.indexOfOpenBracket();g<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let $=this.buffer.slice(0,g);return this.buffer=this.buffer.slice(g),$}async readJsonString(g){for(;this.buffer.length<g;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let $=this.textDecoder.decode(this.buffer.slice(0,g));return this.buffer=this.buffer.slice(g),$}raiseError(g){throw this.reader.cancel(),Error(`Invalid bundle format: ${g}`)}async pullMoreDataToBuffer(){let g=await this.reader.read();if(!g.done){let $=new Uint8Array(this.buffer.length+g.value.length);$.set(this.buffer),$.set(g.value,this.buffer.length),this.buffer=$}return g.done}}function bI(g,$){return new b_(g,$)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(g){this.datastore=g,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(g){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new iH(iW.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let $=await yg(this.datastore,g);return $.forEach(g=>this.recordVersion(g)),$}set(g,$){this.write($.toMutation(g,this.precondition(g))),this.writtenDocs.add(g.toString())}update(g,$){try{this.write($.toMutation(g,this.preconditionForUpdate(g)))}catch(g){this.lastWriteError=g}this.writtenDocs.add(g.toString())}delete(g){this.write(new cG(g,this.precondition(g))),this.writtenDocs.add(g.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let g=this.readVersions;this.mutations.forEach($=>{g.delete($.key.toString())}),g.forEach((g,$)=>{let ee=sh.fromPath($);this.mutations.push(new cW(ee,this.precondition(ee)))}),await yf(this.datastore,this.mutations),this.committed=!0}recordVersion(g){let $;if(g.isFoundDocument())$=g.version;else if(g.isNoDocument())$=sn.min();else throw iG();let ee=this.readVersions.get(g.key.toString());if(ee){if(!$.isEqual(ee))throw new iH(iW.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(g.key.toString(),$)}precondition(g){let $=this.readVersions.get(g.toString());return this.writtenDocs.has(g.toString())||!$?cO.none():$.isEqual(sn.min())?cO.exists(!1):cO.updateTime($)}preconditionForUpdate(g){let $=this.readVersions.get(g.toString());if(this.writtenDocs.has(g.toString())||!$)return cO.exists(!0);if($.isEqual(sn.min()))throw new iH(iW.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cO.updateTime($)}write(g){this.ensureCommitNotCalled(),this.mutations.push(g)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bA="FirestoreClient",bN=100,bR=11,bD=20,bk=22;class bx{constructor(g,$,ee,et){this.authCredentials=g,this.appCheckCredentials=$,this.asyncQueue=ee,this.databaseInfo=et,this.user=iP.UNAUTHENTICATED,this.clientId=i5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(ee,async g=>{iU(bA,"Received user=",g.uid),await this.authCredentialListener(g),this.user=g}),this.appCheckCredentials.start(ee,g=>(iU(bA,"Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:bN}}setCredentialChangeListener(g){this.authCredentialListener=g}setAppCheckTokenChangeListener(g){this.appCheckCredentialListener=g}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new iH(iW.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let g=new iQ;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),g.resolve()}catch(ee){let $=y7(ee,"Failed to shutdown persistence");g.reject($)}}),g.promise}}async function bP(g,$){g.asyncQueue.verifyOperationInProgress(),iU(bA,"Initializing OfflineComponentProvider");let ee=await g.getConfiguration();await $.initialize(ee);let et=ee.initialUser;g.setCredentialChangeListener(async g=>{et.isEqual(g)||(await gQ($.localStore,g),et=g)}),$.persistence.setDatabaseDeletedListener(()=>g.terminate()),g._offlineComponents=$}async function bM(g,$){g.asyncQueue.verifyOperationInProgress();let ee=await bF(g);iU(bA,"Initializing OnlineComponentProvider");let et=await g.getConfiguration();await $.initialize(ee,et),g.setCredentialChangeListener(g=>y3($.remoteStore,g)),g.setAppCheckTokenChangeListener((g,ee)=>y3($.remoteStore,ee)),g._onlineComponents=$}function bL(g){return"FirebaseError"===g.name?g.code===iW.FAILED_PRECONDITION||g.code===iW.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||g.code===bk||g.code===bD||g.code===bR}async function bF(g){if(!g._offlineComponents){if(g._uninitializedComponentsProvider){iU(bA,"Using user provided OfflineComponentProvider");try{await bP(g,g._uninitializedComponentsProvider._offline)}catch(ee){let $=ee;if(!bL($))throw $;iq("Error using user provided cache. Falling back to memory cache: "+$),await bP(g,new bs)}}else iU(bA,"Using default OfflineComponentProvider"),await bP(g,new bs)}return g._offlineComponents}async function bB(g){return g._onlineComponents||(g._uninitializedComponentsProvider?(iU(bA,"Using user provided OnlineComponentProvider"),await bM(g,g._uninitializedComponentsProvider._online)):(iU(bA,"Using default OnlineComponentProvider"),await bM(g,new bl))),g._onlineComponents}function bj(g){return bB(g).then(g=>g.syncEngine)}function bU(g){return bB(g).then(g=>g.datastore)}async function bV(g){let $=await bB(g),ee=$.eventManager;return ee.onListen=vD.bind(null,$.syncEngine),ee.onUnlisten=vx.bind(null,$.syncEngine),ee}function bq(g,$,ee={}){let et=new iQ;return g.asyncQueue.enqueueAndForget(async()=>bG(await bV(g),g.asyncQueue,$,ee,et)),et.promise}function bz(g,$,ee={}){let et=new iQ;return g.asyncQueue.enqueueAndForget(async()=>b$(await bV(g),g.asyncQueue,$,ee,et)),et.promise}function bG(g,$,ee,et,er){let en=new bw({next:en=>{$.enqueueAndForget(()=>vl(g,ei));let es=en.docs.has(ee);!es&&en.fromCache?er.reject(new iH(iW.UNAVAILABLE,"Failed to get document because the client is offline.")):es&&en.fromCache&&et&&"server"===et.source?er.reject(new iH(iW.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):er.resolve(en)},error:g=>er.reject(g)}),ei=new vg(uC(ee.path),en,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return vo(g,ei)}function b$(g,$,ee,et,er){let en=new vg(ee,new bw({next:ee=>{$.enqueueAndForget(()=>vl(g,en)),ee.fromCache&&"server"===et.source?er.reject(new iH(iW.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):er.resolve(ee)},error:g=>er.reject(g)}),{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return vo(g,en)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(g,$){return g.timeoutSeconds===$.timeoutSeconds}function bW(g){let $={};return void 0!==g.timeoutSeconds&&($.timeoutSeconds=g.timeoutSeconds),$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bH="ComponentProvider",bQ=new Map;function bY(g){let $=bQ.get(g);$&&(iU(bH,"Removing Datastore"),bQ.delete(g),$.terminate())}function bJ(g,$,ee,et){return new aF(g,$,ee,et.host,et.ssl,et.experimentalForceLongPolling,et.experimentalAutoDetectLongPolling,bW(et.experimentalLongPollingOptions),et.useFetchStreams)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bX="firestore.googleapis.com",bZ=!0,b0=5,b1=30,b2=!0;class b3{constructor(g){var $,ee;if(void 0===g.host){if(void 0!==g.ssl)throw new iH(iW.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bX,this.ssl=bZ}else this.host=g.host,this.ssl=null!==($=g.ssl)&&void 0!==$?$:bZ;if(this.credentials=g.credentials,this.ignoreUndefinedProperties=!!g.ignoreUndefinedProperties,this.cache=g.localCache,void 0===g.cacheSizeBytes)this.cacheSizeBytes=fR;else{if(g.cacheSizeBytes!==fN&&g.cacheSizeBytes<fx)throw new iH(iW.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${fx}`);this.cacheSizeBytes=g.cacheSizeBytes}bf("experimentalForceLongPolling",g.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",g.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!g.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===g.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=b2:this.experimentalAutoDetectLongPolling=!!g.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bW(null!==(ee=g.experimentalLongPollingOptions)&&void 0!==ee?ee:{}),b4(this.experimentalLongPollingOptions),this.useFetchStreams=!!g.useFetchStreams}isEqual(g){return this.host===g.host&&this.ssl===g.ssl&&this.credentials===g.credentials&&this.cacheSizeBytes===g.cacheSizeBytes&&this.experimentalForceLongPolling===g.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===g.experimentalAutoDetectLongPolling&&bK(this.experimentalLongPollingOptions,g.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===g.ignoreUndefinedProperties&&this.useFetchStreams===g.useFetchStreams}}function b4(g){if(void 0!==g.timeoutSeconds){if(isNaN(g.timeoutSeconds))throw new iH(iW.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (must not be NaN)`);if(g.timeoutSeconds<b0)throw new iH(iW.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (minimum allowed value is ${b0})`);if(g.timeoutSeconds>b1)throw new iH(iW.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (maximum allowed value is ${b1})`)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(g,$,ee,et){this._authCredentials=g,this._appCheckCredentials=$,this._databaseId=ee,this._app=et,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new iH(iW.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(g){if(this._settingsFrozen)throw new iH(iW.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b3(g),void 0!==g.credentials&&(this._authCredentials=i4(g.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return bY(this),Promise.resolve()}}function b5(g,$,ee,et={}){var er;let en=(g=bT(g,b6))._getSettings(),ei=`${$}:${ee}`;if(en.host!==bX&&en.host!==ei&&iq("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),g._setSettings(Object.assign(Object.assign({},en),{host:ei,ssl:!1})),et.mockUserToken){let $,ee;if("string"==typeof et.mockUserToken)$=et.mockUserToken,ee=iP.MOCK_USER;else{$=(0,ef.Sg)(et.mockUserToken,null===(er=g._app)||void 0===er?void 0:er.options.projectId);let en=et.mockUserToken.sub||et.mockUserToken.user_id;if(!en)throw new iH(iW.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ee=new iP(en)}g._authCredentials=new iX(new iY($,ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(g,$,ee){this.converter=$,this._key=ee,this.type="document",this.firestore=g}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new b7(this.firestore,this.converter,this._key.path.popLast())}withConverter(g){return new b9(this.firestore,g,this._key)}}class b8{constructor(g,$,ee){this.converter=$,this._query=ee,this.type="query",this.firestore=g}withConverter(g){return new b8(this.firestore,g,this._query)}}class b7 extends b8{constructor(g,$,ee){super(g,$,uC(ee)),this._path=ee,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let g=this._path.popLast();return g.isEmpty()?null:new b9(this.firestore,null,new sh(g))}withConverter(g){return new b7(this.firestore,g,this._path)}}function Se(g,$,...ee){if(g=(0,ef.m9)(g),bp("collection","path",$),g instanceof b6){let et=so.fromString($,...ee);return bm(et),new b7(g,null,et)}{if(!(g instanceof b9)&&!(g instanceof b7))throw new iH(iW.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let et=g._path.child(so.fromString($,...ee));return bm(et),new b7(g.firestore,null,et)}}function St(g,$,...ee){if(g=(0,ef.m9)(g),1==arguments.length&&($=i5.newId()),bp("doc","path",$),g instanceof b6){let et=so.fromString($,...ee);return bg(et),new b9(g,null,new sh(et))}{if(!(g instanceof b9)&&!(g instanceof b7))throw new iH(iW.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let et=g._path.child(so.fromString($,...ee));return bg(et),new b9(g.firestore,g instanceof b7?g.converter:null,new sh(et))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr="AsyncQueue";class Sn{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new yt(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(g){this.enqueue(g)}enqueueAndForgetEvenWhileRestricted(g){this.verifyNotFailed(),this.enqueueInternal(g)}enterRestrictedMode(g){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=g||!1)}enqueue(g){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let $=new iQ;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(g().then($.resolve,$.reject),$.promise)).then(()=>$.promise)}enqueueRetryable(g){this.enqueueAndForget(()=>(this.retryableOps.push(g),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(g){if(sj(g))iU(Sr,"Operation failed with retryable error: "+g);else throw g}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(g){let $=this.tail.then(()=>(this.operationInProgress=!0,g().catch(g=>{throw this.failure=g,this.operationInProgress=!1,iV("INTERNAL UNHANDLED ERROR: ",Ss(g)),g}).then(g=>(this.operationInProgress=!1,g))));return this.tail=$,$}enqueueAfterDelay(g,$,ee){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(g)>-1&&($=0);let et=y8.createAndSchedule(this,g,$,ee,g=>this.removeDelayedOperation(g));return this.delayedOperations.push(et),et}verifyNotFailed(){this.failure&&iG()}verifyOperationInProgress(){}async drain(){let g;do g=this.tail,await g;while(g!==this.tail)}containsDelayedOperation(g){for(let $ of this.delayedOperations)if($.timerId===g)return!0;return!1}runAllDelayedOperationsUntil(g){return this.drain().then(()=>{for(let $ of(this.delayedOperations.sort((g,$)=>g.targetTimeMs-$.targetTimeMs),this.delayedOperations))if($.skipDelay(),"all"!==g&&$.timerId===g)break;return this.drain()})}skipDelaysForTimerId(g){this.timerIdsToSkip.push(g)}removeDelayedOperation(g){let $=this.delayedOperations.indexOf(g);this.delayedOperations.splice($,1)}}function Si(){return new Sn}function Ss(g){let $=g.message||"";return g.stack&&($=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),$}class So extends b6{constructor(g,$,ee,et){super(g,$,ee,et),this.type="firestore",this._queue=Si(),this._persistenceKey=(null==et?void 0:et.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Sh(this),this._firestoreClient.terminate()}}function Sl(g,$){let ee="object"==typeof g?g:(0,eo.Mq)(),et="string"==typeof g?g:$||aB,er=(0,eo.qX)(ee,"firestore").getImmediate({identifier:et});if(!er._initialized){let g=(0,ef.P0)("firestore");g&&b5(er,...g)}return er}function Su(g){return g._firestoreClient||Sh(g),g._firestoreClient.verifyNotTerminated(),g._firestoreClient}function Sh(g){var $,ee,et;let er=g._freezeSettings(),en=bJ(g._databaseId,(null===($=g._app)||void 0===$?void 0:$.options.appId)||"",g._persistenceKey,er);g._firestoreClient=new bx(g._authCredentials,g._appCheckCredentials,g._queue,en),(null===(ee=er.cache)||void 0===ee?void 0:ee._offlineComponentProvider)&&(null===(et=er.cache)||void 0===et?void 0:et._onlineComponentProvider)&&(g._firestoreClient._uninitializedComponentsProvider={_offlineKind:er.cache.kind,_offline:er.cache._offlineComponentProvider,_online:er.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(g,$=!0){iL(eo.Jn),(0,eo.Xd)(new eu.wA("firestore",(g,{instanceIdentifier:ee,options:et})=>{let er=g.getProvider("app").getImmediate(),en=new So(new iZ(g.getProvider("auth-internal")),new i3(g.getProvider("app-check-internal")),aU(er,ee),er);return et=Object.assign({useFetchStreams:$},et),en._setSettings(et),en},"PUBLIC").setMultipleInstances(!0)),(0,eo.KN)(ik,ix,g),(0,eo.KN)(ik,ix,"esm2017")}class Sf{constructor(g,$,ee){this._userDataWriter=$,this._data=ee,this.type="AggregateQuerySnapshot",this.query=g}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(g){this._byteString=g}static fromBase64String(g){try{return new Sg(aE.fromBase64String(g))}catch(g){throw new iH(iW.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+g)}}static fromUint8Array(g){return new Sg(aE.fromUint8Array(g))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(g){return this._byteString.isEqual(g._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(...g){for(let $=0;$<g.length;++$)if(0===g[$].length)throw new iH(iW.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new su(g)}isEqual(g){return this._internalPath.isEqual(g._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(g){this._methodName=g}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(g,$){if(!isFinite(g)||g<-90||g>90)throw new iH(iW.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+g);if(!isFinite($)||$<-180||$>180)throw new iH(iW.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+$);this._lat=g,this._long=$}get latitude(){return this._lat}get longitude(){return this._long}isEqual(g){return this._lat===g._lat&&this._long===g._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(g){return i9(this._lat,g._lat)||i9(this._long,g._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SS=/^__.*__$/;class ST{constructor(g,$,ee){this.data=g,this.fieldMask=$,this.fieldTransforms=ee}toMutation(g,$){return null!==this.fieldMask?new cB(g,this.data,this.fieldMask,$,this.fieldTransforms):new cM(g,this.data,$,this.fieldTransforms)}}class SE{constructor(g,$,ee){this.data=g,this.fieldMask=$,this.fieldTransforms=ee}toMutation(g,$){return new cB(g,this.data,this.fieldMask,$,this.fieldTransforms)}}function Sw(g){switch(g){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iG()}}class SC{constructor(g,$,ee,et,er,en){this.settings=g,this.databaseId=$,this.serializer=ee,this.ignoreUndefinedProperties=et,void 0===er&&this.validatePath(),this.fieldTransforms=er||[],this.fieldMask=en||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(g){return new SC(Object.assign(Object.assign({},this.settings),g),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(g){var $;let ee=null===($=this.path)||void 0===$?void 0:$.child(g),et=this.contextWith({path:ee,arrayElement:!1});return et.validatePathSegment(g),et}childContextForFieldPath(g){var $;let ee=null===($=this.path)||void 0===$?void 0:$.child(g),et=this.contextWith({path:ee,arrayElement:!1});return et.validatePath(),et}childContextForArray(g){return this.contextWith({path:void 0,arrayElement:!0})}createError(g){return SU(g,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(g){return void 0!==this.fieldMask.find($=>g.isPrefixOf($))||void 0!==this.fieldTransforms.find($=>g.isPrefixOf($.field))}validatePath(){if(this.path)for(let g=0;g<this.path.length;g++)this.validatePathSegment(this.path.get(g))}validatePathSegment(g){if(0===g.length)throw this.createError("Document fields must not be empty");if(Sw(this.dataSource)&&SS.test(g))throw this.createError('Document fields cannot begin and end with "__"')}}class S_{constructor(g,$,ee){this.databaseId=g,this.ignoreUndefinedProperties=$,this.serializer=ee||m5(g)}createContext(g,$,ee,et=!1){return new SC({dataSource:g,methodName:$,targetDoc:ee,path:su.emptyPath(),arrayElement:!1,hasConverter:et},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SI(g){let $=g._freezeSettings(),ee=m5(g._databaseId);return new S_(g._databaseId,!!$.ignoreUndefinedProperties,ee)}class SO extends null{_toFieldTransform(g){if(2===g.dataSource)g.fieldMask.push(g.path);else if(1===g.dataSource)throw g.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw g.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(g){return g instanceof SO}}class SA extends null{_toFieldTransform(g){return new cw(g.path,new ch)}isEqual(g){return g instanceof SA}}function SN(g,$,ee,et=!1){return SR(ee,g.createContext(et?4:3,$))}function SR(g,$){if(SM(g=getModularInstance(g)))return SL("Unsupported field value:",$,g),SD(g,$);if(g instanceof Sy)return Sx(g,$),null;if(void 0===g&&$.ignoreUndefinedProperties)return null;if($.path&&$.fieldMask.push($.path),!(g instanceof Array))return SP(g,$);if($.settings.arrayElement&&4!==$.dataSource)throw $.createError("Nested arrays are not supported");return Sk(g,$)}function SD(g,$){let ee={};return ao(g)?$.path&&$.path.length>0&&$.fieldMask.push($.path):as(g,(g,et)=>{let er=SR(et,$.childContextForField(g));null!=er&&(ee[g]=er)}),{mapValue:{fields:ee}}}function Sk(g,$){let ee=[],et=0;for(let er of g){let g=SR(er,$.childContextForArray(et));null==g&&(g={nullValue:"NULL_VALUE"}),ee.push(g),et++}return{arrayValue:{values:ee}}}function Sx(g,$){if(!Sw($.dataSource))throw $.createError(`${g._methodName}() can only be used with update() and set()`);if(!$.path)throw $.createError(`${g._methodName}() is not currently supported inside arrays`);let ee=g._toFieldTransform($);ee&&$.fieldTransforms.push(ee)}function SP(g,$){if(null===(g=getModularInstance(g)))return{nullValue:"NULL_VALUE"};if("number"==typeof g)return cn($.serializer,g);if("boolean"==typeof g)return{booleanValue:g};if("string"==typeof g)return{stringValue:g};if(g instanceof Date){let ee=sr.fromDate(g);return{timestampValue:hO($.serializer,ee)}}if(g instanceof sr){let ee=new sr(g.seconds,1e3*Math.floor(g.nanoseconds/1e3));return{timestampValue:hO($.serializer,ee)}}if(g instanceof Sv)return{geoPointValue:{latitude:g.latitude,longitude:g.longitude}};else if(g instanceof Sg)return{bytesValue:hN($.serializer,g._byteString)};else if(g instanceof b9){let ee=$.databaseId,et=g.firestore._databaseId;if(!et.isEqual(ee))throw $.createError(`Document reference is for database ${et.projectId}/${et.database} but should be for database ${ee.projectId}/${ee.database}`);return{referenceValue:hx(g.firestore._databaseId||$.databaseId,g._key.path)}}else throw $.createError(`Unsupported field value: ${bv(g)}`)}function SM(g){return"object"==typeof g&&null!==g&&!(g instanceof Array)&&!(g instanceof Date)&&!(g instanceof sr)&&!(g instanceof Sv)&&!(g instanceof Sg)&&!(g instanceof b9)&&!(g instanceof Sy)}function SL(g,$,ee){if(!SM(ee)||!by(ee)){let et=bv(ee);if("an object"===et)throw $.createError(g+" a custom object");throw $.createError(g+" "+et)}}function SF(g,$,ee){if(($=getModularInstance($))instanceof Sm)return $._internalPath;if("string"==typeof $)return Sj(g,$);throw SU("Field path arguments must be of type string or ",g,!1,void 0,ee)}let SB=RegExp("[~\\*/\\[\\]]");function Sj(g,$,ee){if($.search(SB)>=0)throw SU(`Invalid field path (${$}). Paths must not contain '~', '*', '/', '[', or ']'`,g,!1,void 0,ee);try{return new Sm(...$.split("."))._internalPath}catch(et){throw SU(`Invalid field path (${$}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,g,!1,void 0,ee)}}function SU(g,$,ee,et,er){let en=et&&!et.isEmpty(),ei=void 0!==er,es=`Function ${$}() called with invalid data`;ee&&(es+=" (via `toFirestore()`)"),es+=". ";let eo="";return(en||ei)&&(eo+=" (found",en&&(eo+=` in field ${et}`),ei&&(eo+=` in document ${er}`),eo+=")"),new iH(iW.INVALID_ARGUMENT,es+g+eo)}function SV(g,$){return g.some(g=>g.isEqual($))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(g,$,ee,et,er){this._firestore=g,this._userDataWriter=$,this._key=ee,this._document=et,this._converter=er}get id(){return this._key.path.lastSegment()}get ref(){return new b9(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let g=new Sz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(g)}}}get(g){if(this._document){let $=this._document.data.field(SG("DocumentSnapshot.get",g));if(null!==$)return this._userDataWriter.convertValue($)}}}class Sz extends Sq{data(){return super.data()}}function SG(g,$){return"string"==typeof $?Sj(g,$):$ instanceof Sm?$._internalPath:$._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(g){if("L"===g.limitType&&0===g.explicitOrderBy.length)throw new iH(iW.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SK extends null{constructor(g,$,ee){super(),this._field=g,this._op=$,this._value=ee,this.type="where"}static _create(g,$,ee){return new SK(g,$,ee)}_apply(g){let $=this._parse(g);return S5(g._query,$),new b8(g.firestore,g.converter,ux(g._query,$))}_parse(g){let $=SI(g.firestore);return SZ(g._query,"where",$,g.firestore._databaseId,this._field,this._op,this._value)}}class SW extends null{constructor(g,$){super(),this.type=g,this._queryConstraints=$}static _create(g,$){return new SW(g,$)}_parse(g){let $=this._queryConstraints.map($=>$._parse(g)).filter(g=>g.getFilters().length>0);return 1===$.length?$[0]:lK.create($,this._getOperator())}_apply(g){let $=this._parse(g);return 0===$.getFilters().length?g:(S9(g._query,$),new b8(g.firestore,g.converter,ux(g._query,$)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class SH extends null{constructor(g,$){super(),this._field=g,this._direction=$,this.type="orderBy"}static _create(g,$){return new SH(g,$)}_apply(g){let $=S0(g._query,this._field,this._direction);return new b8(g.firestore,g.converter,uP(g._query,$))}}class SQ extends null{constructor(g,$,ee){super(),this.type=g,this._limit=$,this._limitType=ee}static _create(g,$,ee){return new SQ(g,$,ee)}_apply(g){return new b8(g.firestore,g.converter,uM(g._query,this._limit,this._limitType))}}class SY extends null{constructor(g,$,ee){super(),this.type=g,this._docOrFields=$,this._inclusive=ee}static _create(g,$,ee){return new SY(g,$,ee)}_apply(g){let $=SX(g,this.type,this._docOrFields,this._inclusive);return new b8(g.firestore,g.converter,uL(g._query,$))}}class SJ extends null{constructor(g,$,ee){super(),this.type=g,this._docOrFields=$,this._inclusive=ee}static _create(g,$,ee){return new SJ(g,$,ee)}_apply(g){let $=SX(g,this.type,this._docOrFields,this._inclusive);return new b8(g.firestore,g.converter,uF(g._query,$))}}function SX(g,$,ee,et){if(ee[0]=getModularInstance(ee[0]),ee[0]instanceof Sq)return S1(g._query,g.firestore._databaseId,$,ee[0]._document,et);{let er=SI(g.firestore);return S2(g._query,g.firestore._databaseId,er,$,ee,et)}}function SZ(g,$,ee,et,er,en,ei){let es;if(er.isKeyField()){if("array-contains"===en||"array-contains-any"===en)throw new iH(iW.INVALID_ARGUMENT,`Invalid Query. You can't perform '${en}' queries on documentId().`);if("in"===en||"not-in"===en){S4(ei,en);let $=[];for(let ee of ei)$.push(S3(et,g,ee));es={arrayValue:{values:$}}}else es=S3(et,g,ei)}else("in"===en||"not-in"===en||"array-contains-any"===en)&&S4(ei,en),es=SN(ee,$,ei,"in"===en||"not-in"===en);return l$.create(er,en,es)}function S0(g,$,ee){if(null!==g.startAt)throw new iH(iW.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==g.endAt)throw new iH(iW.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let et=new lU($,ee);return S7(g,et),et}function S1(g,$,ee,et,er){if(!et)throw new iH(iW.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${ee}().`);let en=[];for(let ee of uD(g))if(ee.field.isKeyField())en.push(lm($,et.key));else{let g=et.data.field(ee.field);if(ax(g))throw new iH(iW.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==g)en.push(g);else{let g=ee.field.canonicalString();throw new iH(iW.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}}return new lM(en,er)}function S2(g,$,ee,et,er,en){let ei=g.explicitOrderBy;if(er.length>ei.length)throw new iH(iW.INVALID_ARGUMENT,`Too many arguments provided to ${et}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let es=[];for(let en=0;en<er.length;en++){let eo=er[en];if(ei[en].field.isKeyField()){if("string"!=typeof eo)throw new iH(iW.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${et}(), but got a ${typeof eo}`);if(!uR(g)&&-1!==eo.indexOf("/"))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${et}() must be a plain document ID, but '${eo}' contains a slash.`);let ee=g.path.child(so.fromString(eo));if(!sh.isDocumentKey(ee))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${et}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);let er=new sh(ee);es.push(lm($,er))}else{let g=SN(ee,et,eo);es.push(g)}}return new lM(es,en)}function S3(g,$,ee){if("string"==typeof(ee=getModularInstance(ee))){if(""===ee)throw new iH(iW.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uR($)&&-1!==ee.indexOf("/"))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${ee}' contains a '/' character.`);let et=$.path.child(so.fromString(ee));if(!sh.isDocumentKey(et))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${et}' is not because it has an odd number of segments (${et.length}).`);return lm(g,new sh(et))}if(ee instanceof b9)return lm(g,ee._key);throw new iH(iW.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bv(ee)}.`)}function S4(g,$){if(!Array.isArray(g)||0===g.length)throw new iH(iW.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${$.toString()}' filters.`)}function S6(g){switch(g){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function S5(g,$){if($.isInequality()){let ee=uA(g),et=$.field;if(null!==ee&&!ee.isEqual(et))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ee.toString()}' and '${et.toString()}'`);let er=uO(g);null!==er&&Te(g,et,er)}let ee=S8(g.filters,S6($.op));if(null!==ee){if(ee===$.op)throw new iH(iW.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${$.op.toString()}' filter.`);throw new iH(iW.INVALID_ARGUMENT,`Invalid query. You cannot use '${$.op.toString()}' filters with '${ee.toString()}' filters.`)}}function S9(g,$){let ee=g;for(let g of $.getFlattenedFilters())S5(ee,g),ee=ux(ee,g)}function S8(g,$){for(let ee of g)for(let g of ee.getFlattenedFilters())if($.indexOf(g.op)>=0)return g.op;return null}function S7(g,$){if(null===uO(g)){let ee=uA(g);null!==ee&&Te(g,ee,$.field)}}function Te(g,$,ee){if(!ee.isEqual($))throw new iH(iW.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${$.toString()}' and so you must also use '${$.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${ee.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{convertValue(g,$="none"){switch(aH(g)){case 0:return null;case 1:return g.booleanValue;case 2:return aO(g.integerValue||g.doubleValue);case 3:return this.convertTimestamp(g.timestampValue);case 4:return this.convertServerTimestamp(g,$);case 5:return g.stringValue;case 6:return this.convertBytes(aA(g.bytesValue));case 7:return this.convertReference(g.referenceValue);case 8:return this.convertGeoPoint(g.geoPointValue);case 9:return this.convertArray(g.arrayValue,$);case 10:return this.convertObject(g.mapValue,$);default:throw iG()}}convertObject(g,$){return this.convertObjectMap(g.fields,$)}convertObjectMap(g,$="none"){let ee={};return as(g,(g,et)=>{ee[g]=this.convertValue(et,$)}),ee}convertGeoPoint(g){return new Sv(aO(g.latitude),aO(g.longitude))}convertArray(g,$){return(g.values||[]).map(g=>this.convertValue(g,$))}convertServerTimestamp(g,$){switch($){case"previous":let ee=aM(g);if(null==ee)return null;return this.convertValue(ee,$);case"estimate":return this.convertTimestamp(aL(g));default:return null}}convertTimestamp(g){let $=aI(g);return new sr($.seconds,$.nanos)}convertDocumentKey(g,$){let ee=so.fromString(g);i$(dF(ee));let et=new aj(ee.get(1),ee.get(3)),er=new sh(ee.popFirst(5));return et.isEqual($)||iV(`Document ${er} contains a document reference within a different database (${et.projectId}/${et.database}) which is not supported. It will be treated as a reference in the current database (${$.projectId}/${$.database}) instead.`),er}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(g,$){this.hasPendingWrites=g,this.fromCache=$}isEqual(g){return this.hasPendingWrites===g.hasPendingWrites&&this.fromCache===g.fromCache}}class Tn extends Sq{constructor(g,$,ee,et,er,en){super(g,$,ee,et,en),this._firestore=g,this._firestoreImpl=g,this.metadata=er}exists(){return super.exists()}data(g={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,g.serverTimestamps);{let $=new Ti(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore($,g)}}}get(g,$={}){if(this._document){let ee=this._document.data.field(SG("DocumentSnapshot.get",g));if(null!==ee)return this._userDataWriter.convertValue(ee,$.serverTimestamps)}}}class Ti extends Tn{data(g={}){return super.data(g)}}class Ts{constructor(g,$,ee,et){this._firestore=g,this._userDataWriter=$,this._snapshot=et,this.metadata=new Tr(et.hasPendingWrites,et.fromCache),this.query=ee}get docs(){let g=[];return this.forEach($=>g.push($)),g}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(g,$){this._snapshot.docs.forEach(ee=>{g.call($,new Ti(this._firestore,this._userDataWriter,ee.key,ee,new Tr(this._snapshot.mutatedKeys.has(ee.key),this._snapshot.fromCache),this.query.converter))})}docChanges(g={}){let $=!!g.includeMetadataChanges;if($&&this._snapshot.excludesMetadataChanges)throw new iH(iW.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===$||(this._cachedChanges=To(this,$),this._cachedChangesIncludeMetadataChanges=$),this._cachedChanges}}function To(g,$){if(g._snapshot.oldDocs.isEmpty()){let $=0;return g._snapshot.docChanges.map(ee=>{let et=new Ti(g._firestore,g._userDataWriter,ee.doc.key,ee.doc,new Tr(g._snapshot.mutatedKeys.has(ee.doc.key),g._snapshot.fromCache),g.query.converter);return ee.doc,{type:"added",doc:et,oldIndex:-1,newIndex:$++}})}{let ee=g._snapshot.oldDocs;return g._snapshot.docChanges.filter(g=>$||3!==g.type).map($=>{let et=new Ti(g._firestore,g._userDataWriter,$.doc.key,$.doc,new Tr(g._snapshot.mutatedKeys.has($.doc.key),g._snapshot.fromCache),g.query.converter),er=-1,en=-1;return 0!==$.type&&(er=ee.indexOf($.doc.key),ee=ee.delete($.doc.key)),1!==$.type&&(en=(ee=ee.add($.doc)).indexOf($.doc.key)),{type:Tl($.type),doc:et,oldIndex:er,newIndex:en}})}}function Tl(g){switch(g){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iG()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(g){g=bT(g,b9);let $=bT(g.firestore,So);return bq(Su($),g._key).then(ee=>Tf($,g,ee))}class Th extends Tt{constructor(g){super(),this.firestore=g}convertBytes(g){return new Sg(g)}convertReference(g){let $=this.convertDocumentKey(g,this.firestore._databaseId);return new b9(this.firestore,null,$)}}function Tp(g){g=bT(g,b8);let $=bT(g.firestore,So),ee=Su($),et=new Th($);return S$(g._query),bz(ee,g._query).then(ee=>new Ts($,et,g,ee))}function Tf(g,$,ee){let et=ee.docs.get($._key),er=new Th(g);return new Tn(g,er,$._key,et,new Tr(ee.hasPendingWrites,ee.fromCache),$.converter)}class Tg{constructor(g){this.forceOwnership=g,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(g){this._onlineComponentProvider=new bl,this._offlineComponentProvider=new bo(this._onlineComponentProvider,null==g?void 0:g.cacheSizeBytes,this.forceOwnership)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sp("node")},27578:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},23081:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],"php_generic_services",[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},47304:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},81228:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},37645:g=>{"use strict";g.exports={i8:"1.7.3"}},522:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},24552:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},97105:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},8730:g=>{"use strict";g.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};